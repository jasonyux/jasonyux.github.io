<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Spring Framework Guide | From a Beginner to a Disaster</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="IMPORTANT:Much of the content here is a personal summary&#x2F;abbrieviation of contents on the Offical Spring Framework Documentation. For more complete information, please refer to the offical site.  Thi">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Framework Guide">
<meta property="og:url" content="http://yoursite.com/2020/06/09/Spring-Framework-Guide/index.html">
<meta property="og:site_name" content="From a Beginner to a Disaster">
<meta property="og:description" content="IMPORTANT:Much of the content here is a personal summary&#x2F;abbrieviation of contents on the Offical Spring Framework Documentation. For more complete information, please refer to the offical site.  Thi">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/.com//06/09/Spring-Framework-Guide/SpringIoC.png">
<meta property="article:published_time" content="2020-06-09T07:25:30.000Z">
<meta property="article:modified_time" content="2020-06-09T09:46:51.248Z">
<meta property="article:author" content="Xiao Yu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/.com//06/09/Spring-Framework-Guide/SpringIoC.png">
  
    <link rel="alternate" href="/atom.xml" title="From a Beginner to a Disaster" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">From a Beginner to a Disaster</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Xiao.Y</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Spring-Framework-Guide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/09/Spring-Framework-Guide/" class="article-date">
  <time datetime="2020-06-09T07:25:30.000Z" itemprop="datePublished">2020-06-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Spring Framework Guide
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<p><strong>IMPORTANT</strong>:<br>Much of the content here is a personal summary/abbrieviation of contents on the <a href="https://docs.spring.io/spring/docs/5.3.0-SNAPSHOT/spring-framework-reference/index.html" target="_blank" rel="noopener">Offical Spring Framework Documentation</a>. For more complete information, please refer to the offical site.</p>
<hr>
<p>This is a <strong>Guide</strong>, since it is mostly <strong>conceptual</strong> and does not include much actual coding (except for examples illustrating those concepts). For more practical uses/examples, please refer to the <a href="https://jasonyux.github.io/2020/06/09/SpringBoot-Manual/" target="_blank" rel="noopener">Spring Boot Manual</a> or the <a href>Spring Cloud Manual</a>.</p>
<h2 id="Spring-Intro"><a href="#Spring-Intro" class="headerlink" title="Spring Intro"></a>Spring Intro</h2><p>The term “Spring” means different things in different contexts. It can be used to refer to the Spring Framework project itself, which is where it all started. Over time, other Spring projects have been built on top of the Spring Framework. Most often, when people say “Spring”, they mean the entire family of projects. This reference documentation focuses on the foundation: the Spring Framework itself.</p>
<p>When you learn about a framework, it’s important to know not only what it does but <strong>what principles it follows</strong>. Here are the guiding principles of the Spring Framework:</p>
<ul>
<li>Provide choice at every level. Spring lets you <strong>defer design decisions as late as possible</strong>. For example, you can switch persistence providers through configuration without changing your code. </li>
<li>Accommodate diverse perspectives. Spring embraces flexibility and is not opinionated about how things should be done. It <strong>supports a wide range of application needs with different perspectives</strong>.</li>
<li>Maintain strong backward compatibility. Spring’s evolution has been carefully managed to force <strong>few breaking changes between versions.</strong> Spring supports a carefully chosen range of JDK versions and third-party libraries to facilitate maintenance of applications and libraries that depend on Spring.</li>
<li>Care about API design. The Spring team puts a lot of thought and time into <strong>making APIs that are intuitive and that hold up across many versions and many years.</strong></li>
<li>Set high standards for code quality. The Spring Framework puts a strong emphasis on meaningful, current, and accurate javadoc. It is one of very few projects that can claim <strong>clean code structure with no circular dependencies between packages.</strong></li>
</ul>
<h2 id="IoC-Inversion-of-Control"><a href="#IoC-Inversion-of-Control" class="headerlink" title="IoC - Inversion of Control"></a>IoC - Inversion of Control</h2><p>IoC is also known as <strong>dependency injection (DI)</strong>. It is a process whereby <strong>objects define their dependencies</strong> (that is, the other objects they work with) <strong><em>only</em></strong> <strong>through constructor arguments</strong>, arguments to a factory method, or properties that are set on the object instance after it is constructed or returned from a factory method. The <strong>container then injects those dependencies when it creates the bean.</strong> This process is fundamentally the inverse (hence the name, Inversion of Control) of the bean itself controlling the instantiation or location of its dependencies by using direct construction of classes or a mechanism such as the Service Locator pattern.</p>
<p>In Spring, the <strong>objects that form the backbone of your application and that are managed by the Spring IoC container</strong> are called <strong>beans</strong>. A bean is an object that is instantiated, assembled, and otherwise managed by a Spring IoC container. Otherwise, a bean is simply one of many objects in your application. Beans, and the dependencies among them, are <strong>reflected in the configuration metadata used by a container.</strong></p>
<p>The <strong>main tasks performed by IoC container</strong> are:</p>
<ul>
<li>to instantiate the application class</li>
<li>to configure the object</li>
<li>to assemble the dependencies between the objects</li>
</ul>
<p>And there are <strong>two types of IoC containers</strong>. They are:</p>
<ul>
<li>BeanFactory (<code>org.springframework.beans</code>)</li>
<li>ApplicationContext (<code>org.springframework.context</code>)</li>
</ul>
<p>In short, the <code>BeanFactory</code> provides the <strong>configuration framework and basic functionality</strong>, and the <code>ApplicationContext</code> <strong>adds more enterprise-specific functionality</strong>. The <code>ApplicationContext</code> is a complete superset of the <code>BeanFactory</code> and is used exclusively in this chapter in descriptions of Spring’s IoC container. For more information on using the <code>BeanFactory</code> instead of the <code>ApplicationContext</code>, see <a href="https://docs.spring.io/spring/docs/5.3.0-SNAPSHOT/spring-framework-reference/core.html#beans-beanfactory" target="_blank" rel="noopener">The BeanFactory</a>.</p>
<h3 id="Java-Beans"><a href="#Java-Beans" class="headerlink" title="Java Beans"></a>Java Beans</h3><p>JavaBeans are classes that <strong>encapsulate many objects into a single object (the bean)</strong>. It is a java class that should <strong>follow following conventions</strong>:</p>
<ul>
<li>Must implement <code>Serializable.</code></li>
<li>It should have a public <code>no-arg</code> constructor.</li>
<li>All properties in java bean must be <code>private</code> with <code>public getters()</code> and <code>public setter()</code> methods.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBean</span> </span>&#123; </span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>&#123; </span><br><span class="line">	        <span class="keyword">this</span>.name = name; </span><br><span class="line">    &#125; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123; </span><br><span class="line">	        <span class="keyword">return</span> name; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>setter methods</strong>:</p>
<ul>
<li>It should be <code>public</code> in nature.</li>
<li>The return-type should be <code>void</code>.</li>
<li>The setter method should be prefixed with <code>set</code>.</li>
<li>It should take some argument i.e. it should not be no-arg method.</li>
</ul>
<p><strong>getter methods</strong></p>
<ul>
<li>It should be <code>public</code> in nature.</li>
<li>The return-type should <strong>not be <code>void</code></strong> i.e. according to our requirement we have to give return-type.</li>
<li>The getter method should be prefixed with <code>get</code>.</li>
<li>It should not take any argument.</li>
</ul>
<p><strong>Boolean properties getter method</strong></p>
<ul>
<li>name can be prefixed with either “<code>get</code>” or “<code>is</code>”. But recommended to use “<code>is</code>”.</li>
<li>returns a <code>boolean</code></li>
</ul>
<h3 id="IoC-Container-Overview"><a href="#IoC-Container-Overview" class="headerlink" title="IoC Container Overview"></a>IoC Container Overview</h3><p>The <code>org.springframework.context.ApplicationContext</code> interface represents the Spring IoC container and is responsible for <strong>instantiating, configuring, and assembling the beans</strong>. The container gets its instructions on <strong>what objects to instantiate, configure, and assemble by reading configuration metadata.</strong> </p>
<p>The <strong>configuration metadata</strong> is represented in XML, <strong>Java annotations</strong>, or Java code.</p>
<p>The following diagram shows a high-level view of how Spring works. Your application classes are combined with configuration metadata so that, after the ApplicationContext is created and initialized, you have a fully configured and executable system or application.</p>
<p><img src="/.com//06/09/Spring-Framework-Guide/SpringIoC.png" alt="Picture from https://docs.spring.io/spring/docs/5.3.0-SNAPSHOT/spring-framework-reference/core.html#beans" title="Picture from https://docs.spring.io/spring/docs/5.3.0-SNAPSHOT/spring-framework-reference/core.html#beans"></p>
<p>A Spring IoC container manages one or more beans. These beans are created with the configuration metadata that you supply to the container (e.g. via an XML file).</p>
<p>Within the container itself, <strong>these bean definitions are represented as <code>BeanDefinition</code> objects, which contain (among other information) the following metadata:</strong></p>
<ul>
<li>A package-qualified class name: typically, the <strong>actual implementation class of the bean</strong> being defined.</li>
<li>Bean behavioral configuration elements, which state how the bean should behave in the container (<code>scope</code>, <code>lifecycle callbacks</code>, and so forth).</li>
<li>References to other beans that are needed for the bean to do its work. These references are also called collaborators or <strong>dependencies</strong>.</li>
<li>Other configuration settings to set in the newly created object — for example, the size limit of the pool or the number of connections to use in a bean that manages a connection pool.</li>
</ul>
<p>This metadata <strong>translates to a set of properties that make up each bean definition</strong>. The following table describes these properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Explained in</th>
</tr>
</thead>
<tbody><tr>
<td>Class</td>
<td><a href="#Instantiating-Beans">Instantiating Beans</a></td>
</tr>
<tr>
<td>Name</td>
<td><a href="#Naming-Beans">Naming Beans</a></td>
</tr>
<tr>
<td>Scope</td>
<td><a href="#Bean-Scopes">Bean Scopes</a></td>
</tr>
<tr>
<td>Constructor arguments</td>
<td><a href="#Dependency-Injection">Dependency Injection</a></td>
</tr>
<tr>
<td>Properties</td>
<td><a href="#Dependency-Injection">Dependency Injection</a></td>
</tr>
<tr>
<td>Autowiring mode</td>
<td><a href="#Autowiring-Collaborators">Autowiring Collaborators</a></td>
</tr>
<tr>
<td>Lazy initialization mode</td>
<td><a href="#Lazy-initialized-Beans">Lazy-initialized Beans</a></td>
</tr>
<tr>
<td>Initialization method</td>
<td>[Initialization Callbacks](#Initialization Callbacks)</td>
</tr>
<tr>
<td>Destruction method</td>
<td><a href="#Destruction-Callbacks">Destruction Callbacks</a></td>
</tr>
</tbody></table>
<h3 id="Configuration-Metadata"><a href="#Configuration-Metadata" class="headerlink" title="Configuration Metadata"></a>Configuration Metadata</h3><p>As the preceding diagram shows, the <strong>Spring IoC container consumes a form of configuration metadata</strong>. This configuration metadata represents how you, as an application developer, <strong>tell the Spring container to instantiate, configure, and assemble the objects in your application</strong>.</p>
<p>Configuration metadata is can be supplied using one of the three forms:</p>
<ul>
<li>XML file</li>
<li>Java-based configuration</li>
<li>Annotation-based configuration</li>
</ul>
<p>(the following chapters only cover <strong>Java-based Configuration</strong>. If you prefer other means of configuration, please refer to the <a href="https://docs.spring.io/spring/docs/5.3.0-SNAPSHOT/spring-framework-reference/core.html#beans" target="_blank" rel="noopener">Offical Documentation</a> for more information.)</p>
<h3 id="Java-Based-Configuration"><a href="#Java-Based-Configuration" class="headerlink" title="Java Based Configuration"></a>Java Based Configuration</h3><p>The central artifacts in Spring’s new Java-configuration support are <strong><code>@Configuration</code>-annotated classes</strong> and <strong><code>@Bean</code>-annotated methods</strong>.</p>
<p>The <code>@Bean</code> annotation is used to indicate that <strong>a method instantiates, configures, and initializes a new object to be managed by the Spring IoC container</strong>. For those familiar with Spring’s <code>&lt;beans/&gt;</code> XML configuration, the <code>@Bean</code> annotation plays the same role as the <code>&lt;bean/&gt;</code> element. You can use <code>@Bean</code>-annotated methods with any Spring <code>@Component</code>. However, they are most often used with <code>@Configuration</code> beans.</p>
<p>Annotating a class with <code>@Configuration</code> indicates that <strong>its primary purpose is as a source of bean definitions</strong>. Furthermore, <code>@Configuration</code> classes let <strong>inter-bean dependencies be defined by calling other <code>@Bean</code> methods in the same class</strong>. The simplest possible <code>@Configuration</code> class reads as follows:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyService <span class="title">myService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Note:</p>
<ul>
<li><input disabled type="checkbox"> Unlike full <code>@Configuration</code>, lite <code>@Bean</code> methods (declared within classes that are not annotated with @Configuration) <strong>cannot declare inter-bean dependencies</strong>. Instead, they operate on their containing component’s internal state and, optionally, on arguments that they may declare. Such a <code>@Bean</code> method should therefore not invoke other <code>@Bean</code> methods. <strong>Each such method is literally only a factory method for a particular bean reference, without any special runtime semantics</strong>.</li>
</ul>
</blockquote>
<p>The <code>@Bean</code> and <code>@Configuration</code> annotations are discussed in depth in the following sections. <strong>First, however, we need to cover the various ways of creating a spring container</strong> using by Java-based configuration.</p>
<h3 id="Instantiating-the-Spring-Container-Using-AnnotationConfigApplicationContext"><a href="#Instantiating-the-Spring-Container-Using-AnnotationConfigApplicationContext" class="headerlink" title="Instantiating the Spring Container Using AnnotationConfigApplicationContext"></a>Instantiating the Spring Container Using <code>AnnotationConfigApplicationContext</code></h3><p>When <code>@Configuration</code> classes are provided as input, <strong>the <code>@Configuration</code> class itself is registered as a bean definition and all declared <code>@Bean</code> methods within the class are also registered as bean definitions</strong>.</p>
<p>This means that instead of using XML files, you can use <code>@Configuration</code> classes as input when instantiating an <code>AnnotationConfigApplicationContext</code>. This allows for completely XML-free usage of the Spring container, as the following example shows:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    ApplicationContext ctx = <span class="keyword">new</span> AnnotationConfigApplicationContext(AppConfig<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    MyService myService = ctx.getBean(MyService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    myService.doStuff();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>AnnotationConfigApplicationContext</code> is not limited to working only with <code>@Configuration</code> classes. <strong>Any <code>@Component</code> or JSR-330 annotated class may be supplied as input to the constructor</strong>, as the following example shows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    ApplicationContext ctx &#x3D; new AnnotationConfigApplicationContext(MyServiceImpl.class, Dependency1.class, Dependency2.class);</span><br><span class="line">    MyService myService &#x3D; ctx.getBean(MyService.class);</span><br><span class="line">    myService.doStuff();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The preceding example assumes that <code>MyServiceImpl</code>, <code>Dependency1</code>, and <code>Dependency2</code> <strong>use Spring dependency injection annotations such as <code>@Autowired</code></strong>.</p>
<h3 id="Building-the-Container-Programmatically-by-Using-register-Class-lt-gt-…​"><a href="#Building-the-Container-Programmatically-by-Using-register-Class-lt-gt-…​" class="headerlink" title="Building the Container Programmatically by Using register(Class&lt;?&gt;…​)"></a>Building the Container Programmatically by Using <code>register(Class&lt;?&gt;…​)</code></h3><p>One thing we see before for using <code>AnnotationConfigApplicationContext</code> is that the configurations need to be specified when you instantiate the <code>ApplicationContext</code>. However, sometimes you might need to programmatically add configurations later. This can be done by <strong>instantiate an <code>AnnotationConfigApplicationContext</code> by using a no-arg constructor and then configure it by using the <code>register()</code> method</strong>. This approach is particularly useful when programmatically building an <code>AnnotationConfigApplicationContext</code>. The following example shows how to do so:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    AnnotationConfigApplicationContext ctx = <span class="keyword">new</span> AnnotationConfigApplicationContext();</span><br><span class="line">    ctx.register(AppConfig<span class="class">.<span class="keyword">class</span>, <span class="title">OtherConfig</span>.<span class="title">class</span>)</span>;</span><br><span class="line">    ctx.register(AdditionalConfig<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    ctx.refresh();</span><br><span class="line">    MyService myService = ctx.getBean(MyService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    myService.doStuff();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Enabling-Component-Scanning-with-scan-String…​"><a href="#Enabling-Component-Scanning-with-scan-String…​" class="headerlink" title="Enabling Component Scanning with scan(String…​)"></a>Enabling Component Scanning with <code>scan(String…​)</code></h3><p>To enable component scanning, you can <strong>annotate your <code>@Configuration</code> class</strong> as follows:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(basePackages = <span class="string">"com.acme"</span>)  <span class="comment">// this enables component scanning</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span>  </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In the preceding example, the <strong><code>com.acme</code> package is scanned to look for any <code>@Component</code>-annotated classes</strong>, and those classes are registered as Spring bean definitions within the container. </p>
<p>Additionally, <strong>you can use the <code>AnnotationConfigApplicationContext</code> object with the <code>scan(String…​)</code> method</strong> to allow for the same component-scanning functionality, as the following example shows:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    AnnotationConfigApplicationContext ctx = <span class="keyword">new</span> AnnotationConfigApplicationContext();</span><br><span class="line">    ctx.scan(<span class="string">"com.acme"</span>);</span><br><span class="line">    ctx.refresh();</span><br><span class="line">    MyService myService = ctx.getBean(MyService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In the preceding example, <strong>assuming that <code>AppConfig</code> is declared within the <code>com.acme</code> package (or any package underneath)</strong>. The above works <strong>since <code>@Configuration</code> classes are meta-annotated</strong> with <code>@Component</code>, so they are <strong>candidates for component-scanning as well</strong>. Then the <strong><code>AppConfig</code> along with its components is picked up during the call to <code>scan()</code></strong>. Upon <code>refresh()</code>, all its <code>@Bean</code> methods are processed and registered as bean definitions within the container.</p>
<h3 id="Using-the-Bean-Annotation"><a href="#Using-the-Bean-Annotation" class="headerlink" title="Using the @Bean Annotation"></a>Using the <code>@Bean</code> Annotation</h3><p>You can use the <code>@Bean</code> annotation in a <code>@Configuration</code>-annotated or in a <code>@Component</code>-annotated class.</p>
<p>To declare a bean, you can annotate <strong>a method with the <code>@Bean</code> annotation</strong>. You use this method to register a bean definition within an <code>ApplicationContext</code> of the type specified as the method’s return value. <strong>By default, the bean name is the same as the method name.</strong> The following example shows a <code>@Bean</code> method declaration:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TransferServiceImpl <span class="title">transferService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TransferServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The preceding configuration is exactly equivalent to the following Spring XML:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans&gt;</span><br><span class="line">    &lt;bean id&#x3D;&quot;transferService&quot; class&#x3D;&quot;com.acme.TransferServiceImpl&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;beans&gt;</span><br></pre></td></tr></table></figure>

<p>Both would make a <strong>bean named <code>transferService</code> available in the <code>ApplicationContext</code></strong>, bound to an <strong>object instance of type <code>TransferServiceImpl</code></strong>, as the following text image shows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transferService -&gt; com.acme.TransferServiceImpl</span><br></pre></td></tr></table></figure>

<p>You can also <strong>declare your <code>@Bean</code> method with an interface</strong> (or base class) return type, as the following example shows:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TransferService <span class="title">transferService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TransferServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>However, this <strong>limits the visibility for advance type prediction</strong> to the specified interface type (<code>TransferService</code>), such that the full type (<code>TransferServiceImpl</code>) is known to the container only once.</p>
<h3 id="Bean-Dependencies"><a href="#Bean-Dependencies" class="headerlink" title="Bean Dependencies"></a>Bean Dependencies</h3><p><strong>A <code>@Bean</code>-annotated method can have an arbitrary number of parameters that describe the dependencies</strong> required to build that bean. For instance, if our <code>TransferService</code> requires an <code>AccountRepository</code>, we can <strong>materialize that dependency with a method parameter</strong>, as the following example shows:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TransferService <span class="title">transferService</span><span class="params">(AccountRepository accountRepository)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TransferServiceImpl(accountRepository);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The resolution mechanism is pretty much identical to <code>constructor-based dependency injection</code>. See the relevant section for more details.</p>
<h3 id="Dependency-Injection"><a href="#Dependency-Injection" class="headerlink" title="Dependency Injection"></a>Dependency Injection</h3><p><strong>Dependency injection (DI) is a process whereby objects define their dependencies</strong> (that is, the other objects with which they work) <strong><em>only</em> through</strong> constructor arguments, arguments to a factory method, or properties that are set on the object instance after it is constructed or returned from a factory method.</p>
<p>The c<strong>ontainer then injects those dependencies when it creates the bean</strong>.</p>
<p>Code is cleaner with the DI principle, and decoupling is more effective when objects are provided with their dependencies. The object does not look up its dependencies and does not know the location or class of the dependencies. As a result, your classes become easier to test, particularly when the dependencies are on interfaces or abstract base classes, which allow for stub or mock implementations to be used in unit tests.</p>
<h3 id="Specifying-Bean-Scope"><a href="#Specifying-Bean-Scope" class="headerlink" title="Specifying Bean Scope"></a>Specifying Bean Scope</h3><p>Spring includes the <code>@Scope</code> annotation so that you can specify the scope of a bean.</p>
<p>You can specify that your <strong>beans defined with the <code>@Bean</code> annotation should have a specific scope</strong>. You can use any of the standard scopes specified in the <a href>Bean Scopes</a> section.</p>
<p>The default scope is singleton, but you can override this with the @Scope annotation, as the following example shows:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Scope</span>(<span class="string">"prototype"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Encryptor <span class="title">encryptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/06/09/Spring-Framework-Guide/" data-id="ckb7qqory0001xworgz0y9qwv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2020/06/09/SpringBoot-Manual/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Spring Boot Manual</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/06/09/Spring-Framework-Guide/">Spring Framework Guide</a>
          </li>
        
          <li>
            <a href="/2020/06/09/SpringBoot-Manual/">Spring Boot Manual</a>
          </li>
        
          <li>
            <a href="/2020/06/02/Redis-Manual/">Redis Manual</a>
          </li>
        
          <li>
            <a href="/2020/05/26/MySQL-Manual/">MySQL Manual</a>
          </li>
        
          <li>
            <a href="/2020/05/25/Docker-Manual/">Docker Manual</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Xiao Yu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>