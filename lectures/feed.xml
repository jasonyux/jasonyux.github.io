<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.1">Jekyll</generator><link href="/lectures/feed.xml" rel="self" type="application/atom+xml" /><link href="/lectures/" rel="alternate" type="text/html" /><updated>2024-01-20T22:50:33+00:00</updated><id>/lectures/feed.xml</id><title type="html">Lecture Notes</title><subtitle>An inexhaustive collection of markdown/latex(PDF) notes that I took since college. </subtitle><entry><title type="html">CSOR4231 Analysis of Algorithms</title><link href="/lectures/2023@columbia/CSOR4231_Analysis_of_Algorithms.html/" rel="alternate" type="text/html" title="CSOR4231 Analysis of Algorithms" /><published>2024-01-20T00:00:00+00:00</published><updated>2024-01-20T00:00:00+00:00</updated><id>/lectures/2023@columbia/CSOR4231_Analysis_of_Algorithms</id><content type="html" xml:base="/lectures/2023@columbia/CSOR4231_Analysis_of_Algorithms.html/"><![CDATA[<p>*Picture credits from the Algorithms Illuminated book</p>

<h1 id="analysis-of-algorithms">Analysis of Algorithms</h1>

<p>Logistics: Mostly see Canvas, but just note that:</p>

<ul>
  <li>10 Psets, no late days, but 2 can be dropped. Each pset worth 10 points.</li>
  <li>3 non-cumulative exam,  each worth 60 points. Tentative dates Oct 3, Oct 31, Dec 7.
    <ul>
      <li>exams will have about 50% content verbatim from HW</li>
    </ul>
  </li>
  <li>textbook: the split version of Algorithms Illuminated will have the same content as the Algorithms Illuminated Omnibus version, except that problem numbering might be different</li>
  <li>skim the readings before/after class, as they are the content you are responsible for</li>
</ul>

<hr />

<p>Example demo algorithmic questions:</p>

<p><u>*For example*: Routing in Internet.</u> Let nodes/vertices be hosts, and edges be the physical/wireless connections. Let the connections be bidirectional. <strong>How do you figure out the shortest path (least number of hops) between two given hosts?</strong></p>

<ul>
  <li>
    <p>Dikstra algorithm: given a source host (e.g. node 0), we can find the shortest path to all other hosts. The key insight shortest path is composed of shortest path, <strong>assuming all edges are positive</strong>. This means that if you have a given shortest path from $v$ to $u$, and nodes $w,x,y,z$ are only connected to $u$, then any shortest path from $v$ to $w,x,y,z$ must go through $u$.</p>

    <p>The algorithm iteratively grows a “tree” of visited nodes. At each iteration, the node that has the smallest cost (e.g. node 1) will be marked as done. THen we add all the neighbors <em>of that marked node</em> (because of the insight above) to the tree of visited nodes, and update the cost of the neighbors.</p>

    <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230905205050.png" style="zoom:100%;" /></p>

    <p>however, the issue is that it needs to remember information about the entire internet during computation (i.e. keep an adjacency matrix/is visited of all nodes), which is not scalable.</p>
  </li>
  <li>
    <h2 id="bellman-ford-algorithm-a-differential-version-that-converges-to-the-shortest-path">Bellman-Ford algorithm: a <strong>differential</strong> version that converges to the shortest path.</h2>
  </li>
</ul>

<p><u>*For example*: Sequence alignment.</u> Consider two strings composed of characters ${ A,C,G,T }$:</p>

\[AGGGCT, AGGCA\]

<p>How similar (smallest edit distance, or lowest NW score) are the two strings?</p>

<ul>
  <li>Brute force: try all possible alignments, and pick the one with the lowest score. Insanely expensive.</li>
  <li>Dynamic programming!</li>
</ul>

<hr />

<p><u>*For example:* Multiplying two numbers.</u> Given two $n$ digit number (e.g. $x=1234$, $y=5678$), find a way to find out their product.</p>

<ul>
  <li>
    <p>Grade school approach: multiply each digit by each, get partial product, and sum.</p>

    <p>Cost is $O(n^2)$ as for each digit need to do $n$ multiplication, and there are $n$ digits</p>
  </li>
  <li>
    <p>Recursive v1: We can break down multiplying numbers into <strong>multiplying parts of it</strong> and add back (<mark>divide and conquer</mark>). For instance, let $x=10^{n/2}a + b$ and $y=10^{n/2}c + d$ (e.g. $a=12, b=34$ for $x=1234$). Then realize that:</p>

\[\begin{align*}
  x\cdot y 
  &amp;= (10^{n/2}a + b) (10^{n/2}c + d) \\
  &amp;= 10^n ac + 10^{n/2} (ad + bc) + bd \\
\end{align*}\]

    <p>and then, for <strong>each of the 4 multiplication operation</strong>, we can further recurse into smaller components until we are at one digit.</p>

    <p>Is this necessarily faster than grade school? We will analyze this in the course.</p>
  </li>
  <li>
    <p>Recursive v2 (<strong>Karatsuba</strong> Algorithm): An improved version than above where we only do 3 multiplications instead of 4. Notice that we can rewrite:</p>

\[(a+b)(c+d) = ac + ad + bc + bd = ac + bd + (ad + bc)\]

    <p>therefore, to equivalently compute the 4 multiplications in v1, we can do:</p>
    <ol>
      <li>compute $ac$</li>
      <li>compute $bd$</li>
      <li>
        <h2 id="compute-abcd-and-subtract-ac-and-bd-from-it-to-get-adbc">compute $(a+b)(c+d)$ and subtract $ac$ and $bd$ from it to get $ad+bc$</h2>
      </li>
    </ol>
  </li>
</ul>

<h1 id="introduction">Introduction</h1>

<p>The basic idea is to break your problem into smaller subproblems, solve the subproblems (often recursively), and finally combine the solutions to the subproblems into one for the original problem.</p>

<h2 id="mergesort-the-algorithm">MergeSort: The Algorithm</h2>

<p><code class="language-plaintext highlighter-rouge">MergeSort</code> is a classical sorting algorithm using the divide and conquer paradigm. Recall that to sort an array, we could have done:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">SelectionSort</code>: scan the array, find the smallest element, put it in the first position, and repeat.</li>
  <li><code class="language-plaintext highlighter-rouge">InsertionSort</code>: keep two arrays, sorted and unsorted. Scan the unsorted array and place the smallest element there into the correct position of the sorted array.</li>
  <li><code class="language-plaintext highlighter-rouge">BubbleSort</code>: swap adjacent elements to make sure the smallest is in the first position, then repeat.</li>
</ul>

<p>the above three simple algorithms have a running time of $O(n^2)$, which is not great. We can do better with <code class="language-plaintext highlighter-rouge">MergeSort</code>. High level idea:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230907104943.png" style="zoom:70%;" /></p>

<p>where:</p>
<ul>
  <li>given two <strong>sorted</strong> subparts, we can combine them <strong>into a sorted array</strong> by <code class="language-plaintext highlighter-rouge">merging</code> them (use a pointer at each of the two subpart, and just move the smallest element of the two to the output array). You will see after the <a href="#the-master-method">Master Method</a> that the key to $O(n \log n)$ is that <mark>this merge only takes $O(n)$!</mark>.</li>
  <li>from the above you see the <strong>recursive</strong> nature: the base case of just one element is <strong>already sorted</strong>! So we can use this base case AND the above merging operation to sort the entire array.</li>
</ul>

<p>Specifically, the pseduocode is:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># input: array A of n distinct numbers
# output: return a sorted array from smallest to largest
</span><span class="k">def</span> <span class="nf">merge_sort</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
	<span class="c1"># base case
</span>	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">A</span>
	<span class="n">c</span> <span class="o">=</span> <span class="n">merge_sort</span><span class="p">(</span><span class="n">A</span><span class="p">[:</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">])</span>  <span class="c1"># recursively sort the first half of A
</span>	<span class="n">d</span> <span class="o">=</span> <span class="n">merge_sort</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">:])</span>  <span class="c1"># recursively sort the second half of A
</span>	<span class="k">return</span> <span class="n">merge</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
</code></pre></div></div>
<p>so basically all the work is to <code class="language-plaintext highlighter-rouge">merge</code> the two sorted subarrays into one sorted array. The pseudocode for <code class="language-plaintext highlighter-rouge">merge</code> is:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
  <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="n">e</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)):</span>
    <span class="c1"># there is a bit more code to deal with if one of the two arrays is exhausted
</span>    <span class="c1"># if the first unused element from c is smaller, then add it to e
</span>    <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">d</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
      <span class="n">e</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
      <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="c1"># otherwise, add the first unused element from d to e
</span>    <span class="k">else</span><span class="p">:</span>
      <span class="n">e</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
      <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="k">return</span> <span class="n">e</span>
</code></pre></div></div>

<p>So what is its runtime? How fast is this compared to $O(n^{2})$?</p>

<h2 id="mergesort-the-analysis">MergeSort: The Analysis</h2>

<p>On a high level, we can imagine the runtime as “the total number of lines of code/operation we need to execute to run the implementation”. How do we approach this? In general, we should <strong>first visualize what the algorithm does</strong>.</p>

<p>For recursive algorithms such as <code class="language-plaintext highlighter-rouge">MergeSort</code>, we can visualize it as a <strong>recursion tree</strong>:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230907220532.png" style="zoom:100%;" /></p>

<p>so basically, at each node THE REAL COST is <code class="language-plaintext highlighter-rouge">merge(C,D)</code>, assuming your code implementation can slice arrays in halves using $O(1)$ time. This means that the total runtime is:</p>

\[\sum_{n \in \text{all nodes}} \text{Cost of merge(C,D) at node $n$ }\]

<p>For a recursive algorithm, generally notice that <em>each level will receive similar input</em> (e.g. sizes). Therefore, we can instead consider:</p>

\[\sum_{j \in \text{all levels}} \text{(\# of nodes at level $j$)} \times \text{(Cost of merge(C,D) at level $j$)}\]

<p>Hence we get, for an input of length $n$ (assuming its a power of $2$)</p>
<ul>
  <li>in total there are $\log_{2} n + 1$ levels</li>
  <li>at each level, there are $2^{j}$ nodes (note that you can imagine growing a tree from top to bottom as an exponential operation, while collapsing it from bottom to top as a logarithmic operation)</li>
  <li>the input size at each node would therefore be $n/2^{j}$</li>
  <li>the cost of <code class="language-plaintext highlighter-rouge">merge</code> at a node (using the pseudocode above it is about $4m+2$, where we have $4$ operations during the loop and 2 initialization operations). For simplicity let it be $6m$.</li>
</ul>

<p>The total cost <strong>at each level</strong> is therefore:</p>

\[2^{j} \cdot 6 \left( \frac{n}{2^{j}} \right) = 6n\]

<p>and finally the <strong>total runtime cost</strong> is:</p>

\[\sum_{j \in \text{all levels}} 6n = \left( \log_{2} n + 1 \right) \cdot 6n = 6n \log_{2} n + 6n  = O(n \log n)\]

<blockquote>
  <p>Important notes:</p>
  <ul>
    <li>here we considered the <strong>worst case scenario</strong>. This would be appropriate for general purpose algorithms as we won’t know what the input is.
      <ul>
        <li>What about “average-case analysis”?	For example, in the sorting problem, we could assume that all input arrays are equally likely and then study the average running time of different sorting algorithms. A second alternative is to look only at the performance of an algorithm on a small collection of “benchmark instances” that are thought to be representative of “typical” or “real-world” inputs.</li>
      </ul>
    </li>
    <li>we are sloppy for constant factors/coefficients. This is because:
      <ul>
        <li>in real life these constants will be <em>heavily implementation dependent</em></li>
        <li>will see how the Big O notation will not care about these constants</li>
      </ul>
    </li>
    <li>related to above, we will <mark>focus on how runtime scales with input size $n$</mark>. Especially when $n$ become large.
      <ul>
        <li>yes, there are cases when a runtime of $0.5n^{2}$ is faster than $6n \log n$, for example when $n=2$. But smart algorithms doesn’t really matter if $n$ is small!</li>
        <li>the <mark>holy grail is a linear-time algorithm</mark> (seeing each input ~once). For some problems we will not find a linear time algorithm, and for some (e.g. binary search) we can by “cheating” (we are already given an sorted array)</li>
      </ul>
    </li>
  </ul>
</blockquote>

<h2 id="strassens-matrix-multiplication-algorithm">Strassen’s Matrix Multiplication Algorithm</h2>

<p>This section applies the divide-and-conquer algorithm design paradigm to the problem of multiplying matrices, culminating in Strassen’s amazing <strong>subcubic-time</strong> matrix multiplication algorithm.</p>

<p>Recall that matrix multiplication considers</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230914212838.png" style="zoom:100%;" /></p>

<p>Therefore the very basic algorithm would be:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">matrix_mut</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">):</span>
  <span class="c1"># X is n x n, Y is n x n
</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
      <span class="n">Z</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">Z</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">*</span> <span class="n">Y</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
  <span class="k">return</span> <span class="n">Z</span>
</code></pre></div></div>
<p>which is obviously $\Theta(n^{3})$</p>

<p>Since the input size is $O(n^{2})$, the best we can hope for would be $O(n^{2})$ runtime. So can we do better? Emboldened by the divide and conquer integer multiplication algorithm, we can try to divide the matrix into smaller submatrices and then recursively compute the product of these submatrices.</p>

<p>Consider breaking the matrix down to:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230914214311.png" style="zoom:100%;" /></p>

<p>then we can write the product as:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230914214322.png" style="zoom:100%;" /></p>

<p>where adding two matrices is just element-wise addition with cost $O(l^{2})$ for $l \times l$ matrices. Therefore, analogous to the integer multiplication algorithm, we can write the matrix multiplication algorithm 
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230914214431.png" style="zoom:80%;" /></p>

<p>which has basically eight recursive calls. The problem is that this is still $\Theta(n^{3})$!</p>

<p>The key insight from the <strong>Karatsuba algorithm</strong> was that we can <em>save one multiplication</em> by using some tricks, and <strong>that can help us get sub-cubic time!</strong></p>

<p>A high level description looks like:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230914214653.png" style="zoom:80%;" /></p>

<h3 id="details-of-strassens-algorithm">Details of Strassen’s Algorithm</h3>

<p>The key detail is how to save the extra multiplication. The idea is to use the following 7 auxiliary matrices:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230914214913.png" style="zoom:80%;" /></p>

<p>which involves $O(n^{2})$ time doing additional matrix additions, but <em>just with these seven</em> we can compute the matrix product as:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230914215001.png" style="zoom:80%;" /></p>

<p>which works due to some crazy cancellation, for example in the upper left:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230914215042.png" style="zoom:80%;" /></p>

<p>the rest you can check yourself, but with it down to 7 recursive calls, we can compute the runtime (using the <a href="#The_Master_Method">The Master Method</a>): $O(n^{2.807})$!</p>

<h1 id="asymptotic-notation">Asymptotic Notation</h1>

<p>The high level idea of why to use Big O:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230907222732.png" style="zoom:80%;" /></p>

<p>where saving <em>one recursive call is a bigh win</em>, because that will get saved over and over again as the recursion goes deeper.</p>

<h2 id="big-o-notation">Big-O Notation</h2>

<p>Let $T(n)$ denote the worst-case running time of an algorithm we care about, where $n={1,2,3, …}$ being the size of the input. What does it mean to say something runs in $O(f(n))$ for some function $f(n)$?</p>

<blockquote>
  <p><strong>Big-O Notation</strong>: $T(n) = O(f(n))$ if and only if there exist positive constant $c$ and $n_0$ such that:</p>

\[T(n) \leq c \cdot f(n),\quad \text{ for all } n \geq n_0\]

  <p>i.e. eventually when input gets large enough, $T(n)$ is bounded by $c \cdot f(n)$. So all you need to show/prove is that you can <em>construct a $c$ and $n_0$</em> such that it holds.</p>
</blockquote>

<p>Pictorially, we can imagine:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230907223339.png" style="zoom:70%;" /></p>

<hr />
<p><em>For Example:</em> a degree-$k$ polynomials are $O(n^{k})$. Suppose:</p>

\[T(n) = a_{k} n^{k} + a_{k-1} n^{k-1} + ... + a_{1} n + a_{0}\]

<p>for $k \ge 0$ and $a_i$’s are real numbers. We can show that $T(n) = O(n^{k})$:</p>

\[\begin{align*}
	T(n)
	&amp;= a_{k} n^{k} + a_{k-1} n^{k-1} + ... + a_{1} n + a_{0} \\
	&amp;\le \left|a_k\right| n^{k} + \left|a_{k-1}\right| n^{k-1} + ... + \left|a_{1}\right| n + \left|a_{0}\right|\\
	&amp;\le \left|a_k\right| n^{k} + \left|a_{k-1}\right| n^{k} + ... + \left|a_{1}\right| n^k + \left|a_{0}\right| n^k\\
	&amp;= \left(\left|a_k\right| + \left|a_{k-1}\right| + ... + \left|a_{1}\right| + \left|a_{0}\right|\right) n^k\\
	&amp;\equiv c \cdot n^k

\end{align*}\]

<p>holds for all $n$, so $n_{0} = 1$ and $c = \left\vert a_k\right\vert  + \left\vert a_{k-1}\right\vert  + … + \left\vert a_{1}\right\vert  + \left\vert a_{0}\right\vert$.</p>

<hr />

<p><em>For Example:</em> a degree-$k$ polynomial is not $O(n^{k-1})$. Suppose for simplicity $T(n) = n^{k}$. Then <mark>proof by contradition</mark> that this means:</p>

\[n^{k} \le c \cdot n^{k-1}, \quad \text{ for all } n \ge n_0\]

<p>this means:</p>

\[n \le c, \quad \text{ for all } n \ge n_0\]

<p>which is a contradiction as $n$ can be arbitrarily large.</p>

<h2 id="big-omega-and-big-theta-notation">Big-Omega and Big-Theta Notation</h2>

<p>On a high level, if big-O is analogous to “less than or equal to ($\le$),” then big-omega and big-theta are analogous to “greater than or equal to ($\ge$),” and “equal to (=).”</p>

<blockquote>
  <p><strong>Big-Omega Notation</strong>: $T(n) = \Omega(f(n))$ if and only if there exist positive constant $c$ and $n_0$ such that:</p>

\[T(n) \geq c \cdot f(n),\quad \text{ for all } n \geq n_0\]

  <p>i.e. eventually when input gets large enough, $T(n)$ is <mark>bounded below</mark> by $c \cdot f(n)$.</p>
</blockquote>

<p>Pictorially, bounding from below means:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230907224630.png" style="zoom:70%;" /></p>

<p>and we would call $T(n) = \Omega(f(n))$.</p>

<blockquote>
  <p><strong>Big-Theta Notation</strong>: $T(n) = \Theta(f(n))$ if and only if there exist positive constant $c_1, c_2$ and $n_0$ such that:</p>

\[c_1 \cdot f(n) \leq T(n) \leq c_2 \cdot f(n),\quad \text{ for all } n \geq n_0\]

  <p>i.e. eventually when input gets large enough, $T(n)$ is <mark>sandwiched</mark> by $c_1 \cdot f(n)$ and $c_2 \cdot f(n)$. Notice that this is analogous to say that both $T(n) = \Theta(f(n))$ and $T(n) = O(f(n))$.</p>
</blockquote>

<p><em>For example</em>, if $T(n) = \frac{1}{2} n^{2} + 3n$, then $T(n) = \Theta(n^{2})$.</p>

<blockquote>
  <p><strong>Little-O Notation</strong>: $T(n) = o(f(n))$ if and only if <mark>for every positive constant $c&gt;0$</mark> there exists a constant $n_0$ such that:</p>

\[T(n) \le c \cdot f(n),\quad \text{ for all } n \geq n_0\]

  <p>i.e. eventually when input gets large enough, $T(n)$ is <mark>bounded above</mark> by $c \cdot f(n)$ for any $c$ you pick (note that you can pick $n_0$ based on $c$). Also note that this is much stronger than the Big O notation.</p>
</blockquote>

<p>Intuitively, this is like saying we want:</p>

\[\lim\limits_{n \to \infty} \frac{f(n)}{T(n)} = 0\]

<p>that $f(n)$ grows strictly faster than $T(n)$ (i.e. pick $c$ to be infinitesimally small in the above definition). Also note that the intutive way of converting between Big O and Little O is NOT just switching $\le$ to $&lt;$, as that would actually not change anything (see HW1 Problem 2.7)</p>

<p><em>For example</em>, $n^{k-1} = o(n^{k})$ is true for any $k \ge 1$.</p>

<h1 id="the-master-method">The Master Method</h1>

<p>This “master method” applies to analyzing most of the <em>divide-and-conquer algorithms</em> you’ll ever see, as their runtime typically follows a pattern of the form:</p>

\[T(n) = \underbrace{a \cdot T\left(\frac{n}{b}\right)}_{\text{word done by recursive calls}} + \underbrace{O(n^{d})}_{\text{clean up}}\]

<p>where $a$ would be the number of recursive calls you make, $b$ would be by how much you shrink the input size, and $O(n^{d})$ would be the time it takes to combine/clean up any of results of the recursive calls (e.g. the  cost for <code class="language-plaintext highlighter-rouge">merge</code> in <code class="language-plaintext highlighter-rouge">merge_sort</code>).</p>

<hr />

<p><em>For Example</em>, recall the multiplication problem. Grade-school algorithm would give us $O(n^{2})$. However,</p>
<ul>
  <li>
    <p>the recursive algorithm v1 (calculate $10^{n}ac + 10^{n / 2}(ad + bc) + bd$) would then give us:</p>

\[T(n) \le 4T(n / 2) + O(n)\]

    <p>where $4$ comes from doing 4 more multiplications to calculate $ac, ad, bc, bd$, and $n / 2$ because we are chopping each original interger into half $x = 10^{n / 2}a + b$ and $y = 10^{n / 2}c + d$.</p>
  </li>
  <li>
    <p>the recursive algorithm v2 (<strong>Karatsuba Algorithm</strong>) saves the computation of $ad + bc$ by computing only $(a+b)(c+d)$ and then minus $(ac + bd)$ which would be already computed. Given that addition is done in linear time:</p>

\[T(n) \le 3T(n / 2) + O(n)\]

    <p>where now you only have to do 3 more multiplications to calculate $ac, bd, (a+b)(c+d)$, with extra work in addition but that is already in $O(n)$ term.</p>
  </li>
</ul>

<p>and that for all the above cases, the base case is $T(1) = O(1)$.</p>

<hr />

<h2 id="formal-statement">Formal Statement</h2>

<p>We’ll discuss a version of the master method that handles what we’ll call <strong>“standard recurrences”</strong>, which have three free parameters and the following form:</p>

<blockquote>
  <p><strong>Standard Recurrence Format</strong>. Let $T(n) = \mathrm{constant}$ for some small enough $n$ (i.e. base case). Then for large values of $n$, we have the runtime being:</p>

\[T(n) \le a \cdot T\left(\frac{n}{b}\right) + O(n^{d})\]

  <p>where:</p>
  <ul>
    <li>$a$ is the number of recursive calls you make</li>
    <li>$b$ is by how much you shrink the input size</li>
    <li>$O(n^{d})$ is the time it takes to combine/clean up any of results of the recursive calls</li>
  </ul>
</blockquote>

<p>Then, we have the master method:</p>

<blockquote>
  <p><strong>Master Method</strong>. If $T(n)$ is defined by a standard recurrence of the form above with $a \ge 1, b &gt; 1$ and $d \ge 0$, then:</p>

\[T(n) = \begin{cases}
O(n^{d} \log n) &amp; \text{if } a = b^{d} \\
O(n^{d}) &amp; \text{if } a &lt; b^{d} \\
O(n^{\log_{b} a}) &amp; \text{if } a &gt; b^{d}
\end{cases}\]

  <p>note that</p>
  <ul>
    <li>intuitively, the second one indicates that your algorithm is “clean up step heavy”, and the third one indicates that your algorithm is “recursive call heavy”</li>
    <li>the last case <em>specifically specified a base $b$</em>, whereas the first case did not. This is because any two logarithm base differ by a constant multiple. This will be harmless in the first case because we are multiplying by a constant factor of $d$, but not in the last case because we are raising to a power of $n$.</li>
  </ul>
</blockquote>

<p>First for a sanity check, the merge sort algorithm takes the form of:</p>

\[T(n) = 2T\left(\frac{n}{2}\right) + O(n)\]

<p>hence we have $a = 2, b = 2, d = 1$, and so $a = b^{d}$, which means that the first case applies and we have $T(n) = O(n^{d} \log n) = O(n \log n)$.</p>

<p>Then we first answer the questions of runtime for KaraSuba algorithm and the recursive algo v1:</p>

<ul>
  <li>multiplication algo v1 has $a=4, b=2, d=1$ so $a &gt; b^{d}$, hence we have $T(n) = O(n^{\log_{b} a}) = O(n^{2})$, actually just as good as the grade-school algorithm.</li>
  <li>KaraSuba algo has $a=3, b=2, d=1$ so $a &gt; b^{d}$, but we have $T(n) = O(n^{\log_{b} a}) = O(n^{\log_{2} 3}) \approx O(n^{1.59})$, which is better than the grade-school algorithm.</li>
  <li>Matrix Multiplication v1 (splitting into 8 smaller matrix multiplications) have still $O(n^{3})$. To see this, there are two ways: 1) consider $T(n^{2})=8 T(n^{2} / 4) + O(n^{2})$, substitute $n^{2}=u$ we get runtime is $O(u^{\log_{a} b})$; 2) just consider the input $n^{2}$ as a function of $n$, hence runtime is $T(n) = 8T(n / 2) + O(n)$, which gives $O(n^{\log_{a} b})$.</li>
</ul>

<h2 id="proof-of-master-method">Proof of Master Method</h2>

<p>Next we prove the master’s method.</p>

<p><em>Proof</em>: Suppose that $T(1) = \text{constant}$ and we have the standard recurrence for $n &gt; 1$:</p>

\[T(n) \le a \cdot T\left(\frac{n}{b}\right) + c \cdot n^d\]

<p>where we replaced $O(n^{d})$ with $c \cdot n^{d}$ for some constant $c$.</p>

<p>We can try to write a few terms out and see if we can find a pattern, but alternatively we can also <strong>draw a recursion tree</strong> and see if we can <strong>directly find a closed-form equation</strong>:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230912225937.png" style="zoom:100%;" /></p>

<p>Our goal is to find the runtime of this entire tree. So we consider:</p>

\[T(n) = \sum_{j \in \mathrm{level}} \sum \mathrm{cost}(\text{each node})\]

<p>from which we know that:</p>
<ul>
  <li>there are <strong>$a^{j}$ subproblems/nodes</strong> at depth $j$</li>
  <li>each node at depth $j$ needs to solve problem with <strong>input size $n / b^{j}$</strong></li>
</ul>

<p>again, assuming splitting the input to $b$ subproblems takes constant time, we have the <mark>cost at each node being</mark>:</p>

\[\mathrm{cost}(\text{each node}) = c \cdot \left( \frac{n}{b^j} \right)^d\]

<p>since at each node it is just the clean up step $c \cdot n^{d}$. Then since there are $a^{j}$ nodes at level $j$, we have:</p>

\[\begin{align*}
  T(n) 
  &amp;= \sum_{j=0}^{\log_b a} a^j \cdot c \cdot \left( \frac{n}{b^j} \right)^d \\
  &amp;= c \cdot n^d \cdot \sum_{j=0}^{\log_b a} \underbrace{\left( \frac{a}{b^d} \right)^j}_{\text{this ratio!}} \\
\end{align*}\]

<p>where the ratio of $a / b^{d}$ was the ratio we had in the master method. This ratio also has a very important interpretation:</p>
<ul>
  <li>$a$ is the <mark>rate of growth/proliferation</mark></li>
  <li>$b^{d}$ is the <mark>rate of shrinkage of work</mark>. Since each of your subproblem shrink by a factor of $b$, but that goes into the term $O(n^{d})$, hence you shrink your work by a factor of $b^{d}$.</li>
</ul>

<p>Then we have the following cases:</p>
<ul>
  <li>
    <p>if $a = b^{d}$, then:</p>

\[T(n) = c \cdot n^d \cdot \sum_{j=0}^{\log_b a} \left( \frac{a}{b^d} \right)^j = c \cdot n^d \cdot \sum_{j=0}^{\log_b a} 1 = c \cdot n^d \cdot (\log_b a + 1) = O(n^d \log n)\]

    <p>note that we changed the base here.</p>
  </li>
  <li>
    <p>if $a / b^{d} = r \neq  1$, then we have a <strong>finite geometric series</strong> where:</p>

\[\sum\limits_{j=0}^{k} r^{j} = 1 + r + r^{2} + \cdots + r^{k} = \frac{r^{k+1} - 1}{r - 1}\]

    <p>which means that:</p>
    <ul>
      <li>
        <p>if $r &lt; 1$, then the first term $O(1)$ dominates. Hence we get</p>

\[T(n) = c \cdot n^d \cdot O(1) = O(n^d)\]

        <p>which is basically the <mark>work done by the root node</mark>!</p>
      </li>
      <li>
        <p>if $r &gt; 1$, then the last term $O(r^{k})$ dominates. Hence we get</p>

\[T(n) = c \cdot n^d \cdot O\left[ \left( \frac{a}{b^{d}} \right)^{\log_{b} n} \right]\]

        <p>note that since $b^{-d \log_{b} n} = (b^{\log_b n})^{-d} = n^{-d}$, we get:</p>

\[T(n) = O(a^{\log_{b} n}) = O(n^{\log_{b} a})\]

        <p>where $a^{\log_{b} n}$ is basically <mark>the number of leaves</mark>! However we still use the $n^{\log_{b} a}$ because it’s easier to apply.</p>
      </li>
    </ul>
  </li>
</ul>

<hr />

<h1 id="linear-time-selection">Linear-Time Selection</h1>

<p>This section discusses another divide-and-conquer algorithm, but won’t take the standard form of the master method (probably the only case in this course).</p>

<blockquote>
  <p><strong>Selection Problem</strong>. Given an array $A$ of $n$ distinct numbers and an index $i$, find the $i$th smallest element of $A$.</p>
</blockquote>

<p>The naive solution would be a sort + indexing, which takes $O(n \log n)$ time. However, we can do better by using the divide-and-conquer strategy. The intuition is that we can select a pivot and partition the array in such a way that we will only need to <em>recurse on one of the two partitions</em> = <strong>reduced input size</strong>!</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230914220414.png" style="zoom:100%;" /></p>

<p>one very important finding is that the <strong>pivot is at the “rightful” position</strong> which can tell us two things:</p>
<ol>
  <li><em>that pivot element</em> is in the right position as if it’s sorted, <mark>such that</mark>:</li>
  <li>if we are looking for, say, the $5$-th smallest element, the entire left partition (red) is <strong>irrelevant</strong></li>
</ol>

<p>Thus a high level sketch of the algorithm is as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>  <span class="c1"># n is the length, i is the i-th smallest
</span>  <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="c1"># select a pivot and sort
</span>    <span class="n">p</span> <span class="o">=</span> <span class="n">pivot</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

    <span class="c1"># recursively select
</span>    <span class="n">partition</span><span class="p">(</span><span class="n">A</span> <span class="n">around</span> <span class="n">p</span><span class="p">)</span>  <span class="c1"># O(n) to put smaller element on left, larger on right
</span>    <span class="n">j</span> <span class="o">=</span> <span class="s">"p's position "</span>  <span class="c1"># 1-indexed
</span>    <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="n">i</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">p</span>
    <span class="k">elif</span> <span class="n">j</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">[:</span><span class="n">j</span><span class="p">],</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="c1"># note the new length of RHS search is n - j 
</span>      <span class="c1"># since RHS is all larger, the new i is i - j
</span>      <span class="k">return</span> <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">:],</span> <span class="n">n</span> <span class="o">-</span> <span class="n">j</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">j</span><span class="p">)</span>
</code></pre></div></div>

<p>But what’s the running time? We have not yet discussed how to find a “good” pivot, but we know that:</p>
<ul>
  <li><strong>worst pivot</strong>: we always pick the minimum/maximum element, so that <strong>each recursive call can only throw away one element</strong>. This is bad, as it results in $\Theta(n^2)$.</li>
  <li><strong>best pivot</strong>: if we managed to pick the median (the $i= (n-1) / 2$-th smallest element, which we don’t know), then we can throw away half of the array each time. This is good, as it will result in $O(n)$ (try with the master method), but we don’t know how to find the median.</li>
</ul>

<p>(we will discuss how to find a “good enough” pivot, such that we can still get $O(n)$)</p>

<h2 id="median-of-medians">Median of Medians</h2>

<p>The trick to linear-time selection is to <strong>use the “median-of-medians” as a proxy</strong> for the true median. First we show the full <code class="language-plaintext highlighter-rouge">select</code> algorithm, and then we will discuss the intuition and runtime behind it.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>  <span class="c1"># n is the length, i is the i-th smallest
</span>  <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="c1">### select a pivot and sort
</span>    <span class="n">C</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
      <span class="c1"># sort each 5-element subarray
</span>      <span class="n">B</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">h</span><span class="p">:</span><span class="n">h</span><span class="o">+</span><span class="mi">5</span><span class="p">])</span>
      <span class="c1"># find/keep the median of each 5-element subarray
</span>      <span class="n">C</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">B</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>  <span class="c1">### first round winners
</span>    <span class="n">p</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">n</span> <span class="o">/</span> <span class="mi">5</span><span class="p">,</span> <span class="n">n</span> <span class="o">/</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1">### median of medians, recursively select 1
</span>
    <span class="n">partition</span><span class="p">(</span><span class="n">A</span> <span class="n">around</span> <span class="n">p</span><span class="p">)</span>  <span class="c1"># O(n) to put smaller element on left, larger on right
</span>    <span class="n">j</span> <span class="o">=</span> <span class="s">"p's position in the sorted array"</span>  <span class="c1"># 1-indexed
</span>    <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="n">i</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">p</span>
    <span class="k">elif</span> <span class="n">j</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>  <span class="c1">### recursively select 2
</span>      <span class="k">return</span> <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">[:</span><span class="n">j</span><span class="p">],</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="c1"># note the new length of RHS search is n - j 
</span>      <span class="c1"># since RHS is all larger, the new i is i - j
</span>      <span class="k">return</span> <span class="n">select</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">:],</span> <span class="n">n</span> <span class="o">-</span> <span class="n">j</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">j</span><span class="p">)</span>
</code></pre></div></div>
<p>This warrants several “issues”:</p>

<ul>
  <li>Since there is a <code class="language-plaintext highlighter-rouge">sort</code>, how is this not $O(n \log n)$ runtime? This is because in this case we are sorting a <em>constant</em> number of elements , hence it becomes $O(5 \log 5) = O(1)$. But, since there will be $n / 5$ groups of 5 elements, the total runtime is $O(n)$!</li>
  <li>why 5 elements in particular? A short answer is that this is the <em>smallest odd number</em> that can give this algorithm a linear time. For exercise, try using $3$ and compute the runtime.</li>
  <li>how much smaller is the reduced input size <em>after this median of median pivot</em>? The answer is that this <strong>guarantees throwing at least 30% of the array away</strong>.</li>
</ul>

<blockquote>
  <p><strong>Lemma</strong>. The median of median pivot $p$ is at least the $30$th percentile of the array $A$. To see this, consider $k = n / 5$ is the number of groups you have spliited up, and $x_i$ is the $i$th smallest element <em>amongst the $k$ middle elements</em>. Then we can arrange the full array $A$ into the following way: 
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230914223004.png" style="zoom:20%;" />
where basically numbers are <strong>guaranteed to be bigger</strong> going from bottom to top, though not necessarily left to right. However, this still indicates that:</p>
  <ul>
    <li>the red highlighted bottom left corner is <strong>smaller than $x_{k / 2}$</strong></li>
    <li>the red highlighted top right corner is <strong>larger than $x_{k / 2}$</strong>
therefore, this means that the median of median, $x_{k / 2}$ is bigger than 3/5 of the rows and &gt;50% of the columns, hence it is at least the 30th percentile.</li>
  </ul>
</blockquote>

<h2 id="runtime-of-select-algorithm">Runtime of Select Algorithm</h2>

<p>Now given that the median is guaranteed to throw away at least 30% of the array, we can write the recurrence relation as follows:</p>

\[T(n) = \underbrace{T\left( \frac{n}{5} \right)}_{\text{recursive call by pivot()}} + \underbrace{T \left( \frac{7}{10}n \right)}_{\text{after pivot, search the other 70\%}} + \underbrace{O(n)}_{\text{sort the 5-element subarrays + partition}}\]

<p>note that we <em>cannot</em> use master’s method here, as now we have <em>two recursive calls</em>. In this case, we will need to show that with “guess the solution and check”: that <strong>this is $O(n)$ time</strong>.</p>

<hr />

<p><em>Proof</em>: We want to show tat $T(n) = c \cdot n$ for all $n \ge n_{0} = 1$ in this case. (Hindsight) let $c = 10a$, where $a$ is the constant in the $O(n)$ runtime of the <code class="language-plaintext highlighter-rouge">sort</code> function:</p>

\[T(n) \le T\left( \frac{n}{5} \right) + T \left( \frac{7}{10}n \right) + an\]

<p>is already given. We can prove $T(n) \le c \cdot n$ by induction on $n$:</p>

<ol>
  <li>base case: when $n=1$ this trivially holds as $T(1) = 1 \le c = 10a$ and $a&gt;1$.</li>
  <li>induction hypothesis: assume $T(k) \le c \cdot k$ for all $k &lt; n$ (e.g. holds for $k= n-1$)</li>
  <li>
    <p>induction step: we show that it holds for $n$:</p>

\[\begin{align*}
 T(n) 
 &amp;\le T\left( \frac{n}{5} \right) + T \left( \frac{7}{10}n \right) + an\\
 &amp;\le c \cdot \frac{n}{5} + c \cdot \frac{7}{10}n + an\\
 &amp;= \frac{9}{10}cn + an\\
 &amp;= n \cdot \left( \frac{9}{10}c + a \right)\\
 &amp;= n \cdot 10 a = c \cdot n
\end{align*}\]

    <p>where the second inequality comes from the induction step that we assumed $T(k)\le c \cdot k$ holds.</p>
  </li>
</ol>

<hr />

<h1 id="quicksort">QuickSort</h1>

<p>This is perhaps the most famous sorting algorithm, and it is also based on the idea of <strong>divide-and-conquer</strong>. Although it also operates with $O(n \log n)$, in practice there are differences compared to <code class="language-plaintext highlighter-rouge">merge_sort</code>:</p>
<ul>
  <li>The big win for QuickSort over MergeSort is that it CAN run in place. For this reason it needs to allocate only a minuscule amount of additional memory for intermediate computations. However <code class="language-plaintext highlighter-rouge">merge_sort</code> needs to allocate a whole new array for each merge step.</li>
  <li>On the aesthetic side, QuickSort is just a remarkably beautiful algorithm.</li>
</ul>

<p>The implementation follows directly from the <code class="language-plaintext highlighter-rouge">DSelect</code> and <code class="language-plaintext highlighter-rouge">partition</code> algorithm:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230919223127.png" style="zoom:80%;" /></p>

<p>how does this help <em>sort</em> the array?</p>

<ol>
  <li>the <strong>pivot element already winds up in its rightful position</strong>,</li>
  <li>partitioning has <strong>reduced the size of this problem</strong>: sorting the elements less than the pivot (which conveniently occupy their own subarray) and the elements greater than the pivot (also in their own subarray).</li>
</ol>

<p>After recursively sorting the elements in each of these two subarrays, the algorithm is done</p>

<p>Therefore the algorithm is simply:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">quick_sort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">A</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">pivot</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
    <span class="n">A_1</span><span class="p">,</span> <span class="n">A_2</span> <span class="o">=</span> <span class="n">partition</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
    <span class="n">A_1_sorted</span> <span class="o">=</span> <span class="n">quick_sort</span><span class="p">(</span><span class="n">A_1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">A_1</span><span class="p">))</span> 
    <span class="n">A_2_sorted</span> <span class="o">=</span> <span class="n">quick_sort</span><span class="p">(</span><span class="n">A_2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">A_2</span><span class="p">))</span>
    <span class="c1"># if you can sort in place, you don't need this
</span>  <span class="k">return</span> <span class="n">A_1_sorted</span> <span class="o">+</span> <span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="o">+</span> <span class="n">A_2_sorted</span>
</code></pre></div></div>

<p>Even though the quick runtime analysis above gives the same result as <code class="language-plaintext highlighter-rouge">merge_sort</code>, the <code class="language-plaintext highlighter-rouge">quick_sort</code> algorithm feels a bit different. This is because the order of operations is different. In <code class="language-plaintext highlighter-rouge">merge_sort</code>, the recursive calls are performed first, followed by the combine step, <code class="language-plaintext highlighter-rouge">merge</code>. In <code class="language-plaintext highlighter-rouge">quick_sort</code>, the <strong>recursive calls occur after partitioning</strong>, and their results don’t need to be <code class="language-plaintext highlighter-rouge">merge</code>d at all!</p>

<p>But first of all, is this even correct? Here we prove it formally using induction, which is very suitable for recursive algorithms.</p>

<hr />

<p><em>Proof of Correctness</em>: We will prove by induction. Let $P(n)$ denote the statement “for any array $A$ of length $n$, <code class="language-plaintext highlighter-rouge">quick_sort(A, n)</code> returns a correctly sorted array”.</p>

<ol>
  <li>Base case: $P(1)$ is trivially true, as the array is already sorted.</li>
  <li>Inductive hypothesis: assume $P(k)$ is true for all $k &lt; n$, for any $n &gt; 1$.</li>
  <li>Induction step. Now we need to imagine an input of $P(n)$. First, we note that the pivot element $p$ is already in the right sorted position. Then, we note that since <code class="language-plaintext highlighter-rouge">A_1</code> and <code class="language-plaintext highlighter-rouge">A_2</code> are subarrays with size at most $n-1$, this means that <code class="language-plaintext highlighter-rouge">A_1_sorted</code> and <code class="language-plaintext highlighter-rouge">A_2_sorted</code> are correctly sorted by the induction hypothesis. Therefore, the concatenation of <code class="language-plaintext highlighter-rouge">A_1_sorted</code>, <code class="language-plaintext highlighter-rouge">p</code>, and <code class="language-plaintext highlighter-rouge">A_2_sorted</code> is also correctly sorted.</li>
</ol>

<h2 id="in-place-partition">In-Place Partition</h2>

<p>To sort the array in place using <code class="language-plaintext highlighter-rouge">quick_sort</code>, we just need a routine that can partition the array in place. This is a bit tricky, but it is possible to do this in <strong>a single scan</strong> over the array, <strong>while doing it in-place</strong>.</p>

<blockquote>
  <p><em>Key Idea</em>: while scanning through the array, we can urge to keep the following <strong>invariant</strong>:</p>

  <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230919225947.png" style="zoom:100%;" /></p>

  <p>where to put the pivot element to the first position is just a swap in $O(1)$ during preprocessing. If we can check each new element in the unpartitioned part and <strong>swap it to the correct partition</strong>, then we can <mark>maintain this invariant = correctness</mark>!</p>
</blockquote>

<p>This is easiest to first go through an example. Consider an input:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230919230212.png" style="zoom:100%;" /></p>

<p>where we consider the invariant formally to be:</p>

<blockquote>
  <p><strong>Invariant</strong>: all elements between the pivot and $i$ are <em>less than</em> the pivot (the $&lt; p$ partition), and all elements between $i$ and $j$ are <em>greater than</em> the pivot (the $&gt; p$ partition). This means that:</p>
  <ul>
    <li>$i$ represent the boundary between the $&lt; p$ and $&gt; p$ partitions, and</li>
    <li>$j$ represent the boundary for yet unseen elements.</li>
  </ul>
</blockquote>

<ol>
  <li>We initialize $i,j$ to be right next to the pivot (first) element. As there is no element between $i$ and $j$ or between the pivot and $i$, the invariant is trivially satisfied.</li>
  <li>At each iteraction, we look at a new element and consider what to do to maintain the invariant:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230919230632.png" style="zoom:100%;" />
in this case $8$ is larger than the pivot and invariant is maintained.</li>
  <li>If the new element is smaller than the pivot. To maintain invraiant, we can <em>swap it with the first element after $i$ and then increment $i$</em>:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230919230757.png" style="zoom:90%;" /></li>
  <li>We continue increment $j$ to see the new element. If it is bigger than the pivot, we can just continue as the invariant is maintained.
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230919230942.png" style="zoom:100%;" /></li>
  <li>One last, example, now we see another element smaller than the pivot, so we need to swap and increment $i$:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230919231113.png" style="zoom:100%;" /></li>
</ol>

<p>Hence the pseudocode is:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">partition_inplace</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
  <span class="n">p</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># assuming pivot is the first element
</span>  <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)):</span>
    <span class="k">if</span> <span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">p</span><span class="p">:</span>
      <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
      <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
  <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># swap pivot to the correct position
</span>  <span class="k">return</span> <span class="n">A</span>
</code></pre></div></div>

<h2 id="randomized-quicksort">Randomized QuickSort</h2>

<p>Now, what about runtime? Again, the key step is how we choose the pivot element. Similar to <code class="language-plaintext highlighter-rouge">DSelect</code>, this will have a huge impact:</p>
<ul>
  <li>if we choose min/max of the array, we get $\Omega(n^{2})$ runtime (technically also $O(n^{2})$, but just to emphasize the slowness).</li>
  <li>if we choose the median of the array, we get $T(n) = 2 T( n / 2) + O(n) = O(n \log n)$ where the $O(n)$ cost would be calling <code class="language-plaintext highlighter-rouge">DSelct</code> to find the median.</li>
</ul>

<p>While the median is the best choice, it is also the most expensive to compute. Therefore, we will use a <strong>randomized</strong> version of <code class="language-plaintext highlighter-rouge">quick_sort</code> that chooses a random pivot element. This is a very simple modification to the algorithm, and we will show that it has <strong>average case $O(n \log n)$!</strong></p>

<blockquote>
  <p>Why on earth would you want to inject randomness into your algorithm? Aren’t algorithms just about the most deterministic thing you can think of? As it turns out, there are hundreds of computational problems for which randomized algorithms are faster, more eﬀective, or easier to code than their deterministic counterparts.</p>
</blockquote>

<p>To prove the average case runtime, let’s define some notations:</p>

<ul>
  <li>sample space $\Omega$: the set of all possible outcomes of some random experiment</li>
  <li>random variable $X$: a (numerical) measurement of the outcome if a random process, so $X: \Omega \to \R$</li>
  <li>$P(\omega)$ is the probability of getting a particular outcome $\omega \in \Omega$.</li>
</ul>

<p>In the case of <code class="language-plaintext highlighter-rouge">quick_sort</code>, we have:</p>

<ul>
  <li>$\Omega$ being the set of all possible outcomes caused by some random (sequence of) choice of pivot element. (note that it is <em>not</em> defined on the length of the array)</li>
  <li>$X=RT$ that we care about is the runtime of this randomized <code class="language-plaintext highlighter-rouge">quick_sort</code> <em>given</em> a sequence of pivot choices. I.e. given $w \in \Omega$, we get a deterministic runtime $RT(\omega)$.</li>
</ul>

<p>So our goal is to find:</p>

\[\mathbb{E}[RT] = \sum_{\omega \in \Omega} P(\omega) RT(\omega)\]

<p>But this $RT(\omega)$ is hard to compute. Taking a look at the algorithm, we notice that we can simplify this random variable to:</p>

<blockquote>
  <p><strong>Lemma</strong>: For every input array $A$ of length $n \ge 2$ and every pivot sequence $\omega$:</p>

\[RT(\omega) \le a \cdot C(\omega)\]

  <p>for some constant $a &gt; 0$, and $C$ denote the random variable equal to the <strong>total number of comparisons made between pairs of input elements performed by <code class="language-plaintext highlighter-rouge">quick_sort</code></strong> with a given sequence of pivot choices.</p>
</blockquote>

<p>See the book chapter 5.5 for more details, but on a high level: the main operation in <code class="language-plaintext highlighter-rouge">quick_sort</code> is the <code class="language-plaintext highlighter-rouge">partition</code> call, and that is where the comparisons are made.</p>

<p>But $C$ is still a difficult random variable. The trick is that we can <mark>decompose it further</mark>. Let $X_{ij}$ denote the total number of times the elements $z_i$  and $z_j$ get compared in <code class="language-plaintext highlighter-rouge">quick_sort</code>:</p>

\[C(\omega) = \sum\limits_{i=1}^{n-1} \sum\limits_{j=i+1}^{n} X_{ij}(\omega)\]

<p>which literally represents the sum of all comparisons between pairs of elements in the array. Without loss of generality, let $z_i$, $z_j$ also be the $i$-th and $j$-th <em>smallest</em> elements in the array. Then, the question is how many times do we compare $z_i$ and $z_j$?</p>

\[X_{ij}(\omega) = \{0,1\}\]

<p>because comparisons only happen during <code class="language-plaintext highlighter-rouge">partition</code>:</p>
<ul>
  <li>if one of the elements is the pivot, then they can be compared at most once (and then they will be separated by the pivot and sent to different partitions)</li>
  <li>after they are separated, they will never be compared again.</li>
</ul>

<p>Now the real trick is to use the <strong>linearity of expectation</strong>:</p>

<blockquote>
  <p><strong>Linearity of Expectation</strong>: For any random variables $X_1, X_2, \dots, X_n$ and any constants $a_1, a_2, \dots, a_n$:</p>

\[\mathbb{E}[a_1 X_1 + a_2 X_2 + \dots + a_n X_n] = a_1 \mathbb{E}[X_1] + a_2 \mathbb{E}[X_2] + \dots + a_n \mathbb{E}[X_n]\]

  <p>In other words, the expectation of a sum of random variables is the sum of their expectations. Note that this is true even if the random variables are not independent.</p>
</blockquote>

<p>Then we compute the expectation of $C$:</p>

\[\begin{aligned}
\mathbb{E}[C] &amp;= \mathbb{E} \left[ \sum\limits_{i=1}^{n-1} \sum\limits_{j=i+1}^{n} X_{ij} \right] \\
&amp;= \sum\limits_{i=1}^{n-1} \sum\limits_{j=i+1}^{n} \mathbb{E}[X_{ij}] \\
&amp;= \sum\limits_{i=1}^{n-1} \sum\limits_{j=i+1}^{n} P(X_{ij} = 1) \\
&amp;= \sum\limits_{i=1}^{n-1} \sum\limits_{j=i+1}^{n} P(\text{did compare $z_i$ and $z_j$ in QuickSort})
\end{aligned}\]

<blockquote>
  <p><strong>Lemma</strong> If $z_i$ and $z_j$ denote the $i$-th and $j$-th smallest elements in the array, with $i &lt; j$, then the probability that they are compared in <code class="language-plaintext highlighter-rouge">quick_sort</code> is:</p>

\[P(\text{did compare $z_i$ and $z_j$ in QuickSort}) = \frac{2}{j-i+1}\]

</blockquote>

<p>Proof Sketch: Consider fixing $z_i$, $z_j$ with $i &lt; j$, and let some pivot element $z_k$ be chosen during the <em>first recursive call to <code class="language-plaintext highlighter-rouge">quick_sort</code></em>. What happens next?</p>
<ol>
  <li>if $z_k$ is smaller than $z_i$ or bigger than $z_j$, then $z_i, z_{i+1}, …, z_{j}$ will be in the same partition, and will be sent to the next recursive call. They <em>might</em> be compared against in the future, we don’t know yet.</li>
  <li>if $z_k$ happens to be between $z_i$ and $z_j$, then $z_i$ and $z_j$ will be separated by the pivot, and <strong>are not and will never</strong> be compared again.
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230919235354.png" style="zoom:100%;" /></li>
  <li>if $z_k$ happens to be $z_i$ or $z_j$, then they will be <strong>compared once</strong>, and then separated by the pivot, and <strong>are not and will never</strong> be compared again.</li>
</ol>

<p>Therefore, the first condition is just a “placeholder” that will eventually lead to the second or third conditions. So the probability of $z_i$ and $z_j$ being compared is equivalent to:</p>

\[P(\text{$z_i$ or $z_j$ is chosen as the pivot before any other element in $z_{i+1}, ..., z_{j-1}$}) = \frac{2}{j-i+1}\]

<p>Finally we can compute the expectation of $C$ (hence the average runtime):</p>

\[\begin{aligned}
\mathbb{E}[\cdot C]
&amp;= \sum\limits_{i=1}^{n-1} \sum\limits_{j=i+1}^{n} P(\text{did compare $z_i$ and $z_j$ in QuickSort}) \\
&amp;= \sum\limits_{i=1}^{n-1} \sum\limits_{j=i+1}^{n} \frac{2}{j-i+1} \\
&amp;\le \sum\limits_{i=1}^{n-1} \left( 2 \sum\limits_{k=2}^{n} \frac{1}{k} \right) \\
&amp;= 2n \sum\limits_{k=2}^{n} \frac{1}{k} \\
&amp;\le 2n \log n = O(n \log n) 
\end{aligned}\]

<p>where</p>
<ul>
  <li>
    <p>the third inequality comes from the fact that the largest sum we can get is when $i=1$:</p>

\[\sum\limits_{j=i+1}^{n} \frac{1}{j-i+1} = \frac{1}{2} + \frac{1}{3} + ... + \left( \frac{1}{n} \right)\]
  </li>
  <li>
    <p>the last inequality can be proven graphically:</p>

    <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230920000352.png" style="zoom:80%;" /></p>

    <p>where the sum covers the green highlighted rectangles, and the intergral covers the entire area under the blue curve.</p>
  </li>
</ul>

<h1 id="graphs-the-basics">Graphs: The Basics</h1>

<p>Here we just go over some basics and notations, so that we are consistent for the rest of the course.</p>

<blockquote>
  <p><strong>Representing Graphs</strong>: Let $G=(V,E)$ consist of vertices and edges. Let $n$ be the number of <em>verticies</em> and $m$ be the number of <em>edges</em>.</p>
  <ul>
    <li>note that if $G$ is undirected, then you will have $m \le { n \choose 2 }$</li>
    <li>note that if $G$ is directed, then you will have $m \le 2 { n \choose 2 } = n(n-1)$</li>
  </ul>
</blockquote>

<p>Note that in either case, we have $m \le n^{2}$. Therefore in some proofs you will see, we might just swap $\log m$ with $\log n$ since:</p>

\[\log m \le \log n^{2} = 2 \log n \implies O(\log m) \le O(\log n)\]

<blockquote>
  <p><strong>Tree</strong> a connected graph that has no cycles = have $n$ vertices and $n-1$ edges. For example:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230921225225.png" style="zoom:75%;" /></p>
</blockquote>

<blockquote>
  <p><strong>Ingredients for Adjacency List</strong>: the adjacency list <em>representation of graphs</em> is the dominant one we will use in this course. The main ingredients for representing such a list include:</p>
  <ul>
    <li>an array containing all the vertices</li>
    <li>an array containing all the edges</li>
    <li>for each edge, a pointer to each of its two endpoints</li>
    <li>for each vertex, a pointer to each of its incident edges
so visually, something like this:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230921230015.png" style="zoom:100%;" />
where essentially we have $V_0$ having neighbor [2,3,4], and $V_2$ having neighbor [1,8], etc. Or alternatively, you can think of it as:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230922215707.png" style="zoom:30%;" /></li>
  </ul>
</blockquote>

<p>But how much <em>memory</em> do we need to represent a adjaceny list? Well, we need:</p>
<ul>
  <li>$O(n)$ space for the array of vertices</li>
  <li>$O(m)$ space for the array of edges</li>
  <li>$2m = O(m)$ space for the pointers to the edges’ endpoints. This is because each edge has two endpoints, hence $2m$.</li>
  <li>$2m = O(m)$ space for the pointers to the vertices’ incident edges. If you think about this, this is the same as the previous point, as the pointers to the edges’ endpoints are the same as (reversing) the pointers to the vertices’ incident edges.</li>
</ul>

<p>Therefore we need <strong>in total $O(n+m)$ space to represent a graph using adjaceny list</strong>. Note that this is more efficient than adjaceny matrix, which need $O(n^2)$ space:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230921225855.png" style="zoom:70%;" /></p>

<h2 id="breadth-first-search-and-depth-first-search">Breadth-First Search and Depth-First Search</h2>

<p>Both BFS and DFS would work whether if the graph is directed or undirected. On a high level, recall that</p>

<blockquote>
  <p>BFS Idea: start a vertex $s$ (layer 0), we want to explore all neighbors (layer 1), and repeat this process (reaching layer 2, layer 3, etc.) until we have explored all vertices.</p>
</blockquote>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230921230806.png" style="zoom:70%;" /></p>

<p>So how do we implement it? The trick is to use a queue (FIFO) to keep track of the vertices still need to visit in the order of their discovery. The pseudocode is as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">bfs</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
  <span class="c1"># let G be the adjaceny list representation of the graph
</span>  <span class="c1"># let s be the starting vertex
</span>  <span class="n">explored</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
  <span class="n">Q</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>
  <span class="n">Q</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>  <span class="c1"># initialize the queue with the starting vertex
</span>  <span class="k">while</span> <span class="n">Q</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">empty</span><span class="p">:</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">Q</span><span class="p">.</span><span class="n">dequeue</span><span class="p">()</span>  <span class="c1"># dequeue the first vertex in the queue
</span>    <span class="k">for</span> <span class="n">each</span> <span class="n">edge</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span> <span class="ow">in</span> <span class="n">G</span><span class="p">.</span><span class="n">adjacentEdges</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>  <span class="c1"># explore all neighbors of v
</span>      <span class="k">if</span> <span class="ow">not</span> <span class="n">explored</span><span class="p">[</span><span class="n">w</span><span class="p">]:</span>
        <span class="n">explored</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">Q</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>  <span class="c1"># enqueue the neighbor at the end
</span></code></pre></div></div>

<blockquote>
  <p>DFS Idea: when you reach a vertex, immediately start exploring its (not yet visited) neighbors and backtracking only when necessary (i.e. when you have no more neighbors to explore).</p>
</blockquote>

<p>The most intuitive explanation is to talk about an example. Suppose we are given a graph, and the adjaceny list happened to give $s \to a$ before $s \to b$, then starting from $s$ we would go:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230921231717.png" style="zoom:80%;" /></p>

<p>where the “frontier” marks the “borderline” between the explored and unexplored vertices. To make things interesting, let’s say the adjacency list had $c \to d$ before $c\to e$. This would then give us:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230921231916.png" style="zoom:80%;" /></p>

<p>Now there is a problem: at vertex $e$ we have <strong>no unvisited neighbors</strong>. So DFS is forced to retreat to its previous vertex $d$: and now, it discovered one unexplored vertex $b$.</p>

<p>After this, DFS collapse quickly as each vertex has no unvisited neighbors, and DFS will eventually retreat all the way to $s$. <mark>If all neighbors of $s$ are visited</mark>, then DFS is done.</p>

<p>Therefore the pseudocode is as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">dfs</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
  <span class="c1"># let G be the adjaceny list representation of the graph
</span>  <span class="c1"># let s be the starting vertex
</span>  <span class="n">explored</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># mark all vertices as unexplored
</span>  <span class="n">S</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
  <span class="n">S</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>  <span class="c1"># initialize the stack with the starting vertex
</span>  <span class="k">while</span> <span class="n">S</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">empty</span><span class="p">:</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">S</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>  <span class="c1"># pop the first vertex in the stack
</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">explored</span><span class="p">[</span><span class="n">v</span><span class="p">]:</span>
      <span class="n">explored</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
      <span class="k">for</span> <span class="n">each</span> <span class="n">edge</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span> <span class="ow">in</span> <span class="n">G</span><span class="p">.</span><span class="n">adjacentEdges</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>  <span class="c1"># explore all neighbors of v
</span>        <span class="n">S</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>  <span class="c1"># push the neighbor at the top
</span></code></pre></div></div>

<p>Why stack? If you think about the more “natural” recursive implementation, you will realize that essentially you are using a call <em>stack</em>. So the iterative implementation is just a “translation” of the recursive implementation.</p>

<blockquote>
  <p><strong>Runtime of BFS/DFS</strong>: The running time for both algorithms is $O(n + m)$ being <mark>linear in the size of the graph</mark>. This is because both BFS/DFS will:</p>
  <ul>
    <li>examine each vertex at most once</li>
    <li>examine each edge at most twice (once for each endpoint)
therefore the total number of operations is $O(n + 2m) = O(n + m)$.</li>
  </ul>
</blockquote>

<h2 id="generic-search">Generic Search</h2>

<p>Is BFS and DFS correct? How do we prove that its runtime is $O(n+m)$? The answer is to realize that they both fall into the pattern of a generic search algorithm:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">generic_search</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
  <span class="c1"># let G=(V, E) be the adjaceny list representation of the graph
</span>  <span class="c1"># let s be the starting vertex
</span>  <span class="n">explored</span> <span class="o">=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span> <span class="c1"># mark s as explored, others as unexplored
</span>  <span class="k">while</span> <span class="n">there</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">edge</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">w</span><span class="p">)</span> <span class="ow">in</span> <span class="n">E</span> <span class="k">with</span> <span class="n">v</span> <span class="n">explored</span> <span class="ow">and</span> <span class="n">w</span> <span class="n">unexplored</span><span class="p">:</span>
    <span class="n">choose</span> <span class="n">some</span> <span class="n">such</span> <span class="n">edge</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">w</span><span class="p">)</span>
    <span class="n">explored</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
</code></pre></div></div>

<p>To see why this could contain both BFS and DFS, consider the following example graph:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230923155032.png" style="zoom:100%;" /></p>

<ol>
  <li>initially only our home base $s$ is marked as explored.</li>
  <li>In the fist iteration of the while loop, two edges meet the loop condition: $( s, u )$ and $( s, v )$. The GenericSearch algorithm chooses one of these edges — $(s, u)$, say — and marks $u$ as explored.</li>
  <li>In the second iteration of the loop, there are again two choices: $( s, v )$ and $( u, w )$. The algorithm might choose $( u, w )$ being DFS-like or $( s, v )$ being BFS-like.</li>
</ol>

<blockquote>
  <p><strong>Correctness of Generic Graph Search</strong>: At the conclusion of the <code class="language-plaintext highlighter-rouge">generic_search</code>, a vertex is $v \in V$ is explored if and only if there is a path from $s$ to $v$ in $G$.</p>
  <ul>
    <li>this also means that every vertex $v$ is explored</li>
    <li>for BFS/DFS, it is then easy to see that each vertex is also explored <em>only once</em> (if reachable)</li>
  </ul>
</blockquote>

<p><em>Proof</em>: This is IFF proof, so we need to argue from both directions.</p>

\[\text{$v$ is explored in generic\_search} \implies \text{there is a path from $s$ to $v$ in $G$}\]

<p>this is trivially true, as the only way we can discover $v$ is by following paths from $s$.</p>

\[\text{there is a path from $s$ to $v$ in $G$} \implies \text{$v$ is explored in generic\_search}\]

<p>This basically says that the <code class="language-plaintext highlighter-rouge">generic_search</code> algorithm didn’t miss any vertex. We can prove this by contradiction: let there be a path from $s\leadsto v$, but <mark>`generic_search` halted and missed it</mark>. The intuition is that this cannot be, because we checked every edge given a vertex. More formally, let $S \subseteq V$ be the set of vertices just now marked as explored by the algorithm. Then vertex $s \in S$ and, by assumption, $v$ does not. But since there is a path from $s \leadsto v$, then there must exist a path from a vertex in $S$ going to one outside $S$ (reaching $v$). Then, our algorithm would have picked this during the <code class="language-plaintext highlighter-rouge">while</code> loop, and the algorithm would have at least explored one more vertex instead of halting, and would have eventually reached $v$. This is a contradiction, as we assumed that the algorithm halted and missed $v$.</p>

<h2 id="computing-connected-components">Computing connected Components</h2>

<p>This is one typical application of BFS/DFS. Let’s use BFS here.</p>

<p>Recall that</p>

<blockquote>
  <p><strong>Connected Component</strong> is a maximal set of vertices $S \subseteq V$ such that for every pair of vertices $u,v \in S$, there is a path from $u$ to $v$ in $G$. Visually:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230921233123.png" style="zoom:70%;" /></p>
</blockquote>

<p>Consider $G=(V,E)$ being an undirected graph, and consider the task being to identify all connected components of $G$ (e.g. assign each vertex <code class="language-plaintext highlighter-rouge">v</code> a label <code class="language-plaintext highlighter-rouge">cc(v)</code> indicating which connected component it belongs to).</p>

<p>The idea is simple: we can use an outer loop to make a single pass over the vertices, and invoke BFS as a subroutine whenever we encounter an unexplored vertex. The pseudocode is as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">ucc</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
  <span class="c1"># let G be the adjaceny list representation of the graph
</span>  <span class="n">cc</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># mark all vertices as unexplored
</span>  <span class="n">num_cc</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># number of connected components
</span>  <span class="k">for</span> <span class="n">each</span> <span class="n">vertex</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">G</span><span class="p">.</span><span class="n">vertices</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">explored</span><span class="p">[</span><span class="n">v</span><span class="p">]:</span>
      <span class="n">cc</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>  <span class="c1"># label the connected component
</span>      <span class="n">num_cc</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># increment the number of connected components
</span>
      <span class="c1">### BFS subroutine
</span>      <span class="n">Q</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>
      <span class="n">Q</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>  <span class="c1"># initialize the queue with the starting vertex
</span>      <span class="k">while</span> <span class="n">Q</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">empty</span><span class="p">:</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">Q</span><span class="p">.</span><span class="n">dequeue</span><span class="p">()</span>  <span class="c1"># dequeue the first vertex in the queue
</span>        <span class="k">for</span> <span class="n">each</span> <span class="n">edge</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="ow">in</span> <span class="n">G</span><span class="p">.</span><span class="n">adjacentEdges</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>  <span class="c1"># explore all neighbors of w
</span>          <span class="k">if</span> <span class="ow">not</span> <span class="n">explored</span><span class="p">[</span><span class="n">x</span><span class="p">]:</span>
            <span class="n">explored</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">cc</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>  <span class="c1"># assign the same connected component to x
</span>            <span class="n">Q</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># enqueue the neighbor at the end
</span>  <span class="k">return</span> <span class="n">cc</span>
</code></pre></div></div>

<p>What’s the runtime? Although this <em>looks like</em> looping over $O(m+n)$ which is the cost of BFS, in fact we note that <mark>BFS/DFS$(G,s)$ is technically linear in the size of the connected component of $s$</mark>. Therefore the runtime is:</p>

\[\underbrace{O(n)}_{\text{looping over every vertex}} + O\left( \sum \text{connected component's size} \right) = O(n) + O(n + m) = O(n + m)\]

<h2 id="topological-sort">Topological Sort</h2>

<p>Here is another classic <em>application</em> of DFS. Imagine that you have a bunch of tasks to complete, and there are <strong>precedence constraints</strong>, meaning that you cannot start some of the tasks until you have completed others. ne application of topological orderings is to sequencing tasks so that all precedence constraints are respected. More formally</p>

<blockquote>
  <p><strong>Topological Orderings</strong>: let $G=(V,E)$ be a <mark>directed</mark> graph. A topological ordering of $G$ is an assignment $f(v)$  of every vertex $v \in V$ to a different number such that:</p>

\[\text{for every }v\to w \text{ edge}, f(v) &lt; f(w)\]

  <p>i.e. all of $G$’s directed edges should travel forward, with the arrow heading pointing to a vertex with a higher number.</p>
</blockquote>

<p>Visually, consider the following example:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230926223914.png" style="zoom:100%;" /></p>

<p>and there are two ways to topologically sort this graph:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230926223904.png" style="zoom:100%;" /></p>

<p>You can visualize a topological ordering by <strong>plotting</strong> the vertices in order of their f-values. In a topological ordering, <strong>all edges of the graph are directed from left to right</strong>.</p>

<blockquote>
  <p><strong>Note</strong> that this means, it is impossible to topologically order the vertices of a graph that contains a <mark>directed cycle</mark>. Therefore, in general a topological order exists only for a directed graph without any directed cycles - <mark>a directed acyclic graph</mark> (DAG).</p>
</blockquote>

<p>In fact</p>

<blockquote>
  <p><strong>Theorem 8.6</strong>: Every DAG has a topological ordering.</p>
</blockquote>

<p>To show this, first realize that</p>

<blockquote>
  <p><strong>Theorem 8.7</strong>: Every DAG has a source.</p>
  <ul>
    <li>proof: if you keep following incoming edges backward out of an arbitrary vertex of a directed acyclic graph, you’re bound to eventually reach a source vertex. Otherwise, there would be a directed cycle.</li>
    <li>i.e.: if you DFS and is stuck in a DFS, then there is a cycle in your graph.``</li>
  </ul>
</blockquote>

<p>where:</p>
<ul>
  <li>A <strong>source vertex</strong> of a directed graph is a vertex with no incoming edges.</li>
  <li>Analogously, a <strong>sink vertex</strong> is one with no outgoing edges.</li>
</ul>

<p>Then, we can prove Theorem 8.6 very easily. Let $G$ be a directed acyclic graph with $n$ vertices. The task is to assign $f$-values to vertices in an increasing order:</p>
<ol>
  <li>the source vertex will be assigned 1</li>
  <li>obtain $G’$ by removing the source vertex and all its outgoing edges. Note that this cannot produce a directed cycle, as deleting stuff can’t create new cycles</li>
  <li>repeat from step 1 on $G’$</li>
</ol>

<p>So how to do compute a topological sorting, i.e. output a <strong>topological ordering</strong> of the vertices of a DAG $G$?</p>

<ul>
  <li>the proof above naturally leads to an algorithm: a loop ($O(n)$) over each vertex where we find the source ($O(n)$), and then deleting it to repeat. This gives us $O(n^2)$.</li>
  <li>next up: a slicker solution via DFS resulting in $O(n+m)$.</li>
</ul>

<p>First we show the algorithm, the high level idea is simple: we use DFS to dive to the sink and assign the lowest ordering to it, but also <strong>assign things during backtracking!</strong>. We then mark it as explored (i.e. as if we removed the vertex from G) and repeat.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">curLabel</span> <span class="o">=</span> <span class="o">|</span><span class="n">V</span><span class="o">|</span>  <span class="c1"># tracks the ordering
</span><span class="n">f</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># topological ordering
</span>
<span class="k">def</span> <span class="nf">topo_sort</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
  <span class="c1"># let G = (V, E) be the adjaceny list representation of the graph
</span>  <span class="c1"># let s be the starting vertex
</span>  <span class="n">explored</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># mark all vertices as unexplored
</span>  <span class="k">for</span> <span class="n">each</span> <span class="n">vertex</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">G</span><span class="p">.</span><span class="n">vertices</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">explored</span><span class="p">[</span><span class="n">v</span><span class="p">]:</span>
      <span class="n">dfs_topo</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">explored</span><span class="p">)</span>
  <span class="k">return</span>

<span class="k">def</span> <span class="nf">dfs_topo</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">explored</span><span class="p">):</span>
  <span class="k">global</span> <span class="n">curLabel</span><span class="p">,</span> <span class="n">f</span>

  <span class="n">explored</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
  <span class="k">for</span> <span class="n">each</span> <span class="n">edge</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span> <span class="ow">in</span> <span class="n">s</span> <span class="n">outgoing</span> <span class="n">adjaceny</span> <span class="nb">list</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">explored</span><span class="p">[</span><span class="n">w</span><span class="p">]:</span>
      <span class="n">dfs_topo</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">explored</span><span class="p">)</span>
  <span class="n">f</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">curLabel</span>  <span class="c1"># assign the ordering
</span>  <span class="n">curLabel</span> <span class="o">-=</span> <span class="mi">1</span>  <span class="c1"># decrement the ordering
</span>  <span class="k">return</span>
</code></pre></div></div>
<p>note that <code class="language-plaintext highlighter-rouge">topo_sort</code> doesn’t need to us to start at a particular vertex. We can start at any vertex, and the algorithm will still work. (Basically the algorithm dives as deep as possible, and <strong>assign that deepest vertex</strong> (regardless which starting vertex you choose) <strong>with $f(\cdot) = \vert V\vert$</strong>.)</p>

<p>Correctness: first of all, it is obvious to see that:</p>
<ul>
  <li>every vertex $v$ is assigned a unique number $f(v)$, as each is called by <code class="language-plaintext highlighter-rouge">dfs_topo</code> only once.</li>
  <li>to argue why the returned <code class="language-plaintext highlighter-rouge">f</code> must be a topological order, we need to show <strong>for any arbitrary edge $(v,w)$ such that $v\to w$, we have $f(v) &lt; f(w)$</strong>.</li>
</ul>

<hr />

<p><em>Proof</em> if there is an edge $(v,w)$, then there are two cases in running <code class="language-plaintext highlighter-rouge">topo_sort</code>:</p>
<ol>
  <li>if $v$ is explored before $w$, i.e. we <code class="language-plaintext highlighter-rouge">dfs_topo</code> is invoked with vertex $v$ before $w$ is explored. Then as $v \to w$ is reachable, we will get a call stack of [<code class="language-plaintext highlighter-rouge">dfs_topo(v)</code> -&gt; <code class="language-plaintext highlighter-rouge">dfs_topo(w)</code>]. Since the nature of recursive call will mean <code class="language-plaintext highlighter-rouge">dfs_topo(w)</code> will terminate first, it will be assigned a higher ordering than <code class="language-plaintext highlighter-rouge">dfs_topo(v)</code>. Therefore $f(v) &lt; f(w)$.</li>
  <li>if $w$ is explored before $v$, then it means there <strong>cannot</strong> be a path from $w$ <strong>back</strong> to $v$ (because we already have $v \to w$ and we know the graph is a DAG). Therefore, the call <code class="language-plaintext highlighter-rouge">dfs_topo(w)</code> will terminate without calling <code class="language-plaintext highlighter-rouge">dfs_topo(v)</code>. Then, as <code class="language-plaintext highlighter-rouge">topo_sort</code> will eventually call <code class="language-plaintext highlighter-rouge">dfs_topo(v)</code> <strong>later</strong>, it means $v$ will get a lower ordering. Hence $f(v) &lt; f(w)$.</li>
</ol>

<hr />

<p>Runtime: runs in linear time $O(n+m)$, as it is just DFS with a little extra bookkeeping:</p>
<ul>
  <li>it explores each edge only once (from its tail), only performs a constant amount of work per edge/vertex</li>
  <li>therefore, the runtime is $O(n+m)$</li>
</ul>

<h2 id="computing-strongly-connected-components">Computing Strongly Connected Components</h2>

<p>In short, while it didn’t matter much for undirected graph, for directed graph having a <strong>connected component</strong> makes things more complicated. First, recall that a connected component for <em>undirected</em> graph is defined as maximal regions within which you can get from anywhere to anywhere else in the region. For directed graph, consider</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230926232541.png" style="zoom:80%;" /></p>

<p>Following the logic, the answer should be zero.</p>

<blockquote>
  <p><strong>Strongly Connected Component (SCC)</strong> a maximal set of vertices $S \subseteq V$ such that there is a directed path from any vertex in $S$ to any other vertex in $S$.</p>
</blockquote>

<p>For example</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230926232718.png" style="zoom:60%;" /></p>

<p>First of all, why would <code class="language-plaintext highlighter-rouge">ucc</code> not work? Consider evoking BFS on the following vertices</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230926233006.png" style="zoom:60%;" /></p>

<p>first, notice all the edges are organized to go mainly from left to right. In the case on the left, we would get a <em>wrong result</em>: BFS will discover every vertex and mark them as the same connected component. In the case on the right, we would get a <em>correct result</em>. This indicates that graph search can uncover strongly connected components, <mark>provided you start from the right place</mark>. But how? The key observation is that we want to first start from a <mark>sink SCC</mark>, i.e. the SCC with no outgoing edges to other SCCs. Then, we can go in a reverse topological order, plucking off sink SCCs one by one.</p>

<blockquote>
  <p><strong>Key Lemma</strong>: the SCC Meta-Graph is directed acyclic. Visually this is simple to see:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230926235651.png" style="zoom:15%;" />
and the argument is also simple. If two meta SCC are not acyclic, then you would have collapsed them into one, i.e., the two meta SCC were not maximal at the first place.</p>
  <ul>
    <li>this lemma is actually very important. This means that all we need to do is to find <mark>one vertex</mark> in a <mark>sink SCC</mark>, run BFS/DFS to label all vertices it can reach (and mark them as explored), and repeat</li>
    <li>the above works because for a directed acyclic graph + using a sink SCC, you cannot get out of that sink SCC.</li>
  </ul>
</blockquote>

<p>On a high level, the arguments above in the lemma is pretty much what we will do, except you might be a bit confused by the graph reversing step</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># sktech of Kosaraju’s algorithm
</span><span class="k">def</span> <span class="nf">kosaraju_idea</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
  <span class="n">G_rev</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>  <span class="c1"># reverse the graph, i.e. reverse all edges
</span>  <span class="n">dfs_loop</span><span class="p">(</span><span class="n">G_rev</span><span class="p">),</span> <span class="n">let</span> <span class="n">f</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="s">"finishing time"</span> <span class="n">of</span> <span class="n">DFS</span> <span class="n">on</span> <span class="n">a</span> <span class="n">vertex</span> <span class="n">v</span>
  <span class="n">dfs_loop</span><span class="p">(</span><span class="n">G</span><span class="p">),</span> <span class="n">using</span> <span class="n">f</span> <span class="n">to</span> <span class="n">process</span> <span class="n">vertices</span> <span class="ow">in</span> <span class="n">decreasing</span> <span class="n">order</span>  <span class="c1"># i.e. start from the sink vertex
</span>  <span class="k">return</span> <span class="n">vertices</span> <span class="k">with</span> <span class="n">their</span> <span class="n">labels</span>
</code></pre></div></div>

<p>while yes, the second relates to some kind of topological order, and third step relates to us wanting to get a reverse topological order before diving DFS to label the vertices. But there are a few caveat:</p>
<ul>
  <li>second step did something on a <strong>reversed</strong> graph. Why?</li>
  <li><strong>we thought about the <code class="language-plaintext highlighter-rouge">topo_sort</code> algorithm only in DAGs</strong>, and here we have a <strong>general directed graph</strong>.</li>
  <li>the second and third is <em>not equivalent</em> to <code class="language-plaintext highlighter-rouge">topo_sort</code> of a normal <code class="language-plaintext highlighter-rouge">G</code> and then start from the sink vertex.</li>
</ul>

<p>So what’s going on? First we show the full algorithm, and then we will illustrate how it works, and why it is correct.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">global</span> <span class="n">numSCC</span><span class="p">:</span> <span class="nb">int</span>

<span class="k">def</span> <span class="nf">Kosaraju</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
  <span class="c1"># let G = (V, E) be the adjaceny list representation of the graph
</span>  <span class="n">G_rev</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>  <span class="c1"># reverse the graph, i.e. reverse all edges
</span>  <span class="n">mark</span> <span class="nb">all</span> <span class="n">vertices</span> <span class="ow">in</span> <span class="n">G_rev</span> <span class="k">as</span> <span class="n">unexplored</span>

  <span class="c1"># first pass of DFS
</span>  <span class="c1"># computes f(v), the magical ordering
</span>  <span class="n">TopoSort</span><span class="p">(</span><span class="n">G_rev</span><span class="p">)</span>

  <span class="c1"># second pass of DFS
</span>  <span class="c1"># finds SCCs in reverse topological order
</span>  <span class="n">mark</span> <span class="nb">all</span> <span class="n">vertices</span> <span class="ow">in</span> <span class="n">G</span> <span class="k">as</span> <span class="n">unexplored</span>
  <span class="k">global</span> <span class="n">numSCC</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># number of SCCs, global variable
</span>  <span class="k">for</span> <span class="n">each</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">V</span><span class="p">,</span> <span class="ow">in</span> <span class="n">increasing</span> <span class="n">order</span> <span class="n">of</span> <span class="n">f</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">explored</span><span class="p">[</span><span class="n">v</span><span class="p">]:</span>
      <span class="n">numSCC</span> <span class="o">+=</span> <span class="mi">1</span>
      <span class="c1"># assign scc-values for all vertices in the SCC
</span>      <span class="n">dfs_scc</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">dfs_scc</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
  <span class="k">global</span> <span class="n">numSCC</span>
  <span class="n">explored</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
  <span class="n">scc</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">numSCC</span>
  <span class="k">for</span> <span class="n">each</span> <span class="n">edge</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span> <span class="ow">in</span> <span class="n">s</span> <span class="n">outgoing</span> <span class="n">adjaceny</span> <span class="nb">list</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">explored</span><span class="p">[</span><span class="n">w</span><span class="p">]:</span>
      <span class="n">dfs_scc</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
  <span class="k">return</span>
</code></pre></div></div>

<p>So, it turns out all the concern above will be addressed after thinking about this.</p>

<blockquote>
  <p><strong>Why reverse graph + topological sort?</strong></p>
</blockquote>

<p>What we want, in the end, is to <strong>find a vertex in a <em>sink SCC</em> of $G$</strong>. The hope with <code class="language-plaintext highlighter-rouge">topo_sort</code> is that, we recall, the vertex in the last position ($f(v)=\vert V\vert$) must be a sink vertex (hence inside sink SCC) of $G$. However, it was for DAGs. So are we lucky enough that this would hold for a general graph? The answer is sadly no. If we consider the following example where we started at vertex <code class="language-plaintext highlighter-rouge">1</code> (recall that <code class="language-plaintext highlighter-rouge">topo_sort</code> starts at random vertex):</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">correct source but wrong sink</th>
      <th style="text-align: center">correct source and correct sink</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230927012532.png" style="zoom:50%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230927012538.png" style="zoom:60%;" /></td>
    </tr>
  </tbody>
</table>

<p>where basically the left is made by trying to start at vertex 1 and wind up ending at vertex 4 during the first iteration, while the right is made by starting at vertex 1 and ends at vertex 8 during the first iteration of <code class="language-plaintext highlighter-rouge">topo_sort</code>. Although we couldn’t consistently find a vertex in a sink, it turns out we <strong>can consistently find a vertex in the source SCC</strong>. But in fact, the statement is even stronger: tThe topological order of the SCCs will <em>also be a topological ordering of the meta-graph</em>, if we label each SCC with the smallest $f$ of one of its vertices, i.e. formally</p>

<blockquote>
  <p><strong>Theorem 8.10</strong>: Topological Ordering of the SCCs. Let $G$ be a directed graph, with vertices ordered arbitrarily, and for each vertex $v \in V$ let $f(v)$ be the position of $v$ computed by <code class="language-plaintext highlighter-rouge">topo_sort</code>. Let $S_1, S_2$ denote two SCCs of $G$, and suppose $G$ has an edge $(v,w)$ with $v \in S_1$ and $w \in S_2$, then:</p>

\[\min_{x \in S_1} f(x) &lt; \min_{y \in S_2} f(y)\]

  <p>i.e. even if <code class="language-plaintext highlighter-rouge">topo_sort</code> is incorrect in this case globally for every vertex, it is still correct locally for the SCCs!.</p>
</blockquote>

<p>the proof is similar to the correctness of <code class="language-plaintext highlighter-rouge">topo_sort</code>. If we consider the following illustration:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230927014115.png" style="zoom:70%;" /></p>

<p>then there are two cases that can happen during <code class="language-plaintext highlighter-rouge">topo_sort</code> labeling all the vertices:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">topo_sort</code> explored and initialized a DFS from a vertex $s \in S_1$ before any vertex in $S_2$. But because we know vertices in a SCC can reach each other, then $s \leadsto v$, and since $v \to w$, then we can reach from $s$ to any vertex in $S_2$. Therefore, because <code class="language-plaintext highlighter-rouge">topo_sort</code> is a DFS/recursive call, the call <code class="language-plaintext highlighter-rouge">dfs_topo(s)</code> will not terminate until all the vertices in $S_2$ terminates. Therefore, $f(v)$ must also be smaller than $f(w)$.</li>
  <li><code class="language-plaintext highlighter-rouge">topo_sort</code> explored and initialized a DFS from a vertex $s \in S_2$ before any vertex in $S_1$. Then, <strong>because the meta-graph is directed acyclic</strong>, we are stuck in $S_2$, and $S_1$ will be unscathed. Since the counter for $f$ is a global variable, this means we will get a smaller $f$ for $S_1$ than $S_2$.</li>
</ul>

<p>The end result? We are sure that the <mark>first vertex resides in a source SCC</mark> if we do <code class="language-plaintext highlighter-rouge">topo_sort</code>. So to find a vertex in a sink SCC, all we need is to <mark>reverse the graph first</mark>.</p>

<hr />

<p>Finally, an example before going to the correctness and runtime discussion. We want to check that the magical reverse graph + <code class="language-plaintext highlighter-rouge">topo_sort</code> will indeed help us get vertices in a sink SCC, and so that the second pass of depth-first search discovers the SCCs in reverse topological order.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">$G_{rev}$ and compute $f(v)$</th>
      <th style="text-align: center">$G$ with computed $f(v)$</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230927015408.png" style="zoom:100%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230927015414.png" style="zoom:100%;" /></td>
    </tr>
  </tbody>
</table>

<p>Then, given the progress above (by reversing the graph and calling <code class="language-plaintext highlighter-rouge">topo_sort</code>), we continue to the second pass to DFS, which checks through vertices in increasing order:</p>

<ol>
  <li>first call to DFS-SCC is initiated at the vertex 1 with smallest $f$. (the vertex in a sink SCC!)</li>
  <li>then it will label all vertices $1,3,5$, and mark as done.</li>
  <li>the second smallest and third is with vertex 3, which is visited already.</li>
  <li>the third smallest is vertex 11, which is also (a vertex in) the second sink SCC.</li>
  <li>continues</li>
</ol>

<h3 id="correctness-and-runtime-of-kosarajus-algorithm">Correctness and Runtime of Kosaraju’s Algorithm</h3>

<p>The argument will be short as the proofs are mostly covered in the previous section.</p>

<p><strong>Correctness</strong>: each time we initiates a new call to <code class="language-plaintext highlighter-rouge">dsf_scc</code>, the algorithm discovers <em>exactly one new SCC</em> - the <em>sink SCC</em> relative to the not-yet-explored part of the graph.</p>

<p><strong>Runtime</strong>: each of the two passes of DFS does a constant number of operations per vertex or edge. Therefore, the runtime is $O(n+m)$.</p>

<h1 id="dijkstras-shortest-path-algorithm">Dijkstra’s Shortest Path Algorithm</h1>

<p>We’ve arrived at another one of computer science’s greatest hits: Dijkstra’s shortest-path algorithm.</p>

<blockquote>
  <p><strong>Assumptions with Dijkstra’s Algorithm</strong>: this algorithm works in any <em>directed graph with nonnegative edge length</em>.</p>
  <ul>
    <li>can we extend it to undirected graph? (Yes, by changing the ‘frontier’ condition)</li>
    <li>can we extend it to negative edge length? (No, but Bellman-Ford can)</li>
  </ul>
</blockquote>

<p><strong>Problem definition</strong>: consider a directed graph $G=(V,E)$, a starting vertex $s \in V$, and a nonnegative length $l_e$ for each edge $e \in E$. The goal is to compute the <strong>length of a shortest path $D(v)$ from $s$ to every other vertex $v$ in $G$</strong>.</p>

<blockquote>
  <p>Why can’t we use BFS? Remember that breadth-first search computes the minimum number of edges in a path from the starting vertex to every other vertex (i.e. we continue layer by layer). This is the special case of the single-source shortest path problem <strong>in which every edge has length 1</strong>.</p>
  <ul>
    <li>but then can’t we just think of an edge with a longer length $l&gt;1$ as a <em>path of edges</em> that each have length 1?
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230922003244.png" style="zoom:80%;" /></li>
    <li>Yes, in principle, you can solve the single-source shortest path problem by expanding + using BFS</li>
    <li>However, the problem with this is that it blows up the size of the graph</li>
  </ul>
</blockquote>

<h2 id="dijkstras-algorithm">Dijkstra’s Algorithm</h2>

<p>The idea of Dijkstra’s algorithm is to use a <strong>greedy</strong> approach: at each step, we will <strong>grow the frontier by one vertex</strong>. Overall it looks similar to BFS/DFS by iterating over the new vertices, but the clever part is <strong>how we choose which vertex to process next/is done</strong>.</p>

<p>Consider some example graph, where each edge $e$  has a length of $l_e$:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230922003934.png" style="zoom:80%;" /></p>

<p>Consider the pseudo-code</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">dijkstra</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
  <span class="c1"># let G = (V, E) be the adjaceny list representation of the graph
</span>  <span class="c1"># let s be the starting vertex
</span>  <span class="n">X</span> <span class="o">=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>  <span class="c1"># list of vertices processed so far
</span>  <span class="n">dist</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># tracks the cost of shortest path distance
</span>  <span class="n">path</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># tracks the shortest path, empty for s
</span>  
  <span class="k">while</span> <span class="n">there</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">edge</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">w</span><span class="p">)</span> <span class="k">with</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">X</span> <span class="ow">and</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">X</span><span class="p">:</span>  <span class="c1"># check edges that crossed the "frontier"
</span>    <span class="p">(</span><span class="n">v</span><span class="o">*</span><span class="p">,</span> <span class="n">w</span><span class="o">*</span><span class="p">)</span> <span class="o">=</span> <span class="n">edge</span> <span class="n">minimizing</span> <span class="n">dist</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">+</span> <span class="n">l_vw</span>
    <span class="n">X</span><span class="p">[</span><span class="n">w</span><span class="o">*</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>  <span class="c1"># grow exactly one vertex
</span>    <span class="n">dist</span><span class="p">[</span><span class="n">w</span><span class="o">*</span><span class="p">]</span> <span class="o">=</span> <span class="n">dist</span><span class="p">[</span><span class="n">v</span><span class="o">*</span><span class="p">]</span> <span class="o">+</span> <span class="n">l_vw</span>
    <span class="n">path</span><span class="p">[</span><span class="n">w</span><span class="o">*</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="n">v</span><span class="o">*</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">w</span><span class="o">*</span><span class="p">]</span>
  
  <span class="k">return</span> <span class="n">dist</span><span class="p">,</span> <span class="n">path</span>
</code></pre></div></div>

<p>Visually, this works like:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230922113037.png" style="zoom:100%;" /></p>

<p>Is this algorithm correct? If you think about it, this is what Dijkstra’s algorithm is trying to say. Consider an edge $(v,w)$ with $v \in X$ and $w \notin X$. Then <mark>the shortes path from $s$ to $w$ consists of the shortest path from $s$ to $v$ (or $s \leadsto v$) with edge $(v,w)$ tacked at the end</mark>. So is this correct?</p>

<h2 id="correctness-of-dijkstras-algorithm">Correctness of Dijkstra’s Algorithm</h2>

<p>Essentially Dijkstra’s algorithm iterates over the entire $V$ space, so we can consider induction on the number of vertices $n$.</p>

<p><em>Proof</em>: Let $P(n)$ denote that “the Dijkstra algorithm correctly computes the shortest-path distance of the $n$th vertex added to the processed set $X$”. We will prove this by induction on $n$:</p>
<ol>
  <li>Base case: $P(1)$ is trivially true, as the starting vertex $s$ is the first vertex in $X$ and the shortest path distance from $s$ to $s$ is indeed $0$.</li>
  <li>Inductive hypothesis: Let $P(k)$ be true for all $k=1,2,3…, n-1$. This means that we have $d(v)=\mathrm{shortest}(s,v)$ correctly computed for the first $n-1$ vertices added by Dijkstra to $X$.</li>
  <li>
    <p>Inductive step: now we need to show $P(n)$. Let $w^{<em>}$ be the $n$th vertex being added, and <strong>let Dijkstra to have selected the $(v^*, w^*)$ edge for that to happen</strong> (i.e. $v^{</em>}\to w^{*}$ is the shortest edge at the frontier). We need to show that:</p>

\[d(v^*) + l_{v^{*}w^{*}} = \mathrm{shortest}(s, w^*)\]

    <p>We can show this by:</p>
    <ul>
      <li>showing $d(v^<em>) + l_{v^{</em>}w^{<em>}} \ge \mathrm{shortest}(s, w^</em>)$, that the shortest path can only be less than or equal to the path from $s$ to $v^<em>$ plus the edge $(v^</em>, w^*)$. This is trivially true by definition of the shortest path.</li>
      <li>
        <p>showing $d(v^<em>) + l_{v^{</em>}w^{<em>}} \le \mathrm{shortest}(s, w^</em>)$, namely every competitor path $s \leadsto w^{<em>}$ must be at least  $d(v^</em>) + l_{v^{<em>}w^{</em>}}$. To show this, consider a “crazily short” path:</p>

        <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230922011917.png" style="zoom:60%;" /></p>

        <p>where because we know that path has to start at $s$ and ends at $w^{*}$ which is <mark>outside $X$</mark>, then it must have crossed the frontier at some point. Let’s denote the <strong>first edge from that path crossing the frontier be $(y,z)$</strong>, such that $y\in X, z \notin X$. So in essence we can considering any competitor path $P’$ taking the form:</p>

\[P' = \underbrace{s \leadsto y}_{\text{inside X}} \to z \leadsto w^{*}\]

        <p>we note that this path must has at least:</p>

\[len(P') \ge \text{shortest}(s,y) + l_{yz} + 0 = d(y) + l_{yz}\]

        <p>where we used $+0$ <mark>because we assumed no edges can be negative</mark>, and that $d(y) = \text{shortest}(s,y)$ from the inductive hypothesis. But we notice that this $d(y) + l_{yz}$ exactly represents <mark>an edge that just crossed the frontier</mark>. This means that according to Dijkstra’s algorithm that since we picked $(v^{<em>}, w^{</em>})$ edge:</p>

\[d(y) + l_{yz} \ge d(v^{*}) + l_{v^{*}w^{*}}\]

        <p>Therefore every competitor path $P’$ must be at least $d(v^<em>) + l_{v^{</em>}w^{*}}$, and we are done. (Intuitively, this is saying that <mark>*any path $P'$* going outside of $X$ will need to use the shortest path inside $X$ + something outside $X$</mark>, and while Dijkstra is minimizing exactly this, it works.)</p>
      </li>
    </ul>
  </li>
</ol>

<p><strong>Q: What if we are dealing with a directed graph that has negative edges, but let’s say, <em>no negative cycles</em>?</strong></p>

<blockquote>
  <p>The main insight here is that the algorithm only looks at all directly connected edges and it takes the smallest of these edge. The algorithm <mark>does not look ahead</mark>.</p>
</blockquote>

<p>Therefore, you can consider the following example (from <a href="https://stackoverflow.com/questions/13159337/why-doesnt-dijkstras-algorithm-work-for-negative-weight-edges#:~:text=You%20can%20use%20dijkstra%27s%20algorithm,lose%20it%27s%20fast%20time%20complexity.">stackoverflow</a>)</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230923160616.png" style="zoom:100%;" /></p>

<p>where Dijkstra would return the shortest path from $A\leadsto D$ being at a cost of 2, but in reality it is $-4900$.</p>

<p><strong>Q: is there a case where Dijkstra algorithm is <em>still correct despite there are negative edges</em>?</strong></p>

<p>Yes. Consider a directed graph $G$ and a starting vertex $s$ with the following properties: <strong>no edges enter the starting vertex $s$; edges that leaves have arbitrary (possibly negative) lengths</strong>; and all other edge lengths are nonnegative. Dijkstra’s algorithm correctly solve the single-source shortest path problem. You can see this in two ways:</p>
<ul>
  <li>notice that adding the same positive constant $M$ to each of s’s outgoing edges preserves all shortest paths, as the lengths of all the $s \leadsto v$ path goes up by precisely $M$</li>
  <li>go back to the formal correctness proof of Dijkstra, and realize that the induction step would still work.</li>
</ul>

<h1 id="hash-tables-and-bloom-filters">Hash Tables and Bloom Filters</h1>

<p>The goal of a hash table is to facilitate <strong>super-fast searches</strong>, which are also called lookups in this context. Compared to other data structures we will discuss later (e.g. heaps and search trees), hash tables do not maintain any ordering information.</p>

<blockquote>
  <p>A hash table keep track of an evolving set of objects with keys while supporting fast lookups (by <strong>key</strong>).</p>
</blockquote>

<p>e.g. if you company manages an e-commerce site, you might use one hash table to keep track of employees (perhaps using names as keys).</p>

<blockquote>
  <p><strong>Hash Table Operations</strong>: a hash table needs to support the following operations:</p>
  <ul>
    <li>insert: given a new <strong>object</strong> $x$, add it to the hash table</li>
    <li>lookup: given a <strong>key</strong> $k$, return a pointer to an object in the hash table with key $k$ (or null if no such object exists)</li>
    <li>delete: given a key $k$, remove the object with key $k$ from the hash table, if it exists</li>
  </ul>

  <p>(for programming purposes you can just imagine the key a numerical representation of the object (e.g. memory address of the object), and a hash function $h$ operates on the key $h(k)$)</p>
</blockquote>

<p>and to really be a hash table:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Operation</th>
      <th style="text-align: center">Typical/Average Runtime</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Lookup</td>
      <td style="text-align: center">O(1)*</td>
    </tr>
    <tr>
      <td style="text-align: center">Insert</td>
      <td style="text-align: center">O(1)</td>
    </tr>
    <tr>
      <td style="text-align: center">Delete</td>
      <td style="text-align: center">O(1)*</td>
    </tr>
  </tbody>
</table>

<p>where:</p>
<ul>
  <li>the asterisk (*) indicates that the running time bound <strong>holds if and only if</strong> the hash table is implemented properly (with a good hash function and an appropriate table size) and the data is non-pathological (see later).</li>
  <li>insert is technically always $O(1)$, not average runtime.</li>
</ul>

<p>Since this is really for fast lookups, example applications of hash tables include:</p>
<ul>
  <li>2-SUM problem: given a target $t$ and a list of integers $A$, find two distinct integers $x,y \in A$ such that $x+y=t$.
    <ul>
      <li>realize that given a $x$, there is only one possible $y$ that can achieve this = just look up $t-y$!</li>
    </ul>
  </li>
  <li>deduplication: given a list of $n$ items, remove all duplicates in $O(n)$ time
    <ul>
      <li>first check if the hash table already has the key, if not, insert the k and store the object</li>
    </ul>
  </li>
</ul>

<h2 id="implementation-separate-chaining">Implementation: Separate Chaining</h2>

<p>So how do we get a (near) constant lookup time? Here we discuss a very common implementation of hash tables, which is called <strong>separate chaining</strong> (and the other popular one is called <strong>open addressing</strong>). We will first discuss separate chaining.</p>

<p>Visually, this is very easy to understand:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230928225818.png" style="zoom:60%;" /></p>

<p>so that:&gt;</p>

<blockquote>
  <p><strong>Separate Chaining</strong>: Let there be an array $A$ of $n$ <strong>buckets</strong>, and for each bucket you have a linked list so that given a key $k$, <mark>lookup/insert/delete essentially all operate on the linked list $A[h(k)]$</mark>.</p>
  <ul>
    <li>note that this means your hash function needs to do $h: U \to {0,1,2,…,n-1}$ where $U$ is all possible objects/keys, which can be achieved by simply doing modulo n.</li>
  </ul>
</blockquote>

<p>But now we get some problems:</p>
<ul>
  <li>insert is surely constant time</li>
  <li>
    <p>but lookup and delete technically need:</p>

\[\text{Runtime(lookup/delete)} = O(\text{length of linked list})\]
  </li>
</ul>

<p>So our goal is to keep small linked list for each bucket. First of all, in what cases can we get bad performance?</p>
<ol>
  <li>Size of $n$ is too small, so that we have too many collisions.
    <ul>
      <li>This is easy to fix: just increase the size of $n$. But then you also need to rehash everything.</li>
    </ul>
  </li>
  <li>Using a bad hash function (e.g. $h(k) = 0$ a constant function).
    <ul>
      <li>So then what is a good hash function? One that <strong>Mimics a random function</strong> by spreading non-pathological datasets (see below) roughly evenly across the positions of the hash table</li>
    </ul>
  </li>
  <li>The data is pathological, i.e. it is <em>always</em> possible to adversarially come up with some kind of data such that they all hash to the same bucket. i.e. for every hash function $h: U \to {0,1,2,…,n-1}$, there exists a set $S$ of keys such that $h(k_1) = h(k_2)$ for every $k_{1}, k_{2} \in S$.
    <ul>
      <li>this is unfixable. The best we can do is to assume that the data is not pathological.</li>
    </ul>
  </li>
</ol>

<blockquote>
  <p><strong>Takeaway</strong>: while 1 and 2 are somewhat avoidable, condition 3 means that hash tables <mark>cannot guarantee $O(1)$ for lookup or delete</mark>.</p>
</blockquote>

<p>However, we <em>can</em> guarantee $O(1)$ is <em>average runtime</em> under some conditions (actually all the three will need to be addressed)</p>

<blockquote>
  <p><strong>Claim</strong>: let there be a dataset $S$. If our hash table has a reasonably big size $\vert S\vert =O(n)$ (condition 1), and $h(x)$ is like a random function (condition 2), and $S$ is not pathological (condition 3), then the average runtime of lookup and delete is $O(1)$.</p>
</blockquote>

<p><em>Proof</em>: since we are discussing average time, the procedure will be similar to quick sort analysis. We begin by figuring out the random variable we want to analyze, then decompose it to simpler random variables, and finally use linear expectation to get the result.</p>

<p>Suppose you have inserted all $s \in S$ into the hash table. 
Consider a lookup for a new random object $x$ with key $k$, which might or might not be in $S$. Then the runtime is:</p>

\[\mathrm{Runtime} = O(\text{list length of }A[h(k)]) = O(l)\]

<p>where $l$ is the random variable as it could be long or short. But notice that</p>

\[O(l) = O(\# \text{of collisions $x$ is making})\]

<p>This means that:</p>

\[\begin{align*}
  l \le 1 + \sum\limits_{y \in S, y \neq x} z_{y}  
\end{align*}\]

<p>where $z_y$ is (again) an indicator random variable indicating if there is a collision, and the one is there if there is a $y=x$ (i.e. essentially $x$ was an object $S$).</p>

\[z_{y} = 
\begin{cases}
1, &amp; \text{if $h(x)=h(y)$ } \\
0, &amp; \text{otherwise}
\end{cases}, \quad \forall y \in S\]

<p>Now decomposition is complete, we realize that:</p>

\[\begin{align*}
  \mathbb{E}[l]
  &amp;\le \mathbb{E}\left[1 + \sum\limits_{y \in S, y \neq x} z_{y}\right] \\
  &amp;= 1 + \sum\limits_{y \in S, y \neq x} \mathbb{E}[z_{y}] \\
  &amp;= 1 + \sum\limits_{y \in S, y \neq x} \Pr[h(x)=h(y)]
\end{align*}\]

<p>But we realize that if $h$ is a perfectly random hash function, then $\Pr[h(x)=h(y)]$ given an $x$ is like throwing the $y$ dart randomly at the $n$ buckets, and hoping that it lands on the same bucket as $x$. Therefore, the probability is $1/n$. Hence we get:</p>

\[\begin{align*}
  \mathbb{E}[l]
  &amp;\le 1 + \sum\limits_{y \in S, y \neq x} \Pr[h(x)=h(y)] \\
  &amp;= 1 + \sum\limits_{y \in S, y \neq x} \frac{1}{n} \\
  &amp;= 1 + \frac{|S|-1}{n} \\
  &amp;= O(1)
\end{align*}\]

<p>where the last equality is because we had said $\vert S\vert =O(n)$, i.e. our hash table is reasonably big.</p>

<h2 id="implementation-open-addressing">Implementation: Open Addressing</h2>

<p>Why did we have a linked list version before (i.e. separate chaining)? <mark>In the end it was to resolve collision</mark>, but letting them live in the same bucket. Note that such collision is inevitable, as we have fixed size of data structure but your dataset $S$ is huge.</p>

<p>The idea of open addressing is, instead of letting the collision live in the same bucket, we will <mark>try to find another bucket</mark> for the colliding object, assuming $n \ge \vert S\vert$. In this implementation, each bucket stores only 0 or 1 object.</p>

<blockquote>
  <p><strong>Open Addressing</strong>: given an object $x$ with key $k$ and its position to insert $h(k)$. We will use some <strong>probe sequence</strong> (i.e. a sequence of buckets to check) if $h(k)$ is occupied.</p>
  <ul>
    <li>so for insert, we continue this sequence until the first empty bucket, and insert the object there</li>
    <li>for lookup, we continue this sequence until we find the bucket storing $x$, or an empty bucket (return not found)</li>
    <li>we will <em>not</em> support delete.</li>
  </ul>
</blockquote>

<p>So the trick is this “probe sequence”. One simple sequence would be a <strong>linear probing</strong>: $h(k), h(k)+1, …, \text{wrap around}, h(k)-1$.</p>

<p>We skip other details here, but discuss its performance compared to separate chaining.</p>

<ul>
  <li>with chaining, the lookup time is affected by linked list length; with open addressing, its the <strong>number of probes required</strong> to either hit an empty slot or find the object.</li>
  <li>in both implementations, when the hash table gets increasingly full, performance degrades.</li>
  <li>however, with an appropriate hash table size and hash function, <strong>open addressing achieves the same running time bound</strong> as chaining.</li>
</ul>

<h2 id="bloom-filters">Bloom Filters</h2>

<p>Bloom filters have became a very popular data structure since its usage in internet routers. It has a very similar idea to hash tables, but:</p>

<ul>
  <li>it is more space efficient</li>
  <li>it can only return <code class="language-plaintext highlighter-rouge">true/false</code> for lookup (i.e. if the object is in the set or not)</li>
  <li>it <em>can</em> return false negatives (i.e. even if the object is not in the set, it might return <code class="language-plaintext highlighter-rouge">true</code>)</li>
  <li>it <em>guarantees</em> constant-time operations for every dataset.</li>
</ul>

<blockquote>
  <p><strong>Blook Filter Supported Operations</strong>: a bloom filter supports the following operations:</p>
  <ul>
    <li>lookup: given a key $k$, return <code class="language-plaintext highlighter-rouge">true</code> if $k$ is in the bloom filter, and <code class="language-plaintext highlighter-rouge">false</code> if $k$ is not in the bloom filter</li>
    <li>insert: add a new key $k$ to the bloom filter (since we are only returning <code class="language-plaintext highlighter-rouge">true/false</code> for lookup, we don’t need to store the key/object itself)</li>
  </ul>
</blockquote>

<p>The idea of Bloom filter is simple. Consider an array of $n$ bits all initially zero. Then the data structure uses $m$ hash functions $h_1, h_{2}, …, h_m$ each mapping $h_{i} : U \to { 0,1,2, … , n-1 }$.</p>
<ul>
  <li>you can create $m$ hash functions <em>*using one real hash function $h_{</em>}$<em>*, by doing $h_{1}(k) = m \cdot h_</em>(k), h_{2} = m \cdot h_*(k) + 1$, etc.</li>
  <li>typically $m$ is quite small, like $m=5$.</li>
</ul>

<p>Then the operations is simply:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">insertion</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
  <span class="c1"># flip all A[h_i(k)] = 1
</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
    <span class="n">A</span><span class="p">[</span><span class="n">h_i</span><span class="p">(</span><span class="n">k</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">lookup</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
  <span class="c1"># check if all A[h_i(k)] == 1
</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">A</span><span class="p">[</span><span class="n">h_i</span><span class="p">(</span><span class="n">k</span><span class="p">)]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
      <span class="k">return</span> <span class="bp">False</span>
  <span class="k">return</span> <span class="bp">True</span>
</code></pre></div></div>

<p>Visually:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20230928235431.png" style="zoom:80%;" /></p>

<p>hence it is obvious that:</p>
<ul>
  <li>you cannot get false negative: if an object is in the set, then its bits must <em>have been flipped to 1</em> (as we are not supporting deletion).</li>
  <li>you can get false positive: if an object is not in the set, then its bits <em>might have been flipped to 1</em> by other objects.</li>
</ul>

<p>Now, error analysis: is this really worth it? How much error will this give? The goal is to get <strong>a $n$ not too large but still have a small false positive rate</strong>.</p>

<p>Suppose that we have inserted all elements $x \in S$ into the bloom filter. Consider a lookup for a new random object $x$ with key $k$, which is a false positive. For this to happen, we need:</p>

\[\Pr[\text{false positive}] = \Pr[\text{all $m$ bits are flipped for $x$}] = \Pr[ \text{one bit is flipped} ]^{m}\]

<p>What’s the probability that one bit is flipped?</p>

\[\Pr[ \text{one bit is flipped} ] = 1 - \Pr[ \text{all data missed that bit} ] = 1 - {\underbrace{\left( 1 - \frac{1}{n}\right)}_{\text{one hash function missed}}}^{m |S|}\]

<p>where its raised to the power of $m \vert S\vert$ since there are $\vert S\vert$ objects we inserted, and for each object we had $m$ “dart shots” (recall that we assume $h$ is a perfectly random function). This form approximates that of an exponential function:</p>

\[\Pr[ \text{one bit is flipped} ] =  1 - {\left( 1 - \frac{1}{n}\right)}^{m |S|} \approx 1 - e^{- m|S| / {n}}\]

<p>finally:</p>

\[\Pr[\text{false positive}] \approx \left( 1 - e^{- m|S| / {n}} \right)^{m}\]

<p>Notice that this is a function of $n,m, \vert S\vert$. Therefore, depending on the application, we can <mark>optimize for the error rate</mark> (using calculus), if we fix $n / \vert S\vert$ representing the number of bits per object:</p>

\[m^{*} = \frac{n}{|S|} \ln 2\]

<p>this means that if we are having an array for about <strong>8 bits per object</strong>, then we should use <strong>$m=5 \sim 6$ hash functions</strong> which gives an <strong>error rate of about 2%</strong>.</p>

<h1 id="introduction-to-greedy-algorithms">Introduction to Greedy Algorithms</h1>

<p>This is another <em>class</em> of algorithm, where compared to the divide and conquer algorithm:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Divide and Conquer</th>
      <th style="text-align: center">Greedy Algorithms</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231005214058.png" style="zoom:100%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231005214110.png" style="zoom:100%;" /></td>
    </tr>
    <tr>
      <td style="text-align: center">relatively easy to prove correct (e.g. induction)</td>
      <td style="text-align: center">usually hard correctness proof</td>
    </tr>
    <tr>
      <td style="text-align: center">harder to analyze runtime</td>
      <td style="text-align: center">usually straightforward sorting + single pass</td>
    </tr>
  </tbody>
</table>

<p>While it is myoptic and simple to implement, it is <strong>often hard to come up with a correct greedy algorithm</strong> (e.g. Dijkstra was one), and for many problems <strong>there might not exist a correct greedy algorithm</strong>. More specifically, you shall see that correctness proofs for greedy algorithms are more art than science, though there will be a useful trick, called the <strong>exchange argument</strong>, which we will show next.</p>

<h2 id="scheduling-problem">Scheduling Problem</h2>

<p>Consider the scheduling task in OS, where given some set of jobs $J$ with each job $j$ having known length $l_j$ (i.e. how long it takes to complete), and a weight $w_j$ (e.g. priority). We want to have a scheduling algorithm that can find the “best” sequence of jobs to complete $\sigma$. What is a “best” schedule?</p>

<ul>
  <li>
    <p>first of all, how many posisble schedules are there? $n!$.</p>
  </li>
  <li><strong>completion time</strong> $C_j(\sigma)$ of a job $j$ is the sum of lengths of the jobs preceding $j$ in $\sigma$, plus the length of $j$ itself. i.e. time elapsed when $j$ is completed.
    <ul>
      <li>e.g. consider three jobs with length $l_1=1, l_{2}=2, l_3=3$, weight $w_1=3, w_2=2, w_{3} = 1$. Suppose we scheduled them to be in the order of $j_1, j_2, j_3$. Then this means the completion time is $C_{1} = 1, C_{2} = 3, C_{3} = 6$. Visually</li>
    </ul>

    <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231005220948.png" style="zoom:60%;" /></p>
  </li>
  <li>
    <p><strong>sum of weighted completion times</strong>. This is <mark>our objective function</mark>:</p>

\[\min_\sigma \sum\limits_{j =1}^{n} w_j C_j(\sigma)\]

    <p>i.e. we want shorter/more important jobs to be completed earlier.</p>
  </li>
</ul>

<blockquote>
  <p><strong>Scheduling Task</strong>: given a set of $n$ jobs with positive lengths $l_j$ and positive weights $w_j$, find a schedule $\sigma$ that minimizes the sum of weighted completion times.</p>
</blockquote>

<p>To solve this problem, let us <em>first posit that there actually is a correct greedy algorithm</em> for the problem. Then, we need to consider some <mark>intuitions by thinking about some "special cases"</mark>.</p>

<blockquote>
  <p><strong>Intuition</strong>:</p>
  <ul>
    <li>if all job lengths are equal, then we should schedule jobs with a <strong>higher weight</strong> first.</li>
    <li>if all job weights are equal, then we should schedule <strong>shorter jobs</strong> first. (Why? Realize that in general, the job scheduled first <em>contributes to the completion times of all the jobs</em>, as all jobs must wait for the first one to finish.)</li>
  </ul>
</blockquote>

<p>These two rules of thumbs make sense, but in reality we can have a job with high weight but long length, and vice versa. So how do we combine these two rules of thumbs? Consider a simple greedy idea where we 1) use a formula to compile each job’s length and weight into a single number, and 2) schedule the jobs greedily using that score. So what is the formula?</p>

<p>From our intuition above, we know that the formula <strong>must have two properties</strong>:</p>
<ol>
  <li>holding length constant, the score should increase with weight (assuming we want to schedule higher score first)</li>
  <li>holding weight constant, the score should decrease with length (longer length smaller score)</li>
</ol>

<p>So we can <em>guess</em> two candidates:</p>

<ul>
  <li>score 1: $w_{j} - l_{j}$. The <strong>GreedyDiff</strong> algorithm.</li>
  <li>score 2: $w_{j} / l_{j}$. The <strong>GreedyRatio</strong> algorithm.</li>
</ul>

<p>Obviously if they propose different schedules, then one of them must be wrong (or in general, both are wrong). In this case, we can rule out the first by considering the following example:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231005222454.png" style="zoom:80%;" /></p>

<p>where the first job would have a larger ratio, so GreedyRatio would schedule it first, but GreedyDiff would schedule the second job first. But we realize that the weighted completion time:</p>

<ul>
  <li>for GreedyRatio is $3 \cdot 5 + 1 \cdot 7 = 22$</li>
  <li>for GreedyDiff is $1 \cdot 2 + 3 \cdot 7 = 23$ is worse!</li>
</ul>

<p>So we can rule out GreedyDiff, and we are left with GreedyRatio. But is GreedyRatio correct? Luckily in this case it is!</p>

<blockquote>
  <p><strong>Theorem: Correctness of GreedyRatio</strong>. For every set of positive job weights $w_1, w_2, …, w_n$ and positive job length $l_1, l_2, … , l_n$, the GreedyRatio algorithm outputs a schedule with the minimum possible sum of weighted completion times.</p>
</blockquote>

<p><em>Proof</em>: we will use <mark>exchange arguments</mark>. The key idea is prove that every feasible/alternative solution can be improved by modifying it to look more like the output of the greedy algorithm $\implies$ the greedy algorithm is optimal.</p>

<p>Without loss of generality, let us compute the ratio for every job $j$ and renumber the jobs such that:</p>

\[\frac{w_1}{l_1} \ge \frac{w_2}{l_2} \ge ... \ge \frac{w_n}{l_n}\]

<p>so that $\sigma$ is the sequence $[1,2, … , n]$. Suppose by contradiction that we have some competitor $\sigma^{<em>}$ that is better, and $\sigma^{</em>} \neq \sigma$. For the greedy output we get essentially:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231005224435.png" style="zoom:80%;" /></p>

<p>but note that for any other schedule, we will have a <strong>consecutive inversion</strong>: a pair of job $i &gt; j$ (so $j$ has a higher score) such that job $i$ is processed immediately before job $j$. For instance $\sigma^{‘}$ has a consecutive inversion:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">$\sigma^{*}$</th>
      <th style="text-align: center">$\sigma^{‘}$</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231005225000.png" style="zoom:70%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231005225006.png" style="zoom:70%;" /></td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><strong>Lemma: Non-Greedy Schedules Have Inversions</strong>. Every schedule $\hat{\sigma}$ different from the greedy schedule $\sigma$ has at least one consecutive inversion.</p>
  <ul>
    <li>proof: if $\hat{\sigma}$ has no consecutive inversion, then the index of each job is at least 1 larger than the job that came before. Since there are only $n$ jobs and the maximum index is $n$, the jump between two consecutive job must be 1. Then $\hat{\sigma}$ must be the same as $\sigma$.</li>
  </ul>
</blockquote>

<p>Now, the key idea is to perform an exchange from $\sigma^{*}$ (to reach $\sigma^{‘}$) and realize it can only perform at least as good. After the swap above of job $i,j$, we realize that:</p>
<ul>
  <li>the objective does not change for the jobs before $i$ and after $j$</li>
  <li>for job $i$ in $\sigma^{*}$, it went up in $\sigma^{‘}$ so the cost increased by $l_{j} \cdot w_i$</li>
  <li>for job $j$ in $\sigma^{*}$, it went down in $\sigma^{‘}$ so the cost decreased by $l_{i} \cdot w_j$</li>
</ul>

<p>But since $i &gt; j$ by construction ($j$ had a higher score), it means:</p>

\[\frac{w_i}{l_i} \le \frac{w_j}{l_j} \implies l_{j} \cdot w_i \le l_{i} \cdot w_j\]

<p>So $\sigma^{‘}$ is at least as good as $\sigma^{<em>}$, with $\sigma^{‘}$ being more ordered = more similar to $\sigma$! More precisely, we can show that $\sigma^{‘}$ has <mark>exactly one less inversion</mark> than $\sigma^{</em>}$. To see this, define an inversion to be a pair $k,m$ of job such that $k &lt; m$ (so $k$ has a higher score) but $m$ is schedules before $k$, AND that they need not be consecutive. Then, realize that swapping one consecutive inversion does not change the relative order of $k,m$ relative to each other or $k,m$ relative to $i,j$:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231005231255.png" style="zoom:70%;" /></p>

<p>In other words, restoring consecutive inversion doesn’t affect any other inversions (if any). Therefore, this means:</p>

<ul>
  <li>having <strong>one less consecutive inversion produces a schedule at least as good</strong>!</li>
  <li>having <strong>one less consecutive inversion also decreases the total number of inversion by one</strong></li>
</ul>

<p>Therefore, we can repeatedly swap jobs to remove consecutive inversions until we get $\sigma$, which has no inversions. During the process, the objective function can not increase ($\le$). Hence $\sigma$ is at least as good as any $\sigma^{*}$ along the way. This means that $\sigma$ is optimal, and we are done.</p>

<h1 id="huffman-codes">Huffman Codes</h1>

<p>Huffman coding is a widely-used method for lossless compression. For example, every time you import or export an MP3 audio file, your computer uses Huffman codes. This section will cover the optimality of Huffman codes, and a fast algorithm for computing them.</p>

<blockquote>
  <p><strong>Compression Task</strong>: consider an input “string” that consists of symbols from an alphabet $\Sigma$ (e.g. a set of 64 symbols including all 26 letters plus punctuations and some special characters). Your goal is to represent this string to a <em>binary code</em>, i.e. a sequence of 0s and 1s, so that the code is as short as possible while still being able to recover the original string.</p>
</blockquote>

<p>Note that there are two different tasks here:</p>
<ol>
  <li><strong>encoding</strong>: find a mapping that maps each symbol to a binary code</li>
  <li><strong>decoding</strong>: given a binary code, can recover the original string without ambiguity</li>
</ol>

<p>For instance, consider the following alphabet to encode:</p>

\[\Sigma = \{ A,B,C,D \}\]

<p>and consider the following two encoding schemes:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">fixed-length code</th>
      <th style="text-align: center">variable-length code</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231010233843.png" style="zoom:80%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-                    .png" style="zoom:80%;" /></td>
    </tr>
  </tbody>
</table>

<p>While variable code in general can be shorter if designed correctly (so we will focus on this), but in this case what would the string “001” decode to? Note that this issue does not arise with fixed-length codes since we know where to start and end for each symbol. With variable-length codes, we must <strong>impose a constraint to prevent ambiguity</strong>.</p>

<h2 id="prefix-free-codes">Prefix-Free Codes</h2>

<p>We can eliminate all ambiguity by insisting that a code is <strong>prefix-free</strong>. This means that given any two pair of distinct symbols $a,b \in \Sigma$, the encoding of $a$ is not a prefix of that of $b$, and vice versa.</p>

<blockquote>
  <p>With a prefix-free code, encodings are unambiguous</p>
</blockquote>

<p>Why? If, say, the first 5 bits of a sequence match the encoding of a symbol $a$, then $a$ was definitely the first symbol encoded. Because the code is prefix-free, there’s no way these 5 bits could correspond to (a prefix of) the encoding of any other symbol.</p>

<p>An example of prefix-free code would be fixed length code, or the following variable-length code:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011002350.png" style="zoom:100%;" /></p>

<p>But how do we find a variable-length code that is also prefix-free? Crucial to reasoning about the problem is a method of <strong>associating codes with labeled binary trees</strong>. This is most easy to see with examples:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Encoding</th>
      <th style="text-align: center">Tree</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-        .png" style="zoom:80%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-   .png" style="zoom:80%;" /></td>
    </tr>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011002732.png" style="zoom:80%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-      .png" style="zoom:80%;" /></td>
    </tr>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011002944.png" style="zoom:80%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011002953.png" style="zoom:80%;" /></td>
    </tr>
  </tbody>
</table>

<p>where essentially edges are the encoding, and vertices are potential symbols. Notice that</p>
<ul>
  <li><strong>every binary code can be represented as a binary tree</strong> with left and right child edges labeled with “0” and “1,” respectively, and with each symbol of the alphabet used as the label for exactly one node</li>
  <li>the number of edges in a path/depth equals the number of bits used to encode the corresponding symbol</li>
</ul>

<p>But more importantly:</p>
<ul>
  <li>In general, the encoding of a symbol $a$ is a prefix of that of another symbol $b$ <strong>if and only if the node labeled $a$ is an ancestor of the node labeled $b$</strong>.</li>
  <li>therefore, because no leaf can be the ancestor of another, <mark>a tree with labels only at the leaves defines a prefix-free code</mark> (i.e., no label will be parent)</li>
</ul>

<p>Finally, we can visualize decoding as traversing the tree until we hit a leaf, and restarting from the root. For example, given the input string “010111” and the tree below, we would decode it as “ABD”:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011003933.png" style="zoom:80%;" /></p>

<h2 id="huffmans-greedy-algorithm">Huffman’s Greedy Algorithm</h2>

<p>Now that we have a way to represent a prefix-free code as a binary tree, we can formulate the problem as follows:</p>

<blockquote>
  <p><strong>Task: Optimal prefix-free code</strong>. Given a string to encode, with each symbol $a \in \Sigma$ having a frequency $p_a$, our objective is to minimize:</p>

\[\min_T \sum\limits_{a \in \Sigma} p_a \cdot \text{depth}(a)\]

  <p>where $T$ is a binary tree with labels only at the leaves, which would define any prefix-free code.</p>
</blockquote>

<p>Now since we can have symbols of different frequency, it becomes apparent that variable length prefix-code is what we are looking for: associate the most frequent symbols with the shortest codes/number of bits.</p>

<p>The overall idea is to consider a bottom-up algorithm. We start with every symbol $a \in \Sigma$ as a leaf, and then we will repeatedly merge some symbols until we get a tree. But what do we choose which ones to merge in order to minimize the objective?</p>

<blockquote>
  <p><em>Intuition</em>: labels with high frequency are costly so they should be at the top of the tree. Hence, we should keep small frequency labels at the deeper levels.</p>

  <p>So, the idea for greediness is to consider merging ‘‘symbols’’ with the <strong>smallest frequencies</strong> first (bottom-up). i.e. every iteration of Huffman’s greedy algorithm myopically performs the merge that least increases this objective function.</p>
</blockquote>

<p>Why could it possibly be a good idea? Realize that each merge <strong>increments the depths of all the leaves in the two participating trees</strong> and, hence, the encoding lengths of the corresponding symbols:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Before Merge</th>
      <th style="text-align: center">After Merge</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-              .png" style="zoom:70%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-             .png" style="zoom:70%;" /></td>
    </tr>
  </tbody>
</table>

<p>where technically you are merging two trees (or two root nodes) each time, and specifically for every leaf/symbol in the two trees after merging, the depth increases by 1. This causes the <strong>objective function to increase by</strong>:</p>

\[\sum\limits_{a \in T_1} p_{a} +  \sum\limits_{a \in T_2} p_{a}\]

<p>because for symbol has increased one more bit, but as it appears $p_a$ times,the total cost increases $p_a$ for each leaf. <strong>Huffman’s greedy criterion thus dictates that we merge the pair of trees for which the sum above is as small as possible</strong>.</p>

<p>The pseudo code thus look like:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">huffman</span><span class="p">(</span><span class="n">S</span><span class="p">):</span>
  <span class="c1"># S is a set of symbols with frequencies p_a
</span>  <span class="c1"># initialize a forest of trees, one for each symbol
</span>  <span class="n">F</span> <span class="o">=</span> <span class="p">{</span> <span class="n">Tree</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">p_a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">S</span> <span class="p">}</span>

  <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">F</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">T_1</span><span class="p">,</span> <span class="n">T_2</span> <span class="o">=</span> <span class="n">two_trees_with_smallest_freq</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
    <span class="c1"># merge them into a new tree
</span>    <span class="n">T_3</span> <span class="o">=</span> <span class="n">merge</span><span class="p">(</span><span class="n">T_1</span><span class="p">,</span> <span class="n">T_2</span><span class="p">)</span>  <span class="c1"># root of T1, T2 become the children of a new internal node
</span>    <span class="n">T_3</span><span class="p">.</span><span class="n">p_a</span> <span class="o">=</span> <span class="n">T_1</span><span class="p">.</span><span class="n">p_a</span> <span class="o">+</span> <span class="n">T_2</span><span class="p">.</span><span class="n">p_a</span>  <span class="c1"># invariant: for every internal node, its p_a is the sum of its children
</span>
    <span class="n">F</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">T_1</span><span class="p">)</span>
    <span class="n">F</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">T_2</span><span class="p">)</span>
    <span class="n">F</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">T_3</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">the</span> <span class="n">only</span> <span class="n">tree</span> <span class="ow">in</span> <span class="n">F</span>
</code></pre></div></div>

<p>Before proof of correctness, consider a quick example. Given input of</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011010013.png" style="zoom:100%;" /></p>

<p>and each iteration of the algorithm looks like:</p>

<ol>
  <li>initialize with 4 trees, each with a single symbol
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011010135.png" style="zoom:100%;" /></li>
  <li>smallest is node C and D:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011010204.png" style="zoom:100%;" />
merge and obtain a new subtree with root CD at cost of $0.10+0.05=0.15$</li>
  <li>smallest two are $0.15$ and $0.25$, so merge the subtree CD with B:
   <img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011010318.png" style="zoom:100%;" />
   and obtain a new subtree with cost $0.4$</li>
  <li>Finally<br />
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011010443.png" style="zoom:100%;" />
where if we take the left edge to represent 0 and the right 1, this returns a variable length prefix-free code of A=0, B=10, C=110, D=111.</li>
</ol>

<h2 id="correctness-of-huffmans-algorithm">Correctness of Huffman’s Algorithm</h2>

<p>Now we want to show that the encoding returned by the above greedy algorithm is correct. In general greedy algorithm is not easy to prove, and here we will use induction + exchange argument to prove it.</p>

<p>Before the proof, we first notice that the algorithm is <strong>iteratively committing two smallest $p_a$ symbols $a,b$ to be siblings in the final tree</strong>. Therefore the plan is to show that:</p>

<ol>
  <li>Huffman’s tree is the best (minimizes the average leaf depth) amongst all possible trees in which $a$ and $b$ are siblings</li>
  <li>there is an optimal tree in which $a$ and $b$ are siblings</li>
</ol>

<p>Visually, each iteration of the algorithm is like:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011094550.png" style="zoom:10%;" /></p>

<p>and to prove that the output tree is optimal (combining claim 1 and 2) we need to show that:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011094612.png" style="zoom:10%;" /></p>

<p>If we can prove both of the above, then we are basically done (by induction).</p>

<hr />
<p><em>Proof</em> by induction. Let us denote $P(k)$ be the statement that Huffman’s tree output the best with an alphabet size at most $k$.</p>
<ol>
  <li>base case: when $k=2$, there is only a tree with one root and two leaves. So Huffman’s tree is optimal.</li>
  <li>inductive hypothesis: assume $P(k’)$ is true for $k’ &lt; k$.</li>
  <li>
    <h2 id="inductive-step-we-need-to-show-that-pk-is-true-since-each-step-of-the-algorithm-we-are-merging-two-least-frequent-symbols-the-root-of-the-subtree-we-want-to-show-claim-1-and-claim-2-to-hold-in-order-to-prove-that-the-output-tree-at-this-stage-is-optimal">inductive step: we need to show that $P(k)$ is true. Since each step of the algorithm we are merging two least frequent “symbols” (the root of the subtree), we want to show claim 1 and claim 2 to hold in order to prove that the <strong>output tree at this stage is optimal</strong>.</h2>
  </li>
</ol>

<p><em>Proof for claim 2</em>: we begin by first showing that there is an optimal tree in which $a$ and $b$ are siblings. To prove this, we will use the <em>exchange argument</em> again. Consider some arbitrary tree $T$, and without loss of generality, denote a sibling at the lowest level of the tree as $x,y$. Let $a,b$ the nodes with the smallest frequency $p_a$. We want to show that the objective function/cost is at least as good as the one with $a,b$ as siblings.</p>

<p>Consider changing the $a,b$ and $x,y$  pair:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011095113.png" style="zoom:100%;" /></p>

<p>Then notice that the new tree $T’$ changed cost function by:</p>

\[\begin{align*}
  \Delta L
  &amp;= \underbrace{p_{a} (\mathrm{depth}(x) - \mathrm{depth}(a)) + p_{b} (\mathrm{depth}(y) - \mathrm{depth}(b))}_{\text{cost}} \\
  &amp;+ \underbrace{p_{x} (\mathrm{depth}(a) - \mathrm{depth}(x)) + p_{y} (\mathrm{depth}(b) - \mathrm{depth}(y))}_{\text{benefit}} \\
\end{align*}\]

<p>which we can simplify to</p>

\[\Delta L = (p_{a} - p_{x}) \cdot (\Delta(x,a)) + (p_{b} - p_{y}) \cdot (\Delta(y,b))\]

<p>where by definition of $x,y$ being the deepest we know that $\Delta(x,a) \ge 0$ and $\Delta(y,b) \ge 0$. Additionally, since by construction $p_a, p_{b} \le p_x, p_y$, we know that $\Delta L \le 0$ after the exchange, so the cost is at least as good $\implies$ there exists an optimal tree with $a,b$ being siblings.</p>

<hr />

<p><em>Proof of Claim 1</em>: We will use induction to show that Huffman’s tree is the best amongst the sibling trees $T_{ab}$ where $a,b$ being the least frequent symbol are siblings. The trick is that we can do induction proof on $\Sigma’$-tree, where each step of the algorithm we “rename” the symbols instead of denoting them as subtree (e.g. merging $a,b$ gives the new symbol $ab$). Then note that the tree constructed in this notation is essentially the same as tree constructed in the original notation with $\Sigma$:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011102337.png" style="zoom:80%;" /></p>

<p>with the only difference being $p_{ab} = p_a + p_b$, and the average leaf depth is the same up to a constant that is independent of the choice of the tree:</p>

\[L(T) = L(T') + p_a + p_b\]

<p>because the expanded tree has node $a,b$ being one level deeper. Now, we can very easily show that running Huffman on $\Sigma’$ (replacing $a,b$ with $ab$ and $p_{ab} = p_{a} + p_{b}$) using the <strong>induction hypothesis</strong> we left off earlier. Since now $\vert \Sigma’\vert  &lt; \vert  \Sigma\vert  = k$, <strong>Huffman algorithm returns the optimal tree $T’_{ab}$ for $\Sigma’$-tree</strong>.</p>

<p>Then, because each $\Sigma’$-tree correspond to $\Sigma$-tree (with $a,b$ being siblings) and the average leaf depth is preserved (up to a constant), then knowing an optimal tree in $\Sigma’$-tree, is knowing an optimal in $\Sigma$-tree with $a,b$ being siblings.</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011102843.png" style="zoom:80%;" /></p>

<p>where RHS is what we just proved, and LHS is claim 1.</p>

<hr />

<p>Combining claim 1 and claim 2, the induction step is complete because by claim 1, Huffman outputs the best-possible tree from the restricted $T_{ab}$ set and by claim 2, such a tree $T_{ab}$ must be optimal.</p>

<h2 id="running-time-of-huffman-algorithm">Running Time of Huffman Algorithm</h2>

<p>The simple implementation would run in $O(n^{2})$, because we will merge in total $n-1$ times for $n = \left\vert \Sigma\right\vert$ , and each iteration needs to identify the two smallest trees in the forest, which takes $O(2n)$ time by simple scan. There, however, is a small change we can make it run a bit faster:</p>

<blockquote>
  <p><strong>Heap</strong>: a special Tree-based data structure in which the tree is a <strong>complete binary tree</strong>.</p>
  <ul>
    <li>Min-Heap: the key present at the <strong>root node must be minimum</strong> among the keys present at all of it’s children. The same property must be recursively true for all sub-trees in that Binary Tree.</li>
    <li>Max-Heap: the key present at the <strong>root node must be maximum</strong> among the keys present at all of it’s children. The same property must be recursively true for all sub-trees in that Binary Tree.
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231011111524.png" style="zoom:30%;" /></li>
  </ul>

  <p>and the key usage is that deleting the top element of the heap or the highest priority element, and then <strong>re-balancing the tree only takes $O(\log N)$</strong>. (Actually it is $O(H)$ for $H$ being the height of the tree, which is $\log N$ if it is a complete binary tree). Therefore each find min/find max operation takes $O(\log N)$ time.</p>
</blockquote>

<p>Therefore, since we are repeatedly finding the minimum, we can use a min-heap to store the nodes/symbols, and then each iteration we can delete the top two elements and insert the new node, which takes $O(\log n)$ time. Therefore, the overall running time is $O(n \log n)$.</p>

<h1 id="minimum-spanning-trees">Minimum Spanning Trees</h1>

<p>The MST problem is a uniquely great playground for the study of greedy algorithms, in which <em>almost</em> any greedy algorithm that you can think of turns out to be correct. The goal is to find, in a given graph $G= (V,E)$ with weight $w$ on edges, what is the best subset of edges $T \subseteq E$ such that the resulting graph with $T$ will:</p>
<ol>
  <li>spanning: <strong>connect every vertex in $V$ (i.e. one connected component)</strong></li>
  <li>tree: it is a spanning <em>tree</em>: there are <strong>no cycles</strong>.</li>
  <li>minium: it has the <strong>minimum total weight</strong></li>
</ol>

<blockquote>
  <p><strong>Minimum Spanning Tree Problem</strong>. Input undirected graph $G=(V,E)$ in which each edge $e$ has a real-valued cost $c_e$, and the goal is to output a minimum spanning tree $T \subseteq E$  of $G$.</p>
  <ul>
    <li>note that it would only make sense if $G$ is a connected graph, otherwise there is no spanning tree.</li>
  </ul>
</blockquote>

<p>For example, the red highlighted is a MST with cost $7$:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231013004832.png" style="zoom:80%;" /></p>

<h2 id="prims-algorithm">Prim’s Algorithm</h2>

<p>The algorithm closely resembles Dijkstra’s shortest-path algorithm, except that we have no ‘‘source vertex’’ and we are trying to find a spanning tree rather than a shortest-path. The idea is to greedily pick the cheapest edge that cross the frontier until done (starting from any random vertex).</p>

<p>So an example before we going to the pseudo code:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">iteration 1</th>
      <th>iteration 2</th>
      <th>iteration 3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-          .png" style="zoom:100%;" /></td>
      <td><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231013005456.png" style="zoom:100%;" /></td>
      <td><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231013005519.png" style="zoom:100%;" /></td>
    </tr>
  </tbody>
</table>

<p>where we started from vertex $b$, and at each iteration we checked the all edge that cross the  “frontier” and picked the cheapest one. The pseudo code is:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">prim</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
  <span class="c1"># G is a connected graph with edge weights w
</span>  <span class="c1"># initialization
</span>  <span class="n">X</span> <span class="o">=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>  <span class="c1"># s is an arbitrary vertex
</span>  <span class="n">T</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># output and also an INVARIANT: edges that span X
</span>
  <span class="k">while</span> <span class="n">X</span> <span class="o">!=</span> <span class="n">V</span><span class="p">:</span>
    <span class="c1"># find the cheapest edge (u,v) with u in X, v not in X
</span>    <span class="n">e</span> <span class="o">=</span> <span class="p">(</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="o">=</span> <span class="n">cheapest</span> <span class="n">edge</span> <span class="k">with</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">X</span><span class="p">,</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">X</span>
    <span class="n">T</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="n">X</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">T</span>
</code></pre></div></div>

<p>where :</p>
<ul>
  <li>one obvious implementation could give $O (mn)$ since you are looping over all vertices once (n times) and finding the cheapest edge (m times) for loop.</li>
  <li>we will first show that this indeed outputs a MST</li>
  <li>and then we will also see that the algorithm is correct no matter which vertex it chooses to start from</li>
</ul>

<h3 id="correctness-of-prims-algorithm">Correctness of Prim’s Algorithm</h3>

<p>Proving the correctness of Prim’s algorithm is a bit easier when all the edge costs are distinct (this is to just make the proof easier, the algorithm is still correct without it), and let us take that as an <mark>assumption</mark> for now.</p>

<p>To prove this, we consider showing two things:</p>
<ol>
  <li>Prim outputs a <em>tree</em> (with no cycles)</li>
  <li>The tree is <em>spanning and minimal</em>.
    <ul>
      <li>first show that every edge picked by Prim satisfies the “minimum bottleneck property”</li>
      <li>then we show that a spanning tree with only MBP edges is a MST</li>
    </ul>
  </li>
</ol>

<hr />

<p>Proof for claim 1: consider a generic graph $G$ that can have multiple connected components. Then consider adding one edge $(u,v)$:</p>
<ul>
  <li>Type 1: if $u,v$ already in the same CC:
    <ul>
      <li>this <strong>will create a cycle</strong> (because there was already path from $u$ to $v$)</li>
      <li><strong>number of CC remains the same</strong></li>
    </ul>
  </li>
  <li>Type 2: if $u,v$ in different CC:
    <ul>
      <li>this <strong>will not create a cycle</strong></li>
      <li><strong>number of CC decreases by 1</strong></li>
    </ul>
  </li>
</ul>

<p>to visualize this:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231013234626.png" style="zoom:60%;" /></p>

<p>where having the red edge will create a cycle, and the blue will not. Now, notice that in Prim’s algorithm, we will 1) start with $n$ distinct CCs, 2) add $n-1$ edges to the graph, and 3) finish with one CC. Therefore, every edge added must be type 2, and hence the output is a tree (graph with no cycle).</p>

<blockquote>
  <p>Note that the above also proved the statement: <strong>if $T \subseteq E$ has only $n-1$ edges AND the resulting graph is connected, then $T$ must be a tree</strong>.</p>
</blockquote>

<hr />

<p>Proof for claim 2: we need to first define the MBP property, prove that Prim’s algorithm only picks MBP, and finally prove that a tree with only MBP edges is a MST.</p>

<blockquote>
  <p><strong>Minimum Bottleneck Property</strong>: an edge $(u,v) \in E$ with cost $c_{uv}$ satisfies the MBP if and only if there is no $u \overset{p}{\leadsto} v$ path that consists solely of edges with cost less than $c_{uv}$.</p>
  <ul>
    <li>i.e. for any other path you can think of, there is <em>at least one edge</em> that is more expensive than $(u,v)$</li>
  </ul>
</blockquote>

<p>For example, in the following graph, edge $(a,d)$ does not satisfy MBP, but edge $(a,c)$ does:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231013235651.png" style="zoom:80%;" /></p>

<p>Now, we prove that <strong>Prim’s algorithm only picks MBP edges</strong>. The trick is to realize that <strong>any path (see below) $v^{<em>} \leadsto w^{</em>}$ will have at least one edge that crosses the frontier</strong>. Since Prim picks the cheapest such edge, all other path must have at least one edge that is more expensive than the one picked by Prim.</p>

<p>To see this more concretely, consider the same argument as from Dijkstra’s proof. Consider an edge $(v^{<em>}, w^{</em>})$ chosen in an iteration of Prim’s algorithm, with $v^{<em>} \in X$ and $w \notin X$. Now, consider any arbitrary path $v^{</em>} \overset{p}{\leadsto} w^{*}$:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231013235845.png" style="zoom:70%;" /></p>

<p>Note that since $w^{*} \notin X$, at some point the path will go inside the frontier to the outside. Let that happen with edge $(x,y)$ crossing the frontier in that path. However, since Prim guaranteed:</p>

\[c_{v^{*}w^{*}} \le c_{xy}\]

<p>for every edge $(x,y)$ that crosses the frontier. Now, since this means there is at least one edge on any other path that will exceeded $c_{v^{<em>}w^{</em>}}$, we know that $(v^{<em>}, w^{</em>})$ satisfies the MBP.</p>

<p>Finally, we need to show that <strong>a tree with only MBP edges is a MST</strong>. To show this, we consider by contradiction that there is a MST $T^{*}$ that does not have the MBP property all the way but still has the minimum cost.(shown in solid lines):</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231014000728.png" style="zoom:70%;" /></p>

<p>Let Prim’s tree be $T$. Since $T \neq T^{<em>}$, there is at least one MBP edge, e.g. $e_1=(u,v)$, that is not in $T^{</em>}$. Since $T^{<em>}$ is a tree, there exists a path $u \overset{p}{\leadsto} v$. But since $e_1$ is an MBP edge, this means there exists an edge $e_2$ on $u \overset{p}{\leadsto} v$ that has cost *higher</em> than $e_1$. Now, consider an <mark>exchange argument</mark> that:</p>
<ol>
  <li>we add $e_1$ to $T^{*}$. This is a type 1 edge and will create a cycle and does not increase the number of CC (still one)</li>
  <li>Remove $e_2$ from $T^{*}$. Since you are removing an edge from the cycle, this is undoing type 1 edge and also does not increase the number of CC (still one)</li>
</ol>

<p>Now, we obtain $T’$:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231014001152.png" style="zoom:70%;" /></p>

<p>where by the above argument, $T’$ has also just $n-1$ edges and is connected $\implies$ $T’$ is a valid spanning tree. However, since $\mathrm{cost}(e_1) \le  \mathrm{cost}(e_2)$ by MBP, then cost of $T’$ is less than $T^{<em>}$, which is a contradiction. Therefore, every edge in $T^{</em>}$ must satisfy MBP to be MST, and hence Prim’s $T$ is a MST.</p>

<blockquote>
  <p><strong>Note</strong>: from HW 5, you can also show that the converse is true: every edge on a MST must satisfy MBP.</p>
  <ul>
    <li>this does <mark>not imply your MST will include every $(u,v)$ edge that is MBP</mark>, because having $u,v$ being connected in your MST may not even require having a $u\to v$ edge).</li>
  </ul>
</blockquote>

<h3 id="running-time-of-prims-algorithm">Running Time of Prim’s Algorithm</h3>

<p>The obvious runtime we discussed is $O(nm)$, but notice that it was <strong>repeatedly doing extract min</strong>. This hints at using a heap data structure.</p>

<blockquote>
  <p><strong>Recall: (min-)Heap</strong>: a special Tree-based data structure in which the tree is a <strong>complete binary tree</strong>, such that you can <code class="language-plaintext highlighter-rouge">insert</code> a new node with (key, value) pair into the tree, <code class="language-plaintext highlighter-rouge">extract_min</code> to get the node with the smallest key and rebalance the tree, and <code class="language-plaintext highlighter-rouge">delete</code> to remove a node from the tree and rebalance the tree. The tree <code class="language-plaintext highlighter-rouge">orders</code> nodes by the keys, and <strong>all of these operations take $O(\log n)$ time</strong>.</p>
  <ul>
    <li>how? a short peek into the implementation is that you either percolate up or percolate down the tree to rebalance it</li>
    <li>e.g. fo insert, you add the new node at the bottom, and then percolate up (swap with parent if this is smaller until done). Since the height of the tree is $O(\log n)$, this takes $O(\log n)$ time.</li>
  </ul>
</blockquote>

<p>To use <code class="language-plaintext highlighter-rouge">heap</code> for Prim, since we are repeatedly picking the minimum cost edge that <em>crossed the frontier</em>, we want the heap to:</p>
<ul>
  <li>Invariant 1: only store edges that cross the frontier</li>
  <li>Invariant 2: for each $v \notin X$, we will always keep $\mathrm{key}(v)=$ cheapest edge $(u,v)$ that crosses the frontier with $u \in X$. If no such edge exist for a node, store $\infty$.</li>
</ul>

<p>For example, invariant 2 would look like:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231014003326.png" style="zoom:70%;" /></p>

<p><em>If the above two invariant hold</em> for every iteration of our implementation, then it is obvious that taking the minimum from such heap $\implies$ cheapest edge amongst the cheapest for each nod $\notin X$  $\implies$ the cheapest edge that crosses the frontier.</p>

<p>How to we keep the two invariants? Invariant 1 hold easily because after we <code class="language-plaintext highlighter-rouge">extract_min</code> we removed the $(u,v)$ from the heap $\iff$ that $v$ was outside $X$ is now inside the frontier. So it is automatically satisfied. But after <code class="language-plaintext highlighter-rouge">extract_min</code>, e.g. we took vertex $x$ from the above image to $X$, some of the $\mathrm{key}(v)$ might need to be updated (e.g. that of vertex $z$). But note that since <strong>our frontier only changed by that newly added vertex</strong>, we only need to <strong>update keys related to that vertex!</strong> Specifically, we need to:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># w* is just extracted
</span>
<span class="c1"># for every edge from w* that crossed the frontier
</span><span class="k">for</span> <span class="n">every</span> <span class="n">edge</span> <span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">with</span> <span class="n">y</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">X</span><span class="p">:</span>
    <span class="c1"># update the new min cost for y = key(y)
</span>    <span class="k">if</span> <span class="n">c_w</span><span class="o">*</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">key</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
      <span class="n">delete</span> <span class="n">y</span> <span class="k">from</span> <span class="n">heap</span>
      <span class="n">key</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">c_w</span><span class="o">*</span><span class="n">y</span>
      <span class="n">best_edge</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
      <span class="n">insert</span> <span class="n">y</span> <span class="n">into</span> <span class="n">heap</span>
</code></pre></div></div>

<p>Now, the full algorithm looks like:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">prim_w_heap</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
  <span class="n">X</span> <span class="o">=</span> <span class="p">{</span><span class="n">s</span><span class="p">}</span>  <span class="c1"># s is an arbitrary vertex
</span>  <span class="n">T</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># output and also an INVARIANT: edges that span X
</span>  <span class="n">H</span> <span class="o">=</span> <span class="n">heap</span><span class="p">()</span>  <span class="c1"># heap of edges that cross the frontier
</span>
  <span class="c1"># initialization
</span>  <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">V</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">!=</span> <span class="n">s</span><span class="p">:</span>
    <span class="c1"># for every edge that crosses the frontier s
</span>    <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">E</span><span class="p">:</span>
      <span class="n">key</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">=</span> <span class="n">c_s</span><span class="o">*</span><span class="n">v</span>
      <span class="n">best_edge</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
      <span class="n">insert</span> <span class="n">v</span> <span class="n">into</span> <span class="n">H</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">key</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">=</span> <span class="n">inf</span>
      <span class="n">best_edge</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">=</span> <span class="bp">None</span>
  
  <span class="c1"># main loop
</span>  <span class="c1"># if H is empty, then there is no vertex NOT in X = we are done!
</span>  <span class="k">while</span> <span class="n">H</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">empty</span><span class="p">:</span>
    <span class="c1"># extract the cheapest edge that crosses the frontier
</span>    <span class="n">w</span><span class="o">*</span> <span class="o">=</span> <span class="n">extract_min</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
    <span class="n">T</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">best_edge</span><span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="p">))</span>  <span class="c1">##### greedy choice
</span>    <span class="n">X</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="p">)</span>

    <span class="c1"># update the keys for every edge from w* that crossed the frontier
</span>    <span class="k">for</span> <span class="n">every</span> <span class="n">edge</span> <span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">with</span> <span class="n">y</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">X</span><span class="p">:</span>
      <span class="c1"># update the new min cost for y = key(y)
</span>      <span class="k">if</span> <span class="n">c_w</span><span class="o">*</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">key</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="n">delete</span> <span class="n">y</span> <span class="k">from</span> <span class="n">heap</span>
        <span class="n">key</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">c_w</span><span class="o">*</span><span class="n">y</span>
        <span class="n">best_edge</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">insert</span> <span class="n">y</span> <span class="n">into</span> <span class="n">heap</span>
  <span class="k">return</span> <span class="n">T</span>
</code></pre></div></div>

<p>So what is the runtime of this?</p>

<ul>
  <li>initialization phase performs does $n-1$ heap insert (i.e. once for every vertex not $s$), and $O(m)$ additional work as it checks the edges. So this takes $O(n \log n + m)$ time.</li>
  <li>the main while loop goes for $n-1$ iterations, and inside it at least does extract mins. This is already $O(n \log n)$. But additionally, notice there is also a for loop. However, realize that each edge of $G$ will enter this for loop exactly once, at the time when first of its endpoints get sucked into $X$. Therefore, since there are $m$ edges, this will give in total for the entire algrithm $O(m \log n)$.</li>
</ul>

<p>Hence adding up we get:</p>

\[O((n+m) \log n) = O(m \log n)\]

<p>since for a connected graph $G$, the least number of edges is $m \ge n-1$. Therefore, you can simplify the above to $O(m \log n)$.</p>

<h2 id="kruskals-algorithm">Kruskal’s Algorithm</h2>

<p>Why this in addition to Prim?</p>
<ul>
  <li>provides an opportunity to study a new and useful data structure, the disjoint-set or <strong>union-find</strong> data structure.</li>
  <li>there are some very cool connections between Kruskal’s algorithm and widely-used <strong>clustering</strong> algorithms</li>
</ul>

<p>Similar to Prim, this algorithm is greedy. Different from Prim’s algorithm which grows a single tree from a starting vertex, <strong>Kruskal can grow multiple trees in parallel</strong>, and coalesce into a single tree only at the end of the algorithm.</p>

<blockquote>
  <p><strong>Idea</strong>: repeatedly (greedily) pick the cheapest edge that does not create a cycle, until done.</p>
</blockquote>

<p>For example:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">iteration 1</th>
      <th style="text-align: center">iteration 2</th>
      <th style="text-align: center">iteration 3</th>
      <th style="text-align: center">iteration 4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231018005153.png" style="zoom:100%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231018005200.png" style="zoom:100%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231018005216.png" style="zoom:100%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231018005224.png" style="zoom:100%;" /></td>
    </tr>
  </tbody>
</table>

<p>where we started with $T$ being empty, and at each iteration we picked the cheapest edge that does not create a cycle. The pseudo code is:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">kruskal</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
  <span class="c1"># G=(V,E) with costs c_e for each e in E
</span>  <span class="n">T</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># output
</span>  <span class="n">sorted_edges</span> <span class="o">=</span> <span class="n">sort</span><span class="p">(</span><span class="n">E</span><span class="p">)</span>  <span class="c1"># sort edges by increasing cost
</span>  <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">sorted_edges</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">adding</span> <span class="n">e</span> <span class="n">to</span> <span class="n">T</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">create</span> <span class="n">a</span> <span class="n">cycle</span><span class="p">:</span>
      <span class="n">T</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">T</span>
</code></pre></div></div>

<p>note that similar to Prim, it requires a connected undirected graph $G=(V,E)$ with edge weights $c_e$ for each $e \in E$.</p>

<p>A straight-forward runtime for this algorithm is:</p>

\[O(m \log m) + O(m n) = \log(m \log n) + O(mn) = O(mn)\]

<p>where:</p>
<ul>
  <li>$O(m \log m) = O(m \log n)$ because we know $m \le n^{2}$, hence $O(\log m) = O(2 \log n)$. This equality will be used later as well</li>
  <li>$O(mn)$ because you can search for cycles in $O(m)$ time using DFS/BFS (this is equivalent to <mark>checking if the new edge $e=(u,v)$ are already reachable</mark>).</li>
</ul>

<p>Before we discuss how to make this faster using union-find, we need to first prove that this algorithm is correct. Without prior context, it is hard to see why this produces a tree that <em>spans all vertices</em>.</p>

<h3 id="correctness-of-kruskals-algorithm">Correctness of Kruskal’s Algorithm</h3>

<p>This section proves Kruskal’s algorithm is correct, under the simlar assumption that all edge costs are distinct (this is to just make the proof easier, and does not affect the algorithm’s correctness).</p>

<p>It is obvious that Kruskal produces <em>no cycles</em>, but we need to show that:</p>
<ol>
  <li>the output is <em>connected</em></li>
  <li>the output is a <em>spanning tree</em></li>
  <li>the output is <em>minimal</em> (by achieving MBP)</li>
</ol>

<hr />

<p><em>Proof for Claim 1</em>: Consider $T$ be the set of edges chosen by Kruskal so far, and that in this iteration Kruskal just finished examining an edge $e = (v,w)$. Then in the algorithm:</p>

<ul>
  <li>if $v,w$ are already in the same CC, then adding $e$ will create a cycle, so this is skipped</li>
  <li>otherwise, $(v,w)$ is added to $T$, fusing their CCs into one</li>
</ul>

<p>Therefore, just after this $(v,w)$ will be <strong>in the same CC</strong>. Since this is true for every iteration, we know that at the end of the algorithm, all vertices (since it will check all edges and the input graph is connected) will be in the same CC, and hence the output is connected.</p>

<hr />

<p><em>Proof for Claim 2</em>: since the algorithm explicitly ensures that the output is acyclic, and we just showed that all its vertices belong to the same CC, then it is a tree.</p>

<hr />

<p><em>Proof for Claim 3</em>: We prove by contrapositive, that Kruskal never includes an edge that is NOT MBP. To show this, consier an edge not being a MBP, and we want to show that Kruskal’s algorithm will never include it.</p>

<p>Let $e=(v,w)$ be not a MBP. Then there exists a path $v \overset{p}{\leadsto} w$ that consists <strong>solely of edges with cost less than $c_{vw}$</strong>. Because Kruskal scans through (greedily) the edges in non-decreasing cost, all edge of $P$ will be checked before $e$. From claim 1, we know that once an edge $e’=(x,y)$ is checked, both $x,y$ are in the same CC. Therefore, when we reached $e=(v,w)$, we know that $v,w$ are already in the same CC, and hence adding $e$ will create a cycle. Therefore, Kruskal will never include $e$.</p>

<p>Visually, by the time we are checking the black $e$ edge, we would have checked all the blue edges:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231018012523.png" style="zoom:50%;" /></p>

<hr />

<h3 id="speeding-up-kruskal-with-union-find">Speeding up Kruskal with Union-Find</h3>

<p>Prim’s algorithm is sped up using a genric data structure called heap, and Kruskal can also be sped up using a data structure called <strong>union-find</strong>.</p>

<blockquote>
  <p><strong>Union-Find Data Structure</strong>: the goal is to maintain a partition of a static set of objects. This is often used to efficiently track and manipulate connected components or disjoint sets. It supports the following operations:</p>
  <ul>
    <li><code class="language-plaintext highlighter-rouge">Initialization</code>: create a new union-find data structure with $n$ objects ($O(n)$)</li>
    <li><code class="language-plaintext highlighter-rouge">Union</code>: given two objects form a (different) union, merge the two sets into a single set</li>
    <li><code class="language-plaintext highlighter-rouge">Find</code>: determine which set a given object belongs to</li>
  </ul>
</blockquote>

<p>note that (though not used by Kruskal), with a good implementation the <code class="language-plaintext highlighter-rouge">Union</code> and <code class="language-plaintext highlighter-rouge">Find</code> operations both take time logarithmic in the number of objects. Since Kruskal itreatively <strong>checks connected components (if there is a cycle) and grow them</strong>, we can visualize the process as:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231018013613.png" style="zoom:100%;" /></p>

<p>such that finding if two vertices are in the same CC is just checking if they have the same root in a <code class="language-plaintext highlighter-rouge">union</code>. So instead of a DFS/BFS, we could just have done it in $O(1)$ by comparing if the two vertices have the same root! But how does union-find work?</p>

<hr />

<p><em>Quick-and-Dirty Implementation of Union-Find</em>.</p>

<p>The datastructure can be implemented by an array, where each index position represent a vertex $v \in V$, and stores the <strong>parent</strong> vertex (e.g., a root vertex representing the CC).</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Implementation</th>
      <th style="text-align: center">Visualization</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231018105402.png" style="zoom:100%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231018105314.png" style="zoom:15%;" /></td>
    </tr>
  </tbody>
</table>

<p>where in the drawing, the green vertices and edges are the original graph. The black circle highlights the ‘‘leader’’ representing this CC, and the red edges represent which vertex is the parent of which. This red graph is sometimes also called <mark>the parent graph</mark>.</p>

<p>With the notion that it stores the parent graph, the rest is easy:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">initialize</code>: for each $i=1,2,3, … , n$, initialize $parent[i] = i$ (i.e. each vertex is its own parent)
    <ul>
      <li>therefore, this takes $O(n)$ cost</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">find</code>: given a vertex $v$, repeatedly check $parent[v]$, until $parent[v] = v$ (i.e. $v$ is its own parent).
    <ul>
      <li>therefore, this takes $O(\mathrm{depth})$ of the parent tree</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">union</code> pick the union $x$ that has a larger size (with the parent keep a field <code class="language-plaintext highlighter-rouge">size</code>), and let the other union be $y$. Find the root of both unions, let them be $i,j$. Then set $parent[j] = i$ and update the <code class="language-plaintext highlighter-rouge">size</code>.
    <ul>
      <li>if we don’t merge the smaller one with the larger one so that our size <em>at least doubles</em>, we cannot get the logarithmic runtime</li>
      <li>if we don’t merge with the root node, then the depth of vertices in $y$ will increase by <em>more than one</em>, impacting runtime. Visually for <code class="language-plaintext highlighter-rouge">union</code> if done o non-root node:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231018110926.png" style="zoom:80%;" /></li>
    </ul>
  </li>
</ul>

<hr />

<p>Now, we can implement Kruskal’s algorithm in $O((m+n) \log n)$ time. The idea is to:</p>

<ul>
  <li><strong>the parent pointer <em>all</em> point to the root of a CC</strong>, so that finding the root is $O(1)$. This means checking if two vertices are in the same CC is $O(1)$.</li>
  <li>to maintain the above invariant, when an edge $e=(u,v)$ is picked, <strong>merge all members of the smaller union into the larger union</strong>. Note that this is <em>not $O(n)$</em> for each merge:
    <ul>
      <li>each vertex can only be called to be merged/updated $\log_{2}$ times since each merge at least double the size.</li>
      <li>since there are in total $n$ vertices, the total cost in the entire algorithm is $n \log n$.</li>
    </ul>
  </li>
</ul>

<p>So finally we get preprocessing $O(m \log n)$, cycle check $O(m)$, and union update $O(n \log n)$, which gives $O((m+n) \log n)$.</p>

<h2 id="clustering">Clustering</h2>

<p>We will show that one <strong>application</strong> of Kruskal’s algorithm is to solve a problem called <strong>clustering</strong>. The goal is to partition a set of objects into a collection of clusters, such that given $n$ data points, they are classified into a coherent group:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231018111845.png" style="zoom:100%;" /></p>

<p>to do this, we assume that we are given:</p>

<ol>
  <li>a distance measure $d(p,q)$ between each pair of data points</li>
  <li>a distance measure being symmetric</li>
  <li>we’ve decided to get to $k$ clusters</li>
</ol>

<p>There are many ways to do this (e.g. bottom-up, top-down, k-means). Here we discuss <strong>bottom-up</strong> or <strong>agglomerative</strong> clustering is to begin with every data point in its own cluster, and then successively merge pairs of clusters until exactly $k$ remain.</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231018112326.png" style="zoom:100%;" /></p>

<blockquote>
  <p><strong>so the key part</strong> is how to decide which two clusters to merge at each step.</p>
</blockquote>

<p>Here we discuss one way to do it: <strong>single-link clusering</strong>, where we are optimistic such that we consider two clusters to be similar if their <strong>closest points are close</strong>. Formally, let the similarity measure between <em>two clusters</em> being $F$, then:</p>

\[F(S_1, S_2) = \min_{p \in S_1, q \in S_2} d(p,q)\]

<p>Therefore our single-link bottom up clustering algorithm is:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">bottom_up</span><span class="p">():</span>
  <span class="k">while</span> <span class="n">C</span> <span class="n">contains</span> <span class="n">more</span> <span class="n">than</span> <span class="n">k</span> <span class="n">clusters</span><span class="p">:</span>
    <span class="n">C1</span><span class="p">,</span> <span class="n">C2</span> <span class="o">=</span> <span class="n">closest</span> <span class="n">pair</span> <span class="n">of</span> <span class="n">clusters</span> <span class="ow">in</span> <span class="n">C</span>
    <span class="n">remove</span> <span class="n">C1</span> <span class="ow">and</span> <span class="n">C2</span> <span class="k">from</span> <span class="n">C</span>
    <span class="n">add</span> <span class="n">C1</span> <span class="n">union</span> <span class="n">C2</span> <span class="n">to</span> <span class="n">C</span>
  <span class="k">return</span> <span class="n">C</span>
</code></pre></div></div>

<p>note that one advantage of bottom-up algorithm is that during the process of running this, you <mark>also get the result for all $k' &lt; k$</mark>!</p>

<blockquote>
  <p><strong>Connection to Kruskal’s Algorithm</strong>: recall that in kruskal we “merge” two vertices if they are the <em>smallest edge</em> and <em>are in different CC</em>. This has great similarilty to merging two clusters if the simialrlity function checks the best pair of points from each cluster. In fact, the two are exactly the same except that in Kruskal does not stop at $k$</p>
  <ul>
    <li>define a complete undirected graph $G=(X,E)$ from the dataset $X$, such that $E$ represent every pair of points in $X$, and the edge costs are $d(p,q)$</li>
    <li>run kruskal on $G$ until $k$ connected components, return the tree $(X,T)$</li>
    <li>compute the connected components of $(X,T)$, which is the clustering result</li>
  </ul>
</blockquote>

<h1 id="introduction-to-dynamic-programming">Introduction to Dynamic Programming</h1>

<p>Most people initially find dynamic programming difficult and counterintuitive. However, this is relatively formulaic hence can be learned with practice. In this section, we are getting warmed up with some simple examples.</p>

<h2 id="weighted-independent-set">Weighted Independent Set</h2>

<p>First, some terminologies</p>

<blockquote>
  <p><strong>Independent Set</strong>: a subset of vertices $S \subseteq V$ such that no two vertices in $S$ are adjacent. More formally, every $v,w \in S$ has $(v,w)\notin E$.</p>
</blockquote>

<p>For example, in the two graphs below</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Graph 1</th>
      <th style="text-align: center">Graph 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231019225023.png" style="zoom:80%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231019225032.png" style="zoom:80%;" /></td>
    </tr>
  </tbody>
</table>

<ul>
  <li>the first graph has six independent sets: $\emptyset$ and five singletons</li>
  <li>the second has the same six independent sets that the complete graph does, plus some (five) independent sets of size two. In total eleven.</li>
</ul>

<blockquote>
  <p><strong>Weighted Independent Set Problem</strong>: given an undirected grpah $G=(V,E)$ and a non-negative weight $w_v$ for each <em>vertex</em> $v \in V$, find an independent set $S \subseteq V$ of maximum total weight (of the vertices).</p>
  <ul>
    <li>the solution is also called a <strong>maximum-weight independent set (MWIS)</strong></li>
    <li>e.g., if vertices represent courses, vertex weights represent units, and edges represent conflicts between courses, the MWIS corresponds to the feasible course schedule with the heaviest load (in units)</li>
  </ul>
</blockquote>

<p>This is quite a difficult problem <mark>even if we just consider path graphs to be $G$</mark></p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231019225607.png" style="zoom:100%;" /></p>

<p>where by looking at it we can see the solution is $8$.</p>
<ul>
  <li>if we do <strong>exhaustive</strong> search, notice that there are <strong>8 independent sets</strong>. This will grow exponentially (consider adding one more vertex to the path graph, and think about how many more independent sets you will have).</li>
  <li>if we do <strong>greedy</strong>, maybe consider simply start picking from the largest vertex (i.e., with weight 5). Immediately you got the wrong answer.</li>
  <li>if we do <strong>divide-and-conquer</strong> is natural if we can break this into smaller subproblems. So we can consider maybe recursively computing MIS of the left half, the right half, and merge? But the problem is how do we merge to keep the independence?</li>
</ul>

<h2 id="linear-time-algorithm-for-wis-in-path-graph">Linear-Time Algorithm for WIS in Path Graph</h2>

<blockquote>
  <p>Insight: the trick for DP is to consider how an optimal solution must be <strong>constructed in a prescribed way from optimal solutions to smaller subproblems</strong>, and vice versa</p>
</blockquote>

<p>This feels very similar to divide-and-conquer, so here I hightlight the difference (from stackoverflow):</p>
<ul>
  <li>DnC:
    <ul>
      <li>dividing the problem into sub-problems, <strong>conquer each sub-problem independently</strong> and combine these solutions.</li>
      <li>Most of the canonical applications of the divide-and-conquer paradigm replace a straightforward polynomial-time algorithm</li>
    </ul>
  </li>
  <li>DP:
    <ul>
      <li>solving problems with <strong><mark>overlapping</mark> subproblems</strong>. Each sub-problem is solved only once and the result of each sub-problem is usually stored in a table (generally implemented as an array or a hash table) for future references.</li>
      <li>The killer applications of dynamic programming are polynomial-time algorithms for optimization problems for which straightforward solutions (like exhaustive search) require an exponential amount of time.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>WIS in Path Graph Problem</strong>. Consider $G=(V,E)$ being a $n$-vertex path graph with edges $(v_1, v_2), (v_2, v_3), …, (v_{n-1}, v_n)$ and a non-negative weight $w_i$ for each vertex $v_{i} \in V$.  Find an independent set $S \subseteq V$ of maximum total weight (of the vertices).</p>
</blockquote>

<p>Suppose we are given an optimal solution MWIS $S \subseteq V$ with total weight $W$. <mark>What can we say about $S$? What can we say about the solution to a smaller subproblem given $S$?</mark></p>

<p>The trick to this problem is that $S$ either contains the last vertex $v_n$ or doesn’t. We have two cases:</p>

<ol>
  <li>$v_n \notin S$. Then let $G’ = G$ without $v_n$. This would mean that:
    <ul>
      <li>the set $S$ is also an independent set in $G’$, and since $S$ is the MWIS in $G$, then <em>$S$ is also the MWIS in $G’$</em>.</li>
      <li>we can show the above (MWIS for $G’$) by contradiction: if there is $S^{<em>}$ that is MWIS for $G’$ with weight larger than $S$, then this means $S^{</em>}$ would also be an independent set with larger weight than $S$ in $G$, which is a contradiction.</li>
    </ul>

    <p>in other words, <em>if you know MWIS for $G’$</em> and <em>you know $v_n \notin S$</em>, then you can just use the MWIS for $G’$ as the MWIS for $G$.</p>
  </li>
  <li>$v_{n} \in S$. Then since $S$ is an indepednt set, we know that the penultimate vertex is not there.
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231019232103.png" style="zoom:70%;" />
Therefore, we can consider $G’’$ to be $G$ without $v_n$ and $v_{n-1}$. Then we can show that:
    <ul>
      <li>$S - {v_n}$ is an independent set for $G’’$, and since $S$ is the MWIS in $G$, then <em>$S - {v_n}$ is also the MWIS in $G’’$</em>.</li>
      <li>again can be proven by contradiction using a simlar logic as above.</li>
    </ul>
  </li>
</ol>

<p>in other words, <em>if you know MWIS for $G’’$</em> and <em>you know $v_n \in S$</em>, then you can just use the MWIS for $G’’$ as the MWIS for $G$.</p>

<blockquote>
  <p>The upshot of the above analysis is that <mark>now you have a recipe for building UP a solution</mark> from subproblems:
Let $S$ be an MWIS for $G$ with at least two vertices, and the nwe can find $S$ must be either</p>
  <ol>
    <li>an MWIS for $G’=G_{n-1}$ (i.e. without $v_n$)</li>
    <li>an MWIS for $G’‘=G_{n-2}$ plus $v_n$</li>
  </ol>

  <p>where $G_i$ denote the subgraph comprising its first $i$ vertices.</p>
</blockquote>

<p>So all we need to do is to solve small problem, and then build up. Now how do we implement this?</p>

<hr />

<p><em>Naive Recursive Approach</em> from divide-and-conquer. Since the best solution is either of the two, we can just try both and return the max!</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">recursive_mwis</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">G</span> <span class="n">has</span> <span class="n">no</span> <span class="n">vertices</span><span class="p">:</span>
    <span class="k">return</span> <span class="mi">0</span>
  <span class="k">elif</span> <span class="n">G</span> <span class="n">has</span> <span class="n">one</span> <span class="n">vertex</span><span class="p">:</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">v1</span><span class="p">}</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="c1"># case 1: MWIS for G' without v_n
</span>    <span class="n">mwis1</span> <span class="o">=</span> <span class="n">recursive_mwis</span><span class="p">(</span><span class="n">G</span> <span class="n">without</span> <span class="n">v_n</span><span class="p">)</span>
    <span class="c1"># case 2: MWIS for G'' without v_n and v_{n-1}
</span>    <span class="n">mwis2</span> <span class="o">=</span> <span class="n">recursive_mwis</span><span class="p">(</span><span class="n">G</span> <span class="n">without</span> <span class="n">v_n</span> <span class="ow">and</span> <span class="n">v_</span><span class="p">{</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">})</span> <span class="o">+</span> <span class="n">v_n</span>
    <span class="k">return</span> <span class="n">max_weight</span><span class="p">(</span><span class="n">mwis1</span><span class="p">,</span> <span class="n">mwis2</span><span class="p">)</span>
</code></pre></div></div>

<p>This is guaranteed to be correct using proof by induction and the property of $S$ we just proved. But what is the runtime? <strong>Exponential!</strong></p>

<ul>
  <li>each recursive call only throws away one or two vertices, so there are $O(n)$ height in the recursion tree (compared to the ‘correct’ DnC ones, there were only logarithmic height)</li>
  <li>since the branching factor is 2, this gives $O(2^{n})$ number of leaves!</li>
</ul>

<p>The key difference now, between DP and DnC is that DP could <em>avoid a lot of computation</em> by <strong>memoizing</strong> the results of subproblems. Why is this related in this context? Consider <mark>how many distinct subproblem did the recursive algorithm solve</mark>?</p>
<ul>
  <li>since each subproblem is defined by the input graph, this is equivalent to how many distinct graphs we are solving</li>
  <li>the answer is $n+1$ since each time we are removing graphs from the tail! (empty graph, $G_1$, …, $G_n$).</li>
</ul>

<p>Therefore, we could cache the results of each subproblem, and then we can just look it up when we need it. This is called <strong>memoization</strong>. Implementation-wise, we can just use an array, where $A[i]$ represent the MWIS of $G_i$. However to <em>really see the runtime speed up</em>, the more direct way is to <mark>build from bottom up</mark>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">wis</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
  <span class="n">A</span> <span class="o">=</span> <span class="p">[]</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># solutions for n+1 subproblems
</span>  <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">w1</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">wi</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
</code></pre></div></div>

<p>note that now:</p>
<ul>
  <li>this is DP</li>
  <li>this is clearly linear time</li>
  <li>but it only returns the maximum weight, not the vertices themselves. Therefore a <mark>common step after DP is a postprocessing *reconstruction algorithm*</mark>
    <ul>
      <li>though you can hack this <code class="language-plaintext highlighter-rouge">wis</code> to also let $A$ store the vertices of an MWIS of $G_i$, the reconstruction algorithm is more genreally memory and time efficient</li>
    </ul>
  </li>
</ul>

<h2 id="reconstruction-algorithm-mis">Reconstruction Algorithm (MIS)</h2>

<p>Typically when you have a DP, you would have a reconstruction algorithm easily defined based on the same principle as the algorithm you came up with.</p>

<p>Consider back to the question: is $v_{n}$ included in the solution? Since we know $A$, we can actually answer this question immediately by looking at $A[n-1]$ and $A[n-2]$:</p>

<ul>
  <li>if $A[n-1] \ge A[n-2] + w_n$, then $v_n$ is not in the solution. Continue the process with thinking about $v_{n-1}$</li>
  <li>otherwise, $v_n$ is in the solution. Continue the process with thinking about $v_{n-2}$</li>
</ul>

<p>therefore the reconstruction algorithm is:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">wis_reconstruction</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">A</span><span class="p">):</span>
  <span class="c1"># A is the array we computed from `wis`
</span>  <span class="n">S</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># the solution
</span>  <span class="n">i</span> <span class="o">=</span> <span class="n">n</span>
  <span class="k">while</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">wi</span><span class="p">:</span>
      <span class="n">i</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">S</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">v_i</span><span class="p">)</span>
      <span class="n">i</span> <span class="o">-=</span> <span class="mi">2</span>
  <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">S</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">v_1</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">S</span>
</code></pre></div></div>

<p>wich is like doing a <mark>single backward pass</mark>, which runs in $O(n)$ to get us the real solution.</p>

<blockquote>
  <p>Note: <strong>the full MWIS problem on arbitrary graph is NP-complete</strong>. Even though we know that from HW 6, the following relation hold for arbirary graph:</p>

\[W_{G} = \max\{W_H, W_K + w_v\}\]

  <p>where $G$ is the <code class="language-plaintext highlighter-rouge">'original</code> graph, $H$ is the graph without $v$, $K$ is the graph without $v$ and $v$’s neighbor, and $w_v$ is the weight of $v$. So why does not NOT lead to linear time algorithm? The number of times you will need to lookup a subproblem’s solution is NOT constant!</p>
</blockquote>

<h2 id="principles-of-dynamic-programming">Principles of Dynamic Programming</h2>

<p>The above example showcase a paradigm in DP:</p>

<blockquote>
  <p><strong>DP Paradigm</strong>: we begin by thinking about the <em>optimal solution if we are given the optimal solution of smaller problems (and vice versa)</em>. Then:</p>
  <ol>
    <li>identify a relatively small number of subproblems (otherwise the runtime will be exponential)</li>
    <li>show how to quickly and correctly solve a larger problem using the solutions to a small number of subproblems</li>
    <li>quickly and correctly infer the final solution from the computed subproblem solutions (e.g. reconstruction algorithm)</li>
  </ol>
</blockquote>

<p>More specifcally, DP under this paradigm would be <em>fast</em> if we consider the runtimes:</p>

\[\underbrace{f(n)}_{\text{\# subproblems}} \times \underbrace{g(n)}_{\text{time/subproblem}} + \underbrace{h(n)}_{\text{postprocessing}}\]

<p>where $f(n),g(n), h(n)$ would come from point 1,2,3 mentioned above, respectively. In the case of WIS, we have:</p>
<ul>
  <li>$f(n) = n$ since there are $n+1$ subproblems</li>
  <li>$g(n) = O(1)$ since each subproblem is just a constant time comparison</li>
  <li>$h(n)=O(n)$ is the backward reconstruction cost</li>
</ul>

<p>so the total runtime is $O(n)$ for our WIS example.</p>

<h2 id="the-knapsack-problem">The Knapsack Problem</h2>

<p>The next example is the Knapsack problem, which follows closely to the paradigm we just discussed.</p>

<blockquote>
  <p><strong>Knapsack Problem</strong>: consider $n$ items with value $v_1, …, v_n$ and sizes $s_1, …, s_n$, all being positive integers. Consider you have a knapsack with capacity $C$, and you want to maximize the total value of items you can put in the knapsack.</p>
</blockquote>

<p>For example, given the following configuration, the maximum value you can stuff in is 8 for a capacity of 6:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231020004340.png" style="zoom:80%;" /></p>

<p>Now we can kind of just copy over the idea for WIS we had. Again, suppose someone gave you the optimal solution $S \subset {1,2,3 ,…,n }$ telling you the best items to put in the knapsack. <strong>We can we say about $S$ and problems of smaller size?</strong> Either $S$ includes the last item $n$ or it doesn’t.</p>

<ol>
  <li>$n \notin S$. Since the the optimal solution $S$ excluded it, the solution $S$ must also be feasible and optimal for the knapsack of size $C$ and items $1,2,3,…,n-1$.</li>
  <li>$n \in S$. First of all, this only happens if $s_{n} \le C$. Then what happens if we remove $n$? The solution $S - { n}$ is an optimal solution for the knapsack of size $C - s_n$ and items $1,2,3,…,n-1$. Notice the difference with <code class="language-plaintext highlighter-rouge">wis</code>:
    <ul>
      <li>both case in <code class="language-plaintext highlighter-rouge">wis</code> consider both subproblems by knocking out vertices.</li>
      <li>here, we need to change <em>both size and items</em></li>
    </ul>
  </li>
</ol>

<p>But regardless, this gives us a recipe of how to build up a solution from subproblems. Again writing down the recurrence: let $V_{i,x}$ denote the maximum total value for a subset of the first $i$ items with total size at most $c$.  Then:</p>

\[V_{i,c} = \max \begin{cases}
  V_{i-1, c} \\
  V_{i-1, c-s_i} + v_i, &amp; \text{only if } c \ge s_i. \text{ otherwise it will be $V_{i-1, c}$}
\end{cases}\]

<p>So what are the subproblems we need to solve in this case? $V_{i,c}$ for all $i \in {0,1,2, …, n}$ and $c \in { 0,1,2, …, C }$. Another way to see this is that now we have <strong>two parameters to specify input for each subproblem</strong>. Therefore it is natural that now we are filling up a 2D array</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">knapsack</span><span class="p">(</span><span class="n">V</span><span class="p">,</span><span class="n">S</span><span class="p">,</span><span class="n">C</span><span class="p">):</span>
  <span class="n">A</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">C</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="n">array</span>  <span class="c1"># 2D array for solutions to subproblems
</span>  <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">C</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># base case
</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">C</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
      <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;=</span> <span class="n">s_i</span><span class="p">:</span>
        <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">-</span><span class="n">s_i</span><span class="p">]</span> <span class="o">+</span> <span class="n">v_i</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
        <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span>

  <span class="k">return</span> <span class="n">A</span><span class="p">[</span><span class="n">n</span><span class="p">,</span><span class="n">C</span><span class="p">]</span>
</code></pre></div></div>

<p>Runtime? Obviously $O(nC)$ since we are filling up a 2D array.</p>

<p>Reconstruction? Again, a backward pass to figure out from $A[n][C]$ which case (whether $n$-th item is included) it is:</p>
<ul>
  <li>if $A[n-1][C] = A[n][C]$, then obviously $n$ is not included and we continue to $A[n-1][C]$</li>
  <li>otherwise, then $n$ is included and we continue to $A[n-1][C-s_n]$</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">knapsack_reconstruct</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
  <span class="n">S</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># the solution
</span>  <span class="n">c</span> <span class="o">=</span> <span class="n">C</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">!=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">c</span><span class="p">]:</span>
      <span class="n">S</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
      <span class="n">c</span> <span class="o">-=</span> <span class="n">s_i</span>
    <span class="c1"># else we are skipping i, capactiy is the same
</span>  <span class="k">return</span> <span class="n">S</span>
</code></pre></div></div>

<p>which runs in $O(n)$. Visually it is doing this:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231020011132.png" style="zoom:100%;" /></p>

<p>Finally, correctness. In general this will be proven by <strong>induction + the property we used to come up with the DP algorithm/recurrence itself</strong>. Hence, we omit the proof here.</p>

<h1 id="advanced-dynamic-programming">Advanced Dynamic Programming</h1>

<p>In this section we will discuss some more advanced DP problems, where the structure of optimal solution is more complex than that of the last section.</p>

<h2 id="sequence-alignment">Sequence Alignment</h2>

<p>This problem is both used in computational genomics and in NLP (e.g. to compute the edit distance). Consider the input consist of strings (e.g. representing portions of genomes) over some alphabet:</p>

\[\text{Input: AGGGCT},\qquad \text{Output: AGGCA}\]

<p>and the goal is to say “how similar the two strings are”. How do we measure similarity?</p>

<blockquote>
  <p><strong>Alignment</strong>: a way of inserting gaps such that the two strings have the same length. For example:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025012521.png" style="zoom:80%;" /></p>
</blockquote>

<p>so that then we can define the similarity of the two strings as the quality of the best alignment, for example</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025012620.png" style="zoom:80%;" /></p>

<blockquote>
  <p><strong>Finding Optimal Sequence Alignment</strong> then is used to answer the question “how similar the two strings are”. Formally, consider two strings $X,Y$ over the alphabet $\Sigma$. And let there be a penalty $\alpha_{xy}$ for swapping $x$ with $y$, and $\alpha_{\mathrm{gap}}$ be the cost of inserting a gap. The goal is to find an optimal alignment of $X,Y$ that <strong>minimizes the total penalty</strong>.</p>
  <ul>
    <li>intuitively, is saying “how similar are the two strings” = “most plausible explanation” of how one of the strings might have evolved into the other.</li>
    <li>the minimum penalty of an aligmment is famous enough as a concept that it has a name: <strong>Needleman-Wunsch or NW score</strong>.</li>
  </ul>
</blockquote>

<p>So how do we solve it? Consider some alternative, e.g. greedy algorithm. If you give enough thought, you will realize that it is impossible because you <em>really need to think ahead to avoid bad choices</em> early on, which is the opposite of greedy.</p>

<p>The savior is again dynamic programming. Similar to prior approaches, we begin by reasoning about how <strong>optimal solution relates to optimal solutions of subproblems, and vice versa</strong>. Consider we are already given the optimal solution, and similar to previous problems, consider the <mark>subproblem is having one less character to align</mark>:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025013516.png" style="zoom:90%;" /></p>

<p>This naturally becomes similar to WIS and Knapsack, but here we could have more cases. Let the optimal alignment for $X= x_1, x_2, …, x_m$ and $Y= y_1, y_2, …, y_n$ be given above. Denote $X’ = x_1, x_2, …, x_{m-1}$ and $Y’ = y_1, y_2, …, y_{n-1}$ both with last one removed:</p>

<ol>
  <li>
    <p>Case 1: $x_m$ is aligned with $y_n$, two actual characters (may or may not be the same). Then you can peel them off and the rest of the alignment should also be optimal:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025103754.png" style="zoom:80%;" />
note that this alignment between $X’$ and $Y’$ will also be the <em>optimal aligmnent</em>. (Proof by contradiction: suppose that the penalty for this induced alignment of $X’, Y’$ is $P$, but there is another better competitor $P’ &lt; P$. Then appending $x_m, y_n$ to the competitor alignment gives back $X,Y$, with new cost:</p>

\[P' + \alpha_{x_m y_n} &lt; P + \alpha_{x_m y_n}\]

    <p>which is a contradiction that $P + \alpha_{x_m y_n}$ was the optimal alignment.) Note that $\alpha_{x_m y_n}$ could be zero.</p>
  </li>
  <li>Case 2: $x_m$ is aligned with a gap. Then the induced alignment of $X’,Y$ is optimal.
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025104438.png" style="zoom:80%;" /></li>
  <li>Case 3: $y_n$ is aligned with a gap. Then the induced alignment of $X,Y’$ is optimal.</li>
  <li>Case 4: a gap with a gap. Note that this is <strong>not a scenario</strong>, as we could have removed both gaps. Therefore, in general, <em>any column/pairing in an alignment will be either of the three cases above</em>.</li>
</ol>

<p>Now we can build a recurrence relation: since the optimal solution must be either one of the three cases, and each case either removes a character from $X$ or $Y$, we can write the recurrence as:</p>

\[P_{m,n} = \min \begin{cases}
  P_{m-1, n-1} + \alpha_{x_m y_n} \\
  P_{m-1, n} + \alpha_{\mathrm{gap}} \\
  P_{m, n-1} + \alpha_{\mathrm{gap}}
\end{cases}\]

<p>since this must be true for every $n=1,2, …$ and $m=1,2, …$  we get more generally from bottom-up:</p>

\[P_{i,j} = \min \begin{cases}
  P_{i-1, j-1} + \alpha_{x_i y_j} \\
  P_{i-1, j} + \alpha_{\mathrm{gap}} \\
  P_{i, j-1} + \alpha_{\mathrm{gap}}
\end{cases}\]

<p>for every $i=1,2, …$ and $j=1,2, …$ representing the <strong>subproblem of aligning first $i$ symbols in $X$ with first $i$ symbols in $Y$</strong>. Finally, what if one of $i,j$ is zero? This is the <strong>base case</strong>: imagine $X$ of the $X,Y$ is empty, then the alignment cost will be $\alpha_{\mathrm{gap}} \vert  X \vert$. So we obtained:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025105309.png" style="zoom:70%;" /></p>

<p>which means our algorithm would be progresively filling in a 2D array:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025105502.png" style="zoom:75%;" /></p>

<p>which obviously has a runtime of $O(nm)$.</p>

<p><strong>Proof of correctness?</strong> Induction on $i+j$ (the subproblem size), with the recurrence relationship justifying the inductive step.</p>

<p><strong>How do we reconstruct it?</strong> Start from the top $A[m][n]$ and figure out which of the three cases it went into. This can be done by checking A[i-1][j-1], A[i-1][j], A[i][j-1] and see which one it is. Then we can continue to that case and repeat. Details omitted here but this will be $O(n+m)$ since each time you are decreasing at least one of the two numbers $i,j$ by one.</p>

<h2 id="optimal-binary-search-trees">Optimal Binary Search Trees</h2>

<p>Goal: compute the best-on-average search tree given stastistics about the frequencies of different searches. Recall that the defining property of search tree is</p>

<blockquote>
  <p><strong>Search Tree Property</strong>: for every object $x$</p>
  <ol>
    <li>object in $x$’s left subtree must have keys smaller than $x$</li>
    <li>object in $x$’s right subtree must have keys larger than $x$
(assuming no duplicate keys for simplicity)</li>
  </ol>
</blockquote>

<p>This means that visually we are dealing with a fast search datastructure that looks like:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025110413.png" style="zoom:70%;" /></p>

<p><strong>for every subtree</strong> in the search tree. An example would be:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025110504.png" style="zoom:80%;" /></p>

<h3 id="average-search-time">Average Search Time</h3>

<p>Normally, when we consider a binary search tree, we measure the <strong>search time</strong> for a key $k$ to be the nunmber o nodes it need to visit while searching for $k$ (including $k$ itself). For exmaple in the following tree:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025110917.png" style="zoom:80%;" /></p>

<p>key “1” wold have a search time 5. Therefore, without weights, the ideal search tree would be a balanced one</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025111023.png" style="zoom:100%;" /></p>

<p>because this would minimize the length of the longest root-leaf path, or equivalently, the maximum search time. Minimzing the maximum search time <strong>makes sense since you don’t have knowledge about which searches are more likely than others</strong>.</p>

<p>However, here we consider the problem</p>

<blockquote>
  <p><strong>Optimal Binary Search Trees</strong>: A sorted list of keys $k_{1} &lt; k_{2} &lt; … &lt; k_n$ and nonnegative frequency $p_i$ for each key $k_i$. We want to minimize the <strong>weighted search time</strong>:</p>

\[\sum_{i=1}^n p_i \times \text{search time for } k_i = \sum_{i=1}^n p_i \times (1 + \mathrm{depth}_T(k_i) )\]

  <p>where $\mathrm{depth}_T(k_i)$ represent the depth of $k_i$ in the tree $T$. (The root will be considered as depth zero.)</p>
</blockquote>

<p>This looks <strong>very similar to the optimal prefix-tree code problem</strong>, where the goal is to also related to find a tree to minimize the average (weighted) depth. However, the challenge here is that, in the prefix-free code problem, the only restriction is that symbols appear at leaves, but here we have the <strong>search tree property</strong>. This makes greedy algorithm not work in this problem. Similarly divide-and-conquer algorithm would also struggle (imagining recursively choosing a root node to be the median, and continue). Fundamentally this is because <strong>the choice of root has unpredictable repercussions further down the tree</strong> if you chose too early.</p>

<p>So how do we do it? Different from other previous problems, there is no <em>clear notion of the rightmost/last object to pluck off and obtain optimal thing for subproblem</em>. But the intuition is that we can imagine building the tree from bottom up, and imagine the <strong>last decision we have to make = determing the root node!</strong>. Consider, if we know the optimal solution is the following</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025130312.png" style="zoom:80%;" /></p>

<p>Then we (intuitively) also</p>
<ul>
  <li><mark>know the optimal solution for keys $1, ..., r-1$ and $r+1,. .., n$ will be $T_1, T_2$</mark>. (see proof below)</li>
  <li>the key is IF we know <mark>"what $r$ is"</mark>
    <ul>
      <li>recall that in WIS, we know the rest of the solution if we know “whether the last vertex is included or not”</li>
      <li>recall that in Knapsack, we know the rest of the solution if we know “whether last item is included or not”</li>
    </ul>
  </li>
  <li>therefore, the smaller subproblem is the trees $T_1, T_2$, and the case analysis will be <em>all the possible roots</em>.</li>
</ul>

<hr />

<p><em>Proof</em>: Let the root of $T$ have key $r$ (same as figure above). We want to show that the residents of $T_1$ with $p_1, …, p_{r-1}$ is optimal, and similarly for $T_2$ with $p_{r+1}, …, p_n$.</p>

<p>Suppose by contradiction that one of the subtrees, e.g. $T_1$ is NOT an optimal solution, so that we have a search tree $T_1^*$ that achieves a better search time with the same keys:</p>

\[\sum\limits_{k=1}^{r-1} p_{k} \cdot  (k\text{'s search time in $T_1^{*}$}) &lt; \sum\limits_{k=1}^{r-1} p_{k} \cdot (k\text{'s search time in $T_1$})\]

<p>Then intuitively, we want to show that we can cut and paste this tree into $T$ and the obtain a cost better than $T$:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025162139.png" style="zoom:80%;" /></p>

<p>where RHS is the one we cut and pasted. The weighted search time of the original tree $T$ is:</p>

\[\begin{align*}
  &amp; p_{r} + \sum\limits_{i=1}^{r-1} (1 + 1 + \mathrm{depth}_{T_1}(k_i) ) + \sum\limits_{j=r+1}^{n} (1 + 1 + \mathrm{depth}_{T_2}(k_j) ) \\
  &amp;=  \sum\limits_{i=1}^{n} p_i + \sum\limits_{i=1}^{r-1} (1 + \mathrm{depth}_{T_1}(k_i) ) + \sum\limits_{j=r+1}^{n} (1 + \mathrm{depth}_{T_2}(k_j) ) \\
  &amp;= \sum\limits_{i=1}^{n} p_i + \text{weighted search time of $T_1$} + \text{weighted search time of $T_2$}
\end{align*}\]

<p>since the first and third term is the same for the weight time in $T^{<em>}$, and we know that $T_1^{</em>}$  is better than $T_1$, this is a contradiction to the statement that $T$ was optimal.</p>

<hr />

<p>From the above observation, we obtain the recurrence relationship that, llet $W_{i,j}$ denote the weighted search time for keys ${i, i+1, …, j}$, then:</p>

\[W_{1,n} = \sum\limits_{k=1}^{n} p_{k} + \min\limits_{r \in \{1,2, ..., n\}} \left( W_{1,r-1} + W_{r+1,n} \right)\]

<p>where $W_{1,n}$ is the full problem, and  $W_{1,r-1}, W_{r+1,n}$ are the subproblems. Notice that this also implies solving the subproblems (recursively) <strong>must be a dealing with a contiguous chunk of keys</strong> = a subtree. Since for the search tree property to hold, the above <strong>must be true for every subtree</strong>:</p>

\[W_{i,j} = \sum\limits_{k=i}^{j} p_{k} + \min\limits_{r \in \{i,i+1, ..., j\}} \left( W_{i,r-1} + W_{r+1,j} \right)\]

<p>where intutively, $W_{i, i}$ would representing you building a search tree with just the root node $r=i$. Then, the algorithm would just iteratively grow this tree like this:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025125708.png" style="zoom:80%;" /></p>

<p>Alternatively you can also just start with the purple diagonal as base case in your algorithm, and go to the top left. And you will fill each new diagional from bottmo left to top right (think about why by looking at the recurrence relation).</p>

<p>and the detailed algorithm would be:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231025164341.png" style="zoom:70%;" /></p>

<p>where the runtime would be:</p>

<ul>
  <li>there are $O(n^2)$ subproblems</li>
  <li>each subproblem does a min over $O(n)$ choices</li>
</ul>

<p>so the total runtime is $O(n^3)$ (though with some optimization, you can get to $O(n^{2})$)</p>

<h1 id="shortest-path-revisited">Shortest Path Revisited</h1>

<p>This chapter considers a DP approach for computing the shortest path in a graph. Both are slower than Dijkstra or Prim’s algorithm, but:</p>

<ul>
  <li>Bellman-Ford can deal with negative edge weights and can be done in a <em>distributed</em> manner</li>
  <li>Floyd-Warshall can also deal with negative edge weights and can compute shortest-path distance between <em>any pair</em> of vertices</li>
</ul>

<h2 id="shortest-path-with-negative-edge-length">Shortest Path with Negative Edge Length</h2>

<p>As mentioned before, Dijkstra algorithm ca nfail with graphs that has negative edges (but not negative cycles). The reason is the greedy decision it makes now doesn’t work. Consider:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231026233920.png" style="zoom:70%;" /></p>

<p>where the shortest path from $s \leadsto t$  will be $s \to t$ in the first iteration of Dijkstra, which is wrong.</p>

<p>In general (for any graph that may have negative edges or cycles):</p>
<ul>
  <li>if you have a negative cycle, then any shortest distance doesn’t make sense as its $- \infty$</li>
  <li>What if in the presence of a negative cycle you forbidden that option for your optimal path? This version where <em>no repeat vertices is allowed</em> of the single-source shortest path problem is actually a NP-hard problem.</li>
</ul>

<p>Therefore, in this section we will consider the revised problem</p>

<blockquote>
  <p><strong>Shortest Path Revised</strong>: given a directed graph $G=(V,E)$ with edge lengths $l_e$ for each edge $e \in E$, and a source vertex $s \in V$, either:</p>
  <ul>
    <li>If there is a negative cycle, then the algorithm should report it and done.</li>
    <li>Otherwise, compute the shortest path distance $d_v$ from $s$ to every other vertex $v \in V$.</li>
  </ul>
</blockquote>

<p>However, if there is no negative cycle, then there are a few properties we can exploit to help us reach a solution quickly:</p>

<blockquote>
  <p>If a graph has no negative cycle, the optimal path $s \leadsto v$  must <mark>contain at most $n-1$ edges/cannot contain repeated vertices</mark>.</p>
</blockquote>

<p>Proof: consider an optimal path $P’$ that has at least $n$ edges. This means it visits at least $n+1$ vertices, meaning some vertex $w$ is visited twice. This means we can splice the repeated part out from $P’$ while keeping thee same endpoints <strong>but with fewer edges now</strong>:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231026235102.png" style="zoom:75%;" /></p>

<p>But because there is no negative cycle, this spliced out (path) cycle must have nonnegative length. Therefore, the new path $P’’$ is shorter than $P’$, which is a contradiction.</p>

<h2 id="bellman-ford-algorithm">Bellman-Ford Algorithm</h2>

<p>Again, the most important step is to reason about the optimal solution: <strong>what are the different ways that an optimal solution might be built up from optimal solutions to smaller subproblems</strong>?</p>

<p>Naively, you may think of subproblems being something based on a subset of the $G$ we need to solve (e.g., similar to how we solve WIS, where input graph is a path graph and we just pluck the last vertex out). However, the problem now is that <em>where is the “last vertex” in a generic graph</em>? Bellman-Ford thus considers a different approach. Although there is no sequentiality in input graph, <em>there is sequentialality in output graph, i.e., the optimal path</em>:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231027112721.png" style="zoom:80%;" /></p>

<p>which we will show that $P’$ must also be shortest (even if $w \to v$ can ve negative). This is great, but <mark>what is the subproblem</mark>?</p>

<blockquote>
  <p><strong>Bellman-Ford Subproblem</strong>: we only consider (optimal) paths that use <em>less than $i$ edges</em> each time. More formally, let the input graph be $G=(V,E)$ with a given source vertex $s \in V$. Consider finding the optimal $P$ bewteen $(s,v)$ that includes <em>at most $i$ edges</em>.</p>
  <ul>
    <li>note that different from previous DP, each subproblem here <em>still work on the full input</em></li>
  </ul>
</blockquote>

<p>How does this help construct an optimal solution to a larger problem? Consider the following:</p>

<ol>
  <li>that optimal $P$ for $s \leadsto v$ has <strong>at most $i-1$ edges</strong> (already a pretty good path using a budget $i-1$). Then $P$ must also be the <strong>optimal solution with edge budget $i-1$ for $s \leadsto v$</strong>. (Proof by contradiction: if not, then that shorter path would also be shorter for the original subproblem of at most $i$ edges.)</li>
  <li>that optimal $P$ uses <strong>exactly $i$ edges</strong>. Consider visually that optimal path and $P’$ being the last edge plucked (say $(w,v)$):
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231027113744.png" style="zoom:80%;" />
then that $P’$ is <strong>an $s \leadsto w$ optimal path with at most $i-1$ edges</strong> (<mark>a smaller subproblem BUT with different destination</mark>). This can be easily shown by contradiction as well, because if there exists a better path with at most $i-1$ edges from $s \leadsto w$, then we can swap that out and obtain a better $P$ to the original problem.</li>
</ol>

<p>Therefore:</p>
<ul>
  <li>we can construct an optimal $P$ for the budget of $i$ using the “two” cases above</li>
  <li>but how many subsoluions will the original subproblem need to look at? Consider computing the optimal path $s \leadsto v$ with cost $i$. Then “case 1” is one candidate, and “case 2” would have $\text{in-degree}(v)$ candidates. So in total it will scan through $1+\text{in-degree}(v)$ candidates.</li>
</ul>

<p>Anyway, this gives use the recurrence relationship. Let $L_{i,v}$ denote the minimum length of an $s\leadsto v$ path with at most $i$ edges, <em>cycles allowed</em> (since we have an edge budget, even negative cycles could be fine in this definition for now). Then for every $i \ge 1, v \in V$:</p>

\[L_{i,v} = \min \begin{cases}
  L_{i-1, v} \\
  \min\limits_{(w,v) \in E} \left( L_{i-1, w} + l_{wv} \right)
\end{cases}\]

<p>if no such path exist, then $L_{i,v} = \infty$. But when should we stop $i$?</p>

<blockquote>
  <p><strong>Bellman-Ford Convergence</strong>: interestingly, we can show that $L_{i,v}$ will converge if for some $k \ge 0$:</p>

\[L_{k+1,v} = L_{k,v}  \qquad \forall v \in V\]

  <p>then this would mean:</p>
  <ol>
    <li>$L_{k’,v} = L_{k,v}$ for every $k’ \ge k$ and any destination $v$</li>
    <li>for every destination $v$, then $L_{k,v}$ must be the $\mathrm{shortest}(s,v)$ in $G$</li>
  </ol>
</blockquote>

<p><em>Proof for statement 1:</em> Because $L_{k+1,v} = L_{k,v}$, then this means the subproblem of $L_{k+2}$ is doing</p>

\[L_{k+2,v} = \min \begin{cases}
  L_{k+1, v} \\
  \min\limits_{(w,v) \in E} \left( L_{k+1, w} + l_{wv} \right)
\end{cases} = \min \begin{cases}
  L_{k, v} \\
  \min\limits_{(w,v) \in E} \left( L_{k, w} + l_{wv} \right)
\end{cases}
= L_{k+1,v}\]

<p>Thus, any future subproblem will be the same as $L_{k+1,v}$, which is the same as $L_{k,v}$ by assumption.</p>

<p><em>Proof for statement 2:</em> if $L_{k,v}$ is NOT the shortest path for subproblem with at most $k$ edges. Then the shortest path must be beyond $k$ edges. This is a contradiction since we know that $L_{k’,v} = L_{k,v}$ for any $k’ \ge k$ if the assumption holds.</p>

<blockquote>
  <p><strong>Bellman-Ford Stops with No Negative Cycles</strong>: if there ARE negatiev cycles in the graph, then the condition $L_{k+1,v} = L_{k,v}, \forall v \in V$ in general will not even happen. But if there are <strong>no negative cycles</strong>, then it will converge exactly when reached $n-1$ edge budget (i.e., every vertex used in the path):</p>

\[L_{n,v} = L_{n-1,v}  \qquad \forall v \in V\]

  <p>the contrapositive statement of this is also powerful:</p>

\[\text{no neg cycle means convergence} \implies \text{not converging means has neg cycle}\]

  <p>so this algorithm can also detect negative cycles.</p>
</blockquote>

<p>Why? Remeber we showed that in Section <a href="#Shortest_Path_with_Negative_Edge_Length">Shortest Path with Negative Edge Length</a>, the optimal $s \leadsto v$ path in a graph with no negative cycle must at most visited every vertex once (otherwise we could remove the cycle and get a shorter path). Therefore, this is <mark>the only place where we need the no-negative cycle condition</mark>, such that Bellman-Ford’s algorithm will stop/converge at $n-1$ iterations. <strong>If not, then there is a negative cycle</strong>:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231027121122.png" style="zoom:80%;" /></p>

<p>where again, we needed to fill up a 2D array because we have two parameters, $i,v$ for the subproblem.</p>

<p><strong>Proof of Correctness</strong>: induction on $i$, with our recurrence relationship justifying the inductive step.</p>

<p><strong>Runtime</strong>: Superficially it looks like $O(n^{2})$ loops with $O(n)$ to compute the recurrence relation in the inner most loop. However, realize that during the “for $v\in V$” loop we actually just did:</p>

\[\sum_{v \in V} \text{in-degree}(v) = m\]

<p>abd in the outer for loop over $n$ iterations, we thus only need $O(nm)$ time! (if the graph is <em>dense</em>, then $m=O(n^{2})$ so we get the same solution as our naive analysis).</p>

<h2 id="floyd-warshall-algorithm">Floyd-Warshall Algorithm</h2>

<p>Now we can deal with all-pairs shortest path:</p>

<blockquote>
  <p><strong>All-Pairs Shortest Path Problem</strong>: consider a directed graph $G=(V,E)$ with a real-valued length $l_e$ for each edge. The goal is to:</p>
  <ul>
    <li>find the shortest path distance $\mathrm{shortest}(u,v)$ from <em>every</em> vertex $u$ to every other vertex $v$.</li>
    <li>if there is a negative cycle, then the algorithm should report it and done.</li>
  </ul>
</blockquote>

<p>Technically, we could solve this using Bellman-Ford by treating every vertex as source vertex. This will give us $O(n^{2}m)$ runtime, with potentially $m=O(n^{2})$. We show that we can do better than this by finishing in $O(n^{3})$.</p>

<p>The trick here is to still look at the output paths, and also puts some contraint on length. However, we further restrict the <em>identity of the vertices that can go into the solution</em>.</p>

<blockquote>
  <p><strong>Floyd-Warshall Subproblem</strong>: First we label each vertex $v\in V$ with names ${1,2,3, …, n}$. Then, consider the shortest path from $v$ to $w$ that only uses vertices in ${1,2, …, k}$ as intermediate vertices. i.e. this minimum path</p>
  <ul>
    <li>begins at $v$ and ends at $w$</li>
    <li>the path (excluding $v,w$) only includes vertices in ${1,2, …, k}$</li>
    <li>does not contain a directed cycle (by <mark>assuming there is no negative cycle</mark> so that we can splice out any cycle out of a path and end up with a lower cost.)
      <ul>
        <li>We shall also see how negative cycles can be detected later</li>
      </ul>
    </li>
  </ul>

  <p>Let $L_{k, u, v}$ denote the length of this path. If no such path exists, then $L_{k, u, v} = \infty$. Note that you can therefore <strong>imaging subproblem size defined by $k$</strong>: for a fixed origin-destination pair $v,w$, the set of allowable path will grow by $k$ and the minimum cost will only decrease.</p>
</blockquote>

<p>For example:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231027123349.png" style="zoom:80%;" /></p>

<p>In this graph, if we had source and vertex being $1,5$, then if $k=0,1,2$ there is no feasible path so $L_{k,1,5}=\infty$. However, when $k=3$, then the path $1 \to 2 \to 3 \to 5$ is eligible (and being the only one) with cost $L_{3,1,5} = 3$.</p>

<p>This we will soon see will make the optimal solution naturally break down into only two smaller subproblems. Suppose $P$ is a $v \leadsto w$ with no cycles and only uses vertices in ${1,2, …, k}$ as intermediate vertices. Then realize that that $P$ can  <em>either use the lastly added vertex $k$ or not</em>:</p>

<ol>
  <li>Case 1: <strong>optimal $P$ for $v \leadsto w$ did NOT use $k$</strong> as an intermediate vertex. Then $P$ must be an optimal path with at most $k-1$ intermediate vertices as well. (Proof by contradiction)</li>
  <li>
    <p>Case 2: <strong>optimal $P$ for $v \leadsto w$ did use $k$</strong>. Then we can split the path into two by <em>removing $k$ to be uneligible</em>:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231027124934.png" style="zoom:80%;" /></p>

    <p>because $k$ could have only appeared in $P$ once (by assumption of cycle-free optimal path), then $P_1$ is optimal with origin $v$ and destination $k$, and $P_2$ is optimal with origin $k$ and destination $w$, <strong>both with a smaller subproblem using only ${1,2, …, k-1}$ vertices</strong>.</p>
    <ul>
      <li>to prove that $P_1, P_2$ is also optimal is slightly tricky here. Suppose there is a better $P_1^{<em>}$ for $v \leadsto k$. To concatenate $P_1</em>$ with $P_2$ we want to have a lower cost than $P$ to get a contradiiction.
        <ul>
          <li>If $P_1^{*}$ with $P_2$ will have no cycle, proof done.</li>
          <li>If $P_1^{<em>}$ with $P_2$, denote $P^{</em>}$, now has a cycle, we need to invoke the assumption that there is no negative cycle in $G$. Therefore we can splice up the cycle in $P^{<em>}$ such that we still hhave the same origin $u$ and destination $v$ in now a cycle free path $\hat{P}$, which can only be shorter than $P^{</em>}$.</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<blockquote>
  <p>In sum, we broke the large problem into “two” subproblems: <strong>case 1 is reducing the problem size by one</strong>, and case 2 is <strong>reducing the problem size by one AND changing the source/destination pairs</strong>.</p>
</blockquote>

<p>Therefore, <mark>suppose (for now) $G$ has no negative cycles</mark>. Then the <strong>recurrence relation</strong> is deinfed by letting $L_{k,v,w}$ be the minimum length of a cycle-free path from $v$ to $w$ that only uses vertices in ${1,2, …, k}$ as intermediate vertices. Then:</p>

\[L_{k,v,w} = \min \begin{cases}
  L_{k-1, v, w} \\
  L_{k-1, v, k} + L_{k-1, k, w}
\end{cases}\]

<p>which has to be true for every $k \in {1,2, …, n}$ and every $v,w \in V$.</p>

<p>Finally this gives the algorithm:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231027130119.png" style="zoom:75%;" /></p>

<p>where note that:</p>
<ul>
  <li>since we are viewing subproblems defined by size $k$, the base cases are $L_{0,v,w}$. This can result in three cases:
    <ul>
      <li>if $v=w$, then $L_{0,v,w}=0$</li>
      <li>if $(v,w) \in E$, then $L_{0,v,w}=l_{vw}$</li>
      <li>otherwise $L_{0,v,w}=\infty$</li>
    </ul>
  </li>
  <li>since the subproblems grows by $k$, the outermost loop will start with $k$</li>
  <li>this algorithm <mark>can detect negatiev cycles as well</mark> (see below why)</li>
</ul>

<p><strong>Proof of Correctness</strong>: induction on $k$, with our recurrence relationship justifying the inductive step.</p>

<p><strong>Runtime</strong>: $O(n^{3})$ since we are filling in a 3D array, and each subproblem takes $O(1)$ time to compute.</p>

<h3 id="detecting-negative-cycles">Detecting Negative Cycles</h3>

<p>What if the input graph has a negative cycle?</p>

<blockquote>
  <p><strong>Lemma 18.8</strong>: the graph $G$ has a negative cycle if and only if, at the conclusion of the algorithm, there is a vertex $v$ such that $L_{n,v,v} &lt; 0$.</p>
</blockquote>

<p><em>Proof</em>: if there is no negative cycle, then obviously $L_{n,v,v} = 0$ for every $v$ since every shortest path will also be cycle free. But if there is a negative cycle, then this means $G$ has a negative cycle with no repeated vertices other than its start and end (e.g. $v$). The trick is to think about two paths to form such a cycle, and argue how a repeated vertex can be spliced out.</p>

<p>Let $C$ denote such a cycle, and let $k$ be the largest labeled vertex of $C$ with $k \neq v$:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231027132431.png" style="zoom:80%;" /></p>

<p>then we know:</p>
<ul>
  <li>$P_1, P_2$ are cycle-free $v \leadsto k$ and $k \leadsto v$ paths respectively (since this cycle has no repeated vertex other than source) with vertices restricted to ${1,2, …, k-1}$</li>
  <li>then Floyd-Warshall would found $L_{k-1, v, k}$ and $L_{k-1, k, v}$ to be at least smaller or equal to the actual length of $P_1, P_2$ (being cycle-free)</li>
  <li>therefore, $L_{k,v,v}$, which is at most the length $L_{k-1, v, k} + L_{k-1, k, v}$, <strong>will also be smaller or equal $C$</strong>, which is negative.</li>
</ul>

<p>Therefore, if there is a negative cycle, $L_{k,v,v}$ will at least once become negative. This means $L_{n,v,v}$ will be negative since for each iteration $k’ &gt; k$ the minimum length only decreases.</p>

<h1 id="max-flows-and-min-cuts">Max Flows and Min Cuts</h1>

<p>Before we dive into the algorithms, its sometimes enlightening to see how those seemingly “unrelated/unpractical” algorithms can be very useful in practice. Here we will see two examples.</p>

<h2 id="minimum-cut-problem">Minimum Cut Problem</h2>

<blockquote>
  <p><em>Minimum Cut Problem</em>: consider a flow nertwork consisting of a directed graph $G=(V,E)$ with <strong>a source vertex $s$ and a sink vertex $t$</strong>. Each edge $e \in E$ has a capacity $c_e$. The goal is to find a $(s,t)$ cut into two sets $A,B$ such that it minimizes the total capacity of edges sticking out from set $A$ into $B$.</p>

\[\min \sum_{e =(u,v); u \in A, v \in B} c_e\]

  <ul>
    <li>basically think of those source and sink as water flows, and the capacity is the pipe</li>
    <li>the cut is basically coming up with two groups of vertices but one needs to include $s$ and the other needs to include $t$.</li>
  </ul>
</blockquote>

<p>Visually, a cut below would be optimal with a total capcity of 3:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231102231406.png" style="zoom:30%;" /></p>

<p>where:</p>
<ul>
  <li>the purple edge would not count as it is <em>not flowing from $A$ to $B$</em></li>
  <li>the green edge will count</li>
  <li>the blue edge would not count as it is <em>flowing from $B$ to $A$</em></li>
</ul>

<p>Notice that since this is just choosing which vertex goes where, there are $2^{n-2}$ possible cuts (excluding source and sink). We will not see an algorithm here, but we will see how this can be solved in linear time in the next section.</p>

<h2 id="minimum-cut-application-image-segmentation">Minimum Cut Application: Image Segmentation</h2>

<p>We will see how this minimum cut problem relates to how we can do image segmentation. First we formalize the “version” of image segmentation we are considering:</p>

<blockquote>
  <p><em>Image Segmentation with Fore/background</em>: Consider the task of classifying pixels of an image to be either foreground or background. Let us be given some prior (e.g. heuristics, non-negative) that each pixel could be in foreground with $a_v$ and background with $b_v$. Additionally, we are given non-negative $p_e$ for each undirected edge between each pixel, which represents the fact that we want neighboring pixels to be close together, i.e. smooth.</p>

  <p>Then, we can define the segmentation as an <em>undirected graph</em> with all those costs/rewards assigned to the vertices and edges:
<img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231102232526.png" style="zoom:30%;" /></p>

  <p>where the first value of the nertex denotes $a_v$ and second denotes $b_v$ in this example. We <strong>want to maximize the objective</strong>:</p>

\[\max_{(X,Y)}\quad \sum_{v \in X} a_v + \sum_{v \in Y} b_v - \sum_{e \in \delta(X)} p_e\]

  <p>which represents an “MLE” objective of wanting all the foreground-likely pixels in $A$, and all the background-likely pixels in $B$, while also wanting to minimize the cost of the “incongruity” between $A$ and $B$. $\delta(X)$ denotes the cut edges between $A$ and $B$.</p>
</blockquote>

<p>The claim is that this problem reduces to the minimum cut problem. First we note a few similarlities and differences to motivate the reduction:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Similarities</th>
      <th style="text-align: center">Differences</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">both problem needs a partition</td>
      <td style="text-align: center">here we consider <em>undirected edges</em></td>
    </tr>
    <tr>
      <td style="text-align: center">both want to minimize the cut across partitions</td>
      <td style="text-align: center">missing a <em>source and sink vertex</em></td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center">additional $a_v, b_v,p_e$ costs</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center">maximization instead of minimization</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>Our overall reduction approach will be intuitive for this class:</p>
  <ol>
    <li>transform the problem into the problem that can be solved by (e.g. min cut algorithm)</li>
    <li>transform the solution of that problem back to the original problem</li>
    <li>finally show that the transformed solution is optimal to the original problem</li>
  </ol>
</blockquote>

<p>So how do we convert from the two different graph problems? A few are easy fixes. Let the original segmentation graph be $G$, we consider building a new graph $G’$:</p>

<ul>
  <li>
    <p><strong>max problem to a min problem?</strong> Multiply by negative one:</p>

\[\max_{(X,Y)} \sum_{v \in X} a_v + \sum_{v \in Y} b_v - \sum_{e \in \delta(X)} p_e \implies \min_{(X,Y)} -\sum_{v \in X} a_v - \sum_{v \in Y} b_v + \sum_{e \in \delta(X)} p_e\]

    <p>and we can “remove the negative sign” by adding the constant $\sum\limits_{v \in V}a_{v} + \sum\limits_{v \in V}b_{v}$ to <em>every</em> edge, which gives:</p>

\[\implies \min_{(X,Y)} +\sum_{v \in X} b_v +\sum_{v \in Y} a_v + \sum_{e \in \delta(X)} p_e\]

    <p>which (unlike the case of shortest path problem) does <em>not</em> change the optimal solution.</p>
  </li>
  <li>
    <p><strong>undirected edges to directed?</strong> add both and give both a penalty of $p_e$ to mimic $c_e$:</p>

    <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231102234327.png" style="zoom:35%;" /></p>
  </li>
  <li>
    <p><strong>missing source and sink?</strong> Add them to the new graph $G’$ so that $V’ = V \cup {s,t}$</p>

    <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231102234446.png" style="zoom:30%;" /></p>

    <p>where we can make $s$ the source by adding a directed edge from $s$ to <em>every edge in $V$ but not $t$</em>, and similarlity make $t$ the sink by adding a directed edge from <em>every edge in $V$ but not $s$</em> to $t$:</p>
  </li>
  <li>
    <p><strong>additional $a_v, b_v$ costs?</strong> Since now we have an edge from $s$ to every vertex $v \in V$, we can just assign $a_v$ to the capacity of that edge, and similarly for $b_v$.</p>

    <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231102234841.png" style="zoom:25%;" /></p>
  </li>
</ul>

<p>Now, compare the two graphs we get $G$ and $G’$:</p>

<ul>
  <li>
    <p>there is a bijection where every parition $X,Y$ of $V$ will correspond to a cut $A,B$ in $G’$. This is basically because we can just have $A \iff X \cup {s}$ and $B \iff Y \cup {t}$.</p>

    <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231102235254.png" style="zoom:15%;" /></p>
  </li>
  <li>
    <p>then we argue that <strong>computing the capacity $\sum_{e =(u,v); u \in A, v \in B} c_e$ of such cut in $G’$</strong> is the same as <strong>computing the objective function of $\sum_{v \in X} b_v +\sum_{v \in Y} a_v + \sum_{e \in \delta(X)} p_e$</strong>. How?</p>

    <p>Consider computing the capacity of the cut $A,B$ in $G’$. You see that the edges that going across $A,B$ would be:</p>
    <ul>
      <li>for every $v \in Y$, we pay $a_v$ for edges $(s,v)$ which crosses the boundary (left to right)</li>
      <li>for every $v \in X$, we pay $b_v$ for edges $(v,t)$ which crosses the boundary (left to right)</li>
      <li>finally we pay $p_e$ for all the edge that starst in $A$ and ends in $B$ (which is exactly $\sum_{e \in \delta(X)} p_e$)</li>
    </ul>

    <p>adding all the above up we get exactly $\sum_{v \in X} b_v +\sum_{v \in Y} a_v + \sum_{e \in \delta(X)} p_e$ for $G$.</p>
  </li>
  <li>
    <p>since we can minimize the capacity in $G’$, we can minimze $\sum_{v \in X} b_v +\sum_{v \in Y} a_v + \sum_{e \in \delta(X)} p_e$, which maximizes the original objective function.</p>
  </li>
  <li>
    <p>finally to reconstruct the partition $X,Y$ from the cut $A,B$, we just remove $s$ from $A$ and $t$ from $B$.</p>
  </li>
</ul>

<h2 id="maximum-flow-algorithm">Maximum Flow Algorithm</h2>

<p>Similar to minimum flow, we start with a flow graph $G=(V,E)$  wth <strong>directed edges</strong>, a source vertex $s$ and a sink $t$. Each edge $e \in E$ has a capacity $c_e$. The goal is to find a “flow” $f$ that maximizes the total flow from $s$ to $t$.</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109222028.png" style="zoom:80%;" /></p>

<p>where in the right flow, we made “three streams of water flow”:</p>
<ul>
  <li>path $s \to v \to t$ with flow 2, because the $v\to t$ bottlenecks at 2</li>
  <li>path $s \to w \to t$ with flow 2, because the $s\to w$ bottlenecks at 2</li>
  <li>path $s \to v \to w \to t$ with flow 1, because the $s \to v$ only has 1 capacity left</li>
</ul>

<p>But how do we formalize this into a problem (and find an algorithm to solve it)? First, we need to redefine what it means to be a valid flow:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">View 1</th>
      <th style="text-align: center">View 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109222428.png" style="zoom:70%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109222415.png" style="zoom:70%;" /></td>
    </tr>
  </tbody>
</table>

<p>and notice that <mark>these two are equivalent</mark>: specifying a configuation of <mark>valid flow is the same as obeying the conservation principle</mark>. If each edge is spending $\le$ its full capacity and for each vertex (except for $s,t$) the <mark>total outflow equals total inflow</mark>, then it is a valid flow. (Note that this understanding is critical to figure out why the algorithm works.)</p>

<p>Therefore, this gives us the formal definition:</p>

<blockquote>
  <p><strong>Maximum Flow Problem</strong>: given a flow graph, assign a flow amount $f_e \ge 0$ to every edge such that:</p>
  <ul>
    <li>for every edge $e \in E$, $f_e \le c_e$ (i.e. you cannot exceed the capacity)</li>
    <li>for every vertex $v \in V \setminus {s,t}$, the total inflow equals total outflow</li>
  </ul>

  <p>the goal is to <strong>maximize</strong> the total flow from $s$ to $t$ = total flow out of $s$ = total flow into $t$.</p>
</blockquote>

<p>The intuition of solving this is to first try a intuitive greedy approach, figure out what went wrong, and attempt to fix that (magically reach the correct algorithm in this case).</p>

<h3 id="naive-greedy-maximum-flow-algorithm">Naive Greedy Maximum Flow Algorithm</h3>

<p>Idea:  start with the all-zero flow (i.e. all edges assigned $f_e = 0$) and greedily produce ﬂows with ever-higher value:</p>

<ol>
  <li>find a viable path $s \overset{P}{\leadsto} t$ in the graph (i.e. can send flow through) using BFS/DFS while checking $f_{e} \le u_e$ does not exceed capacity</li>
  <li>if none exist, then we are done</li>
  <li>if found, find how much we can send through on that path $\Delta = \min_{e \in P} (u_e - f_e)$ where $f_e$ represents the current flow we assigned on that edge</li>
</ol>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109223809.png" style="zoom:70%;" /></p>

<p>Technically this is already greedy, to make it “greedier” consider step 1 to always pick the path that has highest $\Delta$. Either way, we show that this algorithm is incorrect:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Greedy Output</th>
      <th style="text-align: center">Optimal Output</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109224100.png" style="zoom:70%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109224111.png" style="zoom:70%;" /></td>
    </tr>
  </tbody>
</table>

<p>where the greedy algorithm can be “unlucky” in that if it picked the zig-zag path in the first iteration, then it has to terminate with flow 3. But the optimal solution is flow 5.</p>

<h3 id="residual-graph-and-the-ford-fulkerson-algorithm">Residual Graph and the Ford-Fulkerson Algorithm</h3>

<p>The key idea is to imagine to be able to send flow <strong>backward</strong> along the edge. How does this work? Essentially it relies on the equivalent view that <mark>all we need is conservation of flow at each vertex</mark>. For example considering the blue path:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Sending Flow Backward</th>
      <th style="text-align: center">Optimal Solution</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109224747.png" style="zoom:70%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109224800.png" style="zoom:70%;" /></td>
    </tr>
  </tbody>
</table>

<p>Now notice that <strong>these are the same</strong>! Because we are sending flow in the opposite direction, we can just subtract that from the existing flow we assigned (alike thinking about Kirchoff’s law in circuits). This is the idea of the <strong>residual graph</strong>:</p>

<blockquote>
  <p><em>Residual Graph</em>: given a flow graph $G=(V,E)$ with a flow $f$ assigned to each edge, the residual graph $G_f$ is defined as:</p>
  <ul>
    <li>the same set of vertics</li>
    <li>but with two directed edges for each edge in $G$
an edge $e = (v,w)$ that carries flow $f_e$ spawns into a forward edge of $G_f$ with capacity $u_e - f_e$, and a backward edge with capacity $f_e$.</li>
  </ul>

  <p>Visually:</p>

  <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109225642.png" style="zoom:70%;" /></p>

  <p>and as a result, <strong>any feasible flow in $G$ must still be feasible in $G_f$</strong>, because the remaining flow is kept by the forward edge. But since we now also have backward edges, the “search space” for possible flows is now larger. Though how is this useful?</p>
</blockquote>

<p>First a concrete example of what a redidual graph looks like:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Given a flow $f$ graph</th>
      <th style="text-align: center">Resdiual $G_f$ verbose</th>
      <th style="text-align: center">Residual $G_f$ simplified</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109224100.png" style="zoom:70%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109225311.png" style="zoom:70%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109225318.png" style="zoom:70%;" /></td>
    </tr>
  </tbody>
</table>

<p>where essentially now:</p>
<ul>
  <li>the forward edge in residual graph means how much flow can you <em>still send out</em></li>
  <li>the backward edge is how much you can undo, i.e. from the flow you <em>already sent out</em></li>
</ul>

<p>We now show that the Ford-Fulkerson algorithm <strong>just needs to use that residual graph to be correct</strong>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">ford_fulkerson</span><span class="p">():</span>
  <span class="n">initialize</span> <span class="p">{</span><span class="n">f_e</span><span class="p">}</span> <span class="n">to</span> <span class="n">be</span> <span class="nb">all</span> <span class="n">zero</span>
  <span class="n">G_f</span> <span class="o">=</span> <span class="n">residual_graph</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="p">{</span><span class="n">f_e</span><span class="p">})</span>  <span class="c1"># a residual graph is defined with a flow
</span>  <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># simple modified DFS/BFS can do this in O(m)
</span>    <span class="n">P</span> <span class="o">=</span> <span class="n">find_path</span><span class="p">(</span><span class="n">G_f</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>  <span class="c1"># find a path in RESIDUAL graph s.t. every edge has positive capacity
</span>    <span class="k">if</span> <span class="n">P</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span><span class="n">f_e</span><span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">Delta</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">capacity</span> <span class="n">of</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">G_f</span> <span class="ow">in</span> <span class="n">that</span> <span class="n">path</span> <span class="n">P</span><span class="p">)</span>  <span class="c1"># find the bottleneck capacity
</span>
      <span class="c1"># increase the flow from what we found
</span>      <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">P</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">e</span> <span class="ow">is</span> <span class="n">forward</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">G</span><span class="p">:</span>  <span class="c1"># flow in the real graph
</span>          <span class="n">f_e</span> <span class="o">+=</span> <span class="n">Delta</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="n">f_e</span> <span class="o">-=</span> <span class="n">Delta</span>
    <span class="n">G_f</span> <span class="o">=</span> <span class="n">residual_graph</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="p">{</span><span class="n">f_e</span><span class="p">})</span>  <span class="c1"># update the residual graph
</span></code></pre></div></div>

<p>where the only difference is that now we are <strong>searching for path in the residua graph</strong> (which has more options). But why it this correct?</p>

<h3 id="correctness-of-ford-fulkerson-algorithm">Correctness of Ford-Fulkerson Algorithm</h3>

<p>The plan is similar to proving <a href="#prims-algorithm">Prim’s Algorithm</a> where we show correctness by:</p>
<ol>
  <li>FF algorithm outputs a viable flow</li>
  <li>There is some property that gives rises to the maximum flow</li>
  <li>FF output satisfies that property</li>
</ol>

<hr />

<p><em>Proof of Claim 1</em>: The intuition is that every iteration of the algorithm we are maintainining the invariance that ${f_e}_{e \in E}$ is a flow. This is essentially because</p>
<ul>
  <li>we chose $\Delta$ such that no $f_e$ in the real graph $G$ to become negative or exceeds $u_e$</li>
  <li>every edge still preserves “flow in equals flow out”. Why? Consider a vertex $v \in P$ for a $P$ in $G_f$ we picked at the current iteration of the algorithm. Then there is an edge $(x,v)$ and $(v,w)$ with some flow we assigned. Since this flow assigned is in the residual graph:
    <ul>
      <li>if $(x,v)$ corresponded to the forward edge in $G$, vertex $v$ <em>increased incoming flow by $\Delta$</em>. If $(v,w)$ corresponds also to forward edge, then it <em>increased outgoing flow by $\Delta$</em>. Therefore, the net flow in/out $v$ stayed the same.</li>
      <li>if $(x,v)$ corresponded to the forward edge in $G$, vertex $v$ <em>increased incoming flow by $\Delta$</em>. If $(v,w)$ corresponds also to backward edge, then it <em>decreased incoming flow by $\Delta$</em>. Therefore, the net flow in/out $v$ stayed the same.</li>
      <li>… in total four cases, and all of them preserve the flow in/out $v$.</li>
    </ul>
  </li>
</ul>

<p>Therefore, if the algorithm halted, the flow ${f_e}_{e \in E}$ <strong>is a viable flow</strong>. Finally, since every iteration of the algorithm increases the value of the current flow by $\Delta &gt; 0$, and since there is only a finite amount of flow that can come out of $s$ source, the algorithm <strong>will terminate</strong> eventually.</p>

<hr />

<p><em>Proof of Claim 2</em>: Recall that in a directed graph $G$ with a source $s$ and sink $t$, an $s-t$ cut is a partition of $V$ into $A,B$ such that $s \in A$ and $t \in B$. The capacity of the cut is the sum of the capacities of edges <strong>crossing from $A$ to $B$</strong>. We claim that</p>

<blockquote>
  <p><strong>Optimality Condition for Max Flow</strong>: let $f$ be a valid flow in graph $G$, then:</p>
  <ul>
    <li>$f$ is a maixmum flow</li>
    <li>$\iff$ there is an $s-t$ cut with capacity equal to the value of $f$</li>
    <li>$\iff$ there is no $s \leadsto t$ path with positive capacity in the residual graph $G_f$</li>
  </ul>

  <p>where condition 3 is basically when FF algorithm terminates, so if we can prove this then we are done.</p>
</blockquote>

<p>(note that condition 3 is quite “strong”, it means <strong>all you need to do is to somehow come up with a flow $f$ such that the residual network has no more viable $s \leadsto t$ path</strong>.)</p>

<blockquote>
  <p>First we show that condition (2) implies condition (1)</p>
</blockquote>

<p>The intuition is that for ean $s-t$ cut we do, that cost will include all the edge costs that flows out of $A$. Therefore, for any flow configuration $f$, it will consist of path that goes out from $A$ to $B$. Since the maximum/best case scenraio is the flow configuration exhausts all out-flowing capacity, therefore:</p>

\[\text{value of any }f \le \text{capacity of any }s-t \text{ cut}\]

<p>To prove this inequality a bit more formally, the value $f$ of any flow can be considered as</p>

\[\text{value of }f = \sum\limits_{e \in \delta^{+}(s)} f_{e} = \sum\limits_{e \in \delta^{+}(s)} f_{e} - \underbrace{\sum\limits_{e \in \delta^{-}(s)} f_{e}}_{\mathrm{zero}}\]

<p>since $\delta^{-}(s) = \empty$ as source has no incoming edges. Then, consider any $A,B$ cut in residual graph $G_f$. Since the conservation property hold, all other vertices will have the two terms zero:</p>

\[\text{value of }f = \sum\limits_{v \in A} \left( \sum\limits_{e \in \delta^{+}(v)} f_{e} - \sum\limits_{e \in \delta^{-}(v)} f_{e} \right)\]

<p>which is essentially to count every edge’s contribution in $A$. But then that is <strong>essentially treating $A$ as a giant “source” vertex</strong>, so that:</p>

\[\text{value of }f = \sum\limits_{e \in \delta^{+}(A)} f_{e} - \sum\limits_{e \in \delta^{-}(A)} f_{e}\]

<p>Then the rest is obvious: all the flow coming out of $A$ cannot be larger than the capacity $u_e$, and all $f_e$ back into $A$ are non-negative, so:</p>

\[\begin{align*}
  \text{value of }f 
  &amp;= \sum\limits_{e \in \delta^{+}(A)} f_{e} - \sum\limits_{e \in \delta^{-}(A)} f_{e} \\
  &amp;\le \sum\limits_{e \in \delta^{+}(A)} u_e - \sum\limits_{e \in \delta^{-}(A)} 0 \\
  &amp;= \sum\limits_{e \in \delta^{+}(A)} u_e \\
\end{align*}\]

<p>therefore, visually this inequality means:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109234433.png" style="zoom:80%;" /></p>

<p>so if value of <strong>one of $s-t$ cut overlapped with the cross in the figuer above</strong> (condition 2), then that cross has to be the maximum $f$ you can have due to the inequality above $\implies$ condition (1).</p>

<blockquote>
  <p>Next we show that (1) implies (3)</p>
</blockquote>

<p>This is obvious. If by contrapositive that we still find a s-t path in $G_f$, then we can just increase the flow by $\Delta$ and still have a viable flow. But this contradicts the fact that (1) is a maximum flow.</p>

<blockquote>
  <p>Finally we show (3) implies (2).</p>
</blockquote>

<p>If (3) is true (no $s \leadsto t$ path possible in $G_f$), then we can obtain a partition $A$ by just doing a BFS/DFS from $s$ until we get stuck:</p>

\[A = \{ v \in V: \text{ther is an $s \leadsto v$ path in $G_f$} \}\]

<p>then the other partition $V-A$ will contain $t$. Additionally, such a cut must look like this:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231110000720.png" style="zoom:80%;" /></p>

<p>where no (positive) edges would be sticking out of $A$, as otherwise we would have expanded $A$. But what does this cut mean <strong>for the original graph $G$</strong>?</p>

<ul>
  <li>
    <p>Every edge sticking <em>out</em> of $A$ in $G$ must had assigned $f_e = u_e$ saturated the capacity. If not, then the residual graph $G_f$ would have a positive capacity edge forward edge (representing how much capacity you can still send) sticking out of $A$.</p>
  </li>
  <li>
    <p>Every edge going <em>into</em> $A$ in $G$ must have an assigned $f_{e} = 0$. This corresponds to the residual graph $G_f$ having an edge of $0$ sticking <em>out of</em> $A$ to $B$ (recall that the corresponding backward edge in $G_f$ represents the flow you have already sent out).</p>
  </li>
</ul>

<p>Now recall that we had the inequality before, it now becomes equality</p>

\[\begin{align*}
  \text{value of }f 
  &amp;= \sum\limits_{e \in \delta^{+}(A)} f_{e} - \sum\limits_{e \in \delta^{-}(A)} f_{e} \\
  &amp;= \sum\limits_{e \in \delta^{+}(A)} u_e - \sum\limits_{e \in \delta^{-}(A)} 0 \\
  &amp;= \sum\limits_{e \in \delta^{+}(A)} u_e \\
  &amp;= \text{capcity of }(A, V-A)
\end{align*}\]

<p>this completes the proof.</p>

<h3 id="reduction-to-min-cut">Reduction to Min Cut</h3>

<p>This now becomes trivial, as you recall this figure</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231109234433.png" style="zoom:80%;" /></p>

<p>The recall that in the third part of <a href="#correctness-of-ford-fulkerson-algorithm">Correctness of Ford-Fulkerson Algorithm</a> proof we said</p>

\[\text{value of }f = \text{capcity of }(A, V-A), \quad \text{for $f$ is a max flow}\]

<p>therefore the correspdong $(A, V-A)$ parition must be a minimum cut (based on Figure 7 above, corresponding to an overlap of cross and circle).</p>

<h3 id="runtime-of-ford-fulkerson-algorithm">Runtime of Ford-Fulkerson Algorithm</h3>

<p>So what about the runtime? The worst case is $f$ many iterations, where $f$ is the value of the maximum flow in the graph (because we are increasing the flow by $\Delta$ each time). But note that:</p>

<blockquote>
  <p>Ford-Fulkerson Algorithm always terminates for networks whose edge capacities are integral (or, equivalently, rational). On the other hand, it might <em>fail to terminate if networks have an edge with an irrational capacity</em>.</p>
</blockquote>

<p>However, we can make it polynomial time by using BFS to find an augmentation path, which is called Edmonds-Karp algorithm, which we will not cover here.</p>

<h3 id="reduction-to-bipartite-matching">Reduction to Bipartite Matching</h3>

<blockquote>
  <p><em>Bipartite Matching Problem</em>: consdier an undirected bipartite graph $G=(V \cup W \cup E)$ (see image below), with every edge of $E$ having one endpoint in each of $V$ and $W$. That is, no edges internal to $V$ or $W$ are allowed. The feasible solutions are the matchings of the graph, meaning we can only <strong>pick $S \subset E$ of edges that share no endpoints</strong>. <strong>The goal is to pair up as many vertices as possible (using edges of $S$)</strong></p>
</blockquote>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231103000933.png" style="zoom:30%;" /></p>

<p>For example, in the following graph, the maximum matching is 1 (pair of vertex):</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231103001131.png" style="zoom:40%;" /></p>

<blockquote>
  <p><em>Claim</em>: maximum-cardinality matching reduces in linear time to <strong>maximum flow</strong>.</p>
</blockquote>

<p>The trick is to consider transformation of the bipartite graph $G$ to the following:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231110012430.png" style="zoom:80%;" /></p>

<p>where given a bipartite graph $G=(V \cup W \cup E)$, we construct a flow graph $G’$ with:</p>

<ul>
  <li>add $s$ source with edges to all vertices in $V$ with <strong>outgoing capacity exactly 1</strong></li>
  <li>add $t$ sink with edges from all vertices in $W$ with <strong>incoming capacity exactly 1</strong></li>
  <li>all other edges from a vertex in $V$ to $W$ can have <strong>any capacity greater than 1</strong>. Here we use infinity to illustrate this.</li>
</ul>

<p>Notice that this construction gives <em>any flow in $G’$</em> to</p>

<ul>
  <li>use each vertex in $x \in V$ at most once, since there is only one edge that can flow to $x$ and has the bottleneck capacity of 1</li>
  <li>use each vertex in $y \in W$ at most once, since there is only one edge that can flow from $y$ and has the bottleneck capacity of 1</li>
</ul>

<p>Therefore:</p>

<ul>
  <li>$\implies$ a bijection between a bipartite matching in $G$ with an integer-valued flow in $G’$</li>
  <li>$\implies$ the bijection also gives the same cost: the size of flow you assigned is th same as the cardinality of the matching</li>
  <li>$\implies$ the maximum flow in $G’$ is the same as the maximum cardinality matching in $G$</li>
</ul>

<h2 id="additional-proporties-of-flow-in-graphs">Additional Proporties of Flow in Graphs</h2>

<p>This section all considers a flow graph $G$ being a directed graph with a source $s$ and sink $t$, and each edge $e \in E$ has a positive, interger capacity $c_e$.</p>

<blockquote>
  <p><strong>Acyclic Flow</strong>: a flow is acyclic if, for <strong>every</strong> cycle in the flow graph $C \subset G$:</p>

\[C = \{ x_1 \to x_2, x_2 \to x_3, ... , x_n \to x_1 \}\]

  <p>have at least one edge $e = (x_i, x_{i+1}) \in C$ having a flow of zero $f(e) = 0$. (otherwise we have a cycle flow)</p>
</blockquote>

<blockquote>
  <p><strong>Partitionable Flow</strong>: a flow is partitionable if there is a collection of $s,t$ paths flows $P_1, P_2, …, P_{\vert f\vert }$ with paths can be duplicates, $\vert f\vert$ is the value of the flow (i.e. total out of source $s$), and every path just consumes flow of $1$, so that:</p>

\[f(e) = \mathrm{size}( \{ i | e \in P_i \} ), \quad \forall e \in E\]

  <p>i.e. the flow on an edge $e$ is the number of paths that use that edge.</p>
</blockquote>

<p>Then some properties of flow include:</p>

<ol>
  <li>For every flow, there exists an acyclic flow with the same value.</li>
  <li>every acyclic flow is partitionable</li>
</ol>

<hr />

<p>Proof sketch for 1: realize that edges from a source vertex or the sink cannot be involved in any cycle. Therefore, for every cycle in the graph, we can decrement the flow on every edge until one of the edges hit zero. This will result in:</p>

<ul>
  <li>no change in flow value (since source/sink aren’t affected)</li>
  <li>still a valid flow since for every vertex, the total inflow equals total outflow (since we decremented the same amount into each vertex and out of each vertex)</li>
</ul>

<hr />

<p>Proof sketch for 2: We can decompose the flow in the network as follows:</p>

<ol>
  <li>Identify a path from the source to the sink that carries a positive flow. This can be done by starting at the source and following edges with positive flow until the sink is reached.</li>
  <li>The minimum flow in an edge along this path is the bottleneck of the path. We can consider this as a single unit of flow and subtract this flow value from every edge along this path.
    <ul>
      <li>This process <strong>does not violate</strong> the flow conservation principle at any node since that path will also be acyclic = i.e. every vertex on the graph is <strong>entered and exited exactly once.</strong></li>
      <li>if the original path is cyclic, then this does not work: we may find a cyclic path where a vertex is exited, entered (a cycle), and exited again = net flow in/out is not conserved on that path.</li>
      <li>this will decrease the original flow value of the network by the bottleneck value of the path</li>
    </ul>
  </li>
  <li>Because the conservation principle holds, the remaining flow is still valid. This means that by definition, if the remaining flow $&gt; 0$, then there must still exists flow paths from the source to the sink with positive flow (i.e. the water is still running).</li>
</ol>

<p>Repeat the above step until <strong>no more paths with positive flow from the source to the sink can be found in the residual network</strong>. Each time a path is found, it is distinct and non-overlapping with previously found paths because:</p>

<ol>
  <li>The flow in an edge cannot be counted more than once since each path uses the minimum flow on its route (the bottleneck), which is then subtracted from the network.</li>
  <li>Once the flow on an edge is reduced to zero, <strong>that edge cannot be used</strong> in subsequent paths.</li>
</ol>

<h1 id="linear-programming">Linear Programming</h1>

<p>Linear programming is a method to solve optimization problems where the objective function and constraints are linear. It is special in that:</p>

<ul>
  <li>Linear programming is a remarkable sweet spot between <em>generality and
computational efficiency</em> (too general a problem becomes NP-Hard)</li>
  <li>exists many commercial solvers (i.e. algorithm implementations) that can solve those problems within <em>polynomial time</em></li>
  <li>many problems we have seen in the later part of this course <em>can be formulated as linear programming problems</em></li>
</ul>

<p>We will mostly focus on how to reduce problems into a linear programming problem, and not so much on the algorithmic details of solving it.</p>

<h2 id="ingredients-of-a-linear-program">Ingredients of a Linear Program</h2>

<p>So <strong>what kind of problems can linear programming solve</strong>? The answer is to formulate questions in the following form:</p>

<blockquote>
  <p><strong>Ingredients of a Linear Program</strong>: basically you can specify what variables to solve/be returned, what constraints you have, and what is the objective.</p>
  <ol>
    <li><em>Decision Variables</em>: the variables you want to solve for, denoted as $x_1, x_2, …, x_{n} \in \R$.</li>
    <li>
      <p><em>Linear Constraints</em>: you can have as many as you want, but each needs to be in the form of:</p>

\[\sum_{j=1}^n a_j x_j \{* \} b_i\]

      <p>where $*$ can be $\le, \ge, =$. (Really all you need is $\le$, because to get $\ge$ you can multiply by $-1$ and to get $=$ you can do both $\le$ and $\ge$.)</p>
    </li>
    <li>
      <p><em>Linear Objective Function</em>: one objective function to maximize or minimize, in the form of:</p>

\[\max \sum_{j=1}^n c_j x_j\]

      <p>or the minimum (again, you can just multiply by $-1$ to get the other one).</p>
    </li>
  </ol>

  <p>note that <strong>you can specify the $a_j,b_i,c_j$</strong>, and the algorithm will solve for the $x_j$.</p>
</blockquote>

<p>A starter example is to consider finding the solution to:</p>

\[\max x_1 + x_2\]

<p>subject to the following (four) linear constraints:</p>

\[\begin{align*}
  x_1 \ge 0 \\
  x_{2} \ge 0 \\
  2x_1 + x_2 \le 4 \\
  x_1 + 2 x_2 \le 1
\end{align*}\]

<p>then obviously this fits directly with the linear programming formulation, where $x_1, x_2$ are the decision variables. Visually, this linear problem does:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231115010146.png" style="zoom:80%;" /></p>

<p>where the</p>
<ul>
  <li><strong>dimension of space</strong> we are working with is specified by the number of decision variables</li>
  <li><strong>constraints</strong> specify the feasible region (the shaded area)</li>
  <li><strong>objective</strong> specifies the direction of optimization (the green arrow)</li>
</ul>

<p>To be more general:</p>

<blockquote>
  <p><strong>Geometric Interpretation of Linear Programs</strong>:</p>
  <ol>
    <li>A linear <strong>constraint</strong> in $n$ dimensions corresponds to a halfspace in $\R^{n}$. Thus a feasible region is an intersection of halfspaces (i.e. many constraints), the higher-dimensional analog of a polygon.</li>
    <li>The <strong>objective function</strong> specifies parallel $(n-1)$ dimensional hyperplans, with a direction vector specified by the vector $\vec{c} = [c_1, …, c_n]$. (in the previous example, $\vec{c} = [1,1]$)</li>
    <li>The <strong>optimal solution</strong> is the point in the feasible region that is furthest in the direction of $\vec{c}$.</li>
    <li>When there is a <em>unique</em> optimal solution, it is vertex (i.e. a corner) of the feasible region.</li>
  </ol>
</blockquote>

<p>besides the above, also note that for any given linear programming problem:</p>
<ul>
  <li>There might be <em>no feasible solutions</em> at all</li>
  <li>optimal objective function value might be <em>unbounded</em>, which the linear programming algorithms should detect if this is the case</li>
  <li>there might be <em>multiple optimal solutions</em>. Whenever the feasible region is bounded, however, there always exists an optimal solution</li>
</ul>

<h2 id="example-applications-of-linear-programming">Example Applications of Linear Programming</h2>

<p>Zillions of problems reduce to linear programming. Here we cover a few interesting ones.</p>

<h3 id="linear-programming-for-maximum-flow">Linear Programming for Maximum Flow</h3>

<p>The problem of maximum literally translates directly to a linear program (though Ford-Fulkerson algorithm is more efficient).</p>

<p>Proof: in maximum flow we wanted to find a flow for each edge $f_e$, such that the sum of flow is maximum, subjective to conservation constraints. This sounds exactly like linear programming:</p>

<ol>
  <li><em>Decision Variables</em>: the flows for each edge ${ f_e }_{e \in E}$</li>
  <li>
    <p><em>Constraints</em>: We needed the conservation contraints, and the capacity constraints</p>

\[\sum\limits_{e  \in \delta^{+}(v)} f_e - \sum\limits_{e \in \delta^{-}(v)} f_e = 0, \quad \forall v \in V \setminus \{s,t\}\]

    <p>which gives $n-2$ constraint equations, where $e  \in \delta^{+}(v)$ means edges going out of $v$ and $e \in \delta^{-}(v)$ means edges going into $v$. Then we additionally have for each edge:</p>

\[f_{e} \le u_e\]

    <p>and finally</p>

\[f_e \ge 0\]

    <p>So in total this is $n-2+2m$ contraints. <mark>Note that these are all linear (each decision variable $f_e$ only appears by itself with some constant)!</mark></p>
  </li>
  <li><em>Objective Function</em>: simply:</li>
</ol>

\[\max \sum\limits_{e \in \delta^{+}(s)} f_e\]

<p>which you can do by specifing a weight $c_j$ to be one only for edges from the source and zero otherwise.</p>

<h3 id="linear-programming-for-minimum-cost-flow">Linear Programming for Minimum-Cost Flow</h3>

<blockquote>
  <p>Problem: in addition to maximum flow, consider two changes:</p>
  <ul>
    <li>there is a cost $c_e$ associated with each unit of flow spent</li>
    <li>
      <p>the flow is required to be exactly $d$</p>

\[\sum_{e \in \delta^{+}(s)} f_e = d\]
    </li>
  </ul>

  <p>so the objective function is to minimize routing over “expensive pipes”:</p>

\[\min \sum_{e \in E} c_e f_e\]

</blockquote>

<p>Notice that this can be reduced to the <em>same linear program</em> in the previous section, but with:</p>

<ul>
  <li>an additional constraint: $\sum_{e \in \delta^{+}(s)} f_e = d$</li>
  <li>objective function changed to $\min \sum_{e \in E} c_e f_e$ (which is linear since $c_e$ are constants)</li>
</ul>

<h3 id="linear-programming-for-regression">Linear Programming for Regression</h3>

<p>We now consider two less obvious applications of linear programming, to basic problems in
machine learning.</p>

<blockquote>
  <p><strong>Regression</strong>: consider inputs of labeled data ${ \vec{p}^{1}, \vec{p}^{2}, …, \vec{p}^{m} }$ consisting of $m$ data points in $\R^{d}$, and their corresponding labels ${ y^{1}, y^{2}, …, y^{m} }$, where $y^{i} \in \R$.</p>
  <ul>
    <li>for example, a dataset of features of $m$ undergraduate students, and $y^{i}$ are their GPAs.</li>
  </ul>

  <p>The goal is to find a linear function $h(\vec{z}) = \vec{w} \cdot \vec{z} + b= \sum_{i=1}^{d} w_i z_i + b$ that fits this data as well as possible.</p>
</blockquote>

<p>We now show that computing the best line under the definition of <strong>minimizing absolute error</strong> can be formulated as a linear program (for the more common one, mean squared error, check the ML notes).</p>

<p>First recall that for a $d$-dimensional space, a linear function $h  : \R^{d} \to \R$ has the form:</p>

\[h(\vec{z}) = \vec{w} \cdot \vec{z} + b = \sum_{i=1}^{d} w_i z_i + b\]

<p>where the <strong>coefficients $w_i$’s and $b$ are unknown</strong>. The absolute error for one data point is defined as:</p>

\[E_i ( \vec{w} ,b) = \left| \underbrace{\left( \sum\limits_{j=1}^{d} w_j p_j^{i} +b\right)}_{\text{prediction}} - y^{i} \right|\]

<p>and so the total loss over the entire dataset is:</p>

\[\min_{\vec{w} ,b} \sum\limits_{i=1}^{m} E_i(\vec{w} ,b)\]

<p>note that up to this point, this problem had:</p>

<ul>
  <li>$d+1$ decision variables: $\vec{w} ,b$</li>
  <li>no constraints for the weights and bias</li>
  <li>a nonlinear objective function (because it used absolute value)</li>
</ul>

<p>So how is this linear programmable? The trick is we can <strong>convert the absolute value in objective function to become constraints</strong>. Consider introducing $m$ new decision variables $e_1, e_2, … , e_m$ which would represent  $E_i ( \vec{w} ,b)$. We make it look like it can choose $e_i$, but in fact not because we know:</p>

\[| x| = \max \{ x, -x \}\]

<p>so we can get inequalities to represent absolute values:</p>

\[e_{i} \ge \left( \sum\limits_{j=1}^{d} w_j p_j^{i} +b \right) - y^{i} \\
e_{i} \ge - \left( \sum\limits_{j=1}^{d} w_j p_j^{i} +b \right) + y^{i}\]

<p>and the objective function is:</p>

\[\min \sum\limits_{i=1}^{m} e_i\]

<p>so that now we consider</p>

<ul>
  <li>$d+1+m$ decision variables: $\vec{w} ,b, e_1, e_2, … , e_m$</li>
  <li>$2m$ constraints for the weights and bias</li>
  <li>a linear objective function where obtaining the best $e_i$’s becomes obtaining the best absolute error (think about obtaining a better $e_i$ subject to this contraint is the same as obtaining $\vec{w},b$ with a lower loss )</li>
</ul>

<p>note that the $e_i$ under the hood <mark>aren't ''free'' variables</mark>:</p>
<ul>
  <li>After the program found out about $w_j$ and $b$, the $e_i$’s are determined by picking to be <strong>as close as possible to the inequality (i.e. represents the absolute error)</strong> because of the objective function being a minimizer</li>
  <li>then, the objective function also correctly represents the total absolute error</li>
</ul>

<h3 id="linear-programming-for-linear-classifier">Linear Programming for Linear Classifier</h3>

<blockquote>
  <p><strong>Linear Classifier</strong>: consider inputs of binary classification, where you get $m$ positive data points $\vec{p}^{1}, …, \vec{p}^{m} \in \R^{d}$ and $m’$ negative data points $\vec{q}^{1}, …, \vec{q}^{m’} \in \R^{d}$.</p>

  <p>The goal is to compute a linear function $h(\vec{z}) = \vec{w} \cdot \vec{z} + b= \sum_{i=1}^{d} w_i z_i + b$ that separates the positive and negative data points as well as possible. In other words:</p>

\[h(\vec{p}^{i}) &gt; 0, \quad \forall i \in [m] \\\]

  <p>and for negative points:</p>

\[h(\vec{p}^{i}) &lt; 0, \quad \forall i \in [m'] \\\]

</blockquote>

<p>Visually, it looks likes:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms/image-20231115015439.png" style="zoom:80%;" /></p>

<p>Assuming there exists such a classifier, the problem almost looks exactly like a linear program, except that we have strict inequalities here. Again, the simple trick of adding an extra decision variable solves the problem.</p>

<p>To encode this strict inequality, we introduce a new decision variable $\delta$ representing the <mark>margin</mark> by which the nearest data point is on the correct side of the decision boundary. Then we have a new constraint with <strong>inequality</strong>:</p>

\[\sum\limits_{j=1}^{d} w_j p_j^{i} +b \ge \delta, \quad \forall i \in [m] \\
\sum\limits_{j=1}^{d} w_j q_j^{i} +b \le -\delta, \quad \forall i \in [m']\]

<p>with the objective of maximzing the margin $\delta$:</p>

\[\max \delta\]

<p>so that we have a linear program with:</p>
<ul>
  <li>$d+2$ decision variables: $\vec{w} ,b, \delta$</li>
  <li>$m + m’$ constraints for the weights and bias</li>
  <li>a linear objective function</li>
</ul>

<p>(note that this looks awfully like SVM)</p>

<hr />

<p><strong>However, what if the points <em>aren’t</em> perfectly separable?</strong> In SVM we had slack varittlables, but here we can consider another extension: allow for errors, but penalize them.</p>

<p>More specifically, let’s say that in a perfect world, we would like a linear function $h$ such that:</p>

\[h(\vec{p}^{i}) &gt; 1, \quad \forall i \in [m] \\\]

<p>and</p>

\[h(\vec{q}^{i}) &lt; -1, \quad \forall i \in [m'] \\\]

<p>where the constant $1$ is a bit arbitrary here. Though the goal is to consider a <strong>hinge loss</strong> such that it penalizes on incorrect classifications, but gives zero loss as long as you have a correct classification with a margin of at least $1$:</p>

\[\mathrm{loss} = \begin{cases}
  \max \{1 - h(\vec{p}^{i}), 0 \}, \quad \text{for positive points}\\
  \max \{1 + h(\vec{q}^{i}), 0 \}, \quad \text{for negative points}
\end{cases}\]

<p>so then our task is to find a linear function that <strong>minimizes total hinge loss</strong>. While hinge loss looks non-linear, it really is just the maximum of two linear functions. We claim that this can be formulated as a linear program with constraints:</p>

\[\begin{align*}
  e_i &amp;\ge 1 - \left( \sum\limits_{j=1}^{d} w_{j} p_j^{i} +b \right), \quad \text{for every positive point $\vec{p}^i$ }\\
  e_i &amp;\ge 1 + \left( \sum\limits_{j=1}^{d} w_{j} q_j^{i} +b \right), \quad \text{for every negative point $\vec{q}^i$ }\\
  e_i &amp;\ge 0, \quad \text{for every point}
\end{align*}\]

<p>which is basically the hinge-loss, and then the objective is:</p>

\[\min \sum\limits_{i=1}^{m} e_i\]

<p>so again, we introduced $m$ new decision variables $e_i$ <mark>which aren't real ''free'' variables</mark>:</p>
<ul>
  <li>After the program found out about $w_j$ and $b$, the $e_i$’s under the hood are determined by picking to be as close as possible to the inequality (i.e. represents the hinge loss) because of the objective function being a minimizer</li>
  <li>then, the objective function also correctly represents the total hinge lossa</li>
</ul>]]></content><author><name></name></author><category term="2023@Columbia" /><summary type="html"><![CDATA[*Picture credits from the Algorithms Illuminated book]]></summary></entry><entry><title type="html">CSOR4231 Analysis of Algorithms part2</title><link href="/lectures/2023@columbia/CSOR4231_Analysis_of_Algorithms_part2.html/" rel="alternate" type="text/html" title="CSOR4231 Analysis of Algorithms part2" /><published>2024-01-20T00:00:00+00:00</published><updated>2024-01-20T00:00:00+00:00</updated><id>/lectures/2023@columbia/CSOR4231_Analysis_of_Algorithms_part2</id><content type="html" xml:base="/lectures/2023@columbia/CSOR4231_Analysis_of_Algorithms_part2.html/"><![CDATA[<h1 id="np-hard-problems">NP-Hard Problems</h1>

<p>Beyond the collection of efficient algorithms we have talked about? In the first part of the notes, we have seen problems such as sorting, graph search, shortest path, MST, etc being solved in almost linear time. Here, we essentially discuss the class of problems for which <strong>NO fast algorithms are KNOWN</strong> (notice the distinction between “no fast algorithms exist” and “no fast algorithms are known”).</p>

<h2 id="the-traveling-salesman-problem">The Traveling Salesman Problem</h2>

<p>By definition, this looks <em>very</em> alike MST:</p>

<blockquote>
  <p><strong>Traveling Salesman Problem Definition</strong>: given a <em>complete</em> undirected graph $G=(V,E)$ and a real-valued cost $c_e$ for each edge $e\in E$, find a minimum-cost tour that visits each vertex exactly once.</p>
  <ul>
    <li>difference from MST: MST is a <em>spanning tree</em> while TSP is a <em>tour</em>.</li>
    <li>technically MST had only needed “connected” graph, which is actually <em>more general</em> (as you can mimic non-complete graphs by having some edges cost $\infty$)</li>
  </ul>
</blockquote>

<p>How many distinct tours are there? Since each tour is a cycle, we have $n! / (2n)$ because for each vertex, it is repeated twice (once as start, once as end).</p>

<p>Despite significant effort, until today (2023) there is no known fast algorithm for the TSP.</p>

<blockquote>
  <p>Conjecture: maybe no fast algorithm exists for TSP.</p>
</blockquote>

<p>But how do we even attempt to “prove” this? (Spoiler: we kind of don’t. We just try to show TSP is NP-hard $\implies$ solving it efficiently would prove $\mathcal{P} = \mathcal{NP}$, and until today no-one has done it.)</p>

<h2 id="introduction-to-p-and-np">Introduction to P and NP</h2>

<h3 id="polynomial-time-algorithms">Polynomial-Time Algorithms</h3>

<p>So what does it mean to be $\mathcal{P}$?</p>

<blockquote>
  <p><strong>Polynomial-Time Solvable Problems</strong> A problem is in $\mathcal{P}$ if there is a polynomial-time algorithm to solve it.</p>
  <ul>
    <li>polynomial-time algorithm: one that correctly solves the problem with worst-case running time $O(n^k)$ for some constant $k$.</li>
    <li>here $n$ denotes the input size, which you can image as “the number of bits needed to represent the entire input” for a generic problem.</li>
  </ul>
</blockquote>

<h3 id="np-hard-problems-1">NP-hard Problems</h3>

<p>Going back to our original problem: the goal is to gather evidences to show that “there exists no polynomial-time algorithm for TSP”. Just to be clear, no one has proven this yet, but we have some evidence to support this conjecture: to show that TSP is <em>relatively speaking, hard</em>.</p>

<blockquote>
  <p><strong>Strong Evidence of A Problem being Hard</strong>: A polynomial-time algorithm for the TSP would solve thousands of problems (i.e. by reduction), that have resisted the efforts of tens (if not hundreds) of thousands of brilliant minds over many decades.</p>
  <ul>
    <li>basically TSP must be “at least as hard as” any of those other problems.</li>
  </ul>
</blockquote>

<p>More formally, here comes the notion of NP-hardness.</p>

<blockquote>
  <p>Complexity Class $\mathcal{NP}$: a problem is in $\mathcal{NP}$ if</p>
  <ol>
    <li>for every instance of the problem, every candidate <strong>solution can be described</strong> (e.g. in bits) by using, bounded above, <strong>a polynomial function of the input size</strong>.</li>
    <li>for any of the candidate solutions, we can <strong>verify in polynomial time</strong> whether it is indeed a valid solution.</li>
  </ol>
</blockquote>

<p>Notice that by this definition, almost all the search problems that you’ve seen qualify for $\mathcal{\mathcal{NP}}$. But additionally, let every candidate solution be described in $O(n^{d})$ bits, for an instance of the problem having input size $n$. Then, an exhaustive search algorithm over all solutions is:</p>

\[O(2^{O(n^{d})}) \times O(n^{k}) = O(2^{O(n^{d})})\]

<p>where:</p>
<ul>
  <li>since every solution can be described/encoded in $O(n^{d})$ <strong>bits</strong>, there are $2^{O(n^{d})}$ possible solutions.</li>
  <li>the exhaustive search would basically loop over all possible solutions, and for each solution, it would take $O(n^{k})$ time to verify whether it is indeed a valid solution.</li>
  <li>this therefore is <strong>exponential runtime</strong> (but of course, many problems have smart algorithms to solve them)</li>
</ul>

<blockquote>
  <p><strong>NP-hard Problems</strong>: a problem is $\mathcal{NP}\text{-}\mathcal{hard}$ if <strong>every problem</strong> in $\mathcal{NP}$ can be <strong>reduced to it</strong> in polynomial time.</p>
  <ul>
    <li>recall if A reduces to B, then it means we can use B as a black-box to solve A.</li>
    <li>so the consequence is that if you can solve one $\mathcal{NP}\text{-}\mathcal{hard}$ problem in polynomial time, you can solve all $\mathcal{NP}$ problems in polynomial time.</li>
    <li>then $\mathcal{P} = \mathcal{NP}$</li>
  </ul>

  <p>notice that a problem can be $\mathcal{NP}\text{-}\mathcal{hard}$ without being in $\mathcal{NP}$ (see figure at the end of this section)</p>
</blockquote>

<p>We will see a bit later that TSP is $\mathcal{NP}\text{-}\mathcal{hard}$ being a strong evidence that we <em>think there exists no polynomial-time algorithm for TSP</em> (basically by reducing the 3-SAT problem to it, and somebody has already done the hardest work showing that 3-SAT is $\mathcal{NP}\text{-}\mathcal{hard}$)!</p>

<p>But visually this means that there is a bunch of $\mathcal{NP}$ problems $A_i$’s such that:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231117004546.png" style="zoom:20%;" /></p>

<p>In addition, since no-one so far has solved in polynomial time any $\mathcal{NP}\text{-}\mathcal{hard}$ problem, we have:</p>

<blockquote>
  <p><strong>Conjecture</strong>: $\mathcal{P} \neq  \mathcal{NP}$. Motivation why it may be true?</p>
  <ul>
    <li>empirical: all you need is one polynomial time algorithm for one $\mathcal{NP}\text{-}\mathcal{hard}$ problem to prove $\mathcal{P} = \mathcal{NP}$, but no one has found it yet.</li>
    <li>philosophical: if $\mathcal{P} \neq  \mathcal{NP}$, then it means “solving a problem is as hard as checking a solution of a problem”. Then life is too easy.</li>
    <li>mathematical: as of today, absent of evidence.</li>
  </ul>
</blockquote>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231117010439.png" style="zoom:70%;" /></p>

<p>A “surprising” example of $\mathcal{NP}$ problem: Knapsack:</p>
<ul>
  <li>recall that there is an $O(nC)$-time dynamic programming algorithm for the problem</li>
  <li>but this is NOT polynomial in the size of input. this is a polynomial-time algorithm <em>in the special case in which $C$ is bounded by a polynomial function of $n$.</em></li>
  <li>think of the number of keystrokes to type $C=10$, which is $2$, to $C=100$, which is $3$. The input size increased by $1.5$, but runtime increased by a factor of $10$.</li>
</ul>

<p>Finally, a more complete picture of P, NP, and NP-hard:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231118213057.png" style="zoom:35%;" /></p>

<h2 id="simple-reductions-for-np-hardness">Simple Reductions for NP-Hardness</h2>

<p>Recall that we have used reductions before. For instance, to compute the Image Segmentation problem we used a minimum s-t cut algorithm as a black-box (i.e. Image segmentation reduces to minimum s-t cut):</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231117011431.png" style="zoom:75%;" /></p>

<p>where we:</p>
<ul>
  <li>assumed that minimum s-t cut is polynomial-time solvable (it is)</li>
  <li>created the image segmentation problem by preprocessing the input (convert to flow graph) and postprocessing the output (convert back)</li>
</ul>

<p>Reductions <strong>will also be used here</strong>, but for the purpose of spreading <strong>intractibiliy or tractibiliy</strong> (i.e. polynomial-time solvability) of a problem.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Tractibility</th>
      <th style="text-align: center">Intractibility</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231117014759.png" style="zoom:100%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231117014805.png" style="zoom:100%;" /></td>
    </tr>
  </tbody>
</table>

<p>so that more formally:</p>

<blockquote>
  <p><strong>Reductions Spread Tractability</strong>: if $A$ reduces to $B$ and $B$ is solvable in polynomial time, then $A$ is solvable in polynomial time.</p>

  <p><strong>Reductions Spread Intractability</strong>: if $A$ reduces to $B$ and $A$ is not solvable in polynomial time, then $B$ is not solvable in polynomial time.</p>
  <ul>
    <li>think of it as a contrapositive of the previous statement</li>
  </ul>
</blockquote>

<p>We have seen many nice examples of the first part: “spreading tractability”, in addition to the image segmentation problem:</p>
<ul>
  <li>Finding the median of an array of integers reduces to the problem of sorting the array</li>
  <li>The all-pairs shortest path problem reduces to the single-source shortest path problem (iterating over all vertices is still polynomial time)</li>
</ul>

<p>But the latter part: “spreading intractability” is like the <strong>dark-side of the force</strong>, where we use in this case to show many problems are $\mathcal{NP}\text{-}\mathcal{hard}$.</p>
<ul>
  <li>if we know a problem $A$ is $\mathcal{NP}\text{-}\mathcal{hard}$, and we can reduce $A$ to $B$, then $B$ is also $\mathcal{NP}\text{-}\mathcal{hard}$. Why?</li>
  <li>because if $B$ is solvable in polynomial time (the green box in the image segmentation example), then $A$ is also solvable in polynomial time.</li>
  <li>This would imply all other $\mathcal{NP}$ problems are solvable in polynomial time (since $A$ is $\mathcal{NP}\text{-}\mathcal{hard}$). Then $\mathcal{P}=\mathcal{NP}$!</li>
</ul>

<p>Some examples of $\mathcal{NP}\text{-}\mathcal{hard}$ problems?</p>

<p>This also highlights a template for proving if a problem is $\mathcal{NP}\text{-}\mathcal{hard}$:</p>

<blockquote>
  <p><strong>Proving $\mathcal{NP}\text{-}\mathcal{hard}$</strong>: to prove a problem $B$ is $\mathcal{NP}\text{-}\mathcal{hard}$, we can:</p>
  <ol>
    <li>find/choose an existing $\mathcal{NP}\text{-}\mathcal{hard}$ problem $A$.</li>
    <li>Prove that $A$ reduce to $B$ in polynomial time. (i.e. can use $B$ to solve $A$)</li>
  </ol>
</blockquote>

<h3 id="np-hardness-of-cycle-free-shortest-paths">NP-Hardness of Cycle-Free Shortest Paths</h3>

<p>Here we discuss an example of known $\mathcal{NP}\text{-}\mathcal{hard}$ problems, and how we can use reduction to show that another problem we discussed in the first part of the notes is also $\mathcal{NP}\text{-}\mathcal{hard}$.</p>

<p>Recall that we had this problem:</p>

<blockquote>
  <p><strong>Cycle-Free Shortest Path (CFSP)</strong>: given a directed graph $G=(V,E)$ with real-valued edge costs $c_{e} \in \R$ and a source vertex $s$, find a <strong>shortest cycle-free path</strong> from $s$ to every other vertex in $G$. If there is no $s-v$ path for some $v$, report $+\infty$ for them.</p>
  <ul>
    <li>why did we want cycle free? The problem is that if we had <em>negative cycles</em>, then the shortest path would be $-\infty$</li>
    <li>in the first part of the notes, we have seen Bellman-Ford algorithm which find shortest path and “detect negative cycles” in $O(mn)$ time, i.e. <code class="language-plaintext highlighter-rouge">break</code> when there is a negative cycle.</li>
  </ul>
</blockquote>

<p>We want to prove that this version of the problem is $\mathcal{NP}\text{-}\mathcal{hard}$</p>

<blockquote>
  <p><strong>Directed Hamiltonian Path (DHP)</strong>: given a directed graph $G=(V,E)$, output “yes” if there exists a directed path that visits each vertex exactly once, and “no” otherwise.</p>

  <p>This is a famous $\mathcal{NP}\text{-}\mathcal{hard}$ problem in computer science.</p>
</blockquote>

<p>Now we want to show that DHP reduces to CFSP. Therefore since DHP is $\mathcal{NP}\text{-}\mathcal{hard}$, CFSP is also $\mathcal{NP}\text{-}\mathcal{hard}$.</p>

<hr />

<p><em>Proof</em>: The key question to think is: how do we use a subroutine for the cycle-free shortest path problem to solve the directed Hamiltonian path problem? In the former it will find shortest cycle-free path, whereas the latter needs a path that visits each vertex exactly once. Some key insights would be:</p>

<ul>
  <li>trick the CFSP into thinking that <strong>long paths (like an s-t Hamiltonian path) are actually short</strong></li>
  <li>to achieve this, we can assign $c_{e} = -1$ for every edge $e$ in the graph</li>
</ul>

<p>Therefore, consider the following reduction for DHP:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231117162336.png" style="zoom:70%;" /></p>

<p>Why can this algorithm (embedded with CFSP subroutine) solve DHP, i.e. is <strong>correct</strong>? To show this, we need to prove that this algorithm will output “yes” if and only if there is a Hamiltonian path in the graph. Notice that:</p>

<ul>
  <li>in the constructed cycle-free shortest paths instance, the <strong>minimum length of a cycle-free s-t path equals $-1$ times the maximum number of hops</strong></li>
  <li>given a $s,t$, how do we get maximum hops in this case? Visit as many vertices as possible.</li>
  <li>therefore, a cycle-free shortest path uses $\vert V\vert  - 1$ hops at most, in which case it is a Hamiltonian path.</li>
</ul>

<p>Hence, we just need to check if the shortest path from $s$ to $t$ is of length $-(\vert V\vert  - 1)$. This would correctly solve DHP problem.</p>

<h2 id="rookie-mistakes-and-acceptable-inaccuracies">Rookie Mistakes and Acceptable Inaccuracies</h2>

<p>Here are a few common misunderstandings about the notion of $\mathcal{NP}\text{-}\mathcal{hard}$.</p>

<p><strong>Rookie Mistakes:</strong> (plain wrong)</p>

<ol>
  <li>thinking $\mathcal{NP}$ stands for “not polynomial time solvable”</li>
  <li>using $\mathcal{NP}$ and $\mathcal{NP}\text{-}\mathcal{hard}$ interchangeably.
    <ul>
      <li>this is because in $\mathcal{NP}$ is actually a “good thing”. as it tells us a problem can be verified in polynomial time (but says nothing about how quickly we can solve it)</li>
    </ul>
  </li>
</ol>

<p><strong>Acceptable Inaccuracies:</strong></p>

<ol>
  <li>Assuming $\mathcal{P} \neq \mathcal{NP}$ is true</li>
  <li>Using the terms $\mathcal{NP}\text{-}\mathcal{hard}$ and $\mathcal{NP}\text{-}\mathcal{complete}$ interchangeably.
    <ul>
      <li>$\mathcal{NP}\text{-}\mathcal{complete}$ is a subset of $\mathcal{NP}\text{-}\mathcal{hard}$, and the practical implications is the same as $\mathcal{NP}\text{-}\mathcal{hard}$.</li>
      <li>assuming $\mathcal{P} \neq \mathcal{NP}$ is true, then both $\mathcal{NP}\text{-}\mathcal{hard}$ and $\mathcal{NP}\text{-}\mathcal{complete}$ are not solvable in polynomial time.</li>
    </ul>
  </li>
  <li>Conflating $\mathcal{NP}\text{-}\mathcal{hard}$ with requiring exponential time in the worst case</li>
</ol>

<h1 id="compromising-on-correctness-efficient-inexact-algorithms">Compromising on Correctness: Efficient Inexact Algorithms</h1>

<p>At the end of the day, you still have to come up with <em>some algorithms</em> to solve NP-hard problems. Because it’s NP-hard, you (probably) are confident that your algorithm can only <strong>achieve two out of the three</strong> properties:</p>
<ol>
  <li>fully general</li>
  <li>always correct</li>
  <li>fast</li>
</ol>

<p>In fact, we have <strong>already seen algorithms that compromises on generality</strong> over this course. For instance:</p>
<ul>
  <li>Dijkstra’s algorithm assumes non-negative edge costs</li>
  <li>Bellman-Ford algorithm assumes graphs without negative cycles</li>
  <li>Maximum Weighted Independent Set assumes path graphs</li>
  <li>a polytime Knapsack algorithm assumes $C$ is bounded by a polynomial function of $O(n^{k})$</li>
</ul>

<p>Therefore, instead of compromising on generality, in this section we will discuss algorithms that <mark>compromise on correctness</mark>, i.e. they are <em>NOT always correct</em>, but often we can <em>quantify an upper-bound of how much error they can make</em>.</p>

<blockquote>
  <p>Note: this makes <em>greedy algorithms</em> particularly suitable for this purpose, as they are often fast and general, but not always correct.</p>
</blockquote>

<h2 id="makespan-minimization">Makespan Minimization</h2>

<p>This is another scheduling problem like the one we have seen in the first part of the notes, but we have a few changes:</p>

<blockquote>
  <p><strong>Makespan Minimization</strong>: given $n$ jobs with processing times $l_{i}$, and $m$ machines, find an assignment of jobs to machines that minimizes the <strong>makespan</strong>, i.e. the maximum completion time of all jobs.</p>
  <ul>
    <li>basically a “multi-processing” version of the scheduling problem we have seen before</li>
    <li>goal is to minimize the “latest” finishing job</li>
  </ul>
</blockquote>

<p>For example, consider four jobs with processing time $l_1=2, l_2=2, l_3=1, l_4=3$, and two schedules:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231122003057.png" style="zoom:80%;" /></p>

<p>the first one will have makespan $4$, and the second one will have makespan $5$ due to the jobs on the first machine. So intuitively, we an ideal schedule would have a <mark>perfectly balanced-load on every machine</mark>. But unfortunately:</p>

<blockquote>
  <p><strong>Makespan Minimization is NP-Hard</strong>: there is (currently) no polynomial-time algorithm for makespan minimization</p>
</blockquote>

<p>So what kind of algorithm can solve this in a general case, is fast, but may not always give us the best answer?</p>

<h3 id="grahams-algorithm">Graham’s Algorithm</h3>

<p>The intuition is that our goal is create a balanced load on every machine, so that the makespan is minimized. Therefore, we can just have a greedy algorithm that iteratively assigns the next job to the machine with the smallest load.</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231122003624.png" style="zoom:70%;" /></p>

<p>where for a fast <code class="language-plaintext highlighter-rouge">argmin</code> implementation, we can use a min-heap to keep track of the smallest load machine. But why this algorithm specifically? It turns out that this is not only fast (with min-heap) giving $O(n \log m)$, but also guarantees a rather good error bound.</p>

<h3 id="grahams-algorithm-error-bound">Graham’s Algorithm Error Bound</h3>

<p>First, let’s demonstrate one example where Graham’s algorithm is not optimal. Consider having 20 jobs with processing time $l_i = 1$ for all $i$, and one last job with processing time $l_{21} = 5$. Suppose we have $m=5$ machines. Then:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Graham’s Algorithm</th>
      <th style="text-align: center">Optimal Solution</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231122004228.png" style="zoom:70%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231122004240.png" style="zoom:70%;" /></td>
    </tr>
  </tbody>
</table>

<p>where Graham would output a makespan of $9$, whereas the optimal solution would be $5$. This is quite bad, but can it be worse? The answer is actually no, that this is as bad as it can get.</p>

<blockquote>
  <p><strong>Graham’s Algorithm Error Bound</strong>: Graham’s algorithm is guaranteed to produce a schedule with makespan $\le 2$ times the optimal makespan.</p>
  <ul>
    <li>with some algorithmic modifications, we can actually get the error bound to $4/3$ times the optimal makespan.</li>
    <li>technically, it is $2 - 1/m$, where $m$ is the number of machines</li>
    <li>technically, it is $\le 2$ <em>any possible optimal makespan</em></li>
    <li>in practice, Graham’s (often) does much better than this error bound.</li>
  </ul>
</blockquote>

<p>But how can we even go about proving it if we don’t even know what the optimal solution is (as it is NP-hard)? The key idea is to compare with the <em>lower bound</em> of what any optimal solution can achieve, i.e., a perfect load balance.</p>

<p><em>Proof</em>: First, we need to consider the lower bound of this problem. Let the minimum possible makespan schedule be $M^{*}$. Then:</p>

<ol>
  <li>
    <p><strong>Lower Bound #1:</strong> every job needs to be processed, so the best completion time must be at least as big than any of the processing time:</p>

\[M \ge l_{j}\quad \forall j \in \{1, \ldots, n\}\]

    <p>or alternatively $M^{*} \ge \max l_j$.</p>
  </li>
  <li>
    <p><strong>Lower Bound #2:</strong> as the best case scenario is to have a perfectly balanced load (why? If not, one machine will have a larger load and another smaller. But since the objective is the <em>maximum makespan</em>, it is strictly worse):</p>

\[M^{*} \ge \frac{1}{m} \sum_{j=1}^{n} l_{j}\]
  </li>
</ol>

<p>Now we consider the lower bound of Graham’s algorithm. Let $M$ be the makespan of the schedule produced by Graham’s algorithm. Consider the “worst” machine that contributed to this load $M$, i.e. the machine with <strong>largest load $L_i$ such that $L_{i} = M$</strong>. Rewind the algorithm to the point where that machine was assigned its last job $j$, and let $\hat{L}_i$ denote that machine’s load at that point. So that obviously:</p>

\[M = L_{i} = \hat{L}_{i} + l_{j}\]

<p>But how big was $\hat{L}_{i}$? By the greedy criterion of the algorithm, it must have looked like this (if that machine is #1):</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231122013331.png" style="zoom:90%;" /></p>

<p>i.e. it must be <strong>the lightest loaded before $j$ is assigned</strong>. How light can that be?:</p>

\[\hat{L}_{i} \le \frac{1}{m} \sum_{k=1}^{j-1} l_{k}\]

<p>since the lightest load you can get at that point in time is a perfectly balanced load. Now since the comparison we need to make is:</p>

\[M = \hat{L}_i + l_{j} \le l_{j} + \frac{1}{m} \sum_{k=1}^{j-1} l_{k} \le \text{something }M^{*}\]

<p>we consider the following “tricks”:</p>

<ul>
  <li>
    <p>transform the above expression:</p>

\[M \le l_{j} + \frac{1}{m} \sum_{k=1}^{j-1} l_{k} \le l_{j} + \frac{1}{m} \sum_{k \neq j} l_{k}\]

    <p>where we basically added a bunch of terms ($l_{j+1} / m, l_{j+2} / m, …$ ) so that RHS is of course larger or equal to LHS</p>
  </li>
  <li>
    <p>the second term above is almost comparable with $M^{*}$, so we do some minor arithmetic operations:</p>

\[l_{j} + \frac{1}{m} \sum_{k \neq j} l_{k} = l_{j} - \frac{l_j}{m} + \frac{1}{m} \sum\limits_{k=1}^{n}l_{k} = \left( 1- \frac{1}{m} \right) l_{j}  + \frac{1}{m} \sum\limits_{k=1}^{n}l_{k}\]
  </li>
</ul>

<p>Now we can use the lower bound we found above</p>

\[M \le \left( 1- \frac{1}{m} \right) l_{j}  + \frac{1}{m} \sum\limits_{k=1}^{n}l_{k} \le \left( 2 - \frac{1}{m} \right) M^{*}\]

<p>because using lower bound #1 we know $\left( 1- \frac{1}{m} \right) l_{j} \le \left( 1- \frac{1}{m} \right) M^{<em>}$ and lower bound #2 tells us $\frac{1}{m} \sum\limits_{k=1}^{n}l_{k} \le M^{</em>}$. This completes the proof.</p>

<h3 id="longest-processing-time-first">Longest Processing Time First</h3>

<p>Here we discuss a modification of Graham’s algorithm that can achieve a better error bound of $4/3$ times the optimal makespan. The observation is that:</p>
<ul>
  <li>in the contrieved example where we showed Graham’s algorithm is not optimal (given 20 jobs with processing time $l_i = 1$ for all $i$ …), if only the <em>algorithm considered the longest processing time job first</em>, then it would have been optimal.</li>
  <li>in the error bound proof, we see that it advocates for <strong>making the last job assigned to the least loaded machine as small as possible</strong>.</li>
</ul>

<p>This gives the longest processing time first algorithm, which <strong>saves those small jobs for the end</strong>:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231122015101.png" style="zoom:70%;" /></p>

<p>again, this algorithm is not always correct, but it is guaranteed to produce a schedule with makespan $\le 3/2$ times the optimal makespan. How?</p>

<hr />

<p>Proof: similar to the original Graham algorithm, we start with some lower bounds. Consider we have sorted the jobs from <mark>longest to shortest</mark>, so that the $j$-th job is <em>longer</em> than the $j+1$-th job.</p>

<ul>
  <li>
    <p><strong>Modified Lower bound #1</strong>: if $M^{<em>}$ denotes the minimum possible makespan, and say we have scheduled the first $m$ jobs (i.e. one for each machine). Let $j$ be *any</em> job after the first $m$ jobs. Then:</p>

\[M^{*} \ge 2l_j\]

    <p>which is evident by the pigeon-hole principle: the new job $j$ means we have now ay least $m+1$ jobs to schedule $\implies$ at least one machine had two jobs on it $\implies$ that machine has at least twice the time of $l_j$ since $l_j$ is the shortest amongst those $m+1$ jobs, by construction.</p>
  </li>
</ul>

<p>Now, the trick to prove this $3 / 2$ bound is to realize that we can improve the final inequality in the previous proof by having $\left( 1- \frac{1}{m} \right) l_{j} \le \left( 1- \frac{1}{m} \right) (M^{*} / 2)$! Why?</p>

<ul>
  <li><strong>in the same analysis as before, we consider $M$ with the “worst machine” that just got assigned the final job $j$</strong>.</li>
  <li>there needs to be at least one job assigned to that machine <em>prior to $j$</em> (otherwise it means there are in total $\le m$ jobs to assign $\implies$ Graham will return the optimal schedule with one job per machine)</li>
  <li>this means that job $j$ is after the sorted first $m$ jobs, hence the inequality in modified lower bound applies.</li>
</ul>

<p>Plugging this in our previous last step:</p>

\[M \le \left( 1- \frac{1}{m} \right) l_{j}  + \frac{1}{m} \sum\limits_{k=1}^{n}l_{k} \le \left( 1 - \frac{1}{m} \right) \frac{M^{*}}{2} + M^{*} = \left( \frac{3}{2} - \frac{1}{2m} \right) M^{*}\]

<p>which has a better error bound as the original Graham.</p>

<h2 id="maximum-coverage-problem">Maximum Coverage Problem</h2>

<blockquote>
  <p><strong>Maximum Coverage Problem</strong>: given a collection of <em>subsets</em> $A_1, …, A_{m} \subseteq U$ and a universal ground set $U$, and a number $k$, pick $k$ subsets that reaches <strong>the most coverage</strong>, i.e. the most number of elements in $U$.</p>
  <ul>
    <li>e.g. $A_i$ could represent the programming languages candidate $i$ is familiar with, and $U$ is the set of all programming languages in the world</li>
    <li>e.g. the goal is to assemble $k$ candidates such that they cover the most number of programming languages in the world</li>
  </ul>

  <p>a bit more formally, pick a choice $K$:</p>

\[K \subseteq \{1, ..., m\}, \quad |K| = k\]

  <p>such that $f_{\mathrm{cov}}(K)$ is maximized:</p>

\[f_{\mathrm{cov}}(K) = \left|\bigcup_{i \in K} A_{i}\right|\]

</blockquote>

<p>Again, this problem is NP-hard, so we want to come up with an algorithm that is almost always correct. Consider the case when $k=1$: just pick $A_i$ with the largest size. But what about $k=2$? So the intuition is to maybe pick the second subset that <strong>increases coverage the most</strong>:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231122015923.png" style="zoom:80%;" /></p>

<p>This looks good, but when does it break? What is its error bound?</p>

<p>Consider the following example of three subsets with a budget $k=2$:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Input</th>
      <th style="text-align: center">Greedy Output</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231122020358.png" style="zoom:65%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231122020558.png" style="zoom:65%;" /></td>
    </tr>
  </tbody>
</table>

<p>where you can achieve all elements by picking $A_1, A_2$. But if $A_3$ is a bit larger than $1 / 2$, then the algorithm would pick $A_3$ and you are immediately screwed: you would only cover about 75% of the elements. Similarly, consider this with budget $k=3$:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Input</th>
      <th style="text-align: center">Greedy Output</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231122020303.png" style="zoom:60%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231122020858.png" style="zoom:60%;" /></td>
    </tr>
  </tbody>
</table>

<p>where again, we can trick the greedy algorithm to pick $A_5$ first. Then, this would decrease the contribution of picking $A_1, A_2, A_3$ as they would only roughly contribute $(1 / 3)(2 / 3) = 2 / 9$ portions. Therefore, we can then trick the algorithm to pick $A_4$. Finally, choosing either one of $A_1, A_2, A_3$ would only result in $1 - 2 \times (1 / 3) (4 / 9) = 19 /27 \approx 70\%$ of the total size. But obviously the optimal solution would be to pick $A_1, A_2, A_3$.</p>

<p>Interestingly, before we go into the error bound, we already observe that (if you extend this example to arbitrary $k$):</p>

<blockquote>
  <p><strong>Bad Examples of GreedyCoverage</strong>: for every positive interger $k$, we can come up with an instance such that:</p>
  <ul>
    <li>there exists $k$ subsets that reaches $100\%$ coverage</li>
    <li>the greedy algorithm picks $k$ subsets <em>might only cover $1 - (1 - 1/k)^{k}$ fraction of the elements</em>.</li>
  </ul>

  <p>But since by definition:</p>

\[e = \lim _{n \rightarrow \infty}\left(1+\frac{1}{n}\right)^{n}\]

  <p>this is approximately, as $k \to \infty$:</p>

\[\lim _{k \rightarrow \infty} 1 - \left(1 - \frac{1}{k}\right)^{k} \approx 1 - \frac{1}{e} \approx 63\%\]

</blockquote>

<p>So in those particular constructions, GreedyCoverage may cover only upto $63\%$ of the elements. But what about the general case? Is this generic enough?</p>

<h3 id="greedycoverage-error-bound">GreedyCoverage Error Bound</h3>

<p>It turns out this expression is general for GreedyCoverage, and in fact, it was proven (in other ways) that the number $1 - \frac{1}{e}$ is intrinsic to the maximum coverage problem.</p>

<blockquote>
  <p><strong>GreedyCoverage Error Bound</strong>: the coverage of the greedy algorithm is guaranteed to cover at least $1 - (1 - \frac{1}{k})^{k}$ fraction of the maximum-possible coverage (i.e.. worst-case scenario) for any instance of the problem.</p>
  <ul>
    <li>note that guaranteeing to cover $100\%$ would, of course, become an algorithm that is always correct.</li>
  </ul>
</blockquote>

<p>To prove this, we need to consider some key lemmas:</p>

<blockquote>
  <p><strong>Lemma 20.8</strong>: consider pausing the algorithm when it has picked $j$ subsets, and let $C_j$ denote the coverage achieved at that point. For each such $j = {1,2, …, k}$, the $j$-th subset we just picked must cover <em>at least</em> $\frac{1}{k}(C^{*} - C_{j-1})$ new elements so that:</p>

\[C_j - C_{j-1} \ge \frac{1}{k}(C^{*} - C_{j-1})\]

  <p>where $C^{*}$ is the maximum possible coverage with $k$ subsets.</p>
</blockquote>

<p><em>Proof</em>: let $K_{j-1}$ denote the indices of the $j-1$ subsets picked so far, and $C_{j-1}$ its coverage. Any potential $\hat{K}$ (may or may not be optimal) that contains $k$ indices, and $W$ be the set of elements covered by $\hat{K}$ <em>but not by $K_{j-1}$</em>:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231122023659.png" style="zoom:80%;" /></p>

<p>where in the above example, basically $K_{j-1} = {4,5}$ and the alterative $\hat{K}=K^{*}$. Then this means:</p>

\[\sum\limits_{i \in \hat{K}} \left[ \underbrace{f_{\mathrm{cov}}(K_{j-1} \cup \{i\} - C_{j-1})}_{\text{coverage increase by adding $A_i$ into our collection }} \right] \ge W \ge \hat{C} - C_{j-1}\]

<p>where:</p>
<ul>
  <li>the inequality on the RHS is obvious, as $W$ is the gap</li>
  <li>the inequality on the LHS holds because each element in $W$ must came from one of the subsets in $\hat{K} \implies$ adding every subset in $\hat{K}$ to $K_{j-1}$ must have covered at least all $W$ elements.</li>
</ul>

<p>Next, since the sum on the LHS has $k$ terms, this means:</p>

\[\max_{i \in \hat{K}} \left[ f_{\mathrm{cov}}(K_{j-1} \cup \{i\} - C_{j-1}) \right] \ge \frac{1}{k} \sum\limits_{i \in \hat{K}} \left[ f_{\mathrm{cov}}(K_{j-1} \cup \{i\} - C_{j-1}) \right] \ge \frac{1}{k} (\hat{C} - C_{j-1})\]

<p>Finally we consider $K^{*}$ instead of $\hat{K}$, where the inequality still holds as our argument was for any candidate $\hat{K}$:</p>

\[\underbrace{\max_{i \in K^{*}} \left[ f_{\mathrm{cov}}(K_{j-1} \cup \{i\} - C_{j-1}) \right]}_{\text{i.e. GreedyCoverage can at LEAST pick this subset in the next iteration}} \ge \frac{1}{k} (C^{*} - C_{j-1})\]

<p>Therefore:</p>

\[C_j - C_{j-1} \ge \frac{1}{k}(C^{*} - C_{j-1})\]

<hr />

<p>Finally, we can prove the bound by iterating over all $j$ using the above lemma, staring with $k$:</p>

\[C_{k} \ge C_{k-1} + \frac{1}{k}(C^{*} - C_{k-1}) = \frac{C^{*}}{k}  + \left( 1 - \frac{1}{k} \right) C_{k-1}\]

<p>applying again for $C_{k-2}$:</p>

\[\begin{align*}
   C_{k} 
   &amp;\ge \frac{C^{*}}{k}+ \left( 1 - \frac{1}{k} \right)\left( \frac{C^{*}}{k}+ \left( 1 - \frac{1}{k} \right) C_{k-2} \right) \\
   &amp;= \frac{C^{*}}{k}+ \left( 1 - \frac{1}{k} \right) \frac{C^{*}}{k}+ \left( 1 - \frac{1}{k} \right)^{2} C_{k-2}\\
   &amp;= \frac{C^{*}}{k}+ \left( 1 - \frac{1}{k} \right) \frac{C^{*}}{k}+ \left( 1 - \frac{1}{k} \right)^{2} \frac{C^{*}}{k} + ... \left( 1 - \frac{1}{k} \right)^{k-1} \frac{C^{*}}{k}\\
\end{align*}\]

<p>where for the last inequality we assumed $C_0=0$. This is basically a geometric series with:</p>

\[\begin{align*}
   C_{k} 
   &amp;\ge \frac{C^{*}}{k} \left( 1 + \left( 1-\frac{1}{k} \right) + \left( 1-\frac{1}{k} \right) ^{2} + ... + \left( 1-\frac{1}{k} \right)^{k-1}\right)\\
   &amp;= \frac{C^{*}}{k} \left( \frac{1 - \left( 1-\frac{1}{k} \right)^{k}}{1 - \left( 1-\frac{1}{k} \right)} \right)\\
   &amp;= C^{*}\left( 1 - \left( 1 - \frac{1}{k} \right)^{k} \right)
\end{align*}\]

<p>i.e. GreedyCoverage will cover at least $1 - (1 - \frac{1}{k})^{k}$ fraction of the maximum-possible coverage.</p>

<h1 id="compromising-on-speed-exact-inefficient-algorithms">Compromising on Speed: Exact Inefficient Algorithms</h1>

<p>The goal here is to design a general-purpose and correct algorithm that is <strong>as fast as possible</strong>, and certainly <strong>faster than exhaustive search</strong>, on as many inputs as possible. Yes, it is <em>still exponential-time,</em> but the in practice the runtime will be much better than exhaustive search.</p>

<p>Just as greedy algorithm played a key role in the previous section, <strong>dynamic programming</strong> will play a key role here. Recall that to dynamic programming many involves:</p>
<ul>
  <li>reasoning about the <strong>structure of an optimal solution</strong> which contains optimal solution to <strong>smaller subproblems</strong> (e.g. see WIS, Knapsack, etc.)</li>
  <li>iteratively construct solutions from small subproblems</li>
  <li>is much faster than exhaustive search, <em>if the set of subproblems are small</em></li>
</ul>

<h2 id="the-bellman-held-karp-algorithm-for-the-tsp">The Bellman-Held-Karp Algorithm for the TSP</h2>

<p>Before discussing how to solve this using a DP algorithm, let’s first consider the exhaustive search runtime. Recall that TSP operates on a complete graph, and your goal is to find a <strong>minimum-cost tour (cycle)</strong> that visits every vertex exactly once.</p>

<p>Some facts about TSP:</p>
<ul>
  <li>there are $n!/(2n) = \frac{1}{2}(n-1)!$ possible tours, so this is $O(n!)$</li>
  <li>factorial grows <strong>faster than exponential</strong>. e.g. $n! = n \cdot (n-1) \cdot … 2 \cdot 1$ which has $n$ terms mostly larger than $2$, while $2^{n}$ has $n$ terms of $2$’s.</li>
</ul>

<p>In this section we will often compare exponentials with factorials, so it is useful to know that:</p>

<blockquote>
  <p><strong>Sterling’s Approximation</strong>: in general pretty accurate:</p>

\[n! \approx \sqrt{2 \pi n}\left(\frac{n}{e}\right)^{n}\]

  <p>i.e. is roughly $(n/e)$ to the $n$ power. For large $n$ then $n / e » 2$!</p>
</blockquote>

<p>Now, we present an approach that can solve TSP in $O(n^{2} 2^{n})$ as opposed to $O(n!)$ using DP.</p>

<hr />

<ul>
  <li>
    <p><strong>optimal solution’s structure</strong>: suppose you already have a minimum cost tour $T$ using vertices $V={1,2, …, n}$ labeled without loss of generality. WLOG, let the path “start and end at vertex $1$”. Then, <mark>suppose this optimal path's last hop was $j-1$</mark> for some $j \in V \setminus {1}$ :</p>

    <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231129003245.png" style="zoom:90%;" /></p>

    <p>then this $1-j$ path must be a <mark>minimum cost, cycle-free path using vertices $V$</mark>. This means that:</p>

\[\text{optimal tour cost} = \min_{j \in \{2, ..., n\}} \left( \text{min cost of cycle free 1-j path that visits $V$} + c_{j1} \right)\]

    <p>but how do we reason about the “min cost of cycle free 1-j path that visits $V$”? Realize that by a similar logic:</p>

    <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231129004029.png" style="zoom:80%;" /></p>

    <p>i.e. plucking off the penultimate hop $k-j$ for some $k \in V \setminus {1, j}$, we have a <mark>minimum, cycle-free path using vertices $V - \{j\}$ </mark>. (this is the tricky part, instead of being the minimum cycle-free path using vertices $V$, because enabling $j$ could give us shortcuts). Therefore, this means:</p>

\[\text{min cost of 1-j path for $V$} = \min_{k \in \{2, ..., n\} \setminus \{j\}} \left( \text{min cost of 1-k path for $V \setminus \{j\}$} + c_{kj} \right)\]

    <p>and the above indeed can recurse into a DP algorithm.</p>
  </li>
  <li>
    <p><strong>subproblems and recursions</strong>: this leads to TSP recurrence. Let $C_{S,j}$ denote the minimum cost of a cycle-free <strong>path</strong> that visits all vertices in $S$, <strong>begins with $1$ and ends at $j$</strong> (note beginning with a vertex $1$ is fine as the final solution is a tour). Then, for every subset $S \subset V$ that contains vertex $1$:</p>

\[C_{S,j} = \min_{k \in S, k \neq 1,j} \left( C_{S \setminus \{j\}, k} + c_{kj} \right)\]

    <p>i.e. there are $\vert S\vert -2$ candidate solutions for an optimal path that visits all vertices in $S$ and ends at $j$, each designating a different penultimate vertex $k$ (see the figure above). Obviously, given this the final solution is:</p>

\[\text{optimal total cost} = \min_{j \in \{2, ..., n\}} \left( C_{V, j} + c_{j1} \right)\]

    <p>until $S$ grows in size and reached $V$.</p>
  </li>
</ul>

<p>Finally, we can use this recurrence to construct a DP algorithm:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231129005839.png" style="zoom:80%;" /></p>

<p>where we had</p>
<ul>
  <li>$\vert S\vert  \ge 2$ because every subset $S$ must contain vertex $1$ and at least one other vertex $j$ for the “figure above to work”</li>
  <li>base case: if there are just two vertices in $S$, and we need to find a path that starts with vertex $1$, then there is only one choice for each $C_{S,j}$.</li>
  <li>there are in total $2^{n-1}-1$ subproblems of set $\vert S\vert  \ge 2$.</li>
</ul>

<hr />

<p><strong>Correctness</strong> of this algorithm can be proven using induction on subproblem size $\vert S\vert$.</p>

<p><strong>Runtime</strong>: as for a typical DP algorith, we consider:</p>
<ul>
  <li>number of subproblems: the size of $A$, which is $(2^{n-1}-1)(n-1) = O(n 2^{n})$</li>
  <li>time per subproblem: we still needed to do a $A[S][j] = \min (…)$, so $O(n)$</li>
  <li>post-processing (not reconstruction): another $\min$ before we return, so $O(n)$</li>
</ul>

<p>hence in total we get:</p>

\[O(n 2^{n}) \times O(n) + O(n) = O(n^{2} 2^{n})\]

<p>Note that this is still exponential, but much better than $O(n!)$.</p>

<p>How do we reconstruct the tour? See problem set 10.</p>

<h2 id="finding-long-paths-by-color-coding">Finding Long Paths by Color Coding</h2>

<blockquote>
  <p><strong>Minimum-Cost $k$-Path</strong>: given an undirected graph $G=(V,E)$ with edge costs $c_{e} \in \R$, and a positive integer $k$, find a <strong>path of length $k-1$ with minimum total cost</strong>.</p>
  <ul>
    <li>if $G$ has no $k$-path, then output $+\infty$.</li>
    <li>yes, a $k$-path can start/end at any vertex in $G$, as long as it is cycle-free and has $k-1$ edges</li>
  </ul>
</blockquote>

<p>For example, in the following graph the optimal 4-path has cost 8, which is $(c \to a \to b \to e)$.</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231129011207.png" style="zoom:100%;" /></p>

<p>As you may have guesses, this is also NP-hard and shares many similarities with TSP. But before we go to a DP approach, what is the runtime for exhaustive search? Given a $k$:</p>

<ul>
  <li>we can iterate over all possible $k$-sized tuples of vertices</li>
  <li>therefore, there is $n \cdot (n-1) \cdot … \cdot (n-k+1) = O(n^{k})$ tuples to check</li>
  <li>to compute the cost of each tuple, it takes $O(k)$. <strong>So in total $O(k n^{k})$</strong>.</li>
  <li>this is again worse than things like $O(2^{k})$, as $n$ can be very large in practice.</li>
</ul>

<p>So how do we solve this using DP?</p>

<hr />

<p>Attempt 1: use the same trick from <a href="#the-bellman-held-karp-algorithm-for-the-tsp">The Bellman-Held-Karp Algorithm for the TSP</a>, where we define $C_{S,v}$ as the minimum cost cycle-free path that ends at vertex $v$ and visits exactly once each vertex in $S$, for $\vert S\vert  \le k$.</p>
<ul>
  <li>note that this differs from TSP where we do not require “start at vertex $1$ AND end at vertex $v$”, as we can start at any vertex</li>
</ul>

<p>We then just need to build up the solution from $\vert S\vert =1$ to $\vert S\vert =k$, and the optimal solution will be the minimum of $\min_{S_k, v} C_{S_k, v}$ for $S_{k}$ has size $k$ and $v \in S_k$.</p>

<p>While this would work, but how many subproblems are there?</p>

<ul>
  <li>to choose $\vert S\vert  \le k$, we have  $\sum\limits_{i=1}^{k} {n \choose i} = O(n^{k})$</li>
  <li>to scan over every $v \in S$, we have $O(k)$</li>
</ul>

<p>so this would give $O(k n^{k})$, which is the same as exhaustive search.</p>

<hr />

<h3 id="color-coding">Color Coding</h3>

<p>The trick is to use <strong>color coding</strong> to track less information about a path than the full set of vertices it visits. The idea is to assign a color to each vertex, and then <strong>track the colors</strong> of the vertices visited by a path.</p>

<p>Given a graph $G=(V,E)$ with length bound $k$:</p>

<blockquote>
  <p><strong>Color Coding</strong>: suppose you are given a partition of $k$ groups $V_{1} \cup V_{2} \cup … \cup V_{k} = V$ so that the minimum cost $k$-path is <strong>panchromatic</strong>, i.e. every one of the $k$ vertices reside in a different partition</p>

  <p>Why is this useful? The plan is this:</p>
  <ul>
    <li>we can later show that with some randomized calls, we WILL eventually get a “lucky enough” partition where the optimal $k$-path is panchromatic</li>
    <li>given the path is panchromatic, we find it much quicker than exhaustive search</li>
  </ul>
</blockquote>

<p>For example, consider the following graph with $k=4$, where we can imagine each partition having a different color:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231129014034.png" style="zoom:80%;" /></p>

<h3 id="computing-a-minimum-cost-panchromatic-path">Computing a Minimum-Cost Panchromatic Path</h3>

<p>Now you will see why this is faster, as instead of iterating over all possible $k$-sized tuples of vertices (which has $O(n^{k})$ subproblems), we can instead iterate over all possible $k$-sized tuples of colors:</p>

\[\sum\limits_{i=1}^{k} {n \choose i} = O(n^{k}) \quad \to \quad \sum\limits_{i=1}^{k} {k \choose i} = O(2^{k})\]

<p>since each subproblem now only needs to consider a path that visits $\le k$ vertices of <strong>different colors</strong> (assuming that the optimal path is panchromatic). Now, all we need to do is to redefine the subproblems and recursion using colors.</p>

<hr />

<p>Let $C_{S,v}$ denote the minimum cost of an $S$-path that ends at some vertex $v$, and visits exactly once each color in $S$, for $S \subseteq {1,2, … ,k}$. Let $\sigma(v)$ denote the color of vertex $v$.</p>

<ul>
  <li>
    <p><strong>optimal solution’s structure</strong>: essentially the same as TSP where we can pluck the last vertex out, along with its color:</p>

    <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231129015016.png" style="zoom:100%;" /></p>

    <p>note that we do not have a start vertex here, and the smaller subproblem represents having one less color to visit (which skips a LOT of subproblems)!</p>
  </li>
  <li>
    <p><strong>subproblems and recurrence</strong>: again building from bottom up, for every subset $S \subseteq {1,2, … ,k}$ and every vertex $v \in V$:</p>

\[C_{S,v} = \min_{(w,v) \in E} \left( C_{S \setminus \{\sigma(v)\}, w} + c_{wv} \right)\]

    <p>where there are a couple differences from TSP:</p>
    <ul>
      <li>we still need to check every vertex $v \in V$ to build up the solution, but <mark>after checking one $v$ we can throw out all vertices of the same color $\sigma(v)$</mark></li>
      <li>since this is looking for a path, we just need to check $(w,v) \in E$.</li>
    </ul>

    <p>The final optimal solution is then:</p>

\[\min_{v \in V} C_{\{1,2, ... ,k\}, v}\]

    <p>where $S={1,2, … ,k}$ is the full set of colors.</p>
  </li>
</ul>

<p>Hence our DP algorithm is:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231129020101.png" style="zoom:80%;" /></p>

<p>again, this assumes that the optimal path is panchromatic.</p>

<hr />

<p><strong>Correctness</strong>: induction by problem size on $\vert S\vert$</p>

<p><strong>Runtime</strong>: here the main cost is in the triple for loop:</p>

<ul>
  <li>to compute $A[s][v] = \min(…)$ it takes $O(\mathrm{degree}(v))$ time</li>
  <li>to compute <code class="language-plaintext highlighter-rouge">for v in V</code> then takes $O(\sum\limits_{n\in V} \mathrm{degree}(v)) = O(2m)=O(m)$ time</li>
  <li>since then it just iterates over all possible $S \subseteq {1,2, …, k}$, we get $O(2^{k} m)$ time</li>
</ul>

<p>This is great as it is much better than $O(n^{k})$, but what do we do about the “lucky case” of the optimal path being panchromatic?</p>

<h3 id="randomized-color-coding">Randomized Color Coding</h3>

<p>The idea is that <strong>perhaps with a uniformly randomly colored graph</strong>, we can eventually get lucky enough to find a panchromatic path.</p>

<p>Suppose we uniformly assign a color ${1, …, k}$ for each vertex at random. What is the probability that a given $k$-path is panchromatic?</p>

<ul>
  <li>there are in total $k^{k}$ possible colorings for that $k$-path</li>
  <li>being panchromatic means that each color is used exactly once, so there are $k!$ ways to do that</li>
  <li>therefore, the <strong>probability of being panchromatic is $k! / k^{k}$</strong></li>
</ul>

<p>How big is it? Now we can use steriling’s approximation to better see:</p>

\[p = \frac{k!}{k^{k}} \approx \frac{\sqrt{2 \pi k}\left(\frac{k}{e}\right)^{k}}{k^{k}} = \frac{\sqrt{2\pi k}}{e^{k}}\]

<p>with $k=7$ this number is already less than 1% due to the exponential term. But we <mark>don't need to get this done in one-shot. All we need is to be lucky for once in a reasonable number of trials.</mark> So what is the probability of getting at least once panchromatic path in $T$ trials?</p>

<ul>
  <li>this is equivalent to $1 - (1-p)^{T}$, where $p$ is computed above as the probaility of success in one trial, hence $(1-p)^{T}$ is the chance that <strong>all $T$ trials were unlucky</strong></li>
  <li>
    <p>to compute this, consider bounding $1-p$ from above by $e^{-p}$, which works because:</p>

    <p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231129021512.png" style="zoom:40%;" /></p>

    <p>therefore we get:</p>

\[(1-p)^{T} \le (e^{-p})^{T} = e^{-pT}\]
  </li>
</ul>

<p>And therefore for a failure rate <strong>smaller than $\delta=0.01$</strong>, i.e. failure rate of 1%, we can set:</p>

\[e^{-pT} \le \delta \implies T \ge \frac{1}{p} \ln \frac{1}{\delta} \approx \frac{e^{k}}{\sqrt{2\pi k}} \ln \frac{1}{\delta}\]

<p>This gives our final algorithm of color coding with randomized trials:</p>

<p><img src="/lectures/images/2024-01-20-CSOR4231_Analysis_of_Algorithms_part2/image-20231129021934.png" style="zoom:80%;" /></p>

<p>where basically in the yellow part you just recolor everything for $T$ trials. This gives the total runtime of:</p>

\[O\left( e^{k} \ln \frac{1}{\delta} \right) \times O(2^{k} m) = O\left( (2e)^{k} m \ln \frac{1}{\delta} \right)\]

<p>which gives probability of success (i.e. reaching the lucky case of optimal path being panchromatic) at least $1-\delta$.</p>]]></content><author><name></name></author><category term="2023@Columbia" /><summary type="html"><![CDATA[NP-Hard Problems]]></summary></entry><entry><title type="html">COMS3203 Discrete Math</title><link href="/lectures/2022@columbia/COMS3203_Discrete_Math.html/" rel="alternate" type="text/html" title="COMS3203 Discrete Math" /><published>2023-05-11T00:00:00+00:00</published><updated>2023-05-11T00:00:00+00:00</updated><id>/lectures/2022@columbia/COMS3203_Discrete_Math</id><content type="html" xml:base="/lectures/2022@columbia/COMS3203_Discrete_Math.html/"><![CDATA[<h1 id="discrete-math-logistics">Discrete Math Logistics</h1>

<ul>
  <li>Content on Courseworks, homework on Gradescope</li>
  <li><strong>Notes</strong> on Coursework provided by the Professor. Additional examples (not on the book) will be gone over during classes.</li>
  <li><strong>Recitations</strong> will be recorded, and content in the recitation needs to be studied</li>
  <li><strong>Homework</strong>: weekly, needs to be typed</li>
</ul>

<h1 id="logic">Logic</h1>

<p>Propositional logic, truth tables, Boolean algebra, inference.</p>

<h2 id="axioms-of-numbers">Axioms of Numbers</h2>

<blockquote>
  <p><strong>Natural Numbers</strong> contain all positive whole numbers (excluding zero)</p>

\[\mathbb{N} = \{ 1,2,3,... \}\]

</blockquote>

<blockquote>
  <p><strong>Even Numbers</strong> an integer $a$ if even IFF $a$ is divisible by 2; or exists an integer $b$ such that $a = 2b$</p>
</blockquote>

<blockquote>
  <p><strong>Odd Numbers</strong> an integer $a$ if is odd provided there exists a number $q \in \mathbb{Z}$ s.t. $a = 2q+1$</p>
</blockquote>

<blockquote>
  <p><strong>Prime Numbers</strong> let $p \in \mathbb{Z}, p&gt;1$. We call a number prime provided it is only divisible by $1$ and itself.</p>

  <ul>
    <li>e.g. 2, 3, 5…. By definition $1$ is therefore not prime.</li>
  </ul>
</blockquote>

<p>etc. Just to recall:</p>

<ul>
  <li>$\mathbb{Z}$ represents integer, $\mathbb{Q}$ represents rational numbers (fractions with integer num/denom), $\mathbb{R}$ represents real numbers</li>
  <li>$\mathbb{N}\subseteq Z \subseteq Q \subseteq R$</li>
</ul>

<h2 id="introduction-to-logic">Introduction to Logic</h2>

<blockquote>
  <p><strong>Proposition</strong>: a proposition is an objective, declarative statement that’s either true or false.</p>
</blockquote>

<p>for example, proposition includes:</p>

<ul>
  <li>$2+2=4$ (is true)</li>
  <li>$2 &gt; 5$ (is false)</li>
  <li>$x+2=5$ (used in first order logic as it depends on $x$=a predicate, but it is a proposition)</li>
</ul>

<p>not propositions:</p>

<ul>
  <li>Newborns are cute (subjective)</li>
  <li>Hello.</li>
</ul>

<blockquote>
  <p><strong>Atomic Proposition</strong>: simplest (elementary) form of a proposition. Some common notations used to denote atomic proposition include $p,q,r,t,s,z$ etc.</p>
</blockquote>

<blockquote>
  <p><strong>Compound Proposition</strong>: a proposition constructed from two or more atomic propositions using <em>connectives</em>, or adding a connective to an atomic proposition.</p>
</blockquote>

<blockquote>
  <p><strong>Major Connectives in Propositional Logic</strong>: if we have a proposition $p$</p>

  <ul>
    <li>
      <p><strong>negation</strong> (not): $\neg p$. For example, $p=$ it is snowing, $\neg p$ = it is not snowing. All possible negation actions include:</p>

      <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230119110421501.png" alt="image-20230119110421501" style="zoom: 50%;" /></p>

      <p>note that the <strong>Truth Table</strong> above basically lays out all the possible “scenarios”</p>
    </li>
    <li>
      <p><strong>conjunction</strong> (and): $p \land q$.</p>

      <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230119110900415.png" alt="image-20230119110900415" style="zoom:50%;" /></p>

      <p>now that there are 2 “variables”, we have $2^2$ possibilities</p>
    </li>
    <li>
      <p><strong>dis-junction</strong> (or): $p \lor q$.</p>

      <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230119111803562.png" alt="image-20230119111803562" style="zoom:50%;" /></p>
    </li>
    <li>
      <p><strong>exclusive or</strong> (xor). $p \oplus q$. You expect only one of the options. interestingly this is more related to using “or” in natural language: e.g. “you can either have $p$ as side dish or $q$”</p>

      <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230119112042366.png" alt="image-20230119112042366" style="zoom:50%;" /></p>
    </li>
    <li>
      <p><strong>implication</strong> (if, or implies): $p \to q$. For example, “if heavy snow ($p$), then Columbia is closed ($q$)”. So whenever $p$ is fulfilled, we expect $q$ to happen.</p>

      <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230119112342403.png" alt="image-20230119112342403" style="zoom:50%;" /></p>

      <p>the first two rows are straight-forward. Consider “If I get an A in this course ($p$), then I will give you a dollar ($q$)”.</p>

      <ul>
        <li>If $p,q$ both happened, then I kept my promise. If $p$ happened but I didn’t give you a dollar ($\neg q$), then I broke the promise.</li>
        <li>If $p$ didn’t happen in the first place, then technically I <em>haven’t yet</em> break the promise. In this case we <strong>assume it is still true</strong>, i.e. the <mark>benefit of doubt</mark></li>
      </ul>
    </li>
    <li>
      <p><strong>if and only if</strong> (iff) $p \iff q$. Basically this means a conjunction to two implications $(p \to q)\land (q \to p)$</p>

      <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230124102509957.png" alt="image-20230124102509957" style="zoom: 43%;" /></p>

      <p>where the last one has $(p \to q)=T$ and $(q \to p)=T$ due to benefit of doubt. Hence $(p \iff q) = (T \land T) = T$. Notice that basically $p \iff q$ is true when $p,q$ are equivalently true or equivalently false.</p>
    </li>
  </ul>
</blockquote>

<p>note that</p>

<ul>
  <li>every connective mentioned above except for negation are <em>binary connectives</em>.</li>
  <li>the order of evaluation would go from
    <ol>
      <li>$()$ processed from inside to outside</li>
      <li>$\neg$ negation</li>
      <li>$\land$ and</li>
      <li>$\lor,\oplus$</li>
      <li>$\to$ implies</li>
      <li>$\iff$</li>
      <li>left to right</li>
    </ol>
  </li>
</ul>

<p>and in English</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230126104413095.png" alt="image-20230126104413095" style="zoom:50%;" /></p>

<p>where the more tricky ones are highlighted.</p>

<ul>
  <li>“$p$ only if $q$” means only if the consequence $q$ happens</li>
  <li>“$q$ is a necessary condition for $p$” means “$q$ is a necessary <em>conclusion</em> for $p$”</li>
  <li>a trick can be to consider which one maps correctly to “if $p$ then $q$”.</li>
</ul>

<hr />

<p><em>For Example</em>, consider $p \lor q \implies \neg r$.</p>

<p>First of all, how many rows will there be? Since there are three variables, $2^3=8$ rows.</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230124103755936.png" alt="image-20230124103755936" style="zoom:50%;" /></p>

<hr />

<p>Implication can be very tricky when combined with negation:</p>

<ul>
  <li>
    <p><strong>negation of implication</strong>: $\neg (p \to q)$ is $p \land \neg q$.</p>

    <ul>
      <li>for instance $\neg$(hit$\to$hurt) is (hit$\to\neg$hurt)</li>
      <li>is proven below (of course, they don’t come out of nowhere. See the example in the proof)</li>
    </ul>
  </li>
  <li>
    <p>if $p\to q$ is implication, then</p>

    <ul>
      <li><strong>converse</strong> $q \to p$</li>
      <li><strong>contrapositive</strong> $\neg q \to \neg p$</li>
      <li><strong>inverse</strong> $\neg p \to \neg q$</li>
    </ul>

    <p>why they are named like this can be seen more clearly from the truth table:</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: left">p</th>
          <th style="text-align: left">q</th>
          <th style="text-align: center">$p \to q$</th>
          <th style="text-align: center">$q\to p$</th>
          <th style="text-align: center">$\neg q \to \neg p$</th>
          <th style="text-align: center">$\neg p \to \neg q$</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">T</td>
          <td style="text-align: left">T</td>
          <td style="text-align: center">T</td>
          <td style="text-align: center">T</td>
          <td style="text-align: center">T</td>
          <td style="text-align: center">T</td>
        </tr>
        <tr>
          <td style="text-align: left">T</td>
          <td style="text-align: left">F</td>
          <td style="text-align: center">F</td>
          <td style="text-align: center">T</td>
          <td style="text-align: center">F</td>
          <td style="text-align: center">T</td>
        </tr>
        <tr>
          <td style="text-align: left">F</td>
          <td style="text-align: left">T</td>
          <td style="text-align: center">T</td>
          <td style="text-align: center">F</td>
          <td style="text-align: center">T</td>
          <td style="text-align: center">F</td>
        </tr>
        <tr>
          <td style="text-align: left">F</td>
          <td style="text-align: left">F</td>
          <td style="text-align: center">T</td>
          <td style="text-align: center">T</td>
          <td style="text-align: center">T</td>
          <td style="text-align: center">T</td>
        </tr>
      </tbody>
    </table>

    <p>notice that $p \to q$ <mark>is the same as</mark> $\neg q \to \neg p$, and $q\to p$ <mark>is the same as</mark> $\neg p \to \neg q$.</p>
  </li>
</ul>

<blockquote>
  <p><strong>Logical Equivalence</strong>: two propositions $p,q$ are called <em>logical equivalent</em> provided they have the <mark>same truth table</mark></p>

\[p \equiv q,\quad \mathrm{or}\quad p=q\]

  <p>we will mostly use $\equiv$. Note that this is <em>not a connective</em>, but rather a <em>relation</em>.</p>
</blockquote>

<p>Now you can show that $\neg (p \to q) \equiv p \land \neg q$</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">p</th>
      <th style="text-align: left">q</th>
      <th style="text-align: center">$p \to q$</th>
      <th style="text-align: center">$\neg (p \to q)$</th>
      <th style="text-align: center">$p\land \neg q$</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">T</td>
      <td style="text-align: left">T</td>
      <td style="text-align: center">T</td>
      <td style="text-align: center">F</td>
      <td style="text-align: center">F</td>
    </tr>
    <tr>
      <td style="text-align: left">T</td>
      <td style="text-align: left">F</td>
      <td style="text-align: center">F</td>
      <td style="text-align: center">T</td>
      <td style="text-align: center">T</td>
    </tr>
    <tr>
      <td style="text-align: left">F</td>
      <td style="text-align: left">T</td>
      <td style="text-align: center">T</td>
      <td style="text-align: center">F</td>
      <td style="text-align: center">F</td>
    </tr>
    <tr>
      <td style="text-align: left">F</td>
      <td style="text-align: left">F</td>
      <td style="text-align: center">T</td>
      <td style="text-align: center">F</td>
      <td style="text-align: center">F</td>
    </tr>
  </tbody>
</table>

<p>And similarly, you can show that:</p>

\[p \to q \equiv \neg p \lor q \equiv \neg q \to \neg p\]

<p>So implication is just a <mark>disjunction</mark>! This is very important to know!</p>

<ul>
  <li>e.g. if I hit my thumb, it will hurt $\equiv$ I don’t hit my thumb, or else it will hurt</li>
</ul>

<blockquote>
  <p><strong>Tautology</strong>: a proposition is always true is called a <em>tautology</em>. For example, $p \lor \neg p$ is a tautology as no matter what value $p$ takes, <em>every</em> row in the truth table is <em>true</em>.</p>
</blockquote>

<p>A more interesting example would be</p>

<ul>
  <li>you may feel this is similar to $\iff$. But $\equiv$ is a relation <em>between</em> propositions, whereas $\iff$ is a <em>connective</em>.</li>
  <li>e.g. we know $p\to q \equiv \neg p \lor q$ as they have the same truth table. Then this also mean $(p\to q) \equiv (\neg p \lor q)$ is a <strong>tautology</strong></li>
</ul>

<blockquote>
  <p><strong>Fallacy/Contradiction</strong>: a proposition that is always false. For example, $p \land \neg p$.</p>
</blockquote>

<blockquote>
  <p><strong>Contingency</strong>:  a proposition that is not a tautology or fallacy, i.e. is a valid proposition. Usually we can just call this a (valid) “proposition”.</p>
</blockquote>

<hr />

<p><em>For Example:</em> Wason Puzzle</p>

<p>Consider a set of four cards. Each card has a letter on one side and one number on the other side.</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230124111846624.png" alt="image-20230124111846624" style="zoom:50%;" /></p>

<p>Consider the proposition: “If there is a vowel on one side, then there is an even number on the other side.”</p>

<p><strong>Question</strong>: What are the only cards that you <em>need to turn</em> to check if the proposition is True or False?</p>

<p><strong>Answer</strong>: you only need to turn $A$ and $3$. Let $p$=is vowel and $q$=other side is even. To falsify it, we need to basically get <strong>(vowel and not even)</strong> because this is the only case the <strong>implication $(p\to q)=F$</strong>. Therefore, the two relevant checks will be $p=T$ and $q=F$, corresponding to the card $A$ and card $3$.</p>

<p>More interestingly, notice that checking $3$ is the same as the $\neg q \to \neg p$ which is the <strong>contrapositive</strong>!</p>

<h2 id="laws-of-propositional-logic">Laws of Propositional Logic</h2>

<p>These basic laws (equivalences) are important as:</p>

<ul>
  <li>can be used to show that a proposition is equivalent than other ones, a tautology, of fallacy</li>
  <li>simplify a proposition</li>
</ul>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230126105134138.png" alt="image-20230126105134138" style="zoom:50%;" /></p>

<p>where the most important ones are highlighted. Most of them has something to do with simplifying $\land$ and $\lor$</p>

<ul>
  <li><strong>associativity</strong>: has to be used on the <em>same</em> connective (e.g. $(p\lor q)\land r$ has to be done in a distributive case)</li>
  <li><strong>distributivity</strong>: you can also show that $(q \lor r) \land p \equiv (q \land p) \lor (r \land p)$ by using the <em>commutativity law</em> and the first row in Distributive law</li>
  <li><strong>absorption</strong>: note that this is different from “Idempotence law”</li>
  <li><strong>DeMorgan’s</strong>: how to distribute <strong>negation</strong></li>
</ul>

<p><strong><em>Proof</em></strong> of $p \lor (p \land q) \equiv p$.</p>

<p>To get only $p$ on the RHS, we can consider $p \land T = p$ or $p \lor p = p$ as the last step. Here we use the first one:</p>

\[p \lor (p \land q) = (p \land T) \lor (p \land q) = p \land (T \lor q) = p \land T = p\]

<p><strong><em>Proof</em></strong> of $p \land (p \lor q) \equiv p$</p>

\[p \land (p \lor q) = (p \lor F) \land (p \lor q) = p \lor (F \land q) =  p \lor F = p\]

<p>which we already know is $p$ from the previous proof.</p>

<hr />

<p><em>For Example</em>: show that</p>

\[(p \lor q) \land (p \lor \neg q) \quad \text{is a tautology}\]

<p><strong><em>Proof</em></strong>: (first you start intuitively), realize that you are “or”ing $q$ and $\neg q$, hence:</p>

\[(p \lor q) \land (p \lor \neg q) = p \lor ( q \land \neg q) = p \lor (T) = T\]

<h2 id="logical-inference">Logical Inference</h2>

<p>Or logical deduction.</p>

<blockquote>
  <p><strong>Logical inference/argument</strong>: a sequence of propositions such that:</p>

  <ul>
    <li>all but the last propositions are called premises (i.e. precedes conclusion)</li>
    <li>the last proposition ($q$) is called conclusion</li>
  </ul>

\[\frac{p_1p_2,\dots p_n}{q}\]

  <p>an argument is called <mark>valid if the premises imply the conclusion</mark>. This means that:</p>

\[(p_1 \land p_2 \land \dots \land p_n) \to q \equiv T \quad \text{(is a tautology)}\]

</blockquote>

<p>But notice that implication has the benefit of doubt, so it <mark>only makes sure that if all $p_i$ is satisfied, $q$ will happen</mark>. If one of the $q_i$ is false, it does not affect anything.</p>

<hr />

<p><em>For Example</em>:</p>

\[\frac{p_1p_2}{p_1 \land p_2} \quad \text{is valid}\]

<p>because it is basically $p \to p$. In fact, if you have <strong>equivalence</strong>, such as</p>

\[\text{both}\quad \frac{\neg \neg p}{p},\frac{p}{\neg \neg p}\quad \text{are valid}\]

<p>you can also see that via a Truth Table</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230131105859364.png" alt="image-20230131105859364" style="zoom:50%;" /></p>

<hr />

<p><strong>Rules of Inference</strong></p>

<ul>
  <li>
    <p><strong>addition</strong>:</p>

\[\frac{p}{p \lor q}\]

    <p>you can prove this by showing that $p \to (p\lor q) \equiv T$</p>

\[\neg p \lor (p \lor q) = T \lor q = T\]

    <p>e.g. “it is raining” concludes “it is raining or xxxx” is obviously true.</p>
  </li>
  <li>
    <p><strong>conjunction</strong>:</p>

\[\frac{p \quad q}{p \land q}\]

    <p>basically means $(p \land q) \to (p \land q)$</p>
  </li>
  <li>
    <p><strong>simplification</strong>:</p>

\[\frac{p \land q}{p}\text{    and    } \frac{p \land q}{q}\]

    <p>because $p \land q \to p \equiv T$</p>
  </li>
  <li>
    <p><strong>disjunctive syllogism</strong>:</p>

\[\frac{p \lor q \quad \neg p}{q}\]

    <p>proof is left to you as an exercise, but intuitively if the premises is true, then it means $p$ is false hence $F \lor q$ is true concludes $q$ is true.</p>
  </li>
  <li>
    <p><strong>hypothetical syllogism</strong>:</p>

\[\frac{p \to q \quad q \to r}{p \to r}\]

    <p>which implies that implication is transitive.</p>
  </li>
  <li>
    <p><strong>resolution</strong></p>

\[\frac{p \lor q \quad \neg p \lor r}{q \lor r}\]

    <p>meaning that if $p\lor q$ and $\neg p \lor r$ is true, then it means either $q$ or $r$ has to be true. Hence the conclusion $q\lor r$ is true. You can again try to prove this formally $((p \lor q) \land (\neg p \lor r) \to q\lor r) \equiv T$</p>
  </li>
  <li>
    <p><strong>modus ponens</strong> (latin: mode that affirms)</p>

\[\frac{p \quad p \to q}{q}\]

    <p>is a <mark>very important law</mark>, as it means if $p \to q$ is true and $p$ happened, then $q$ must conclude.</p>
  </li>
  <li>
    <p><strong>modus tollens</strong> (latin: mode that denies)</p>

\[\frac{\neg q \quad p \to q}{\neg p}\]

    <p>very similar as above, as it means if $p \to q$ is true (e.g. raining $\to$ take umbrella) and $q$ did not happen (e.g. did not take umbrella), then $p$ did not happen (e.g. it is not raining).</p>
  </li>
  <li>
    <p><strong>transitivity</strong> this will be used a lot in proofs, so that basically if</p>

\[\frac{p}{q},\quad \frac{q}{r}\quad \text{are valid}\]

    <p>then</p>

\[\frac{p}{r}\quad \text{is valid}\]
  </li>
</ul>

<blockquote>
  <p>Inference is like implication except that it is (saying, since the premises are true, then this conclusion must be) <strong>always true</strong></p>
</blockquote>

<blockquote>
  <p>All <strong>laws of logic</strong> seen earlier can be written as <strong>rule of inference</strong>.</p>
</blockquote>

<p><em>For example</em>, you can transform $p \lor T \equiv T$ to inference as:</p>

\[\frac{p \lor T}{T} \text{    and  }  \frac{T}{p \lor T}\]

<p><em>Another example</em>: premise $p_1$=It’s not rainy but it’s nicer than yesterday. $p_2$=we will watch a movie only if it’s raining. $p_3$ we will go swimming if we do not watch a movie. $p_4$=if we go swimming, we will be home after sunset.</p>

<ol>
  <li>
    <p>Translate this into propositional logic (PL).</p>

    <p>let us use</p>

\[r:\text{rainy}\quad n:\text{nicer}\quad  w:\text{watch}\quad  h:\text{home}\quad  s:\text{swim}\quad\]

    <p>therefore this means</p>

    <ul>
      <li>$p_1 = \neg r \land n$</li>
      <li>$p_2 = w \to r$</li>
      <li>$p_3 = \neg w \to s$</li>
      <li>$p_4 = s \to h$</li>
    </ul>
  </li>
  <li>
    <p>Show that these premises lead to “we will be home after sunset” (premises are “true”)</p>

    <ol>
      <li>
        <p>first, we can simplify to get it is not raining:</p>

\[\frac{\neg r \land n}{\neg r}\]
      </li>
      <li>
        <p>then applying modus tollens</p>

\[\frac{w \to r \quad \neg r}{\neg w}\]
      </li>
      <li>
        <p>then applying modus ponens</p>

\[\frac{\neg w \to s \quad \neg w}{s}\]
      </li>
      <li>
        <p>finally</p>

\[\frac{s\quad s\to h}{h}\]
      </li>
    </ol>
  </li>
</ol>

<p><em>Another Example</em>: consider the whompus world where there are breezes $B$, pits $P$, and whompus $W$ such that $B_{11} \iff P_{12} \lor P_{21}$. And given that $\neg B_{11}$, show that $\neg P_{12}$</p>

<ol>
  <li>
    <p>we can break up the iff into $P_{12} \lor P_{21} \to B_{11}$ by simplification</p>
  </li>
  <li>
    <p>then apply modus ponens</p>

\[\frac{\neg B_{11}\quad P_{12} \lor P_{21} \to B_{11}}{\neg (P_{12} \land P_{21} )}\]
  </li>
  <li>
    <p>De Morgans law gives this means</p>

\[\neg (P_{12} \land P_{21}) = \neg P_{12} \land \neg P_{21}\]
  </li>
  <li>
    <p>finally, apply simplification</p>

\[\frac{\neg P_{12} \land \neg P_{21}}{\neg P_{12}}\]
  </li>
</ol>

<h2 id="first-order-logic">First Order Logic</h2>

<p>What if you want to say “there is no $W$ anywhere in the 5x5 cave”? Given current tools, this is not very convenient to do.</p>

<blockquote>
  <p><strong>First Order Logic</strong> (abbreviated as FOL), also known as <strong>predicate logic</strong>, combines quantifiers and predicates for a more powerful and compact formalism. So in a sense, PL is a <em>subset</em> of FOL.</p>
</blockquote>

<p>The idea is to:</p>

<ul>
  <li>instead of having just $p$, we consider $p(x)$, or $p(x,y)$, etc (i.e. predicates)</li>
  <li>and we add quantifiers such as $\forall, \exists$</li>
</ul>

<blockquote>
  <p><strong>Predicate</strong>: A predicate is a proposition whose truth value <mark>depends on one or more variables</mark>.</p>
</blockquote>

<blockquote>
  <p><strong>N-ary predicate</strong>: a predicate with $N$-variables</p>

\[\text{predicate}(\underbrace{x,y,z,...}_{\text{n variables}})\]

</blockquote>

<p>For example, this includes</p>

<ul>
  <li>(predicates) $x+2=5$; even$(x)$; $x+y &gt; 10$</li>
  <li>
    <p>i.e. they <em>can be true or false</em>, but it <em>depends</em> on the values of the variables</p>
  </li>
  <li>i.e. it is like a function that <mark>always evaluates to true or false</mark> given the “input values”</li>
</ul>

<blockquote>
  <p><strong>Quantifiers</strong></p>

  <ul>
    <li>universal quantifier: $\forall$ expresses such as “for all, for every, all of, for each, for any, any of, given any, for an arbitrary, etc.”</li>
    <li>existential quantifier: $\exists$ expresses such as “there exist, for some, for at least one, there is, there is at least one, etc.”</li>
  </ul>
</blockquote>

<blockquote>
  <p><strong>Universal Quantifier</strong> additionally requires a <em>variable name</em> and a <em>domain</em>.</p>

\[\forall \underbrace{x}_{\text{variable}}  \underbrace{ \in A}_{\text{a domain}}\]

  <p>then this can be combined with a proposition</p>

\[\forall \underbrace{x}_{\text{variable}}  \underbrace{ \in A}_{\text{a domain}}\,\,(\text{predicate}...)\]

</blockquote>

<p>and then you can say something like “all aliens are green”, by considering $A$=the set of aliens:</p>

\[\forall a \in A\,\, (green(a))\]

<p>(which may or may not be true). Another example: all integers are even:</p>

\[\forall a \in \mathbb{Z}\,\, (x\,\text{mod }2 = 0)\]

<blockquote>
  <p>One powerful/additional feature of FOL is that your predicate can contain essentially <strong>functions</strong>, introducing many new operators such as “mod”, “equality”, etc.</p>
</blockquote>

<p>More examples: “All Aliens are green and nice. Domain: Alien denoted $A$”</p>

\[\forall a \in A \quad (\text{green}(a) \land \text{nice}(a))\]

<blockquote>
  <p><strong>Existential Quantifier</strong>: he existential quantifier, denoted with the symbol $\exists$, expresses the statements: there exist, for some, for at least one, there is, there is at least one, etc. The application of this is the same as the “Universal Quantifier”</p>
</blockquote>

<p>For example: There exists an integer that is both even and prime</p>

\[\exists x \in \mathbb{Z} \quad (\text{even}(x) \land \text{prime}(x))\]

<p><mark>but how do we prove it</mark>? In this example, we can by just realizing that $x=2$ satisfies. But in general, see <a href="#FOL Statements and Proofs">FOL Statements and Proofs</a></p>

<blockquote>
  <p><strong>Negation</strong> of FOL statements:</p>

  <ul>
    <li>$\neg (\forall x \quad p(x))$ means $\exists x \quad (\neg p(x))$</li>
    <li>$\neg (\exists x \quad p(x))$ means $\forall x \quad (\neg p(x))$</li>
  </ul>
</blockquote>

<p>For example:</p>

\[\neg(\forall x \exist y\quad p(x,y)) \equiv \exists x \forall y \quad\neg p(x,y)\]

<p>where we abbreviated $\forall x (\exist y\quad p(x,y))$ to just $\forall x \exist y\quad p(x,y)$</p>

<blockquote>
  <p><strong>Distributivity of FOL</strong>: in short, they <mark>do not distribute</mark></p>

  <ul>
    <li>
      <p>consider $\forall$:</p>

\[\forall x \quad P(x) \lor Q(x) \neq (\forall x \quad P(x)) \lor (\forall x \quad Q(x))\]

      <p>e.g. consider $P(x)$=even(x) and $Q(x)$=odd(x). Then LHS = $T$, but RHS = $F\lor F=F$</p>
    </li>
    <li>
      <p>consider $\exists$:</p>

\[\exists x \quad P(x) \land Q(x) \neq (\exists x \quad P(x)) \land (\exists x \quad Q(x))\]

      <p>e.g. consider $P(x)$=prime(x) and $Q(x)$=notprime(x). Then LHS=$F$ but RHS=$T\land T=T$</p>
    </li>
  </ul>
</blockquote>

<h3 id="domain-of-fol">Domain of FOL</h3>

<p>On the <strong>importance</strong> of the domain:</p>

<ul>
  <li>
    <p>Suppose you want to express: “All birds fly”</p>

\[\forall b \in B\quad \text{fly}(b)\]
  </li>
  <li>
    <p>“All birds <mark>except</mark> penguins fly”. Naively:</p>

\[\forall b \in B \quad (\text{fly}(b)\land \neg \text{penguin}(b))\]

    <p>but this also means we are stating two things:</p>

\[[\forall b \in B \quad \text{fly}(b)]\quad \land \quad [\forall b \in B \quad \neg \text{penguin}(b)]\]

    <p>i.e. whenever $b$ is a penguin, this will be false $\neq$ our original statement. The <mark>correct way</mark> to express it is</p>

\[\forall b \in B \quad ( \neg \text{penguin}(b) \to \text{fly}(b) )\]

    <p>i.e “if it is not a penguin, then it flies”, i.e. the <em>only false case is “not penguin, and can’t fly”,</em> and we are not claiming anything else than that, which is consistent with the statement.</p>

    <ul>
      <li>
        <p>(<em>optional</em>) technically you can also interpret this as “penguins don’t fly”. Then you might have</p>

\[\forall b \in B \quad ( \neg \text{penguin}(b) \iff \text{fly}(b) )\]
      </li>
      <li>
        <p>one way to think about this type of problem is to convert it into code</p>

        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">birds</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">penguin</span><span class="p">(</span><span class="n">a</span><span class="p">)):</span>
        <span class="n">fly</span>
    <span class="c1"># technically done
</span>    <span class="c1"># optionally:
</span>    <span class="k">if</span> <span class="n">penguin</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
        <span class="ow">not</span> <span class="n">fly</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<p>Another example:</p>

<ul>
  <li>
    <p>“In the <strong>set of animals</strong>, all lions are fierce”</p>

\[\forall a \in A \quad \text{lion(a)} \to \text{fierce}(a)\]
  </li>
  <li>
    <p>“some lions are fierce”</p>

\[\exists a \in A \quad (\text{fierce}(x) \land \text{lion(a)})\]

    <p>is now correct.</p>
  </li>
</ul>

<blockquote>
  <p><strong>Note</strong>: this means <em>usually</em></p>

  <ul>
    <li>$\forall$ goes with $\to$ implications (because $\forall$ is a strong quantifier)</li>
    <li>$\exists$ goes with $\land$ conjunctions</li>
  </ul>
</blockquote>

<p><em>For example</em>: Consider the domain of Humans, you want to express “All kids has pets”</p>

\[\forall h \in H\quad \text{kid}(h) \to \text{has pet}(h)\]

<p>then another way to do this is</p>

\[\forall h \in H ( \text{kid}(h) \to \exists \underbrace{ a \in A \quad \text{pet}(a) \land \text{is his pet}(a,k)}_{\text{exists a pet that the kid has}})\]

<p><em>For example</em>: “there exists a class that’s taken by every student”. Consider two domains, “event” (e.g. classes, workshops, conferences, sport events, etc) and “students”</p>

\[\exists e \in \text{event}\quad \text{class}(e) \land (\forall s \in \text{students} \quad \text{take}(s,e))\]

<h3 id="mixing-quantifiers">Mixing Quantifiers</h3>

<p>Consider the statement “All integers are even”, and</p>

\[\forall x \in \mathbb{Z}\quad ( \exists y\in \mathbb{Z}\quad x=2y )\]

<p>which is like a <mark>"nested loop"</mark> of, taking a loop over $x \in \mathbb{Z}$, and each is a even number.</p>

<p>Another example: what are the differences between:</p>

<ul>
  <li>$\forall x \in \mathbb{Z}\quad ( \forall y\in \mathbb{Z}\quad x+y=0 )$ is false as, given an $x$, I can easily find a $y$ such that it does not hold</li>
  <li>$\forall x \in \mathbb{Z}\quad ( \exists y\in \mathbb{Z}\quad x+y=0 )$ is true, by picking $y = -x$ for any given $x$</li>
  <li>$\exists x \in \mathbb{Z}\quad ( \forall y\in \mathbb{Z}\quad x+y=0 )$ is false, as this says “given a $x$”, all $y+x=0$ for any $y \in \mathbb{Z}$</li>
  <li>$\exists x \in \mathbb{Z}\quad ( \exists y\in \mathbb{Z}\quad x+y=0 )$ is true</li>
</ul>

<h3 id="fol-statements-and-prelude-to-proofs">FOL Statements and Prelude to Proofs</h3>

<p>Consider we want to prove:</p>

<ol>
  <li>$\forall x \in D\quad p(x):true$ means that $p(x)$ for <strong>all</strong> elements in $D$</li>
  <li>$\forall x \in D\quad p(x):false$ means that there is at least <strong>one</strong> element for which $p(x)$ is false</li>
  <li>$\exists x \in D \quad p(x): true$ means there is at least <strong>one</strong> element in $D$ for which $p(x)$ is true</li>
  <li>$\exists x \in D \quad p(x):false$: means that for <strong>all</strong> elements in the domain $p(x)$ is false</li>
</ol>

<p>This means that:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>$\forall x \quad p(x)$</th>
      <th>$\exists x \quad p(x)$</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Prove</td>
      <td><strong>prove</strong> such as proof by contradiction, induction, etc.</td>
      <td>enough to find an <strong>example</strong></td>
    </tr>
    <tr>
      <td>Disprove</td>
      <td>enough to provide a <strong>counter example</strong></td>
      <td><strong>prove</strong> that $\forall x$ the predicate $p(x)$ is false, using …</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><strong>Note</strong> that sometimes when a domain is “clear”, instead of $\forall x \in A\quad p(x)$ you can just write $\forall x \quad p(x)$.</p>
</blockquote>

<p><em>For example</em>: consider the FOLs, for which we will prove</p>

<ol>
  <li>
    <p>“Any even integer is divisible by 2”. Let domain be $\mathbb{Z}$</p>

\[\forall x \in \mathbb{Z}\quad (\text{even}(x) \implies 2|x)\]

    <p>where $2\vert x$ means 2 divides x. Note that technically “if it is divisible by 2, it is an even integer” is also true, so technically $\iff$ here would be correct. But since we <em>are focused on proofs</em>, we might not want to do extra work, i.e. prove both sides if using $\iff$.</p>
  </li>
  <li>
    <p>“An integer is even iff it is divisible by 2”</p>

\[\forall x \in \mathbb{Z} \quad (\text{even}(x) \iff 2|a )\]
  </li>
  <li>
    <p>“The sum of two even integers is an even integer”</p>

\[\forall x,y \in \mathbb{Z} \quad (\text{even}(x) \land \text{even}(y)) \implies \text{even}(x+y)\]

    <p>but don’t you need to specify that $\text{even}(x,y)$ is also an integer? This is not necessary here by the axiom of closure property (adding two elements in $\mathbb{Z}$ results still in $\mathbb{Z}$).</p>
  </li>
  <li>
    <p>“Let $r\in \mathbb{R}$. If $r$ is irrational, then $\sqrt{r}$ is also irrational”. We are allowed to also use the set of rationals $\Q$</p>

\[\forall r \in \mathbb{R} \quad  (r \notin \Q \to \sqrt{r} \notin \Q)\]
  </li>
  <li>
    <p>“If $x$ is even, then $x^2+x$ is even.” Domain is integer.</p>

\[\forall x \in \Z \quad (\text{even}(x) \to \text{even}(x^2+x))\]
  </li>
  <li>
    <p>“There are no pair of integers that satisfy the expression $5x+25y = 1723$”</p>

\[\neg (\exist x,y \in \mathbb{Z}\quad 5x+25y=1723)\]

    <p>or alternatively you can say</p>

\[\forall x,y \in \mathbb{Z}\quad 5x+25y\neq 1723\]
  </li>
</ol>

<blockquote>
  <p><strong>Challenge question:</strong> there exists a unique with the quantifier we already have, to express</p>

\[\exists ! x \quad p(x)\]

  <p>where $\exists !$ is used now as a shortcut to express <mark>exists a unique</mark></p>

\[\exists x \quad p(x) \land (\forall y \quad p(y) \to (y = x))\]

  <p>this hints at, to prove a uniqueness theorem, you just need to show that: 1) there exist a solution, and 2) any other working solution is the same as that solution.</p>
</blockquote>

<p>Note that it would be <strong>incorrect</strong> in this case to say</p>

\[\forall x \quad p(x) \implies (\forall y \quad p(y) \to (y = x))\]

<p>because then, it could be there is <em>no such $x$ such that $p(x)$</em>, i.e. the “exist a solution” part we wanted to express is no longer there!</p>

<h1 id="proofs">Proofs</h1>

<p>First we need to define a few jargon</p>

<blockquote>
  <p><strong>Axiom</strong>: An axiom is a proposition that is assumed to be True. You don’t need to prove them.</p>
</blockquote>

<blockquote>
  <p><strong>Lemma</strong>: A preliminary mathematical proposition for which there is/<mark>needs a proof</mark>. Generally, lemmas precede a bigger result and lay the ground to a theorem.</p>

  <ul>
    <li>a baby version of “theorem”, but still requires a proof</li>
  </ul>
</blockquote>

<blockquote>
  <p><strong>Theorem</strong>: A declarative mathematical statement for which there is/<mark>needs a proof</mark></p>

  <ul>
    <li>in greek this means “something needs to be proved”</li>
  </ul>
</blockquote>

<blockquote>
  <p><strong>Corollary</strong>: A proposition that <em>follows from a theorem</em> in just a few steps.</p>

  <ul>
    <li>i.e. once the theorem is proven, these come very naturally/can be proven easily</li>
  </ul>
</blockquote>

<blockquote>
  <p><strong>Conjecture</strong>: A strong mathematical result that is strongly believed to be true, but is <em>yet to be proven</em>.</p>
</blockquote>

<p>In general, you will be approaching them with:</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230209112412432.png" alt="image-20230209112412432" style="zoom: 67%;" /></p>

<h2 id="proof-by-enumeration">Proof by Enumeration</h2>

<blockquote>
  <p>When the domain is small, we can verify the proposition <strong>for all values</strong>.</p>
</blockquote>

<p><em>For Example</em>: Proposition $\forall x \in \mathbb{Z}$ then $1 &lt; x &lt; 5 \implies (2\vert x) \lor (3\vert x)$</p>

<p><em>Proof</em>: we consider for each case $1&lt;x&lt;5$</p>

<ol>
  <li>when $x=2$, $2\vert x$ hence is true</li>
  <li>when $x=3$, $3\vert x$ is true hence true</li>
  <li>when $x=4$. $2\vert x$ is true hence true</li>
</ol>

<h2 id="direct-proof">Direct Proof</h2>

<p>Given a statement</p>

\[\forall x \in D\quad p(x) \implies q(x)\]

<p>Then in a direct proof you basically</p>

<blockquote>
  <p>Directly prove $p \implies q$ using definitions/axioms/logic. I.e. assuming $p$ is true, then $q$ is true.</p>
</blockquote>

<p><em>For Example</em>: $\forall a \in \mathbb{Z}$ and $\forall b \in \mathbb{Z}$ then</p>

\[\text{$a$ is even } \land \text{ $b$ is even } \implies (a+b) \text{ is even}\]

<p><em>Proof</em>: since we know $\text{$a$is even } \land \text{$b$is even }$</p>

<ol>
  <li>
    <p>this implies</p>

\[\exists k \in \mathbb{Z},\quad a=2k\\
\exists z \in \mathbb{Z},\quad b=2z\]
  </li>
  <li>
    <p>hence this means</p>

\[a+b = 2(k+z)\]
  </li>
  <li>
    <p>hence this means</p>

\[\exists t \in \mathbb{Z},\quad (a+b)=2t\]

    <p>e.g. by picking $t = (k+z)$</p>
  </li>
  <li>
    <p>therefore $(a+b)$ is even</p>
  </li>
</ol>

<blockquote>
  <p><em>Recall</em> that (we will use this quite often)</p>

  <ul>
    <li>$x$ is even $\iff$ $2\vert x$, or $\exists k \in \mathbb{Z},\  x = 2k$</li>
    <li>$x$ is odd $\iff$ $\neg 2\vert x$ or $\exists k \in \mathbb{Z},\  x = 2k+1$</li>
  </ul>
</blockquote>

<h2 id="proof-by-contradiction">Proof by Contradiction</h2>

<p>Consider a statement</p>

\[\forall x \in D \quad p(x) \implies q(x)\]

<blockquote>
  <p>Assume that the statement is not true, i.e.  $\neg ( p \implies q) = p \land \neg q$. Then show that this is impossible.</p>
</blockquote>

<p><em>For example</em>: prove $\forall a \in \mathbb{Z}$ and $\forall b \in \mathbb{Z}$ then</p>

\[\text{$a$ is even } \land \text{ $b$ is even } \implies (a+b) \text{ is even}\]

<p>by contradiction.</p>

<p><em>Proof</em>: assume that $p \land \neg q$</p>

<ol>
  <li>
    <p>this means we assume the following is true</p>

\[(\text{$a$ is even } \land \text{ $b$ is even })  \land \neg(a+b \text{ is even})\]

    <p><mark>notice this $\land$ induced by contradiction proof</mark>. This effectively allows us to use both LHS and RHS of the equation</p>
  </li>
  <li>
    <p>this means</p>

\[(\text{$a$ is even } \land \text{ $b$ is even })  \land (a+b \text{ is odd})\]
  </li>
  <li>
    <p>this implies</p>

\[\exists k \in \mathbb{Z},\quad a=2k\\
\exists z \in \mathbb{Z},\quad b=2z\]
  </li>
  <li>
    <p>but this means</p>

\[a+b = 2(k+z)\quad \text{is even}\]
  </li>
  <li>
    <p>yet we claimed $(a+b)$ is not even. Is a contradiction.</p>
  </li>
</ol>

<h2 id="proof-by-contrapositive">Proof by Contrapositive</h2>

<p>Given the statement</p>

\[\forall x \in D \quad p(x) \implies q(x)\]

<blockquote>
  <p>Prove by showing that $\forall x \quad \neg q(x) \implies \neg p(x)$, which <em>might be easier in times</em>.</p>

  <ul>
    <li>i.e. start with $\neg q(x)$, and conclude that $\neg p(x)$. e.g. by using a direct proof.</li>
    <li>this is useful usually when you realize the LHS of the original statement, i.e. $p(x)$ is <mark>hard to move forward</mark></li>
  </ul>
</blockquote>

<p><em>For Example</em>: prove that $\forall r \in \mathbb{R}$, if $r$ is irrational, then $\sqrt{r}$ is also irrational.</p>

<ul>
  <li>since this means $r \neq a/b$, which is hard to move forward. Hence we consider converting proof by contrapositive.</li>
</ul>

<p><em>Proof</em>: by contrapositive, then $\sqrt{r}$ is rational $\implies$ $r$ is rational. Using a direct proof</p>

<ol>
  <li>
    <p>since $\sqrt{r} \in \Q$, this means</p>

\[\exists a,b \in \mathbb{Z}, \quad \sqrt{r}=\frac{a}{b}\]
  </li>
  <li>
    <p>then this means</p>

\[r = \frac{a^2}{b^2}\]
  </li>
  <li>
    <p>this means</p>

\[\exists c,d \in \Z, \quad r = \frac{c}{d}\]

    <p>for example by letting $a^2=c$, $b^2=d$</p>
  </li>
  <li>
    <p>this means $r \in \Q$.</p>
  </li>
</ol>

<p><em>For Example</em>: let $a,b \in \Z$ prove that $a+b &gt; 100 \implies ((a &gt; 50) \lor (b &gt; 50))$</p>

<p><em>Proof</em>: We realize it is hard to move forward from $a+b &gt; 100$ as we have two numbers on LHS. Consider using the contrapositive</p>

\[((a \le 50) \land (b \le 50)) \implies a+b \le 100\]

<p>the rest is obvious by direct proof.</p>

<h2 id="proof-of-iff">Proof of IFF</h2>

<p>Consider the statement</p>

\[\forall x \in D\quad p(x) \iff q(x)\]

<p>Then essentially you need to</p>

<ul>
  <li>proof by any method that $p(x) \to q(x)$</li>
  <li>proof by any method that $q(x) \to p(x)$</li>
</ul>

<p><em>For Example</em>: prove that $\text{$x^2$is even} \iff \text{$x$is even}$. To prove this we need to prove both ways</p>

<p><em>Proof</em>. We can first prove the forward direction</p>

\[\text{$x$ is even}\implies\text{$x^2$ is even}\]

<ol>
  <li>since $x$ is even, then $x=2a$ for some $a \in \Z$</li>
  <li>therefore $x^2 = 4a^2$</li>
  <li>hence $x^2 = 2 (2a^2)$</li>
  <li>hence $x^2 = 2c$ for some $c \in \Z$</li>
  <li>so $x^2$ is even</li>
</ol>

<p>Now, we prove that</p>

\[\text{$x^2$ is even}\implies\text{$x$ is even}\]

<ol>
  <li>
    <p>its hard to do a direct proof, we can try instead contrapositive</p>

\[\text{$x$ is odd}\implies\text{$x^2$ is odd}\]
  </li>
  <li>
    <p>then this means $x = 2a+1$ for some $a \in \Z$</p>
  </li>
  <li>
    <p>hence $x^2 = 4a^2 + 2a + 1$</p>
  </li>
  <li>
    <p>hence $x^2 = 2(2a^2 + a) + 1$</p>
  </li>
  <li>
    <p>meaning $x^2 = 2c + 1$ for some $c \in \Z$</p>
  </li>
  <li>
    <p>so $x^2$ is odd</p>
  </li>
</ol>

<h2 id="proof-by-contradiction-1">Proof by Contradiction</h2>

<blockquote>
  <p>In a proof by contradiction, assume the opposite of what you are trying to prove. Then you make logical deductions until you arrive to a <strong>contradiction</strong>.</p>
</blockquote>

<p><em>For Example</em>: Prove by contradiction that there are no integer $x,y$ that satisfy $5x+25y = 1723$</p>

<p><em>Proof</em>: This means to prove that</p>

\[\forall x,y \in \Z \quad 5x + 25y \neq 1723\]

<p>By contradiction, we can first assume that this is false. Hence this means the below is true by assumption.</p>

\[\exists x,y \in \Z \quad 5x + 25y =1723\]

<ol>
  <li>
    <p>let this be true. Then this means</p>

\[5(x+5y) = 1723\]
  </li>
  <li>
    <p>hence</p>

\[x + 5y = \frac{1723}{5}\]
  </li>
  <li>
    <p>hence contradiction as LHS is integer, but RHS is not.</p>
  </li>
</ol>

<h2 id="proof-by-cases">Proof by Cases</h2>

<blockquote>
  <p>In proof by cases, try to break the proof into cases, if your starting point is too general. Make sure that your cases span <strong>all possibilities</strong></p>
</blockquote>

<p>So the general format would be to prove</p>

\[p_1 \lor \dots \lor p_n \implies q\]

<p>by proving for each $p_i \implies q$ by <em>proposition logic</em>.</p>

<hr />

<p><em>For Example</em>: Profe that for any integer $x$, $x^2 + x$ is even.</p>

<p><em>Proof</em> : this means that</p>

\[\forall x \in \Z\quad \text{$x^2+x$ is even} \equiv \forall x \in \Z\quad (x\in \Z \implies \text{$x^2+x$ is even} )\]

<p>this is straightforward using a direct proof, and essentially showing that $x(x+1)$ must include both an even number and an odd number.</p>

<p>To prove by cases, we can consider (inspired from the direct proof) that</p>

\[\forall x \in \Z\quad (\text{$x$ is even} \lor \text{$x$ is odd} \implies \text{$x^2+x$ is even} )\]

<ul>
  <li>case 1: $x$ is even, then $x = 2a$ for some $a \in \Z$
    <ul>
      <li>then $x^2 + x = 2(2a^2 + a)$ is even.</li>
    </ul>
  </li>
  <li>case 2: $x$ is odd, then $x=2a+1$
    <ul>
      <li>then $x^2 + x = 2(2a^2 + 3a + 1)$ is also even</li>
    </ul>
  </li>
  <li>therefore, $x^2 + x$ is even.</li>
</ul>

<h2 id="proof-by-counter-example">Proof by Counter Example</h2>

<blockquote>
  <p>Used to <strong>disprove</strong> some proposition, by finding an example such that the proposition is false.</p>
</blockquote>

<p>Usually you will disprove</p>

\[p \to q\]

<p>meaning to find an example such that $p$ is true but $q$ is false.</p>

<p>Some “tricks/hints” when you are stuck:</p>

<ol>
  <li>keep in mind of your domain</li>
  <li>try to create edge examples</li>
  <li>try to prove it (though you know it will not hold), so you can look for pattern when this will likely fail</li>
</ol>

<hr />

<p><em>For example</em>: disprove that $\forall a,b \in \Z\quad (a\vert b \land b\vert a)\implies a=b$</p>

<p><em>Proof</em>: counter example: $a=-b$, e.g. $a=2$ and $b=-2$. Then LHS is true, but RHS is false.</p>

<p>You can see how this edge case come about if you attempted a direct proof to “attempt to” show this is true</p>

<ol>
  <li>let $a\vert b \land b\vert a$ is true</li>
  <li>Then this means $a = xb$ and $b = ya$ for $x,y \in \Z$</li>
  <li>hence this means $a = xy \cdot a$ hence $xy = 1$</li>
  <li>but this means either $x = y = 1$ or $x=y=-1$.</li>
  <li>in the latter case, this implies $a=-b$, which means LHS is true but RHS is false</li>
</ol>

<blockquote>
  <p><strong>Note</strong> that this is <em>different</em> from proof by contradiction, from which it is a) used to <em>prove</em> instead of disprove; b) flipped the entire proposition</p>
</blockquote>

<h1 id="sets">Sets</h1>

<p>In general, we we refer to sets, we consider unordered sets</p>

<blockquote>
  <p>We will distinguish between two types of collections: <strong>unordered sets</strong> (in which, order does not matter) and <strong>ordered sets or lists</strong> (in which order matters).</p>
</blockquote>

<h2 id="unordered-sets">Unordered Sets</h2>

<blockquote>
  <p><strong>(Unordered) Set</strong>: is a collection of <mark>distinct</mark> object in which order does not matter.</p>
</blockquote>

<p>for example:</p>

\[p = \{ \text{eraser, pen, highlighter} \}\]

<p>or you can also have an infinite set</p>

\[\mathbb{Z} = \{ \dots, -2,-1,0,1,2,\dots \}\]

<p>for us, in general we assume that <mark>counting numbers start with $1$</mark></p>

\[\mathbb{N} = \{ 1,2,3,\dots \}\]

<p>though there are also some people considers $\mathbb{N}$ includes $0$. You can even have sets inside a set</p>

\[bp = \{ \text{notebook, laptop, } \{ \text{eraser, pen, highlighter} \} \}\]

<p>but if we the following is <strong>not a set</strong></p>

\[S = \{ 1,1,2,3 \}\]

<p>since you have duplicates. This becomes a <em>multiset</em>, which we will not cover in this class.</p>

<blockquote>
  <p><strong>Notation</strong>:</p>

  <ul>
    <li>
      <p>belongs to $\in$. Means is a <em>member/element</em> in a set is denoted as</p>

\[a \in \mathbb{Z}\]
    </li>
    <li>
      <p>empty set is denoted as either</p>

\[b = \{\},\quad\text{or}\quad b = \emptyset\]
    </li>
    <li>
      <p>does not belong to $\notin$:</p>

\[\text{fridge} \notin \text{backpack}\]

      <p>where backpack is a set.</p>
    </li>
  </ul>
</blockquote>

<p>some caution include that, let</p>

\[bp = \{ \text{notebook, laptop, } \{ \text{eraser, pen, highlighter} \} \}\]

<p>then technically</p>

<ul>
  <li>$\text{notebook} \in bp$</li>
  <li>$\text{pen} \notin bp$ because “pen” is technically <em>not a member</em> of the set, but ${ \text{eraser, pen, highlighter} } \in bp$</li>
</ul>

<blockquote>
  <p><strong>Subset</strong>: let $A,B$ be two sets. $A$ is a subset of $B$ provided that every element in $A$ is also an element in $B$. We denote that</p>

\[A \subseteq B\]

  <p>where this is “subset <em>or equal</em>”.</p>
</blockquote>

<p>Note that the difference between $\in$ and $\subseteq$ is that</p>

<ul>
  <li>$\in$ can be used <strong>with an element</strong> or set, since a set can be an element</li>
  <li>$\subseteq$ must only be used with a <strong>set</strong></li>
</ul>

<p>But note that we can <em>translate the definition of subset to FOL</em>:</p>

<p>Let $A,B$ be sets. Then</p>

\[A \subseteq B \iff (\forall a \in A\quad a \in B)\]

<p>(just as a practice) What if the domain is $\Z$, i.e. for both sets?</p>

\[A \subseteq B \iff (\forall a \in \Z \quad a \in A \implies a \in B)\]

<p><em>For Example</em>:</p>

<ul>
  <li>${4} \subseteq { 1,2,3,4 }$ is true</li>
  <li>${4} \nsubseteq { 1,2,3,{4} }$ since the element in LHS is $4$, whereas the element on RHS is ${4}$.</li>
  <li>${{4}} \subseteq { 1,2,3,{4} }$ is true</li>
  <li>${} \subseteq { 1,2,3,{4} }$ in fact, ${} \subseteq S$ for any set $S$.</li>
  <li>${} \notin { 1,2,3,{4} }$ as empty set is not a member of the RHS.</li>
</ul>

<blockquote>
  <p><strong>Equality between sets</strong>: two sets are equal $A = B$ provided</p>

\[A = B \iff A \subseteq B \land B \subseteq A\]

  <p>or we can write as FOL</p>

\[A = B \iff (\forall a \quad a \in A \iff a \in B)\]

</blockquote>

<p>note that the above strictly says “take any element $a$ in the universe, if $a \in A$ then $a \in B$ and vice versa”. Therefore the below is <strong>wrong</strong></p>

\[A = B \iff (\forall a \quad a \in A \land a \in B)\]

<p>this instead says “every element in the universe is both in $A$ and $B$”. But yuo can do something like (<strong>correct</strong>)</p>

\[A = B \iff (\forall a \in A \quad a \in B) \land (\forall a \in B \quad a \in A)\]

<p>which is basically saying $A \subseteq B \land B \subseteq A$.</p>

<blockquote>
  <p><strong>Proper Subset</strong>: being a subset <em>but not equal</em></p>

\[A \subset B \iff A \subseteq B \land A \neq B\]

</blockquote>

<p><em>For Example</em>: $\Z \subset \Q$ because</p>

\[\Z \subset \Q \iff \Z \subseteq \Q \land \Z \neq \Q\]

<p>and of course</p>

<ul>
  <li>${1} \subset {1,2}$</li>
  <li>${1} \subseteq {1,2}$</li>
  <li>but ${1,2} \subseteq {1,2}$ only</li>
</ul>

<blockquote>
  <p><strong>Universal Set</strong> denoted as $U$, which is the set of <strong>everything under consideration</strong>.</p>
</blockquote>

<p>(Barber’/Russell’s paradox: in general, whenever there is self-reference, there is typically a paradox)</p>

<blockquote>
  <p><strong>Power Set</strong>: the set of <em>all subsets</em> of a set $A$ is called a power set $P(A)$</p>
</blockquote>

<p>For example, let $S = {1,2}$, then</p>

\[P(S) = \{ \empty, \{1\}, \{2\}, \{1,2\} \}\]

<p>basically,  a set including $0$ elements on the set, $1$ element of the set, and then $2$ elements of the set.</p>

<p>This means <strong>empty set is an element of any powerset</strong>, so that</p>

\[P(\empty) = \{ \empty \}\]

<p>How many elements are there in a powerset? There are <mark>$2^k$ elements in the powerset $P(S)$</mark>, for $k$ is the number of elements in $S$.</p>

<ul>
  <li>
    <p>proof 1: For each element in $P(S)$, e.g. let $S={a,b,c}$, then any power set is essentially:</p>

    <table>
      <thead>
        <tr>
          <th> </th>
          <th>a</th>
          <th>b</th>
          <th>c</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>$\empty$</td>
          <td>F</td>
          <td>F</td>
          <td>F</td>
        </tr>
        <tr>
          <td>${a}$</td>
          <td>T</td>
          <td>F</td>
          <td>F</td>
        </tr>
        <tr>
          <td>${b}$</td>
          <td>F</td>
          <td>T</td>
          <td>F</td>
        </tr>
        <tr>
          <td>${c}$</td>
          <td>F</td>
          <td>F</td>
          <td>T</td>
        </tr>
        <tr>
          <td>${a,b}$</td>
          <td>T</td>
          <td>T</td>
          <td>F</td>
        </tr>
        <tr>
          <td>…</td>
          <td> </td>
          <td> </td>
          <td> </td>
        </tr>
      </tbody>
    </table>

    <p>so basically it is the number of combinations of the truth table</p>
  </li>
  <li>
    <p>proof 2: just use</p>

\[{0 \choose k} + {1 \choose k} + \cdots + {k \choose k} =2^k\]
  </li>
</ul>

<blockquote>
  <p><strong>Finite Set</strong>: a finite set is a set has $n$ elements for $n \in \Z^+$. Otherwise we call the set infinite.</p>
</blockquote>

<blockquote>
  <p><strong>Cardinality</strong>: let $A$ be a finite set, the number of elements in $A$ is called cardinality, denoted as $\vert A\vert$</p>
</blockquote>

<p>For example:</p>

<ul>
  <li>if $A$ has $n$ elements, then $\vert A\vert =n$.</li>
  <li>$S={1,2,3,…,20}$. Then $\vert S\vert =20$, and that $\vert P(S)\vert  = 2^{20}$.</li>
  <li>$\vert \Z\vert$ is then technically sloppy notation as $\Z$ is not a finite set, but we will use this later in functions.</li>
</ul>

<blockquote>
  <p>We have seen a lot of connections between FOL and sets. We will see how to build set using “<strong>set builders</strong>”, a compact way to define your set using FOL (and PL):</p>

\[S = \{ x | P(x) \}\]

  <p>where $P(x)$ is a FOL</p>
</blockquote>

<p><em>For Example</em>:</p>

<ul>
  <li>
    <p>instead of $S={1,2,3…,100}$, you can write</p>

\[S = \{ x | x \in \Z \land (1 \le x \le 100) \}\]

    <p>to avoid any ambiguity</p>
  </li>
  <li>
    <p>the set of even integers is then</p>

\[E = \{ x | x\in \Z \land 2|x \}\]

    <p>or more properly</p>

\[E = \{ x | x\in \Z \land (\exists a \in \Z \quad x=2a) \}\]
  </li>
  <li>
    <p>define the set of composite (non prime) number (excluding 1)</p>

\[S = \{ x | x\in \Z^+ \land \underbrace{(\exists a \in \Z^+ \quad (1&lt;a&lt;x) \land a|x)}_{\text{$a$ is non-prime}} \}\]

    <p>which basically says “every member in the set is (a positive integer AND is non-prime)”.</p>

    <p>note that it would be “incorrect” to write</p>

\[S = \{ x | x\in \Z^+ \quad {(\exists a \in \Z^+ \quad (1&lt;a&lt;x) \land a|x)}\}\]

    <p>because we are <em>not talking about $\forall x \in \Z^+$</em> or $\exists x \in \Z^+$, we are just letting $x\in \Z^+$ being a <strong>property of elements in this set.</strong></p>
  </li>
  <li>
    <p>define $S={1,4,9,16,…,100}$ by set builder:</p>

\[S=\{x|x\in Z\land (1\le x \le 100) \land (\exists a\in \Z \quad x=a^2 )\}\]

    <p>or you can</p>

\[S=\{x|x\in Z\land (1\le x \le 100) \land (\sqrt{x} \in \Z) \}\]

    <p>technically you can even omit $x\in \Z$ since by closure property this is implied by $\sqrt{x} \in \Z$.</p>
  </li>
</ul>

<blockquote>
  <p>Make sure that your set builder includes <strong>all the elements</strong> and <strong>only the elements intended</strong>, i.e. is correct and complete. This mean you should check</p>

\[\forall x \quad (x \in S \iff P(x))\]

  <p>so that forward is correctness, and backward is completeness (i.e. $\forall x \in U \quad P(x) \to x\in S$)</p>
</blockquote>

<h2 id="set-operations-and-properties">Set Operations and Properties</h2>

<blockquote>
  <p><strong>Set operations</strong> defined between 2 sets</p>

  <ul>
    <li>
      <p><strong>intersection</strong> of two sets:</p>

\[A \cap B = \{x | (x\in A) \land (x \in B) \}\]

      <p>basically conjunction in PL</p>
    </li>
    <li>
      <p><strong>union</strong> of two sets</p>

\[A \cup B = \{x | (x\in A) \lor (x \in B) \}\]
    </li>
    <li>
      <p><strong>difference</strong> between two sets</p>

\[A - B = \{x | (x\in A) \land (x \neq B) \}\]

      <p>in $A$ but no in $B$</p>
    </li>
    <li>
      <p><strong>complement</strong> (with respect to the universe)</p>

\[A^c = \bar{A} = \{x | x \notin A\}\]

      <p>where $x \in U$ part of the universe is assumed.</p>
    </li>
    <li>
      <p><strong>Cartesian product</strong> between two sets</p>

\[A\times B = \{ (a,b) | a\in A\land b \in B \}\]

      <p>for example $A={ c,d }$ and $B={e,f,g}$, then $A\times B={ (c,e),(c,f),(c,g),(d,e), (d,f),(d,g) }$. Therefore, this also means that the cardinality $\vert A \times B\vert  = \vert A\vert \cdot \vert B\vert$.</p>
    </li>
  </ul>
</blockquote>

<p>or even Venn Diagram</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230223110701172.png" alt="image-20230223110701172" style="zoom: 50%;" /></p>

<p>Then of course, you also have certain <strong>properties <em>of those operations</em></strong></p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230223111557244.png" alt="image-20230223111557244" style="zoom:50%;" /></p>

<p><em>For Example</em>:: prove that $\overline{A \cap B} = \bar{A} \cup \bar{B}$ using <strong>set builders</strong></p>

<p>since by definition of set operations</p>

\[\overline{A \cap B} = \{ x | x \notin (A \cap B) \}\]

<p>then we can rewrite as</p>

\[\overline{A \cap B} = \{ x | \neg (x \in (A \cap B)) \}\]

<p>but we can then define $A \cap B$ by</p>

\[\overline{A \cap B} = \{ x | \neg (x \in A \land x \in B) \}\]

<p>then by De Morgan</p>

\[\overline{A \cap B} = \{ x | x \notin A \lor x\notin B \}\]

<p>then finally just put it into our target form</p>

\[\overline{A \cap B} = \{ x | x \in \bar{A} \lor x \in \bar{B} \}\]

<p>hence</p>

\[\overline{A \cap B} = \{ x | x \in \bar{A} \cup \bar{B} \}\]

<p>But in general, there will be multiple ways to prove this.</p>

<h2 id="proofs-on-sets">Proofs on Sets</h2>

<p>We have covered a bit of how to prove set equality in previous section in an example. Here we discuss <em>more techniques</em> that you can use for set proofs.</p>

<ol>
  <li><strong>To prove that $A \subseteq B$</strong>
    <ul>
      <li>let $x \in A$</li>
      <li>…</li>
      <li>therefore $x \in B$</li>
    </ul>
  </li>
  <li><strong>To prove $A = B$ by showing that $A \subseteq B \land B \subseteq A$</strong>
    <ul>
      <li>show that $A \subseteq B$ by showing $x \in A$ … therefore $x \in B$</li>
      <li>show that $B \subseteq A$ by showing $x \in B$ … therefore $x \in A$</li>
    </ul>
  </li>
</ol>

<blockquote>
  <p>To prove equality, you can use <strong>any of the three methods</strong></p>

  <ol>
    <li>(element level) use <strong>set builder</strong>
      <ul>
        <li>e.g. see previous section on proving $\overline{A \cap B} = \bar{A} \cup \bar{B}$</li>
      </ul>
    </li>
    <li>(element level) use the <strong>subset</strong> technique above, e.g. to prove $F=E$
      <ul>
        <li>i.e. you can either prove $x\in F \implies x\in E$, and then again for $x \in E \implies x\in F$</li>
        <li>or you can shorten the above and <mark>show that $x\in F \iff x \in E$</mark> (e.g. see the last example in <a href="#Relations">Relations</a>)</li>
      </ul>
    </li>
    <li>(set level) using <strong>set operations</strong>, e.g. distributivity, De Morgan, etc.</li>
  </ol>
</blockquote>

<p><em>For Example</em>: let $F$ and $E$ be two sets.</p>

\[F = \{z|z \in \Z \land z = a+b \land a\text{ is odd} \land b \text{ is odd}\}\]

\[E = \{ x | x \in \Z \land 2 |x \}\]

<p>Prove that $F=E$.</p>

<ul>
  <li>
    <p>Prove that $F \subseteq E$</p>

    <ol>
      <li>
        <p>let $x \in F$.</p>
      </li>
      <li>
        <p>Then this means $x = a + b$ for some $a,b\in \Z$ where $a,b$ is odd</p>
      </li>
      <li>
        <p>therefore this means</p>

\[x = (2t+1)+(2w+1)\]
      </li>
      <li>
        <p>we can rewrite this as</p>

\[x = 2(t+w+1)\]
      </li>
      <li>
        <p>so $x$ is even, and $2\vert x$</p>
      </li>
      <li>
        <p>therefore $x \in E$</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Prove that $E \subseteq F$</p>

    <ol>
      <li>
        <p>let $x \in E$</p>
      </li>
      <li>
        <p>then this means $x=2t$ for some $t \in \Z$</p>
      </li>
      <li>
        <p>then we can rewrite this as</p>

\[x = (2t+1) - 1\]
      </li>
      <li>
        <p>therefore we can have $a = 2t+1$ and $b=-1$, meaning $a,b$ are odd</p>
      </li>
      <li>
        <p>therefore $x \in F$</p>
      </li>
    </ol>
  </li>
</ul>

<h2 id="size-of-the-union">Size of the Union</h2>

<blockquote>
  <p><strong>Size of the union</strong>: Let $A,B$ be two sets. Then</p>

\[|A\cup B| = |A| + |B| - |A \cap B|\]

  <p>But if $A,B$ are disjoint, then</p>

\[|A \cup B| = |A| + |B|\]

</blockquote>

<p>For example: What is $\vert A \cup B\cup C\vert$</p>

<p>Following the step above, we have</p>

\[\begin{align*}
&amp;\quad |A \cup B \cup C| \\
&amp;= |A \cup B| + |C| - |A \cup B \cap C| \\
&amp;= |A|+|B|-|A \cap B| + |C| - |(A \cup B) \cap C|
\end{align*}\]

<p>but notice that:</p>

\[(A \cup B) \cap C = (A\cap C) \cup (B \cap C)\]

<p>Hence</p>

\[|(A \cup B) \cap C| = |A\cap C| + |B \cap C| - |A \cap B \cap C|\]

<p>Hence we obtain</p>

\[|A \cup B \cup C| = |A|+|B|+|C| - |A \cap B| - |A \cap C| - |B \cap C| + |A \cap B \cap C|\]

<blockquote>
  <p>Note that this including and then excluding back will also be touched on in counting, called the <strong>Principle of Inclusion Exclusion</strong>.</p>
</blockquote>

<p><em>Another in class example</em>: Let there be 16 people taking DM, 16 taking AP, and 11 taking OS. We are also given that</p>

<ul>
  <li>5 taking both DM and OS, and among them 3 taking AP as well</li>
  <li>8 people taking AP only</li>
  <li>5 people taking OS only</li>
</ul>

<p>We want to know how many want to take DM only.</p>

<p>Here, we solve it using <strong>Venn Diagram</strong></p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230304232008190.png" alt="image-20230304232008190" style="zoom: 33%;" /></p>

<h2 id="ordered-setslists">Ordered Sets/Lists</h2>

<p>Now, we turn to ordered sets, where the order of the elements matter.</p>

<blockquote>
  <p><strong>A list</strong> is an <mark>ordered</mark> set of element, and <mark>elements can now repeat</mark>. This is often denoted using parenthesis</p>

\[(e_1,e_2, \dots, e_n)\]

</blockquote>

<p>For example:</p>

<ul>
  <li>
    <p>$(9,1,1)$ is a valid ordered list</p>
  </li>
  <li>
    <p>we actually touched on this before</p>

\[A\times B = \{ \underbrace{(a,b)}_{\text{a list}} | a\in A\land b \in B \}\]

    <p>where order mattered, so that $A \times B \neq B \times A$.</p>
  </li>
  <li>
    <p>binary representation of numbers are also lists, so that all of the below are <em>different lists</em>: $101,110,011$.</p>
  </li>
</ul>

<h1 id="relations">Relations</h1>

<p>Remember that for Cartesian product, we had</p>

\[A\times B = \{ (a,b) | a\in A\land b \in B \}\]

<p>so that let $S={A,D }$ being Annie and Daniel, and $C={DM, OS}$ being Discret Math and OS. Then</p>

\[S \times C = \{ (A,DM),(A,OS),(D,DM),(D,OS) \}\]

<p>but this doesn’t mean anything. Say we want to use this to represent “taking classes”</p>

<p>So we are taking <strong>subset</strong> to represent a <strong>meaningful relationship</strong>. i.e.</p>

\[R_{\mathrm{take class}} = \{ (A,DM),(D,DM) \}\]

<p>hence also $R_{\mathrm{take class}} \subseteq (S \times C)$</p>

<blockquote>
  <p><strong>Relation</strong>: let $A,B$ be two sets. We say that $R$ is a relation from $A$ to $B$ provided</p>

\[R \subseteq A \times B\]

  <p>and that $R$ is a <strong>set of pairs</strong>.</p>
</blockquote>

<p><em>For Example</em>:</p>

<ul>
  <li>
    <p>Let $A = {1,2}$. Then</p>

\[A \times A = \{ (1,1),(1,2),(2,1),(2,2) \}\]

    <p>consider a relation</p>

\[R = \{ (1,1),(1,2),(2,2) \}\]

    <p>then this $R$ means $\le$. in other words:</p>

\[(x,y)\in R \iff x&lt;y\]
  </li>
  <li>
    <p>Let $A = {1,2}$. Let $R_{even}$ be defined <strong>from $A$ to $A$</strong></p>

\[(x,y) \in R_{even} \iff x+y \text{ is even}\]

    <p>then this means</p>

\[R_{even} = \{ (1,1),(2,2) \}\]

    <p>or using set builders, this means</p>

\[R_{even} = \{ (x,y) | x\in A \land y \in A \land 2|(x+y) \}\]
  </li>
</ul>

<blockquote>
  <p>In general, we <strong>notate the relation</strong> as two ways</p>

\[(x,y) \in R_{even} \iff x+y \text{ is even}\]

  <p>or</p>

\[x  R_{even} y \iff x+y \text{ is even}\]

</blockquote>

<p><em>For Example</em>: Let $R$ be a relation on $\Z$, i.e. from $\Z$ to $\Z$.</p>

\[x R y \iff x \text{ divides }y\]

<p>then what is $R$? We can first list a few examples</p>

\[R = \{ (2,4),(2,6),(1,2), \dots \}\]

<p>meaning</p>

\[R = \{ (x,y) | x\in \Z \land y \in \Z \land x|y \}\]

<blockquote>
  <p>Note that a relation can involve <mark>two or more sets</mark>, i.e. n-ary relations.</p>
</blockquote>

<p><em>For Example</em>: a simple one</p>

\[R = \{ (a,b,c)| a \in A \land b \in B \land c \in C \}\]

<p>is a legit relation.</p>

<blockquote>
  <p><strong>Inverse of a Relation</strong>: let $R$ be a relation from $A$ to $B$. We define the inverse of $R$ denoted as $R^{-1}$ as follows</p>

\[\forall x \in A,\forall y\in B\qquad (x,y)\in R \iff (y,x) \in R^{-1}\]

  <p>so that $R^{-1}$ is a <strong>relation from $B$ to $A$</strong>.</p>
</blockquote>

<blockquote>
  <p><strong>Proposition: inverse of inverse is itself</strong></p>

\[R = (R^1)^{-1}\]

</blockquote>

<p><em>Proof</em> (using the subset technique):</p>

<ul>
  <li>prove $R \subseteq (R^{-1})^{-1}$:
    <ol>
      <li>let $(x,y) \in R$.</li>
      <li>then by definition of inverse $(y,x) \in R^{-1}$</li>
      <li>therefore $(x,y) \in (R^{-1})^{-1}$</li>
    </ol>
  </li>
  <li>prove $(R^{-1})^{-1} \subseteq R$:
    <ol>
      <li>let $(x,y) \in (R^{-1})^{-1}$.</li>
      <li>then by definition of inverse $(y,x) \in R^{-1}$</li>
      <li>therefore $(x,y) \in R$</li>
    </ol>
  </li>
</ul>

<p>But we notice that the step is <mark>symmetrical/same</mark> in both ways. Hence this proof <mark>can be proven in much fewer lines</mark></p>

\[(x,y) \in R \iff (y,x) \in R^{-1} \iff (x,y) \in (R^{-1})^{-1}\]

<h2 id="representation-of-relation">Representation of Relation</h2>

<p>We can visualize a relation using:</p>

<ol>
  <li><strong>Directed Graphs</strong> (DiGraphs)</li>
  <li><strong>Matrix</strong> (a boolean matrix)</li>
</ol>

<blockquote>
  <p><strong>Digraph</strong>: a visual representation of a relation with a set of nodes (vertices) connected by <mark>directed</mark> edges (arcs)</p>
</blockquote>

<p>For example: this relation is a subset of cross product $R \subseteq {1,2,3}\times {1,2,3}$</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230302102725671.png" alt="image-20230302102725671" style="zoom: 40%;" /></p>

<p>notice that here <mark>each node is an element in the pair</mark>, and in general, the graph <mark>does not have to be connected</mark> (e.g. imagine $R={(1,1),(2,2)}$)</p>

<blockquote>
  <p><strong>Matrix</strong>: A relation $𝑅$ defined from set $𝐴$ to set $𝐵$ can be represented by a Boolean matrix in which the rows are elements of $𝐴$ and the columns are represented elements of $𝐵$ and each entry of the matrix at row $𝑖$ column $𝑗$ is 1 if there is a relation through $𝑅$ between the ith element in $𝐴$ and the jth element in $𝐵$, otherwise the entry is zero.</p>
</blockquote>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230302103442944.png" alt="image-20230302103442944" style="zoom:50%;" /></p>

<p>Note that since essentially relations are <em>sets</em>:</p>

<blockquote>
  <p><strong>All the properties on set operations apply to relations as well.</strong> For instance, intersection is commutative for relations, and we have $R_1 \cap R_2 = R_2 \cap R_1$</p>
</blockquote>

<h2 id="properties-of-relations">Properties of Relations</h2>

<p>Some relations <em>can have</em> <mark>special</mark> properties, which would come useful later</p>

<ul>
  <li>
    <p><strong>Reflexivity</strong>: let $R$ be a relation defined on a set $A$. The relation is <strong>reflexive</strong></p>

\[R\text{ is reflexive}\iff \forall x \in A\quad (x,x)\in R\]

    <p>or you can also denote</p>

\[R\text{ is reflexive}\iff \forall x \in A\quad xRx\]

    <p>note that</p>

    <ul>
      <li>
        <p>graphically, it means for $\forall x\in A$, you have a self-loop</p>
      </li>
      <li>
        <p>the following would be incorrect: $R^{-1} = R$. e.g. let $R={(1,2),(2,1)}$</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Not Reflexivity</strong>: then there exists a pair that is not in $R$:</p>

\[R\text{ is not reflexive}\iff \exists x \in A\quad (x,x)\notin R\]

    <p>or you can also denote</p>

\[R\text{ is not reflexive}\iff \exists x \in A\quad x\not R x\]
  </li>
  <li>
    <p><strong>Irreflexive</strong>: then basically <strong>no self-loops</strong>:</p>

\[R\text{ is irreflexive}\iff \forall x \in A\quad (x,x)\notin R\]

    <p>examples include “is parent of”, “&gt;”.</p>
  </li>
  <li>
    <p><strong>Symmetric</strong>: “all directed edges = undirected edges”</p>

\[R\text{ is symmetric}\iff \forall x,y \in A\quad (x,y)\in R \implies (y,x)\in R\]

    <p>e.g. $A={1,2,3}$, and a symmetric relation $R={(1,2),(2,1)}$</p>
  </li>
  <li>
    <p><strong>Not symmetric</strong>: negation of the above. There exist a pair that is not “reciprocal”  (including “self-reciprocity”)</p>

\[R\text{ is not symmetric}\iff \exists x,y \in A\quad (x,y)\in R \land (y,x)\notin R\]
  </li>
  <li>
    <p><strong>Antisymmetric</strong>: there is never reciprocity (except “self-reciprocity”)</p>

\[R\text{ is anti-symmetric}\iff \forall x,y \in A\quad xRy \land yRx \implies x=y\]

    <p>note that the this is <mark>different from the below</mark></p>

\[R\text{ is anti-symmetric}\iff \forall x,y \in A\quad (x,y)\in R \implies (y,x)\notin R\]

    <p>the upshot is that you can have a relation that is <mark>both symmetric and anti-symmetric</mark>, and also being both symmetric and not anti-sym.</p>
  </li>
  <li>
    <p><strong>Transitivity</strong>: very useful later</p>

\[R\text{ is transitive}\iff \forall x,y,z \in A\quad xRy \land yRz \implies xRz\]
  </li>
</ul>

<blockquote>
  <p>Note that when you have $\forall x\in A \quad \text{blablabla}$, be careful how <mark>$A$ is defined</mark></p>
</blockquote>

<p><em>For Example</em>: Consider the following relations defined by $A = {1,2,3}$</p>

<ul>
  <li>
    <p>$R_1= { (1,3),(3,3),(3,1),(2,2),(2,3),(1,1),(1,2) }$</p>

    <ul>
      <li>is reflexive: because $\forall x \in {1,2,3}\quad xRx$</li>
      <li>not symmetric: because $(2,3)\in R \land (3,2) \notin R$</li>
      <li>not anti-symmetric: because $1R3\land 3R1$ but $1\neq 3$</li>
      <li>not transitive: $2R3\land 3R1$ but $2 \not R1$ (better see this drawing a <strong>Digram</strong>)</li>
    </ul>

    <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230302111414955.png" alt="image-20230302111414955" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>$R_2 = { (1,1),(2,2),(3,3) }$ is symmetric and anti-symmetric</p>

    <ul>
      <li>is reflexive</li>
      <li>is symmetric: because for each element <em>in the relation</em>, $xRy \to yRx$</li>
      <li>is anti-symmetric: yes. Just proof by enumeration.</li>
      <li>is transitive: yes. Just proof by enumeration.</li>
    </ul>
  </li>
  <li>
    <p>$R_3={ (1,1),(1,2),(2,3),(3,1),(1,3) }$</p>

    <ul>
      <li>not irreflexive: because $(1,1)$ is there</li>
      <li>is symmetric: no</li>
      <li>is anti-symmetric: no, because $(1,3)$ and $(3,1)$ exists</li>
      <li>is transitive: no, because $(2,3)$ and $(3,1)$ but no $(2,1)$</li>
    </ul>
  </li>
  <li>
    <p>$R_4 = { (1,2),(2,3),(1,3) }$</p>

    <ul>
      <li>is irreflexive: no self-loops</li>
      <li>is anti-symmetric: yes, because there is no reciprocity whatsoever</li>
      <li>is transitive: yes, proof by enumeration</li>
    </ul>
  </li>
</ul>

<p>Consider the following $R$ acting on $\Z$:</p>

<table>
  <thead>
    <tr>
      <th>$R$</th>
      <th>reflexive</th>
      <th>irreflexive</th>
      <th>symmetric</th>
      <th>anti-symmetric</th>
      <th>transitive</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$=$</td>
      <td>yes</td>
      <td>no</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <td>$\le$</td>
      <td>yes</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <td>$&lt;$</td>
      <td>no</td>
      <td>yes</td>
      <td>no</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
  </tbody>
</table>

<p>where:</p>

<ul>
  <li>$R_=$ is symmetric because if $x=y \implies y=x$, and is transitive, since $x=y\land y=z \implies x=z$. Finally it is also anti-symmetric because $a=b\land b =a \implies a=b$ (different from transitive)</li>
  <li>$R_\le$ is  reflexive since $\forall x\in \Z\quad x\le x$. Hence this is also not irreflexive. It is also not symmetric since $1 \le 2$ but $2 \not \le 1$. By axioms $a \le b \land b \le a\implies a=b$ is anti-symmetric.</li>
  <li>$R_&lt;$ is anti-symmetric because of <em>benefit of doubt</em>: $a &lt; b \land b &lt; a\implies a=b$ is true because LHS is <em>always false</em>.</li>
</ul>

<blockquote>
  <p><strong>Equivalence Relation</strong>: Let $R$ be a relation on $A$. We call a relation an equivalence relation provided</p>

  <ol>
    <li>$R$ is reflexive</li>
    <li>$R$ is symmetric</li>
    <li>$R$ is transitive</li>
  </ol>
</blockquote>

<p>For example, let $R$ be a relation between sets “$R$: have same cardinality”. So that (<mark>notice now we are operating on sets)</mark> let $A,B$ be sets:</p>

\[A,B\subseteq S\quad ARB\iff |A| = |B|\]

<p>note that since we are operating on sets being subsets of $S$, this means our relations are $R\subseteq P(S)\times P(S)$ defined on power sets.</p>

<p>Then, we want to prove that $R$ is an equivalence relation:</p>

<ul>
  <li>is reflexive, since $\forall A \subseteq S\quad \vert A\vert =\vert A\vert$</li>
  <li>is symmetric, since $\forall A,B\subseteq S \quad \vert A\vert =\vert B\vert \implies \vert B\vert =\vert A\vert$</li>
  <li>is transitive, since $\forall A,B \subseteq S\quad \vert A\vert =\vert B\vert \land \vert B\vert =\vert C\vert \implies \vert A\vert =\vert C\vert$</li>
</ul>

<p>Why do we care about this property? Because</p>

<blockquote>
  <p><strong>Equivalence Classes</strong>: let $R$ be an equivalence relation on $A$. Then let $a\in A$. The equivalence class of $a$, denoted as $[a]$ is the set of <mark>all elements in $A$</mark>, related to $a$ <mark>through the relation $R$</mark>:</p>

\[[a] = \{ x | x\in A \land x Ra \}\]

  <p>notice that it is defined through a <strong><em>particular relation</em></strong>, and you will see <strong>$a$ itself will always belong to this set</strong></p>
</blockquote>

<blockquote>
  <p>Why do we care about equivalence sets? You will see that</p>

  <ul>
    <li>
      <p>objects in an equivalence sets share <em>similar properties</em></p>
    </li>
    <li>
      <p>can <em>partitions sets into equivalence classes</em> - cutting down the amount of cases necessary to prove something.</p>
    </li>
  </ul>
</blockquote>

<p>For example:</p>

<ul>
  <li>let $R$ being the cardinality of sets. Then $[\empty] = {\empty}$</li>
  <li>let $R$ be the relation “Have same parents as you” $[\text{you}] = {\text{you, your siblings}}$</li>
</ul>

<blockquote>
  <p><strong>Properties of Equivalence Classes</strong>: let $R$ be an equivalence class on $A$, then</p>

  <ol>
    <li>$a\in [a]$ is always there (because an equivalence class is reflexive)</li>
    <li>$\forall a \in A\quad [a]\neq \empty$ due to the above</li>
    <li>if I take the equivalence class of all elements, then $\bigcup_{a\in A}[a] = A$</li>
  </ol>
</blockquote>

<p>Proof for $\bigcup_{a\in A}[a] = A$. We notice that this is basically proving <strong>equality between sets</strong>. We can then do:</p>

<ul>
  <li>$\bigcup_{a\in A}[a] \subseteq A$:
    <ol>
      <li>let $x \in \bigcup_{a\in A}[a]$.</li>
      <li>then this means $x$ must belong to <em>some equivalence class</em> $\exists a\in A\quad x\in [a]$</li>
      <li>but we know $[a]\subseteq A$</li>
      <li>therefore $x \in A$</li>
    </ol>
  </li>
  <li>$A \subseteq \bigcup_{a\in A}[a]$
    <ol>
      <li>let $x\in A$</li>
      <li>then $x\in [x]$</li>
      <li>therefore $x \in \bigcup_{a\in A}[a]$.</li>
    </ol>
  </li>
</ul>

<p><em>For example</em>, consider $R$ be defined on a set of 2x2 board configuration $S$, so that:</p>

\[\text{board}_1\ R\ \text{board}_2 \iff \text{board 1 and board 2 can be obtained form each other by reflection or rotation}\]

<p>we can:</p>

<ol>
  <li>
    <p>show that this relation is an <strong>equivalence relation</strong> (i.e. is reflexive, symmetric, and transitive)</p>
  </li>
  <li>
    <p>we can find all its equivalence classes and realize they are <strong>partitions!</strong></p>

    <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230307150928998.png" alt="image-20230307150928998" style="zoom: 33%;" /></p>
  </li>
</ol>

<h2 id="relation-of-congruence-modulo-n">Relation of congruence modulo n</h2>

<p>This is used a lot in cryptography, and number theory.</p>

<blockquote>
  <p><strong>Congruence modulo n</strong>: let $n$ be a positive integer. We say that two integers $x,y\in \Z$ are congruent modulo n:</p>

\[x \equiv y(\mathrm{mod}\ n)\]

  <p><mark>provided that $n$ divides the difference $n\vert (x-y)$</mark>. Note that In the context of relations, <strong>”$\equiv$” means congruent.</strong></p>
</blockquote>

<p><em>For example</em>,</p>

<ul>
  <li>$3\equiv 13 (\mathrm{mod}\ 10)$ reads as “$3$ is congruent to $13$ modulo $10$”</li>
  <li>$13\equiv 3 (\mathrm{mod}\ 10)$</li>
  <li>$3\not\equiv 22 (\mathrm{mod}\ 10)$</li>
</ul>

<blockquote>
  <p><strong>Theorem</strong>: let $n$ be a positive integer. The relation “congruent modulo $n$” is an <strong>equivalence relation</strong> on the set of integers</p>
</blockquote>

<p><em>Proof</em>:</p>

<ul>
  <li>
    <p>is reflexive. This means we want to show that</p>

\[\forall x \in \Z,\quad x\equiv x(\mathrm{mod}\ n)\]

    <p>by definition, this means $\iff$ $n\vert (x-x)$, which is true since $n\vert 0$.</p>
  </li>
  <li>
    <p>is symmetric. This means we want to show that</p>

\[\forall x,y \in \Z,\quad x\equiv y(\mathrm{mod}\ n)\implies y\equiv x(\mathrm{mod}\ n)\]

    <p>then</p>

    <ol>
      <li>let $x\equiv y(\mathrm{mod}\ x)$. This means $n\vert (x-y)$</li>
      <li>so $n\vert -(x-y)$</li>
      <li>hence $n\vert (y-x)$</li>
      <li>therefore $y\equiv x(\mathrm{mod}\ y)$</li>
    </ol>
  </li>
  <li>
    <p>is transitive. This means to prove that</p>

\[\forall x,y,z\in \Z,\quad x\equiv y(\mathrm{mod}\ n)\land y\equiv z(\mathrm{mod}\ n) \implies x\equiv z(\mathrm{mod}\ n)\]

    <p>then</p>

    <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230307111950238.png" alt="image-20230307111950238" style="zoom: 50%;" /></p>
  </li>
</ul>

<blockquote>
  <p><strong>Partition</strong>: a partition of a set is a collection of non-empty pairwise-disjoint subset of $S$, so that the union gives $S$</p>
</blockquote>

<p><em>For example</em> ,consider the congruence modolo $2$ of $\Z$ is</p>

\[\forall a,b\in \Z,\quad a \equiv b(\mathrm{mod}\ 2)\]

<p>where basically $a \equiv b(\mathrm{mod}\ 2)$is $aRb$.</p>

<ul>
  <li>
    <p>then we have</p>

\[[0] = \{ x | x \in \Z \land 0 \equiv x \text{ (mod 2)} \} = \{ ..., -4,-2,0,2,4,... \}\]
  </li>
  <li>
    <p>continuing</p>

\[[1] = \{ x | x \in \Z \land 1 \equiv x \text{ (mod 2)} \} = \{...-3,-1,1,3,... \}\]
  </li>
  <li>
    <p>but eventually you will realize</p>

\[[2] = \{ x | x \in \Z \land 2 \equiv x \text{ (mod 2)} \} = \{ ..., -4,-2,0,2,4,... \}\]

    <p>which is same as $[0]$!</p>
  </li>
  <li>
    <p>and you can show that also $[3] = [1]$.</p>
  </li>
</ul>

<p>As a result , this creates a <strong>partition of $\Z$ into two partitions</strong>, even and odd numbers (if you consider equivalences for $\mod 4$, you get 4 partitions, etc.)</p>

<blockquote>
  <p>Proposition: let $n \in \Z ^+$ and $a,b \in \Z$. Then</p>

\[a \equiv b (\mathrm{mod}\ n) \iff a\ \mathrm{mod}\ n = b\ \mathrm{mod}\ n\]

  <p>which you can try to prove as an exercise.</p>

  <ul>
    <li>note that in general, proofs with relation are <strong>essentially set proofs</strong>. See HW6 Q6 or recitation 8 for example.</li>
  </ul>
</blockquote>

<h1 id="functions">Functions</h1>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230321104019461.png" alt="image-20230321104019461" style="zoom: 50%;" /></p>

<p>It can be seen also as a type of <strong>relation</strong> where you basically have ${(x,f(x))}$. For example, if $f(x)=x^2$, then on the set of integers:</p>

\[f=\{(0,0),(1,1), (-1,1), (2,4), (-2,4),...\}\]

<blockquote>
  <p><strong>Functions</strong>: let $A,B$ be two sets. A function $f$ from $A$ to $B$ denoted</p>

\[f:A \to B\]

  <p>so $f \subseteq A \times B$ where <mark>each</mark> element of $A$ appears <mark>exactly once</mark> as a first element of the ordered pairs of $f$. (i.e. <mark>vertical line test</mark>). So that</p>

\[\text{$f$ is a function from $A$ to $B$}\iff \forall a \in A\quad \exists! b \in B \quad b = f(a)\]

  <p>i.e. there is <mark>only one $b$ for each $f(a)$</mark>.</p>
</blockquote>

<p>Some terminology to be used here. Let $f:A \to B$. Then</p>

<ul>
  <li>$A$ is called the <strong>domain</strong></li>
  <li>$B$ is the <strong>co-domain</strong></li>
  <li>$b\in B$ is called the <strong>image</strong> of $a$</li>
  <li>$a\in A$ is called the <strong>pre-image</strong> of $b$</li>
</ul>

<blockquote>
  <p>More formally, the set of all second elements of the pairs of $f$ is called the <strong>image of $f$:</strong></p>

\[\mathrm{image}(f) = \{ b | b \in B \land \exists a \in A\land  f(a)=b \}\]

  <p>so that $\mathrm{image}(f) \subseteq B$</p>
</blockquote>

<p><em>For example</em>: let $A = {1,2,3,4}$ and $B={1,2,3,4,7,10,12}$.</p>

<ul>
  <li>let $f={(1,2),(2,3),(4,3),(3,1)}$. This is a <em>valid</em> function as <em>each input $a\in A$ has a unique output</em>.
    <ul>
      <li>the image of $f$ is then ${2,3,1}$.</li>
    </ul>
  </li>
  <li>let $f={(1,2),(2,3),(4,3)}$. This is a <em>not valid</em> function as $a=3$ has undefined output.</li>
</ul>

<hr />

<p>One way to visualize functions is <strong>bipartite graph</strong>. For example the function</p>

\[f=\{(1,2),(2,3),(4,3),(3,1)\}\]

<p>can be visualized as</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230321110509355.png" alt="image-20230321110509355" style="zoom: 33%;" /></p>

<p>so that the “vertical line test” in discrete function is that each $a\in A$ has <mark>only one edge going out</mark>.</p>

<p><em>For example</em>, let $f:{0,1}\times {0,1} \to \N \cup {0}$</p>

<ul>
  <li>
    <p>so that basically $A={(0,0),(0,1),(1,0),(1,1)}$, and $B={0,1,2,3,…}$</p>
  </li>
  <li>
    <p>and you are given:</p>

    <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230321111129449.png" alt="image-20230321111129449" style="zoom: 33%;" /></p>
  </li>
  <li>
    <p>is this a valid function? Yes, <em>every</em> $a\in A$ has a <em>unique</em> (only one) output.</p>
  </li>
  <li>
    <p>and also $\mathrm{image}(f)={0,1,2} \subseteq \N \cup {0}$.</p>
  </li>
</ul>

<h2 id="properties-of-functions">Properties of Functions</h2>

<blockquote>
  <p><strong>Onto/surjective function</strong>: let $f:A \to B$ be a function. $f$ is onto IFF <strong>every element of $B$</strong> has a pre-image. You can translate this into FOL</p>

\[\forall b \in B \quad (\exists a \in A\quad  b=f(a))\]

  <p>as a result, $\mathrm{image}(f)=B$. For example, $A={(0,0),(0,1),(1,0),(1,1)}$, $B={0,1,2}$:</p>

  <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230321111129449.png" alt="image-20230321111129449" style="zoom: 33%;" /></p>

  <p>so every element in $B$ receives <mark>at *least* one 1 pre-image</mark>.</p>

  <ul>
    <li>for example, $f(x)=x^2$ for $x \in \Z$ is <em>not</em> onto since $5 \in \Z$ but there is no integer with $x^2 = 5$</li>
    <li>and observe that $\text{$f$is onto\ }\implies \vert A\vert  \ge \vert B\vert$</li>
    <li>is visually is also the <strong>pigeon hole principle</strong> ($A$ are the pigeons)</li>
  </ul>
</blockquote>

<blockquote>
  <p><strong>One-to-one/injection function</strong>: $f$ is one to one IFF no two elements of $A$ has the same image in $B$, i.e. every element in $B$ receives <mark>at *most* 1 pre-image</mark>. Note that this means one-to-one function <em>does not have to be onto functions</em>, i.e. you <em>DON’T</em> need $\mathrm{image}(f)=B$. Into FOL we have:</p>

\[\forall a_1,a_2 \in A\quad a_1 \neq a_2 \implies f(a_1) \neq f(a_2)\]

  <p>or you can re-write this as contrapositive</p>

\[\forall a_1,a_2 \in A\quad f(a_1) = f(a_2) \implies a_1 = a_2\]

  <p>which would be easier to use during proofs.</p>

  <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230323104803922.png" alt="image-20230323104803922" style="zoom: 33%;" /></p>

  <ul>
    <li>for example, $f(x)=x^2$ for $x \in \Z$ is <em>not</em> one-to-one since you can have $4=(+2)^2 = (-2)^2$.</li>
    <li>and observe that $\text{$f$is one-to-one\ }\implies \vert A\vert  \le \vert B\vert$</li>
  </ul>
</blockquote>

<p>This means:</p>

<ul>
  <li><strong>to prove a function is onto</strong>: take an arbitrary element $b \in B$, show it has a pre-image in $A$</li>
  <li><strong>to prove a function is one-to-one</strong>: take two arbitrary elements $a_1, a_2 \in A$, show that (e.g. direct proof) $f(a_1) = f(a_2) \implies a_1 = a_2$</li>
</ul>

<p><em>For Example</em>: let a function $f: \Q \to \Q$, and $f(x)=2x+1$.</p>

<ul>
  <li>prove that $f$ is onto.
    <ul>
      <li>let $b \in \Q$ be an arbitrary element</li>
      <li>then $b=2(x+1) \implies x = (b-1)/2$</li>
      <li>but since $b\in \Q$, therefore $x \in \Q$</li>
      <li>hence there is a pre-image $x\in \Q$ such that $f(x)=b$.</li>
      <li>so $f$ is onto</li>
    </ul>
  </li>
  <li>prove that $f$ is one-to-one</li>
  <li>let $a_1,a_2 \in \Q$ and that $f(a_1)=f(a_2)$</li>
  <li>then this $\implies 2a_1 + 1 = 2a_2 + 1$</li>
  <li>so $\implies a_1= a_2$</li>
  <li>therefore $f$ is one-to-one</li>
</ul>

<blockquote>
  <p><strong>Bijection</strong>: let $f:A \to B$ be a function that is <strong>both onto and one-to-one</strong>, then $f$ is a bijection, i.e. every element in $B$ receives <mark>exactly one pre-image</mark></p>

  <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230323105025411.png" alt="image-20230323105025411" style="zoom: 25%;" /></p>

  <ul>
    <li>and observe that $\text{$f$is a bijection\ }\implies \vert A\vert  = \vert B\vert$</li>
  </ul>
</blockquote>

<p><em>For Example</em>: consider</p>

<ul>
  <li>
    <p>let $f_1 : \Z^+<em>{odd} \to Z^+</em>{even}$ and $f_1(x)=x+1$ is a bijection as it is both onto (each $b$ has a pre-image) and one-to-one (every $b$ has at most one). This implies, intuitively, that $\vert Z^+<em>{odd}\vert  = \vert Z^+</em>{even}\vert$</p>
  </li>
  <li>
    <p>let $f_2 : \Z^+ \to Z^+<em>{even}$ and $f_1(x)=2x$ is also bijection. But this unintuitively implies $\vert Z^+\vert  = \vert Z^+</em>{even}\vert$! <mark>in general for infinite sets, "cardinality" doesn't really exist</mark>.</p>
  </li>
</ul>

<h2 id="composition-of-functions">Composition of Functions</h2>

<p>Consider two functions:</p>

<ul>
  <li>$f: A \to B$ and $g: C \to D$</li>
  <li>let $\mathrm{image}(f) \subseteq C$</li>
</ul>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230323110521659.png" alt="image-20230323110521659" style="zoom:50%;" /></p>

<blockquote>
  <p><strong>Composition</strong>: let $f: A \to B$ and $g: C \to D$, and $\mathrm{image}(f) \subseteq C$. The composition of functions $f$ and $g$ is defined as</p>

\[g\circ f: A \to D,\quad g\circ f (x) = g(f(x))\]

  <p>note that we need $\mathrm{image}(f) \subseteq C$, not necessarily $B \subseteq C$.</p>
</blockquote>

<p><em>For example</em>: let $f:\Z \to \Z$ and $g : \Z \to \Z$</p>

<ul>
  <li>let $f(x) = x^2+1$ and $g(x)=2x-3$. THen $g\circ f(x) = g(x^2+1) = 2(x^2+1)-3=2x^2-1$</li>
</ul>

<blockquote>
  <p><strong>Composition of Functions preserve the property</strong> of $f,g$ if they share the same property. If $f,g$ have different properties, it is more complicated.</p>

  <ul>
    <li>e.g. $f$ is many-to-one and $g$ is one-to-one then $f\circ g$ is many-to-one</li>
  </ul>
</blockquote>

<h2 id="inverse-of-functions">Inverse of Functions</h2>

<blockquote>
  <p><strong>Identity Function</strong>: the identity function denoted $I_A$ is <strong>defined on $A$</strong> to have:</p>

\[I_A: A \to A,\quad I_A(a)=a\]

</blockquote>

<blockquote>
  <p><strong>Inverse Function</strong>: let $f: A\to B$. If there exists a function $g: B \to A$ such that</p>

\[g\circ f = I_A,\quad  f\circ g = I_B\]

  <p>then $g$ is called the inverse of $f$, called $g=f^{-1}$.</p>

  <ul>
    <li>basically you want $f \circ f^{-1} = I_B$. and $f^{-1}\circ f = I_A$.</li>
  </ul>
</blockquote>

<p><em>For Example</em></p>

<ul>
  <li>let $f(x)=3x-2$. What is $f^{-1}$ Essentially we are <strong>finding $x$</strong> from $y=f(x)$, therefore $f^{-1}(x)=(x+2)/3$</li>
</ul>

<p>Note that <strong>inverse $f^{-1}$ might not exist</strong>, i.e. not a function. E.g. $f(x)={(1,a),(2,a)}$, then $f^{-1}={(a,1),(a,2)}$!</p>

<blockquote>
  <p><strong>Theorem</strong>: let $f:A \to B$ be a function. Then $f^{-1}:B\to A$ exists provided $f$ is a <strong>bijection</strong>.</p>

  <ul>
    <li>need to be one-to-one, so that when reversed each input has only one image</li>
    <li>need to be on-to, so that when reversed each input has an image</li>
  </ul>
</blockquote>

<blockquote>
  <p><strong>Theorem</strong>: let $f:A\to B$ be a bijection. Then $f^{-1}$ is <strong>unique</strong>.</p>
</blockquote>

<p><em>Proof</em>: By contradiction, suppose there are two inverse functions $f^{-1}_1$ and $f_2^{-1}$</p>

<ul>
  <li>then this means there is an element $f^{-1}_1(b) \neq f^{-1}_2(b)$</li>
  <li>but this means $f(f^{-1}_1(b)) \neq f(f^{-1}_2(b))$</li>
  <li>by definition, both $f_1^{-1},f_2^{-1}$ are inverse of $f$, so this cannot be right as we get $b \neq b$</li>
  <li>therefore, this is a contradiction and there can only be one unique inverse of $f$.</li>
</ul>

<h2 id="pigeon-hole-principle">Pigeon Hole Principle</h2>

<p>Given a function $f:A\to B$, recall that <strong>if $\vert A\vert  &gt; \vert B\vert$,</strong> then it <strong>must be some of the elements in $A$ going into the same image</strong></p>

<blockquote>
  <p><strong>PHP</strong>: if $p$ pigeons fly in $h$ holes, and $p &gt; h$, then at least one of the hole contains two or more pigeons.</p>
</blockquote>

<p><em>For example</em>:</p>

<ul>
  <li>
    <p>We know that there are 8M people in NYC. We know that each person can have a maximum number of 300,000 hair strands. Then by PHP this means there are people having the same number of fair strands.</p>
  </li>
  <li>
    <p>Let there be three pairs of socks, B, G, R. How many socks do I need to blindly pick so that I get at least one pair?</p>

    <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230401010148088.png" alt="image-20230401010148088" style="zoom:15%;" /></p>
  </li>
  <li>
    <p>in a group of $n$ people, there will be always two people who <em>have the same number of friends</em>. Assume each person has at least one friend in this group. (Hint: the key is to realize the holes need to be “<em>the number of friends</em>”, and the maximum number of friends you can have is $n-1$)</p>
  </li>
  <li>
    <p>let $A = {1,2,3,4,5,6,7,8}$. If I <em>pick 5 random numbers</em>, will there be at least a pair of number that sums to $9$?</p>

    <p>the pigeons can be any <em>five numbers</em> $n_1,n_2,n_3,n_4,n_5$, the holes can be the pairs/the ways that sums to $9$.</p>
  </li>
</ul>

<blockquote>
  <p><strong>Generalized PHP</strong>: Given $p$ pigoens and $h$ holes. If $p &gt; h$ then at least a hole contains:</p>

\[\lceil \frac{p}{h} \rceil \text{\ pigeons}\]

  <p>(the ceiling of $p/h$).</p>
</blockquote>

<p>This also covers the PHP, because let $p=n$ and $h=n-1$. THen by GPHP we have $\lceil n/(n-1) \rceil = 2$ meaning at least one hole contains 2 pigeons.</p>

<h2 id="infinity-and-countability">Infinity and Countability</h2>

<p>The aim is to discuss the size of a set who is infinite, but we saw in previous sections that if $f:A\to B$ is a bijection, then $\vert A\vert  = \vert B\vert$</p>

<blockquote>
  <p><strong>Countability</strong>: we say that set $S$ is countable $\iff$ there exists a bijection between $S$ and $\N$ (or some subset of $\N$).</p>

  <ul>
    <li>i.e. a set is countable, if you can <em>enumerate</em> all the elements without missing any</li>
  </ul>
</blockquote>

<p>For example:</p>

<ul>
  <li>
    <p>let $S={10,20,30,40,50}$. This is countable, since we can take the image being ${1,2,3,4,5}$</p>
  </li>
  <li>
    <p>let $S={2,4,6,8,…}$. This is countable, as you as enumerate them as is.</p>
  </li>
  <li>
    <p>let $S={\frac{a}{b}\vert a,b\in \Z \land b \neq 0}$. How do you enumerate the values of fractions? George Cantor showed this $\Q$ is countable using <strong>diagonalization</strong>.</p>

    <p>First, we show $\Q+$ is countable</p>

    <table>
      <thead>
        <tr>
          <th> </th>
          <th>1</th>
          <th>2</th>
          <th>3</th>
          <th>…</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>1/1</td>
          <td>1/2</td>
          <td>1/3</td>
          <td>…</td>
        </tr>
        <tr>
          <td>2</td>
          <td>2/1</td>
          <td>2/2</td>
          <td>2/3</td>
          <td>…</td>
        </tr>
        <tr>
          <td>3</td>
          <td>3/1</td>
          <td>3/2</td>
          <td>3/3</td>
          <td>…</td>
        </tr>
        <tr>
          <td>…</td>
          <td>…</td>
          <td>…</td>
          <td>…</td>
          <td>…</td>
        </tr>
      </tbody>
    </table>

    <ul>
      <li>so I cannot enumerate by row, as I will never come back from a row. same reason for column</li>
      <li>but I can go by a diagonal</li>
    </ul>

    <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230330101348980.png" alt="image-20230330101348980" style="zoom:33%;" /></p>

    <p>therefore:</p>

\[\{ 1/1, \quad 2/1, \quad 1/2, \quad 3/1,\quad 2/2, \quad1/3, ... \}\]

    <p>so essentially countability can be seen as to <strong>find a strategy to enumerate it</strong> = can find a bijection from $\N$ by just corresponding each element here to a number in $\N$ (you do not need to know what that function is, but it can be enumerated).</p>

    <p>Finally to get $\Q$, we just need to insert each number’s negative in between.</p>
  </li>
</ul>

<blockquote>
  <p><strong>Theorem</strong>: the set of real numbers $\R$ is <em>not</em> countable.</p>
</blockquote>

<blockquote>
  <p><strong>Corollary</strong>: the set of real numbers in $[0,1]$ is also <em>not countable</em>.</p>
</blockquote>

<p><em>Proof</em>: by contradiction using diagonalization.</p>

<ul>
  <li>assume I can list all the real numbers in $[0,1]$, so that ${r_1, r_2, r_3, …}$, e.g.
    <ul>
      <li>$r_1 = 0.4513201…$</li>
      <li>$r_2=0.3351238…$</li>
      <li>$r_3 = 0.1234223…$</li>
      <li>…</li>
    </ul>
  </li>
  <li>we can show that this is <em>missing at least one real number</em>, by
    <ul>
      <li>let $\text{decimal}<em>i(r</em>{new})$ be the $i$-th decimal number of $r_{new}$. E.g. $\text{decimal}<em>3(r</em>{1})=1$ above.</li>
      <li>I can invent a $r_{new}$ to be $\text{decimal}<em>i(r</em>{new}) \neq \text{decimal}<em>i(r</em>{i})$ for every $i$! e.g. $r_{new}=0.544…$</li>
    </ul>
  </li>
  <li>and the key is this $r_{new}\in R$! (therefore this won’t work with proving $\Q$ being uncountable, though we already know it is not)</li>
</ul>

<h1 id="advanced-proofs">Advanced Proofs</h1>

<p>Here we cover more techniques to prove things. We will cover</p>

<ul>
  <li>proof by mathematical induction (PMI)</li>
  <li>proof by smallest counter example (PSCI)</li>
  <li>proof by strong mathematical induction (PSMI)</li>
</ul>

<h2 id="proof-by-induction">Proof by Induction</h2>

<p>Consider proving propositions that look like</p>

\[\forall n\quad p(n),\quad n \in \Z^+\]

<p>The idea is to consider:</p>

<ol>
  <li>
    <p><a href="**prove** that the following is true">base case</a> show $p(a)$ is true</p>
  </li>
  <li>
    <p>if we can show $p(k) \implies p(k+1)$.</p>
  </li>
  <li>
    <p>then $\forall k \ge a \implies p(k)$. It is like a “chain reaction”.</p>

    <p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230330102531524.png" alt="image-20230330102531524" style="zoom: 25%;" /></p>
  </li>
  <li>
    <p>hence we have shown that $\forall n \in \Z^+ \quad n\ge a \implies p(n)$</p>
  </li>
</ol>

<blockquote>
  <p><strong>Proof Template for Induction</strong></p>

  <ol>
    <li>
      <p>write the proposition clearly</p>

\[\forall n \quad p(n)\]
    </li>
    <li>

\[p(a),\quad \text{a is the smallest case of n}\]
    </li>
    <li></li>
    <li>
      <p>[inductive step] <strong>prove</strong> that <strong>“all the next steps/domino” are true</strong> given $p(k)$</p>

\[p(k) \implies p(k+1)\]

      <p>here is when you can <em>technically</em> use all the different proof techniques (e.g. by contrapositive). But often we just do direct proofs.</p>
    </li>
    <li>therefore, $p(k)$ is true $\forall k \ge a$</li>
  </ol>
</blockquote>

<p><em>For Example</em>: prove that $\forall n \in \Z^+$</p>

\[p(n): 1+2+3+ \dots + n = \frac{n(n+1)}{2}\]

<p>Proof by induction: the proposition is already written in the “standard” format</p>

<ol>
  <li>
    <p>base case is $p(1)$.  This is true because</p>

\[p(1): 1 = \frac{1\cdot 2}{2}\]

    <p>is true</p>
  </li>
  <li>
    <p>inductive hypothesis that for $k \ge 1$, we assume $p(k)$ is true</p>

\[p(k):1+2+3+\cdots + k = \frac{k(k+1)}{2}\]
  </li>
  <li>
    <p>inductive step so $p(k+1):1+2+3+\cdots + k + k+1= \frac{k+2(k+2)}{2}$ and it requires you to <strong>prove that $p(k+1)$ is true by</strong></p>

\[p(k) \implies p(k+1)\]

    <p>we can consider a <strong>direct proof</strong></p>

    <ol>
      <li>
        <p>let $p(k)$. This means this is true</p>

\[1+2+3+\cdots + k = \frac{k(k+1)}{2}\]
      </li>
      <li>
        <p>then this means</p>

\[1+2+3+\cdots + k + k+1 = \frac{k(k+1)}{2} + k+1\]

        <p>this step can be interpreted in two ways (both valid)</p>

        <ul>
          <li>smudging the entire $p(k)$ to look like $p(k+1)$</li>
          <li>just want to see what does RHS look like by $1+2+3+\cdots + k + k+1 = p(k)+k+1$</li>
        </ul>
      </li>
      <li>
        <p>rewriting the RHS we get</p>

\[1+2+3+\cdots + k + k+1 = \frac{(k+2)(k+1)}{2}\]

        <p>which is exactly $p(k+1)$</p>
      </li>
      <li>
        <p>hence, we have shown that $p(k+1)$ is true assuming $p(k)$, i.e. $p(k)\implies p(k+1)$</p>
      </li>
    </ol>
  </li>
</ol>

<p><em>For example</em>: prove that $\forall n \in \Z, n \ge 1$</p>

<p>we want to show that</p>

\[1+3+5+\dots+(2n-1) = n^2\]

<p>Visually, this looks like</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230330105520061.png" alt="image-20230330105520061" style="zoom:33%;" /></p>

<p><em>Proof by induction</em>:</p>

<ol>
  <li>
    <p>base case is $p(1)$. This is easily true since $1=1^2$</p>
  </li>
  <li>
    <p>inductive hypothesis: assume $p(k)$ is true</p>

\[1+3+5+\dots+(2k-1) = k^2\]
  </li>
  <li>
    <p>inductive step: want to show that $p(k+1)$ is true given $p(k)$, so that considering direct proof</p>

    <ol>
      <li>
        <p>let $p(k)$ be true, hence</p>

\[1+3+5+\dots+(2k-1) = k^2\]
      </li>
      <li>
        <p>then moving to $p(k+1)$ we get</p>

\[1+3+5+\dots+(2k-1)+(2k+1) = k^2 + 2k+1\]
      </li>
      <li>
        <p>the RHS can be reformatted to be</p>

\[1+3+5+\dots+(2k-1)+(2k+1) = (k+1)^2\]
      </li>
      <li>
        <p>this is basically $p(k+1)$</p>
      </li>
    </ol>
  </li>
</ol>

<blockquote>
  <p><strong>Well-ordering principle</strong>: every set of non-negative integers <mark>has a starting element (i.e. a beginning)</mark></p>

  <ul>
    <li>The induction process is possible thanks to the principle of <strong>well-ordering principle</strong>.</li>
    <li>this does <mark>not necessarily have to be the smallest element</mark>. e.g. prove in the domain of only negative numbers you can start with the largest element, and prove $p(k)\implies p(k-1)$</li>
  </ul>
</blockquote>

<p><em>For example</em>:</p>

<ul>
  <li>is well-ordering: $\N={1,2,3,…}$, $S={4,5,6,…}$</li>
  <li><em>not</em> well-ordering: $\R$, $\Q$, or even $\R^+$.</li>
</ul>

<h2 id="proof-by-smallest-counter-example">Proof by Smallest Counter Example</h2>

<p>To compare this with what you</p>

<p>PMI: essentially proves the purple ones</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230330120500591.png" alt="image-20230330120500591" style="zoom: 7%;" /></p>

<p>PSCI: aims to prove the red one being false, hence there cannot be a CE:</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230330120615053.png" alt="image-20230330120615053" style="zoom:9%;" /></p>

<blockquote>
  <p><strong>Proof Template for PSCI</strong></p>

  <ol>
    <li>
      <p>write in $\forall n \quad p(n)$</p>
    </li>
    <li>
      <p><strong>prove</strong> base case</p>
    </li>
    <li>
      <p><strong>assume</strong> that there exist exceptions/counter examples. <mark>Let $x$ be the smallest so $p(x)$ is False</mark>. Notice that this <strong>also means $p(x-1)$ is true</strong></p>
    </li>
    <li>
      <p><strong>prove</strong> that this is a <strong>contradiction, hence $p(x)$ cannot exist</strong>. i.e. this cannot hold.</p>

\[p(x)\text{ is False } \land\,\,  p(x-1)\text{ is True }\]
    </li>
    <li>
      <p>if there is no SCE, then there is <mark>no CE at all given the well-ordering principle</mark>. Hence the proposition is true.</p>
    </li>
  </ol>
</blockquote>

<p><em>Proof by SCE</em>: show that</p>

\[p(n): 1+2+3+ \dots + n = \frac{n(n+1)}{2}\]

<ol>
  <li>
    <p>base case $p(1)$ is true since $1=1\times 2/2$</p>
  </li>
  <li>
    <p>by contradiction, <strong>assume that $\exists x &gt; 1$ such that $p(x)$ is False, for $x$ is the smallest counter example</strong></p>
  </li>
  <li>
    <p>then we can show that this is a contradiction that this cannot happen. So that given</p>

\[p(x):1+2+3+ \dots + x \neq \frac{x(x+1)}{2}\]

    <p>but that</p>

\[p(x-1):1+2+3+ \dots + x-1 = \frac{x(x-1)}{2}\]

    <p>cannot hold.</p>
  </li>
  <li>
    <p>therefore, there is no SCE, meaning essentially</p>

\[\neg (\exist x &gt; 1 \quad p(x) \text{ is False})\]

    <p>so that for $n \in \Z^+$</p>

\[\forall n \quad p(n)\]
  </li>
</ol>

<p><em>Proof by SCE:</em> prove by SCE that</p>

\[\forall n \in \Z, \quad n&gt;0 \to 4|(5^n-1)\]

<ol>
  <li>
    <p>base case $n=1$ works easily</p>
  </li>
  <li>
    <p>by contradiction, assume $x$ the S.C.E such that $p(x)$ is false. i.e. $4$ does not divide $5^x-1$</p>

\[4 \nmid (5^x-1)\]
  </li>
  <li>
    <p>now we want to show that this is a contradiction: $p(x)$ is false and $p(x-1)$ is true cannot hold</p>

    <ol>
      <li>
        <p>since $p(x-1)$ is true, this means $4\vert (5^{x-1}-1)$</p>
      </li>
      <li>
        <p>this means $5^{x-1}-1=4\times q$, where $q \in \Z$. We want to move towards contradiction that $4 \nmid (5^x-1)$</p>
      </li>
      <li>
        <p>multiply by 5, we get</p>

\[5^x-4-1 = 4\times (5 \times 1)\]

        <p>hence</p>

\[5^x-1 = 4 \times( 5 \times q + 1)\]

        <p>meaning that $4 \vert  (5^x-1)$</p>
      </li>
    </ol>
  </li>
  <li>
    <p>therefore, there is no such $x$ such that $p(x)$ is false. Hence the proposition is true.</p>
  </li>
</ol>

<p><em>Proposition</em>: Every Integer is either odd or even.</p>

<p>Note that now we are considering $\forall n \in\Z$, meaning there is <em>technically</em> not a “well-ordering set”. But there can be a trick:</p>

<ol>
  <li>
    <p><strong>first prove by SCE</strong> that this holds when $\forall n \in \Z^+$</p>
  </li>
  <li>
    <p><strong>extend</strong> your above proof to the negative domain, since</p>

\[n \in \Z,n &lt; 0 \implies n = -m, m\in \Z^+\]

    <p>basically flipping the sign</p>
  </li>
</ol>

<h2 id="proof-by-strong-induction">Proof by Strong Induction</h2>

<p>The difference with proof by induction is:</p>

<ul>
  <li>could have many base cases</li>
  <li>making stronger assumptions that all cases from the base cases until $p(k)$ are true. Prove $p(k+1)$</li>
</ul>

<p>Graphically, it looks like:</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th style="text-align: center">Visual</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>normal Induction</td>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230404164715165.png" alt="image-20230404164715165" style="zoom:7%;" /></td>
    </tr>
    <tr>
      <td>strong induction</td>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230404164747333.png" alt="image-20230404164747333" style="zoom:15%;" /></td>
    </tr>
  </tbody>
</table>

<p>and finally this also means base case for strong induction has to look like:</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230404164821701.png" alt="image-20230404164821701" style="zoom:10%;" /></p>

<blockquote>
  <p>Therefore, this is useful when the result <strong>for $n = k+1$ depends on the result for some smaller value of $n$ (e.g. $n=k-4$), but it’s not the immediately previous value $k$.</strong></p>
</blockquote>

<blockquote>
  <p><strong>Proof Template for PSI</strong>: consider proving some $\forall n \quad p(n)$</p>

  <ol>
    <li>
      <p><strong>base case</strong>: prove the base cases (you will need to experiment to find out how many you need)</p>

\[p(a),p(a+1),p(a+2),...,p(a+z)\]
    </li>
    <li>
      <p><strong>inductive hypothesis</strong>: assume $p(k)$ hold for <mark>all numbers</mark> less than or equal to an arbitrary $k$, i.e. all the below are true</p>

\[p(a) \land p(a+1)\land \dots p(k)\]

      <p>(i.e. the purple window above)</p>
    </li>
    <li>
      <p><strong>inductive step</strong>: now it becomes</p>

\[p(a) \land p(a+1)\land \dots p(k) \implies p(k+1)\]

      <p>essentially to prove $p(k+1)$ you have a <strong>range of choices/assumptions to choose from</strong>. (see example below)</p>

      <ul>
        <li>The difference is actually only superficial compared to normal induction proofs, and the two proof techniques are equivalent.</li>
        <li>you can see this more in the example below</li>
      </ul>

      <p><mark>and you want to make sure $p(a+z+1)$ can be proven using this inductive step</mark> (where $p(a+z)$ you already show to be true in step 1)</p>

      <ul>
        <li>this usually depends on, say $p(k+1)$ required $p(k-3)$ to be true.</li>
        <li>so this means you need $p(k), p(k-1),p(k-2),p(k-3)$ to be true = <strong>need 4 base cases</strong> in step 1 for arbitrary $k$ to hold</li>
      </ul>
    </li>
    <li>
      <p><strong>conclusion</strong>: repeatedly apply the above proof to increase the purple window until all $\forall n$ are covered. (same as normal induction)</p>
    </li>
  </ol>
</blockquote>

<p><em>Example:</em> Stamping Problem. Prove that any amount of postage $\ge 2$ cent can be made with 2 cents or 3 cents stamp.</p>

<p>Let’s first attempt using simple induction.</p>

<ol>
  <li><strong>base case:</strong> I can make $p(2)$ with one stamp of 2 cent</li>
  <li><strong>inductive hypothesis:</strong> it is possible to make a postage worthy of $k$ cent using 2 or 3 cents stamp</li>
  <li><strong>inductive step:</strong> prove $p(k+1)$, show that you can make $k+1$ cent
    <ul>
      <li>case 1: $p(k)$ has only 2 cents stamp. Take a 2 away and replace by 3 cents.</li>
      <li>case 2: $p(k)$ has only 3 cents stamp. Take a 3 away and replace by two 2 cents.</li>
      <li>case 3: $p(k)$ has both 2 cents and 3 stamps. Take a 2 away and replace by 3, or take a 3 and replace by two 2 cents.</li>
    </ul>
  </li>
  <li>done.</li>
</ol>

<p>Let’s see how strong induction would prove this:</p>

<ol>
  <li>
    <p><strong>base case</strong>: we will see how many cases we need. First prove (skipped) that $p(2),p(3),p(4),p(5)$ are true</p>
  </li>
  <li>
    <p><strong>inductive hypothesis</strong>: by assumption then let the following until $k$ be true</p>

\[p(1) \land ... p(6) \land p(7)\dots p(k)\]
  </li>
  <li>
    <p>inductive step: to prove $p(k+1)$ all I need is to show</p>

\[p(1) \land ... p(6) \land p(7)\dots p(k) \implies p(k+1)\]

    <p>realize that</p>

\[p(k+1) = p(k-2+3)=p(k-2)+3\]

    <p>i.e. <mark>adding</mark> a 3 cent in the solution for $p(k-2)$. Since $p(k-2)$ is true by inductive hypothesis, we are done.</p>

    <ul>
      <li>This also means we need at least <mark>3 base cases</mark>, that $p(2),p(3),p(4)$ is already proven (it is)</li>
      <li>since we need the <em>left boundary of our purple window at $2 \le k-2$</em>, so $k\ge 4$. Therefore we needed base case up to $p(k=4)$</li>
    </ul>
  </li>
  <li>
    <p>therefore $p(k+1)$ is true.</p>
  </li>
</ol>

<blockquote>
  <p>Notice that we <mark>needed to directly prove (a minimum of) three base cases</mark>, since we needed to <mark>reach back three integers in our inductive step</mark>. It’s <strong>not always obvious how many base cases are needed until you work out the details</strong> of your inductive step.</p>
</blockquote>

<h1 id="number-theory">Number Theory</h1>

<p>Here we will discuss topics including</p>

<ul>
  <li>divisibility</li>
  <li>GCD/GCF (greatest common divisor/factor)</li>
  <li>fundemental theorem of arithmetic</li>
  <li>factoring</li>
  <li>modular arithmetic (clock arithmetic)</li>
  <li>introduction to cryptography</li>
</ul>

<h2 id="divisibility">Divisibility</h2>

<p>In the 1880, Peano’s axioms of natural numbers (converted into natural language):</p>

<ol>
  <li>
    <p>there is a starting point of numbers $x \in \N$, and it starts at 1</p>
  </li>
  <li>
    <p>let $s$ be a successor function. Every natural number has a successor:</p>

\[\forall n \in \N, \quad s(n) \in \N\]
  </li>
  <li>
    <p>and 1 is not a successor of any natural number, so that $1 \neq s(n)$</p>
  </li>
  <li>
    <p>let $s(n)$ is a one-to-one function., so that each number has a different successor.</p>
  </li>
  <li>
    <p>there is no other set of natural numbers.</p>
  </li>
</ol>

<p>These requirements enabled a “massive production of numbers”, and they have some interesting consequences</p>

<blockquote>
  <p><strong>Divisibility Theorem</strong>: let $a,b \in \Z$, and $b &gt; 0$, then there exist a <mark>unique</mark> pair $(q,r)$ such that</p>

\[a = bq +r,\quad 0 \le r &lt; b\]

  <p><mark>note that $r,b$ is positive.</mark></p>
</blockquote>

<p>for example:</p>

<ul>
  <li>$25 = 10\times 2 +5$, where $25=a$, $b=10$, etc.</li>
  <li>$-25 = 10 \times -3 +5$. Note that both $b$ and $r$ are positive.</li>
</ul>

<p>for example: prove that every integer is either odd or even</p>

<ol>
  <li>
    <p>by the divisibility theorem, there is a unique pair $(q,r)$, such that</p>

\[n = 2q + r,\quad 0 \le r &lt;2\]
  </li>
  <li>
    <p>i.e. if I divide by 2, the remainder can only be zero or one! then,</p>

    <ul>
      <li>if $r=0$, this means $n=2q$ hence $n$ is even</li>
      <li>if $r=1$, this means $n=2q+1$ hence $n$ is odd.</li>
    </ul>
  </li>
</ol>

<blockquote>
  <p><strong>Div and Mod Operators</strong>: let $a,b \in \Z, b &gt; 0$. We know that $a = bq +r,\quad 0 \le r &lt; b$ .Then</p>

\[\exists (q,r) \in \Z \times (\Z^+ \cup \{0\})\]

  <p>and then we define the operators</p>

  <ul>
    <li>$a \mathrm{\ div\ }b = q$</li>
    <li>$a \mathrm{\ mod\ }b = r$</li>
  </ul>
</blockquote>

<h3 id="least-common-multiple-and-greatest-common-divisor">Least Common Multiple and Greatest Common Divisor</h3>

<blockquote>
  <p><strong>Proposition</strong>: let $a,b \in \Z$,. Let let $d\in \Z^+$ means</p>

\[d|a \land d |b \implies d|(a+b) \land d|(a-b)\]

  <p>i.e. $d$ also <mark>divides any linear combination of $a,b$</mark>. This is very useful as it means, for example:</p>

\[gcd(a,b)≡gcd(−a,b)≡gcd(a,−b)≡gcd(−a,−b)≡gcd(∣a∣,∣b∣)\]

</blockquote>

<p>The above comes useful in later proofs. This proposition is itself relatively easy to prove, since:</p>

<ul>
  <li>to prove $d\vert (a+b)$ you can rewrite $a+b=dq_1 + dq_2=d(q_1+q_2)$ since $d\vert a \land d\vert b$</li>
  <li>to prove $d\vert (a-b)$ you can rewrite $a-b=dq_1 - dq_2=d(q_1-q_2)$ since $d\vert a \land d\vert b$</li>
</ul>

<blockquote>
  <p><strong>Greatest Common Factor/Divisor</strong>: let $a,b \in \Z$. We call $d$ the greatest common factor IFF</p>

  <ol>
    <li>$d \vert  a \land d\vert b$ (i.e. is a divisor)</li>
    <li>$\forall e \in \Z, \quad e\vert a \land e \vert b \implies e \le d$ (i.e. is the biggest)</li>
  </ol>
</blockquote>

<p><em>For example</em>: there are 28 roses, 14 daisies. What is the greatest number of identical bouquet of flowers can you make with no flowers left?</p>

<ul>
  <li>let there be $k$ bouquet of flowers. Realize this $k$ must be a divisor such that $k\vert 28$ and $k\vert 14$</li>
  <li>to have the most $k$, you basically need to find the greatest common divisor. In this case you can find by inspection, giving $14$.</li>
</ul>

<blockquote>
  <p><strong>Properties of GCD</strong></p>

  <ul>
    <li>$\mathrm{GCD}(a,0)=a$, since divisor for $0$ includes all numbers</li>
    <li>$\mathrm{GCD}(0,0)$ is undefined</li>
    <li>$\mathrm{GCD}(a,b)=\mathrm{GCD}(b,a)$</li>
    <li>$\mathrm{GCD}(a,b)=\mathrm{GCD}(\vert a\vert ,\vert b\vert )$</li>
    <li>$\mathrm{GCD}(a,b,c)=\mathrm{GCD}(a,\mathrm{GCD}(b,c))$.</li>
  </ul>
</blockquote>

<p><strong>But how do we find GCD</strong>?</p>

<p>Naive GCD: without loss of generalization, let $a \ge b$. Then</p>

<ol>
  <li>for each $d=1$ to $b$ (in case of co-prime, $\mathrm{GCD}(a,b)=1$ )
    <ol>
      <li>if $d\vert a\land d\vert b$ then $g=d$</li>
    </ol>
  </li>
  <li>return $g$</li>
</ol>

<p>Before we discuss a more efficient algorithm: <mark>observe: let $a,b\in \Z^+$. Realize that $\mathrm{GCD}(a,b)=\mathrm{GCD}(b,a \mod b)$.</mark></p>

<ul>
  <li>$\mathrm{GCD}(75, 63)=\mathrm{GCD}(63, 12)$
    <ul>
      <li>note that if you started with $\mathrm{GCD}(63, 75)\to\mathrm{GCD}(75, 63)$ since $63 \mod 75=63$ gets automatically swapped.</li>
    </ul>
  </li>
  <li>but you can continue: $\mathrm{GCD}(63, 12)=\mathrm{GCD}(12, 3)=\mathrm{GCD}(3, 0)$</li>
  <li>then you are done. GCD is 3!</li>
</ul>

<p>Graphically:</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230406102803913.png" alt="image-20230406102803913" style="zoom: 33%;" /></p>

<p>Essentially at each iteration you managed to cut the “search space”!</p>

<blockquote>
  <p><strong>Euclid GCD Algorithm</strong>: let $a,b\in \Z^+$. Realize that $\mathrm{GCD}(a,b)=\mathrm{GCD}(b,a \mod b)$ as shown above (proof later). Then the algorithm becomes</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">recursive_gcd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">a</span> <span class="n">mod</span> <span class="n">b</span>
    <span class="k">if</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">b</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">recursive_gcd</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</code></pre></div>  </div>

  <p>but you can of course write this into an iterative version</p>

  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">iterative_gcd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">a</span> <span class="n">mod</span> <span class="n">b</span>
    <span class="k">while</span> <span class="n">r</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">b</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">r</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">a</span> <span class="n">mod</span> <span class="n">b</span>
    <span class="k">return</span> <span class="n">b</span>
</code></pre></div>  </div>
</blockquote>

<p><em>Proof of Euclid’s divisibility</em>. The key is to utilize divisiblity that, consider $\mathrm{GCD}(a,b)$ then</p>

<ul>
  <li>$a=bq +r$, with $0 \le r &lt;b$ by divisibility</li>
  <li>hence $r=a-bq$ i.e. by definition, $r$ is basically $a \mod b$</li>
</ul>

<p>Therefore, the proof looks like</p>

<ol>
  <li>let $d$ be a divisor of $a$ and $b$. Then $r=a-bq$ means that
    <ol>
      <li>$d\vert a \implies a=d\cdot q_1$, and $d\vert b \implies b = d\cdot q_2$</li>
      <li>hence $r=dq_1 - qdq_2 = d(q_1 - qq_2)\implies d\vert r$</li>
      <li>so <strong>any divisor of $a,b$ is also a divisor of $r$</strong></li>
    </ol>
  </li>
  <li>let $c$ be a divisor of $b$ and $r$. Then $a=bq + r$ means that
    <ol>
      <li>similarly you can show that $c\vert a$</li>
      <li>so <strong>any divisor of $b,r$ is also a divisor of $a$</strong></li>
    </ol>
  </li>
  <li>form the above two conclusions, <mark>$a,b$ and $b,r$ have the same common divisors</mark>. (e.g. let $k$ be a common divsor for $a,b$ but not for $b,r$. Then this means $k \nmid r$, which cannot be due to our proof above!)</li>
  <li>Hence $\mathrm{GCD}(a,b)$ ad $\mathrm{GCD}(b,r)$ must be the same/share the same GCD!</li>
</ol>

<h2 id="prime-numbers-and-factorization">Prime Numbers and Factorization</h2>

<p>The idea is that</p>

\[\N = \{1,2,3,\dots\} = \{1\}\cup \text{primes}\cup \text{composites}\]

<p>and that interestingly:</p>

<ul>
  <li>primes are more “dense” when small</li>
  <li>there is an infinity amount of prime numbers</li>
</ul>

<blockquote>
  <p><strong>Fundemental theorem of arithmetic</strong>: let $n \in \Z \land n \ge2$. There is a <strong>unique</strong> factorization of $n$ into a product of primes. i.e. $n$ is either a prime of a product of primes (composites).</p>
</blockquote>

<p>To prove the above, you will need to show that</p>

<ol>
  <li>there <em>exists</em> a prime factoriazation for any $n \ge 2$</li>
  <li>this factorization is <em>unique</em> (this can get quite complicated to prove, see Gauss’s proof)</li>
</ol>

<p><em>Proof</em>: there exists a prime factorization. Proof by <strong>strong induction</strong></p>

<ol>
  <li>base case: let us use $p(2)=2,p(3)=3,p(4)=2\times 2$ have a prime factorization.</li>
  <li>inductive step: every number between $2$ and $k\ge 5$ can be factored into primes</li>
  <li>prove $k+1$: realize either that $k+1$ is a prime or a composite.
    <ul>
      <li>if $k+1$ is a prime, then $p(k+1)=k+1$, done.</li>
      <li>if $k+1$ is a composite
        <ul>
          <li>then $k+1 = a\times b$ for some factors $a,b&lt;k+1$. (technically this can be even strong that $a,b&lt; (k+1)//2$, but it is not necessary)</li>
          <li>but realize that we have assumed $p(a)$ and $p(b)$ are both having a prime factorization</li>
          <li>hence $k+1$ also has a prime factorization</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>therefore, $k+1$ also has a prime factorization.</li>
</ol>

<blockquote>
  <p><strong>Theorem</strong>: there is an infinite number of prime numbers.</p>
</blockquote>

<p><em>Kumer’s proof</em>: proof by <strong>contradiction</strong>. Suppose there is a <em>finite</em> number of primes:</p>

\[p_1 &lt; p_2 &lt; \dots &lt; p_r\]

<p>where $p_r &lt; \infty$ is finite. Then</p>

<ol>
  <li>$x=p_1\times p_2 \times \dots \times p_r$ is a composite included <strong>all possible primes</strong></li>
  <li>consider $x+1=p_1\times p_2 \times \dots \times p_r+1$
    <ul>
      <li>if $x+1$ is prime
        <ul>
          <li>we already get a <em>contradiction</em> $x+1 &gt; p_r$</li>
        </ul>
      </li>
      <li>if $x+1$ is a composite
        <ul>
          <li>then since $x$ is a composite including all primes, $x$ and $x+1$ <strong>must share at least a prime</strong>, let’s call this $p_i$</li>
          <li>then $p_i\vert x$ and $p_i \vert  (x+1)$, so that $x=p_iq_1$ and $x+1 = p_i q_2$</li>
          <li>$x+1-x=p_i q_2 -p_iq_1$ hence $1 = p_i(q_2-q_1)$</li>
          <li>but $p_i\vert 1$ cannot be true as the smallest prime number is $2$!</li>
          <li>this is a <em>contradiction</em></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Hence, by contradiction there is an infinite number of primes.</li>
</ol>

<blockquote>
  <p><strong>Sieve of Fratosthenes</strong>: what is a good way to find all primes until $n$? E.g. let us find all primes less than $n=20$</p>

  <ol>
    <li>write down every integer $2,3,\dots,20$</li>
    <li>for $i$ each of the above integer that is <em>not crossed out</em>
      <ol>
        <li>cross out all multiples of $i$</li>
        <li>stop at $\lfloor \sqrt{n} \rfloor$, because the biggest <em>possible</em> factor is $\lfloor \sqrt{n} \rfloor$</li>
      </ol>
    </li>
    <li>whatever not crossed out are the primes</li>
  </ol>
</blockquote>

<p>Graphically, if you pick $n=41$:</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230406112112752.png" alt="image-20230406112112752" style="zoom:25%;" /></p>

<p>Finally, <strong>prime factorization</strong> can be used as a good way to find GCD by hand:</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230406112659314.png" alt="image-20230406112659314" style="zoom:43%;" /></p>

<p>so basically all you need to do is to pick the minimum power. This would be useful when you need to find GCD by hand/both $a,b$ are relatively small. Otherwise using the Euclid algorithm should be much faster.</p>

<blockquote>
  <p>Note: what is the relationship between $a \mod b$ and $a-b$?</p>

  <ul>
    <li>since $a=qb + r$, this means $a \mod b = a - b -b -b \dots -b$ with $q$ number of $b$s</li>
    <li>this also means if $a/2 &lt; b$, then $q=1$, hence $a \mod b = a - b$</li>
  </ul>
</blockquote>

<h2 id="modular-arithmetic">Modular Arithmetic</h2>

<p>In many applications such as clock, month, cryptography in $\Z_n = {0,1,2,\dots, n-1}$, we need a “new” type of arithmetic to say something like $n+3 \to 2$  (e.g. 14pm is the same as 2pm)</p>

<ul>
  <li>
    <p>this should remind you of the congruence modulo $n$</p>
  </li>
  <li>
    <p>for example, clock would have $\Z_{12}={0,1,2,\dots, 11}$ and has 12 equivalence classes</p>
    <ul>
      <li>e.g. $\dots, -24,-12,0,12,24,\dots$ (given any number outside of the range, either plus 12 or minus12 until you get back into $\Z_{12}$)</li>
      <li>e.g. $\dots, -23,-11,1,13,25,\dots$</li>
    </ul>
  </li>
</ul>

<p>Then defining the “arithmetics”:</p>

<ul>
  <li>
    <p><strong>addition</strong> in $\Z_{n}$: let $a,b\in \Z_{n}$, then</p>

\[a \oplus b \equiv (a+b) \bmod {n}\]

    <p>e.g. let $n=10$, then $12\oplus 12 = 24 \bmod 10 = 4$.</p>
  </li>
  <li>
    <p><strong>multiplication</strong>: same thing, let $a,b\in \Z_{n}$,</p>

\[a \otimes b \equiv (a\times b ) \bmod n\]
  </li>
  <li>
    <p><strong>subtraction</strong>: now the problem is with $a,b\in \Z_{n}$, you can get negative numbers in the sense that:</p>

    <ul>
      <li>if $a - b &gt; 0$, then $a \ominus b = (a-b)\bmod n$</li>
      <li>if $a - b &lt; 0$, then $a \ominus b = (a-b)+n$ (i.e. add as many $n$ until you get back into $\Z_{n}$, in this case since $a,b\in \Z_n$, add once is enough)
        <ul>
          <li>e.g. let $n=10$, then $1-4 = -3 + 10 = 7$</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>division</strong>: same setup, but recall that</p>

    <ul>
      <li>
        <p>in normal arithmetic we have $a / b = a \times b^{-1}$, where the reciprocal $b^{-1} = 1/ b$.</p>
      </li>
      <li>
        <p>here, we want to consider</p>

\[a \oslash b = a \otimes b^{-1}\]

        <p>and that by definition, the reciprocal <strong>has to satisfy $b^{-1}\otimes b = 1$</strong>. <mark>Any element in $\Z_n$ that has a reciprocal is called invertible in $\Z_n$)</mark>. Therefore, this division only <mark>exists when $b$ is invertible</mark>.</p>

        <ul>
          <li>for example, for $\Z_{10}$, only the following ${1,3,7,9}$ has inverse.</li>
          <li>you will see how this is related to coprimes.</li>
        </ul>
      </li>
    </ul>

    <p>How do we find the inverse in this new arithmetic?</p>

    <ul>
      <li>e.g. let $n=10$. Then $2 \oslash 7 = 2 \otimes 7^{-1} = 2 \otimes 3 = 6$, because $7^{-1}\times 3 = 21 \bmod 10 = 1$ is invertible!</li>
    </ul>
  </li>
</ul>

<p>Is there a systematic/mathematical way to find the inverse?</p>

<blockquote>
  <p><strong>Coprime</strong>: let $a,b\in Z^+$. We call $a,b$ being coprimes IFF $\gcd(a,b)=1$. We denote this with $a \perp b$.</p>

  <ul>
    <li>this is a generic definition for all $\Z^+$</li>
    <li>in the case of modular arithmetic, the only <strong>invertible</strong> elements in $\Z_n$ are the <mark>coprimes with $n$</mark></li>
  </ul>
</blockquote>

<p>Then, to find the inverse you can use:</p>

<blockquote>
  <p><strong>Extended GCD Algorithm</strong>: let $a,b,d \in \Z^+$. It turns out that if</p>

\[d|a \land d |b \land d= ax+by,\quad \text{for some $x,y\in \Z$}\]

  <p>then</p>

\[\gcd(a,b) = d\]

  <p>in other words, you can <mark>always write $\gcd(a,b)$ as $\gcd(a,b)=ax+by$!</mark></p>
</blockquote>

<p>How can this be true? Proof:</p>

<ul>
  <li>for any common divisor $d\vert a \land d \vert b$, so $d \le gcd(a,b)$ obviously</li>
  <li>but I also said $d = ax+by$. So any common divisor of $a,b$ must divide $d$. This means $gcd(a,b)$ divides $d$, hence $d \ge gcd(a,b)$
    <ul>
      <li>i.e. $d$ = any common divisor times something positive.</li>
    </ul>
  </li>
  <li>since $gcd(a,b) \le d$ and $\gcd(a,b) \ge d$, hence $gcd(a,b)=d$</li>
</ul>

<p><em>For example:</em> considering finding $\gcd(41,43)$, and show $\gcd(41,43)=41x+43y$</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230411233913776.png" alt="image-20230411233913776" style="zoom: 20%;" /></p>

<p>we want to show $\gcd(a,b)=ax+by$.</p>

<ul>
  <li>
    <p>since $\gcd(41,43)=1$ in the last step</p>
  </li>
  <li>
    <p>If I take the second and third step, we have $43= 41\times 1 + 2 \implies 2 = 43 - 41 \times 1$, and $41=2\times 20 + 1 \implies 1 = 41 - 2 \times 20$.</p>
  </li>
  <li>
    <p>hence I just substitute them in $1 = 41 - (43 - 41)\times 20 = 21 \times 41 - 43 \times 20$, hence</p>

\[\gcd(43,41) = 1 = 43 \times (-20) + 41 \times (20) = ax + by\]
  </li>
</ul>

<blockquote>
  <p><strong>Modulus Division</strong>: this is a consequence of extended GCD + all invertible elements in $\Z_n$ are coprimes. Therefore, take any invertible element in $\Z_n$ we have:</p>

\[\gcd(a,n)=1 = ax + ny\]

  <p>therefore, notice that in modular arithmetic $ny$ goes away, hence:</p>

\[a\otimes x = 1\implies x = a^{-1}\]

  <p>finally, you want to <strong>be careful that $x \in \Z_n$ by mapping it back</strong>.</p>
</blockquote>

<p>For example,</p>

<ul>
  <li>
    <p>what is $41^{-1}$ for $\Z_{43}$? We know that</p>

\[\gcd(43,41) = 1 = 43 \times (-20) + 41 \times (20)\]

    <p>therefore, $41^{-1}=20$.</p>
  </li>
  <li>
    <p>what is $3^{-1}$ for $\Z_{40}$? Given that</p>

\[\gcd(3, 40) = 1 =  3 \times (-13) + 40 \times (1)\]

    <p>therefore, $3^{-1}=13 + 40=27$</p>
  </li>
</ul>

<h2 id="public-key-cryptography">Public Key Cryptography</h2>

<p>Here we discuss the basics of RSA</p>

<ol>
  <li>
    <p>Bob will pick two large  prime numbers $p,q$, such that $n=p \times q$</p>
  </li>
  <li>
    <p>Bob chooses an $e$ that is coprime with $(p-1)$ and $(q-1)$ so that</p>

\[\gcd(e, (p-1)(q-1)) =1\]

    <p>and also knows $d=e^{-1}$ is invertible (and easy to find knowing $p,q$). This is the <strong>secret key.</strong></p>
  </li>
  <li>
    <p>the public key is invertible, $n,e$ is sent to Alice (and everybody can see the two). This is <strong>public key</strong>.</p>
  </li>
  <li>
    <p>Alice then prepares the encrypted message and encrypt it with $e$ to get $E(m)=m^e \bmod n$</p>
  </li>
  <li>
    <p>Bob then inverts this by, recall that $e\otimes d=1$, hence</p>

\[E^{-1}(E(m)) = (m^e)^d \bmod n = m\]

    <p>decodes it back.</p>
  </li>
</ol>

<blockquote>
  <p>So the key idea is you need $d$ to decode, but finding $d=e^{-1}$ will take years to compute if you don’t know it (or $p,q$) in advance.</p>
</blockquote>

<h1 id="counting">Counting</h1>

<p>Here we will talk about</p>

<ol>
  <li>counting lists: arrangements, permutations, anagrams</li>
  <li>counting sets: combination, pascal triangle, binomial coefficients</li>
</ol>

<h2 id="counting-lists">Counting Lists</h2>

<blockquote>
  <p><strong>Multiplication Theorem</strong>: the number of lists of length $k$ where elements can be chosen from a set of $n$ possible elements is</p>

\[\begin{cases}
n^k, &amp; \text{if repetitions are allowed}\\
(n)_k \equiv n!/(n-k)!, &amp; \text{if repetitions not allowed}
\end{cases}\]

  <p>where $(n)_k$ is called the <em>fallen factorial</em> because it does not go all the way down to $1$. This is basically <mark>permutations</mark>.</p>
</blockquote>

<p>Essentially we are constructing <em>lists</em> = order matters = permutations.</p>

<p>For example:</p>

<ul>
  <li>making phone numbers (list of length $10$) from all numbers $0\sim 9$ <em>with repetition</em> is $10^{10}$.</li>
  <li>making phone numbers (list of length $4$) from all numbers <em>without repetition</em> is $(10)_4 = 10! / 6!$</li>
  <li>if you have $5$ shirts, $3$ pants, and $4$ pairs of shoes, how many outfits can you make? $5\times 3\times 4$.</li>
</ul>

<blockquote>
  <p><strong>Anagrams</strong>: a permutation of the letters in a word, without repetition.</p>
</blockquote>

<p>for example:</p>

<ul>
  <li>how may anagrams can you create from “math”? $4!=24$ ways</li>
  <li>what about from “momo”? We need to be careful of duplicates created by repeating “m” ($2!$ ways) and “o” ($2$! ways). Therefore $4!/(2!\times 2!)$</li>
</ul>

<p>We can write the above process in a general formula:</p>

\[\frac{n!}{n_1!\times n_2!\times \dots \times n_k!} = \frac{n!}{\Pi_{i=1}^k n_i!}\]

<p>where there are $k$ unique letters, and each of those letters repeated $n_k$ times.</p>

<h2 id="counting-sets">Counting Sets</h2>

<p>Now, we want <mark>combinations</mark> of $k$ elements taken from a set of $n$ possible element. Since we are counting sets = <strong>order does not matter</strong></p>

<blockquote>
  <p><strong>Combination</strong>: the set of $k$ elements <mark>sets</mark> of $n$ elements of an $n$-element set such that $0 &lt; k \le n$ is called a combination</p>
</blockquote>

<blockquote>
  <p><strong>Binomial Coefficient</strong>: let $n,k&gt;0$. A binomial coefficient denoted as</p>

\[{n \choose k} = \frac{n!}{(n-k)!k!} = \frac{(n)_k}{k!}\]

  <p>is the number of combinations of choosing (sets of $k$ elements) from $n$ elements. $k!$ represents, given a permutation $[a,b,c]$, the number of ways you can <em>double count</em> if you are counting combinations.</p>
</blockquote>

<p>Why is it called binomial coefficients? Consider $(x+y)^k$. Then essentially you get</p>

\[(x+y)^k = \underbrace{xx...xxx}_{\text{length $k$}} + xx...xxy + xx..xyy  + \dots + yy...yyy\]

<p>therefore, to <em>collect</em> terms into $x^iy^{k-i}$, it becomes a combination problem $k\choose i$. Therefore you also get</p>

<blockquote>
  <p><strong>Binomial Theorem</strong>: let $n\in \N$, then</p>

\[(x+y)^n = \sum_{k=0}^n {n \choose k} x^{n-k}y^k\]

</blockquote>

<p>Pascal’s triangle: <em>visually</em> you can decompose a combination $n \choose k$ into two terms:</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230423025442744.png" alt="image-20230423025442744" style="zoom:50%;" /></p>

<p>For example, we have on the 3rd row ${3 \choose 0}=1$ and ${3 \choose 1}=3$, etc, but realize that:</p>

\[{3 \choose 1}= {2 \choose 0}+ {2 \choose 1}\]

<blockquote>
  <p><strong>Pascal’s Identity</strong>: for $n,k\in \Z$, and $0 &lt; k &lt; n$ is positive</p>

\[{n \choose k} = {n-1 \choose k-1} + {n-1 \choose k}\]

  <p>Intuitively, this works because:</p>

  <ul>
    <li>first ${n \choose k}$ represents finding <strong>sets of size $k$</strong> out of $n$ distinct elements</li>
    <li>let there be a “special element $sp$” amongst the $n$ element. The ${n \choose k}$ means “sets of size $k$ that includes $sp$” + “sets of size $k$ that exludes $sp$”. Hence we get:
      <ul>
        <li>“sets of size $k$ that (already) includes $sp$”  = choosing $k-1$ elements out of $n-1$</li>
        <li>“sets of size $k$ that exludes $sp$” = choosing $k$ elements out of $n-1$</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>From the above you also see the symmetry of combinations</p>

<blockquote>
  <p><strong>Rabbit property</strong>: the following are equivalent</p>

\[{n \choose k} = {n \choose n-k}\]

  <p>this makes sense because, say you are choosing a team of $k$ members out of $n$ people. Then for each team of $k$ you choose, you <strong>also implicitly chose a team of $n-k$</strong>. Since there is a one-to-one mapping of the teams you choose/left out = equality.</p>
</blockquote>

<h2 id="inclusion-exclusion-principle">Inclusion Exclusion Principle</h2>

<p>This is essentially used to count <strong>size of union sets</strong> with arbitrarily large number of sets.</p>

<p>For example, let there be 4 sets,</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230423032103704.png" alt="image-20230423032103704" style="zoom:23%;" /></p>

<p>and you want to figure out the <strong>union size</strong> $\vert G \cup P \cup V \cup F\vert$?</p>

<p>The finding is that (without proof), let $A_1, …,A_n$ be finite sets, then</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230423032434999.png" alt="image-20230423032434999" style="zoom: 33%;" /></p>

<p>so the sign is alternating. This leads to a general formula</p>

<blockquote>
  <p><strong>Principle of Inclusion/Exclusion</strong> (PIE): there is an alternating sign as the number of sets $\cap$ increases. Hence</p>

\[\left| \bigcup_{i=1}^n A_i \right| = \underbrace{\sum_{i=1}^n |A_i|}_{\text{n choose 1 terms}} - \underbrace{\sum_{1\le i &lt;j\le n} |A_i \cap A_j|}_{\text{n choose 2 terms}} + ...+\underbrace{(-1)^{n-1}|A_1 \cap ... A_n|}_{\text{n choose n terms}}\]

  <p>basically a formulaic way if there are large number of sets so that <em>Venn diagram is not drawable</em>.</p>
</blockquote>

<p><em>For example:</em> At the music academy, there are 43 students taking piano $A_P$, 57 students taking violin $A_V$, 29 students taking guitar $A_G$, and 18 taking flute $A_F$. There are 10 students in any two of these courses, 5 students in any three of them and 2 taking all courses. How many students are taking at least one course at the music academy?</p>

<p>This is equivalent of answering $\vert A_P\cup A_V\cup A_G \cup A_F\vert$, hence we get from PIE</p>

<ul>
  <li>
    <p>add $\vert A_P\vert  + \vert A_V\vert + \vert A_G\vert + \vert A_F\vert$ already known</p>
  </li>
  <li>minus $(\vert A_P\cap A_V\vert  + \vert A_P \cap A_G\vert  + …)$. Since “there are 10 students in any two of these courses” and there are 4 choose 2 ways to choose the two groups we get $10 \times {4 \choose 2}$</li>
  <li>add $(\vert A_P \cap A_V \cap A_G\vert + …)$ etc.</li>
</ul>

<p>So we have</p>

\[|A_P\cup A_V\cup A_G \cup A_F| = \underbrace{43+57+29+18}_{\text{1 term}} - \underbrace{10 \times {4 \choose 2}}_{\text{2 terms}} + \underbrace{5 \times {4 \choose 3}}_{\text{3 terms}} - \underbrace{2}_{\text{4 terms}} = 105\]

<h1 id="graph-theory">Graph Theory</h1>

<blockquote>
  <p>We will focus on simple graphs, that are <strong>undirected</strong>, has <strong>no loops</strong> (but can have cycle), and has <strong>no parallel edges</strong> (cycle of two nodes). So</p>

  <ul>
    <li><mark>at most one</mark> edge can exist for a pair of nodes</li>
    <li>should look simple as well</li>
  </ul>
</blockquote>

<p>Some definitions:</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230423035411986.png" alt="image-20230423035411986" style="zoom: 25%;" /></p>

<blockquote>
  <p><strong>Graph</strong>: A graph consists of a set of vertices and edges:</p>

\[G=(V,E)\]

  <p>in the example above, this graph can be denoted as</p>

\[G=(\{u,v,w,x,y,z\},\{e_1,...,e_8\})\]

</blockquote>

<blockquote>
  <p><strong>Edge</strong>: An edge in a graph joints two vertices (e.g. $u,v$). This edge can be denoted either as $uv$, ${u,v}$, or you can name it $e_1$.</p>
</blockquote>

<p>More definitions</p>

<ul>
  <li>
    <p><strong>adjacent</strong>: two <em>nodes</em> $u$ and $v$ are adjacent if there is an edge directly connecting them. Denoted as $u \sim v$.</p>
  </li>
  <li>
    <p><strong>neighborhood</strong>: the <em>set</em> of nodes that has an edge directly connecting it. Denoted as</p>

\[\mathcal{N}(x)=\{ v \in V | v \sim x \}\]
  </li>
  <li>
    <p><strong>degree</strong>: The number of neighbors of a vertex is called its degree, denoted</p>

\[d(x) = |\mathcal{N}(x)|\]

    <p>for example, $d(w)=2$ in the above figure as there are two connections. Furthermore, we denote</p>

    <ul>
      <li><strong>max degree of a graph</strong> as $\Delta(G)$. In the above figure $\Delta(G)=5$</li>
      <li><strong>min degree of a graph</strong> as $\delta(G)$. In the above figure $\delta(G)=1$</li>
    </ul>
  </li>
</ul>

<p>Observe that in the above example</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230423041224774.png" alt="image-20230423041224774" style="zoom: 33%;" /></p>

<p>So why twice? The proof is quite intuitive</p>

<ul>
  <li>adding each edge adds a total degree of 2 to the graph</li>
  <li>if there are $\vert E\vert$ edges, then total degree is $2\vert E\vert$.</li>
</ul>

<blockquote>
  <p><strong>Handshaking</strong>: The sum of the degrees of each vertex in a graph $G=(V,E)$ is equal to twice the number of edges.</p>

\[\sum_{u\in V}d(v) = 2|E|\]

  <p>(this holds for non-simple graphs as well, if you treat a loop as an edge)</p>
</blockquote>

<p>This also means that <mark>a graph's total degree must be even</mark>.</p>

<h2 id="isomorphism">Isomorphism</h2>

<p>Now, we move to studying isomorphism between graphs, which arises when two graphs have the “<strong>same form.</strong>”</p>

<blockquote>
  <p><strong>Isomorphism</strong>: Two graphs $G=(V_G, E_G)$ and $H=(V_H, E_H)$ are isomorphic (“same-form”) if and only if there exists a bijective function (i.e. <strong>mapping of vertices</strong>) representing an isomorphism of $G$ to $H$:</p>

\[f:V_G \to V_H\]

  <p>such that</p>

\[\forall u,v \in V_G, \quad u \sim v \text{ in $G$} \iff f(u) \sim f(v) \text{ in $H$}\]

  <p>i.e. it requires <mark>adjacency between vertices is the same</mark></p>
</blockquote>

<p>Below would be an example</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230423115306098.png" alt="image-20230423115306098" style="zoom:33%;" /></p>

<p>But below is not</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230423115405904.png" alt="image-20230423115405904" style="zoom:33%;" /></p>

<p>because realize that the left graph has an edge connecting a vertex with (degree = 1) with (degree = 3), but the right graph only has (degree = 2) with (degree = 3).</p>

<p>In general:</p>

<ul>
  <li><strong>to prove isomorphism</strong>: find a bijection and show that the adjacency property (edge to endpoints) is preserved
    <ul>
      <li>this is generally considered a hard problem, as there is <em>no efficient algorithm</em> to find the bijection.</li>
    </ul>
  </li>
  <li><strong>to prove non-isomorphism</strong>: if adjacency are preserved, then there <strong>will be some invariant properties</strong> such as degrees. Therefore, if some properties are violated then they cannot be isomorphic</li>
</ul>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230423115939111.png" alt="image-20230423115939111" style="zoom:33%;" /></p>

<h2 id="types-of-graphs">Types of Graphs</h2>

<p>some common types of graphs, which can have some useful properties.</p>

<blockquote>
  <p><strong>Null graph</strong>: A graph that does not have edges. So you have $G=(V, {})$. This is also often denoted as</p>

\[L_n = \text{null graph with n nodes}\]

  <p>e.g $L_1$ is one vertex zero edge, $L_2$ is two vertex zero edge, …</p>
</blockquote>

<blockquote>
  <p><strong>Complete graph</strong>: A graph with <strong>every possible pair of vertices</strong> has an edge. We use $K_n$ to denote a complete graph with $n$ vertices.</p>
</blockquote>

<p>for example:</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230423121353025.png" alt="image-20230423121353025" style="zoom:37%;" /></p>

<p>notice that</p>

<ul>
  <li>$K_1 = L_1$!</li>
  <li>for <mark>every vertex $v$,  it has $\deg(v)=n-1$!</mark></li>
</ul>

<blockquote>
  <p><strong>Path graph</strong>: A path graph has vertices ${v_1,…,v_n}$ and edges ${e_1,…,e_{n-1}}$  such that <strong>an edge $e_k$ joins ${v_k, v_{k+1}}$</strong>. We use $P_n$ to denote path graphs with $n$ vertices.</p>
</blockquote>

<p>For example</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230423121642105.png" alt="image-20230423121642105" style="zoom: 33%;" /></p>

<p>notice that $\vert V\vert -1=\vert E\vert$.</p>

<blockquote>
  <p><strong>Cycle Graph</strong>: A path graph has vertices ${v_1,…,v_n}$ and edges ${e_1,…,e_{n}}$  such that an edge $e_k$ joins ${v_k, v_{k+1}}$ <strong>where $k+1$ is “$\bmod n$”</strong>. We use $C_n$ to denote path graphs with $n$ vertices.</p>
</blockquote>

<p>For example:</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230423122142344.png" alt="image-20230423122142344" style="zoom:33%;" /></p>

<p>where notice that:</p>

<ul>
  <li><mark>all vertex has exactly degree 2</mark></li>
  <li>and $\vert V\vert =\vert E\vert$.</li>
</ul>

<blockquote>
  <p><strong>Regular Graph</strong>: A graph is regular provided <strong>every vertex has the same degree</strong></p>

  <ul>
    <li>so a $C_n$ is a regular graph of degree 2</li>
    <li>a $K_n$ complete graph is also regular of degree $n-1$</li>
    <li>a $L_n$ is also a regular of degree 0.</li>
  </ul>
</blockquote>

<h2 id="properties-of-graphs">Properties of Graphs</h2>

<p>Now we can talk about certain properties. First a few more definitions.</p>

<blockquote>
  <p><strong>Walk</strong>: A walk in $G$ is just <mark>any</mark> sequence of vertices where each vertex is adjacent to the next vertex (i.e. you can physically walk on the graph given this sequence).</p>
</blockquote>

<p>For example, given this graph</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230423123320755.png" alt="image-20230423123320755" style="zoom:43%;" /></p>

<p>where:</p>

<ul>
  <li>$(u,v,w,v,x)$ is a walk of length 4.</li>
  <li>$(v)$ is a walk of length 0.</li>
  <li>$(u,u,x,v,w)$ is NOT a walk because $u$ does not have a connection to $u$</li>
</ul>

<blockquote>
  <p><strong>Path</strong>: A path in a graph is a <strong>walk</strong> in which <mark>no vertex</mark> is repeated. We denote a path of length $n-1$ with $n$ vertices as $P_n$.</p>

  <p>Additionally, we denote <strong>$(u,v)$-path</strong> is a path that starts at vertex $u$ and ends at vertex $v$.</p>
</blockquote>

<p>Then we can define</p>

<blockquote>
  <p><strong>Connected Graph</strong>: A graph $G=(V,E)$ is called a connected graph provided <mark>each pair of vertices is connected by a path</mark> (i.e. you can reach any vertex from some random vertex). Formally:</p>

\[\forall u, v \in V,\quad \exists (u,v)\text{-path}\]

</blockquote>

<table>
  <thead>
    <tr>
      <th style="text-align: center">connected</th>
      <th style="text-align: center">disconnected</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://www.tutorialspoint.com/discrete_mathematics/images/connected_graph.jpg" alt="Connected vs Disconnected Graphs" style="zoom:50%;" /></td>
      <td style="text-align: center"><img src="https://www.tutorialspoint.com/discrete_mathematics/images/unconnected_graph.jpg" alt="Connected vs Disconnected Graphs" style="zoom:50%;" /></td>
    </tr>
  </tbody>
</table>

<h2 id="trees">Trees</h2>

<blockquote>
  <p><strong>Tree</strong>: Let $T=G=(V,E)$. $G$ is a tree iff it is connected and <strong>has no cycle (acyclic)</strong>. A cycle can be seen as a path in which the first and last variables are the same. A graph that is acyclic contains <mark>no such paths</mark>.</p>
</blockquote>

<p><img src="https://static.cambridge.org/binary/version/id/urn:cambridge.org:id:binary:20171027092037172-0306:9781316105450:08931fig2_1.png?pub-status=live" alt="Shapes of Graphs: Trees to Triangles (Chapter 2) - Applying Graph Theory in  Ecological Research" style="zoom:33%;" /></p>

<p>some properties of trees include:</p>

<ul>
  <li>there is <mark>exactly one path</mark> to reach from one vertex to another (since there is no cycle)</li>
  <li>for a tree <mark>$\vert V\vert  = \vert E\vert +1$</mark> (which can be proven by induction)</li>
  <li>A graph is a tree if and only if it a <mark>minimal connected</mark> (if you take out one edge, it becomes disconnected)</li>
</ul>

<blockquote>
  <p><strong>Leaf</strong>: let $G=(V,E)$, then a vertex of <strong>degree 1</strong> is called a leaf in a tree. And if you take out any of the leaf nodes, you <strong>still have a tree</strong></p>
</blockquote>

<blockquote>
  <p><strong>Theorem</strong>: let $G=(V,E)$. $G$ is tree provided that</p>

\[\forall u,v \in V \quad \exists!\text{u-v path}\]

</blockquote>

<blockquote>
  <p><strong>Theorem</strong>: for a tree $\vert V\vert =\vert E\vert +1$</p>
</blockquote>

<p><em>Proof</em>: by induction.</p>

<ul>
  <li>
    <p>base case: $\vert V\vert =1$ with $\vert E\vert =0$ holds with tree of 1 vertex</p>
  </li>
  <li>
    <p>inductive hypothesis: suppose $T_k$ is a tree with $k$ vertices. Suppose the proposition holds for $T_k$.</p>

\[|E_{T_k}| = |V_{T_k}| - 1\]

    <p>i.e. it has <strong>$k$ vertices with $k-1$ edges</strong>.</p>
  </li>
  <li>
    <p>inductive step: it works for a tree $T_{k+1}$, because $T_{k+1}$ must be $T_k$ <strong>plus a leaf node</strong>. So suppose we derach one leaf of $T_{k+1}$, we get a tree $T_k$. Therefore it <strong>means $T_{k+1}$ has one extra edge than $T_k$</strong> (and one leaf node).</p>

\[|E_{T_{k+1}}|=k=(k+1)-1\]

    <p>holds</p>
  </li>
</ul>

<blockquote>
  <p><strong>Hamiltonian Path</strong>: is a <mark>path</mark> containing <mark>all vertices</mark> (recall that a path walk <mark>without repeating vertices</mark>).</p>
</blockquote>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230425123039505.png" alt="image-20230425123039505" style="zoom:13%;" /></p>

<ul>
  <li>
    <p>How many walks are there between $a,b$? There is an <strong>infinity of walks</strong> since there are cycles</p>
  </li>
  <li>
    <p>How many paths are there between $a,b$? There are $4\times 2= 8$. How?</p>
    <ul>
      <li>it is equivalent to #ways to reach $a_7$ from $a$ times #ways to reach from $a_7$ to $b$.</li>
    </ul>
  </li>
</ul>

<p>There is no Hamiltonian path between $a$ and $b$. (complicated, in this case by enumeration)</p>

<p><em>For Example</em>: let $K_n$ be a complete graph with $n\ge 2$. How many Hamiltonian paths are there <strong>in total</strong>, between any pair of vertices?</p>

<ul>
  <li>notice that a complete graph is one for <em>every pair of vertex there is an edge</em>.
    <ul>
      <li>for $K_2$, since you can reach any from any other, there are two boxes = $2!$ ways (<code class="language-plaintext highlighter-rouge">ab</code> and <code class="language-plaintext highlighter-rouge">ba</code>)</li>
      <li>for $K_3$, you have $3!$ ways (<code class="language-plaintext highlighter-rouge">abc</code>, <code class="language-plaintext highlighter-rouge">acb</code>, <code class="language-plaintext highlighter-rouge">bac</code>, <code class="language-plaintext highlighter-rouge">bca</code>, <code class="language-plaintext highlighter-rouge">cab</code>, <code class="language-plaintext highlighter-rouge">cba</code>)</li>
      <li>for $K_4$, you have $4!$ ways</li>
    </ul>
  </li>
  <li><strong>so in total $n!$ Hamiltonian path for $K_n$</strong></li>
</ul>

<h2 id="eulerian-graphs">Eulerian Graphs</h2>

<blockquote>
  <p><strong>Eulerian trail</strong>: a <mark>walk</mark> in $G=(V,E)$ is called an eulerian trail provided it traverses every <mark>edge exactly once</mark>.</p>
</blockquote>

<blockquote>
  <p><strong>Eulerian tour</strong>: if an Eulerian trail start and end at the same vertex, it is called an Eulerian tour.</p>
</blockquote>

<blockquote>
  <p><strong>Eulerian graph</strong>: A graph with an Eulerian tour is called an Eulerian graph.</p>
</blockquote>

<p><em>For example</em>: consider the following graphs</p>

<p><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230425105112462.png" alt="image-20230425105112462" style="zoom:33%;" /></p>

<ul>
  <li>for graph $H$, we can
    <ul>
      <li>have an Eulerian trail from<code class="language-plaintext highlighter-rouge">x</code> to <code class="language-plaintext highlighter-rouge">y</code>: $x-v-u-w-v-y-w-x-y$.</li>
      <li>there is <em>no Eulerian tour</em> in $H$.</li>
    </ul>
  </li>
  <li>for graph $G$, we can
    <ul>
      <li>no Eulerian tour nor Eulerian trail in $G$</li>
    </ul>
  </li>
</ul>

<p>How do we justify? Realize if you have even one <strong>vertex with odd degrees</strong>, then there cannot be an Eulerian tour.</p>

<ul>
  <li>because to go out and get back, you in general must do <code class="language-plaintext highlighter-rouge">out</code> and <code class="language-plaintext highlighter-rouge">in</code>. So the degree <mark>has to be even</mark>.</li>
</ul>

<blockquote>
  <p>Theorem: let $G$ be a connected graph. If <strong>every vertex $v\in V(G)$ has even degree</strong>, then there is an Eulerian <mark>tour</mark> that begins and ends at (every) $v$</p>
</blockquote>

<blockquote>
  <p>Theorem: let $G$ be a connected graph with <strong>exactly two vertices of odd degree $u,v$.</strong> Then $G$ has a Eulerian <mark>trail</mark> that begins at $u$ and ends at $v$.</p>
</blockquote>

<p><em>For Example</em>: how many non-isomorphic graph with $n$ vertices are there? Given $n=4$,</p>

<ul>
  <li>
    <p>there are ${4 \choose 2}=6$ possible edges to place into a graph of 4 nodes.</p>
  </li>
  <li>
    <p>for every graph, you can choose to <strong>have the edge or not</strong>. Hence <mark>$2^6$ possible graphs</mark> (including isomorphic)</p>

\[\square \square \square \square \square \square\]
  </li>
  <li>
    <p>for non-isomorphic graph, you will need to draw all the equivalence groups/isomorphism</p>
  </li>
  <li>
    <p>there you will find there are 11 of them/non-isomorphic graph</p>
  </li>
</ul>

<blockquote>
  <p>There is an formula for this, but in the course we pretend we don’t know, and we have to count.</p>
</blockquote>

<h2 id="planar-graphs">Planar Graphs</h2>

<p>Is it possible to feed every house with utility without a cable (edge) crossing other edges?</p>

<blockquote>
  <p><strong>Planar Graph</strong>: A graph is a planar graph if it can be drawn in a <strong>two-dimensional space</strong> with <strong>no crossing edges</strong>. A planar graph divides the plane into areas called <strong>faces</strong>.</p>
</blockquote>

<p><em>For Example</em>: square graph being planar v.s. not planar.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">non-planar</th>
      <th style="text-align: center">planar</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230425123212482.png" alt="image-20230425123212482" style="zoom: 10%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-COMS3203_Discrete_Math/image-20230425123422760.png" alt="image-20230425123422760" style="zoom:10%;" /></td>
    </tr>
  </tbody>
</table>

<p>where the planar graph no the right has “non-overlapping” faces.</p>

<blockquote>
  <p>Theorem: For <strong>every connected planar graph</strong>, we have:</p>

\[v+f = e+2\]

  <p>where $v$ is the number of vertices, $e$ the number of edges, and $f$ the number of faces.</p>
</blockquote>]]></content><author><name></name></author><category term="2022@Columbia" /><summary type="html"><![CDATA[Discrete Math Logistics]]></summary></entry><entry><title type="html">PHYS3008 EM n Optics</title><link href="/lectures/2022@columbia/PHYS3008_EM_n_Optics.html/" rel="alternate" type="text/html" title="PHYS3008 EM n Optics" /><published>2023-05-11T00:00:00+00:00</published><updated>2023-05-11T00:00:00+00:00</updated><id>/lectures/2022@columbia/PHYS3008_EM_n_Optics</id><content type="html" xml:base="/lectures/2022@columbia/PHYS3008_EM_n_Optics.html/"><![CDATA[<h1 id="recap">Recap</h1>

<h2 id="electrostatics">Electrostatics</h2>

<p>charges stationary $\rho(\vec{r})$ independent of time</p>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Basic facts about electric field</td>
      <td>$\oint \vec{E}\cdot d\vec{a} = \frac{Q_{enc}}{\epsilon_0}$</td>
      <td>Useful when there is symmetry, so that $\oint \vec{E}\cdot d\vec{a}$ is easy to figure out</td>
    </tr>
    <tr>
      <td> </td>
      <td>$V(\vec{r}) = - \int_O^r \vec{E}\cdot d\vec{l}$</td>
      <td>Useful when you <strong>already know $\vec{ E}$</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Careful for regions when $\vec{E}$ is <strong>not continuous</strong>. Then you may need to split your integral.</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{\nabla}\times \vec{E}=\vec{0}$</td>
      <td>Conservation of field/charge. Proven from showing that $\oint \vec{E}\cdot d\vec{l}=\int \vec{\nabla}\times \vec{E}\cdot d\vec{S}=0$ for a single point charge, then superposition.</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>A common approach to <strong>prove starting from a single point charge</strong>, then just use superposition</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\oint \vec{E}\cdot d \vec{l} = 0$</td>
      <td>from the above.</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{E}=-\vec{\nabla}V$</td>
      <td>Useful for <strong>finding</strong> out $\vec{E}$, since $V$ is easier to compute</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\nabla^2 V = \rho / \epsilon_0$</td>
      <td>Poisson’s equation. Useful to <strong>solve when inside vacuum region</strong> such that $\rho = 0$ globally in that region.</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>In side vacuum, $\nabla^2 V = 0$ is the Laplace Equation</td>
    </tr>
    <tr>
      <td>Over <strong>all space</strong></td>
      <td>$W=\frac{\epsilon}{2}\int \vert \vec{E}\vert ^2d^3r’$</td>
      <td><strong>Easier to compute</strong>, often used.</td>
    </tr>
    <tr>
      <td>Perfect Conductor</td>
      <td>$\vec{E}<em>{meat}=0$, $\rho</em>{meat}=0$</td>
      <td>Charges free to move, will redistribute until $\vec{E}_{meat}=0$. Hence all charges are <strong>on the surface</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td>$V_{surf}=V_0$, $\vec{E}_{surf}={E}^\perp \hat{n}$</td>
      <td>$V(b)-V(a)=-\int_a^b \vec{E}\cdot d\vec{l}=0$ if on the surface, since $\vec{E}=0$ inside</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>$V_{meat}=V_0$ as well since there is no field</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Those conditions are often used as <mark>constraints</mark> in a problem</td>
    </tr>
    <tr>
      <td>Capacitance</td>
      <td>$C \equiv \frac{Q}{\Delta V}$</td>
      <td>$Q=+Q$ of the <strong>two conductors,</strong> is the <strong>charge stored</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td>$\Delta V =- \int_a^b \vec{E}\cdot d\vec{l}$ commonly used</td>
      <td>$\Delta V$ is the potential difference across the two conductor = <strong>how much $\Delta V$</strong> needed to store $Q$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Should be purely <strong>geometric</strong>, in unit $\epsilon \cdot \text{Length}$</td>
    </tr>
    <tr>
      <td>Energy Stored in Conductor</td>
      <td>$W=\frac{1}{2}\frac{Q^2}{C}=\frac{1}{2}CV^2$</td>
      <td>Think of it being same as energy needed to <strong>charge up conductor</strong> = <strong>work done</strong> to move all the charges over</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Proven because $dW = \Delta V(q)dq$ to move a charge $dq$ over, and then since $C=\frac{q}{\Delta V(q)}$ is geometric, perform $W=\int dW$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>Summary</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230125154805806.png" alt="image-20230125154805806" /></td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h2 id="magnetostatics">Magnetostatics</h2>

<p>when you have a <mark>steady current</mark>, but as it is current, changes are moving $\implies$ magnetic field</p>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Biot-Savart Law Generic</td>
      <td>$\vec{B}(\vec{r}) = \int \frac{\mu_0}{4\pi} \frac{\vec{J}(\vec{r}’)\times(\vec{r}-\vec{r’})}{\vert \vec{r}-\vec{r’}\vert ^3}\,d^3r’$</td>
      <td>True if $J$ is independent of time, i.e. steady</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{E}(\vec{r}) = \int \frac{1}{4\pi \epsilon_0} \frac{\vec{\rho}(\vec{r}’)\cdot(\vec{r}-\vec{r’})}{\vert \vec{r}-\vec{r’}\vert ^3}\,d^3r’$</td>
      <td>parallel to the $\vec{E}$ field, basically $J \to \rho$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\mu_0 = 1/(\epsilon_0 c^2)$</td>
      <td> </td>
    </tr>
    <tr>
      <td>Biot-Savart if Steady current</td>
      <td>$\vec{B}(\vec{r}) = \frac{\mu_0 I}{4\pi} \int \frac{d\vec{l}(\vec{r}’)\times(\vec{r}-\vec{r}’)}{\vert \vec{r}-\vec{r}’\vert ^3}$</td>
      <td>basically we have here $\vec{J} = \vec{I}\delta^2(\vec{r}-\vec{r}’)$ and that $\vec{I}dl = Id\vec{l}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>works if constant current so $\vec{I}dl = Id\vec{l}$ holds</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230125155110733.png" alt="image-20230125155110733" style="zoom: 50%;" /></td>
      <td>Integrates $dl’$ <mark>only</mark> over where $\vec{r}’ \neq 0$</td>
    </tr>
    <tr>
      <td>Magnetric Field of a Straight line wire</td>
      <td>$\vec{B} = \frac{\mu_0 I}{2\pi r} \hat{e}_\phi$</td>
      <td>Found either using Biot-Savart for current, or using the symmetry hence $\oint \vec{B}\cdot d\vec{l} = \mu_0 I_{enc}$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230125155135485.png" alt="image-20230125155135485" style="zoom:50%;" /></td>
      <td>Graphically it circulates the current</td>
    </tr>
    <tr>
      <td>Field of a Toroid</td>
      <td>$B = \frac{\mu N I}{2 \pi s}$</td>
      <td>and $0$ outside. $s$ is basically the radial distance</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230126222238405.png" alt="image-20230126222238405" style="zoom:20%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td>Divregence of B</td>
      <td>$\vec{\nabla}_{\vec{r}} \cdot \vec{B}(\vec{r})=0$</td>
      <td>for E field we had $\vec{\nabla}\cdot \vec{E}= \rho/\epsilon_0$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\oint \vec{B}\cdot d\vec{S}=0$</td>
      <td>for E field we had Gaussian surface $\oint \vec{E}\cdot d\vec{S}=Q_{enc}/\epsilon_0$!</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>derived using $\int \vec{\nabla}\cdot\vec{B} d\tau = \oint \vec{B}\cdot d\vec{S}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>not very useful for B field calculation</td>
    </tr>
    <tr>
      <td>Curl of B</td>
      <td>$\vec{\nabla}_{\vec{r}} \times \vec{B}(\vec{r})=\mu_0 \vec{J}(\vec{r})$</td>
      <td>for E field we had this is 0</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\oint \vec{B}\cdot d\vec{l}=\mu_0 I_{enc}$</td>
      <td>very useful for B field calculation if we have symmetry in $J$ or $I$ setup!</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>called <strong>Ampere Loops</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>derived using $\int \vec{\nabla}\times \vec{B}\cdot d\vec{S} = \oint \vec{B}\cdot d\vec{l}$</td>
    </tr>
    <tr>
      <td>Field of Solenoid with $n$ turns per unit legnth</td>
      <td>$\vec{B} = \mu_0 n I \hat{e}_z$</td>
      <td>if inside the solenoid</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{B}=0$</td>
      <td>if outside</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230125155158303.png" alt="image-20230125155158303" style="zoom: 67%;" /></td>
      <td>Essentially solved by drawing Amphere loops</td>
    </tr>
    <tr>
      <td>Magnetic Vector Potential</td>
      <td>$\vec{\nabla}\times \vec{A} = \vec{B}$</td>
      <td>so that $\vec{A}$ is easier to compute</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>from $\vec{E}= - \vec{\nabla}V$ for $V$ is easier to compute</td>
    </tr>
    <tr>
      <td>Gauges for $\vec{A}$ due to above definition</td>
      <td>$\nabla(\nabla \cdot \vec{A})-\nabla^2\vec{A} = \mu_0 \vec{J}$</td>
      <td>if $\vec{\nabla}\times \vec{A} = \vec{B}$, and we know $\nabla \times \vec{B} = \mu_0 \vec{J}$</td>
    </tr>
    <tr>
      <td> </td>
      <td>if $\nabla \cdot \vec{A} = 0$</td>
      <td>Colomb’s Gauge, used by this course</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{A}’ = \vec{A}+ \nabla\lambda$ results in the same $B$ field</td>
      <td>therefore we can always force $\nabla \cdot \vec{A} = 0$ by choosing $\lambda$</td>
    </tr>
    <tr>
      <td>Magnetic Vector Potential Definition</td>
      <td>$\vec{A} = \frac{\mu_0}{4\pi}\int \frac{\vec{J}(\vec{r}’)}{\vert \vec{r}-\vec{r}’\vert }d^3r’$</td>
      <td>derived from the above with $\nabla^2 \vec{A}=-\mu_0 \vec{J}$, so that each compontent $A_x,A_y,A_z$ essentially is an analog version of $\nabla^2 V = - \rho / \epsilon_0$ and we know the solution $V$ from using $\rho$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>this means that $\vec{A}$ is usually in the <strong>same direction</strong> as current!</td>
    </tr>
    <tr>
      <td> </td>
      <td>Technically $\vec{A} = \frac{\mu_0}{4\pi}\int \frac{\vec{J}(\vec{r}’)}{\vert \vec{r}-\vec{r}’\vert }d^3r’ + \vec{A}(0)$</td>
      <td>for $\vec{A}(0)$ is a reference point</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>usually use $\vec{A}(\infty)=0$</td>
    </tr>
  </tbody>
</table>

<h2 id="polarization-and-magnetization">Polarization and Magnetization</h2>

<blockquote>
  <p>Basically consider $E$ and $B$ Field inside Matter themselves (e.g. after providing an external $\vec{E}<em>{ext}$ or $\vec{B}</em>{ext}$)</p>
</blockquote>

<p>first, we show $E$ fields in matter, i.e. polarization $\vec{P}$, and we are <mark>only interested in what field this material will produce</mark>, and do not discuss how we get there.</p>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Electric Dipole</td>
      <td> </td>
      <td>when a piece of diaelectric material is placed under $\vec{E}_{ext}$, those little dipoles align themselves and form $\vec{P}$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230130144401254.png" alt="image-20230130144401254" style="zoom:40%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td>Polarization</td>
      <td>$\vec{P}\equiv$dipole moment per unit volume</td>
      <td>when a piece of dielectric material is placed under $\vec{E}_{ext}$, those little dipoles align themselves and form $\vec{P}$</td>
    </tr>
    <tr>
      <td>Potential due to Polarization $\vec{P}$</td>
      <td>$V(\vec{r}) = \frac{1}{4\pi \epsilon}\frac{\vec{p}]\cdot\hat{r}}{r^2} + O(\frac{1}{r^3})$</td>
      <td>multi-pole expansion of electric potential</td>
    </tr>
    <tr>
      <td> </td>
      <td>$V(\vec{r}) = \frac{1}{4\pi \epsilon_0} \oint_\Omega \frac{\sigma_b}{\vert \vert \vec{r} - \vec{r}’\vert \vert }dA’+ \frac{1}{4\pi \epsilon_0} \int_V \frac{\rho_b}{\vert \vert \vec{r} - \vec{r}’\vert \vert }dV’$</td>
      <td>derived from $V(\vec{r})$ above but <mark>only</mark> consisting of dipole terms</td>
    </tr>
    <tr>
      <td> </td>
      <td>$V(\vec{r})=V(\text{from$\sigma_b, \rho_b$})$</td>
      <td>i.e. you can <strong>treat</strong> the dielectric as having $\sigma_b$ on the surface and $\rho_b$ inside.</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>if $\rho_b = 0$, $V(\text{from$\sigma_b,\rho_b$})$ can be solved using <strong>Laplacian $\nabla^2 V = 0$</strong> with boundary of $\sigma_b$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\sigma_b \equiv \vec{P}\cdot \hat{n}$</td>
      <td>$\hat{n}$ points from the surface having dielectric to vaccum/non-dielectric place</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\rho_b\equiv - \nabla \cdot \vec{P}$</td>
      <td> </td>
    </tr>
    <tr>
      <td>Interpretation of Bound Charge due to $\vec{P}$</td>
      <td>$\sigma_b \equiv \vec{P}\cdot \hat{n}$</td>
      <td>$\sigma_b$ comes from lining up dipoles so that only ends matter</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230130205559197.png" alt="image-20230130205559197" style="zoom: 33%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$\rho_b\equiv - \nabla \cdot \vec{P}$</td>
      <td>$\rho_b$ considers if dipole in between is not cancelled out, then the flux of polarization would relate to charge: $-\oint \vec{P}\cdot d\vec{A} =\int_V \rho_b \,d^3r’$</td>
    </tr>
    <tr>
      <td>Displacement Field</td>
      <td>$\nabla \cdot \vec{E}_{total} = (\rho_f+\rho_b) / \epsilon_0$</td>
      <td>since now the polarization also produces field, we want to know a “general” equation for $\vec{E}$ field</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\nabla \cdot (\epsilon \vec{E}_{total}+\vec{P}) = \rho_f$</td>
      <td>use $\rho_b\equiv - \nabla \cdot \vec{P}$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{D}\equiv \epsilon \vec{E}_{total}+\vec{P}$</td>
      <td> </td>
    </tr>
    <tr>
      <td>Gauss Law for Electric Displacement Field</td>
      <td>$\nabla \cdot \vec{D} = \rho_f$</td>
      <td>derived from above</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\oint \vec{D}\cdot d\vec{A} = Q_{free_{enc}}$</td>
      <td>integral form</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>if have symmetry can use <strong>Gaussian surfaces</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>used for proving boundary conditions for $\vec{D}$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{\nabla} \times \vec{D} = \vec{\nabla} \times \vec{P}$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$\oint \vec{D}\cdot d\vec{r}=\oint \vec{P}\cdot d\vec{r}$</td>
      <td>Stokes’ Theorem, derived from above</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>used for proving boundary conditions for $\vec{D}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>the above is <strong>true for any dielectric</strong></td>
    </tr>
    <tr>
      <td>$\vec{D}$ and $\vec{E}$ relation</td>
      <td>$\vec{\nabla}\cdot \vec{E}<em>{tot} = \rho</em>{tot} / \epsilon_0 \to \vec{E}<em>{tot} = \frac{1}{4\pi \epsilon_0} \int \frac{\rho</em>{tot}}{\symscr{r}} \hat{\symscr{r}}\,d^3r’$</td>
      <td>because $\vec{\nabla}\times \vec{E}_{tot} = 0$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{\nabla}\cdot \vec{D}= \rho_{free} \not\to \vec{D} = \frac{1}{4\pi } \int \frac{\rho_{free}}{\symscr{r}} \hat{\symscr{r}}\,d^3r’$</td>
      <td>because $\vec{\nabla} \times \vec{D} \neq 0$ often, hence $\vec{D}$ might not have a potential</td>
    </tr>
    <tr>
      <td>Linear Dielectric</td>
      <td>$\vec{P} = \epsilon_0 \chi_e \vec{E}_{tot}$</td>
      <td>$\chi_e$ is electric susceptibility, $\epsilon_0$ is permittivity of free space</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>if $\vec{E}<em>{applied}$ is given, we are stuck because it will produce $\vec{P}$, which produces $\vec{E}</em>{resp}$ hence affects $\vec{E}_{tot}$, which relates to $\vec{P}$…</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{D} = \epsilon_0(1+\chi_e)\vec{E}<em>{tot}\equiv \epsilon \vec{E}</em>{tot}$</td>
      <td>$\epsilon$ is permittivity of material</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>can use this to <strong>break from the loop</strong> if we can find $\vec{D}$ from Gaussian surface</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\epsilon_r \equiv \epsilon / \epsilon_0 = 1+\chi_e$</td>
      <td>relative permittivity, $\chi_e=0$ in free space.</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>also called <strong>dielectric constant</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{\nabla}\times \vec{D} = \vec{\nabla} \times (\epsilon \vec{E}_{tot}) \neq 0$</td>
      <td>because $\epsilon$ could vary in different position</td>
    </tr>
    <tr>
      <td>Space filled with homogenous Linear Dielectric $\chi_e$</td>
      <td>$\vec{\nabla} \times \vec{D} = 0$, $\vec{\nabla} \cdot \vec{D}= \rho_{free}$</td>
      <td>inside the homogenous linear dielectric, $\epsilon$ is constant</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{D} = \epsilon_0 \vec{E}_{free}$</td>
      <td>$\vec{E}_{free}$ is field produced by free charges</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>because now $\vec{\nabla}\cdot \vec{D}= \rho_{free} \to \vec{D} = \frac{1}{4\pi } \int \frac{\rho_{free}}{\symscr{r}} \hat{\symscr{r}}\,d^3r’$ holds</td>
    </tr>
  </tbody>
</table>

<p><em>Application of Bound Charges</em></p>

<p>Consider a slab of dielectric with thickness $d$ carrying polarization $\vec{P} = k[1+(x/d)]\hat{x}$ :</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20220314163908686.png" alt="image-20220314163908686" /></p>

<p>we do not care yet what external field is needed to produce this polarization. We want to know the electric field <strong>produced by</strong> this given polarization.</p>

<p>First, we can find the bound charges to be:</p>

\[\sigma_b = \vec{P}\cdot \hat{n} = \begin{cases}
2k, &amp; x =d\\
-k, &amp; x=0
\end{cases}\\
\rho_b = -\nabla \cdot \vec{P} = -\frac{k}{d},\quad 0&lt;x&lt;d\]

<p>Then, we can <em>treat this as real charges</em> to compute $V(\vec{r})$ due to the correctness of:</p>

\[V(\vec{r}) = \frac{1}{4\pi \epsilon_0} \oint_\Omega \frac{\sigma_b}{||\vec{r} - \vec{r}'||}dA'+ \frac{1}{4\pi \epsilon_0} \int_V \frac{\rho_b}{||\vec{r} - \vec{r}'||}dV'\]

<p>Now, since we know the charge distribution, we can exploit the symmetry and save doing the above extra integrals:</p>

<ul>
  <li>
    <p>drawing Gaussian surfaces inside/outside the slab gives:</p>

\[\vec{E}_&lt; = \vec{E}_&gt;\\
(\vec{E}_{inside}-\vec{E}_{&lt;})\cdot \hat{x} = \frac{k}{\epsilon_0}\left(1+\frac{x}{d}\right)\]
  </li>
  <li>
    <p>but notice that the net charge is zero, hence:</p>

\[\vec{E}_&lt; = \vec{E}_&gt; = \vec{0}\\
\vec{E}_{inside} = -\frac{k}{\epsilon_0}\left( 1+ \frac{x}{d} \right)\]
  </li>
</ul>

<p>the result is consistent if you compute from $\vec{D}$ and use $\vec{D}=\epsilon \vec{E}_{tot}$.</p>

<hr />

<p><em>Treating $\sigma_b,\rho_b$ as real charges</em>:</p>

<p>Basically it works due to the proof that</p>

\[V(\vec{r}) = \frac{1}{4\pi \epsilon_0} \oint_\Omega \frac{\sigma_b}{||\vec{r} - \vec{r}'||}dA'+ \frac{1}{4\pi \epsilon_0} \int_V \frac{\rho_b}{||\vec{r} - \vec{r}'||}dV'\]

<p>Then, consider finding $V(r)$ for $r &lt; a$ in the setup below:</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20220314173419462.png" alt="image-20220314173419462" /></p>

<p>where $Q$ is a point charge sitting at origin. Then, we first can easily figure out $\vec{D}$ by:</p>

\[\int \vec{D}\cdot d\vec{S} = Q_{free_{enc}} = Q,\quad \text{true for all space}\]

<p>hence we get:</p>

\[\vec{D} = \frac{Q}{4 \pi r^2}\hat{r}\to \vec{E}_{tot} = \frac{Q}{4\pi \epsilon r^2}\hat{r}\]

<p>for $\epsilon$ <mark>actually changes in regions</mark>, so that:</p>

<ul>
  <li>$\epsilon=\epsilon_0$ in vacuum hence $r &lt; a$ or $r &gt; b$</li>
  <li>$\epsilon =\epsilon_r \epsilon_0$  inside dielectric</li>
</ul>

<p>Though we can proceed easily to find $V(\vec{r})$ now, but we can show that we obtain the same result if we <strong>treating $\sigma_b,\rho_b$ as real charges</strong>:</p>

<ul>
  <li>
    <p>to find $\sigma_b, \rho_b$, first we need to find $\vec{P}$:</p>

\[\vec{P} = \epsilon_0 \chi_e \vec{E}_{tot} = \frac{\epsilon_0 \chi_e  Q}{4\pi \epsilon r^2}\hat{r}\]
  </li>
  <li>
    <p>then find $\sigma_b, \rho_b$:</p>

\[\sigma_b =\vec{P}\cdot \hat{n} = \begin{cases}
-\frac{\epsilon_0 \chi_e  Q}{4\pi \epsilon a^2} , &amp; x =a\\
\frac{\epsilon_0 \chi_e  Q}{4\pi \epsilon b^2} , &amp; x =b
\end{cases}\\
\rho_b = -\nabla \cdot \vec{P} =0,\quad a&lt;x&lt;b\]
  </li>
</ul>

<p>Then we can consider $\vec{E}_{tot}$ from those charges while using symmetry:</p>

\[\begin{cases}
\vec{E}_{&lt;} = \frac{Q}{4 \pi \epsilon_0 r^2} \hat{r}, &amp; r &lt; a\\
\vec{E}_{inside} = \frac{Q+Q_b(a)}{4 \pi \epsilon_0 r^2} \hat{r}= \frac{Q}{4 \pi \epsilon_0(1+\chi_e) r^2} \hat{r}, &amp; a&lt;r &lt;b\\
\vec{E}_{&gt;} = \frac{Q}{4 \pi \epsilon_0 r^2} \hat{r}, &amp; r &gt; b
\end{cases}\]

<p>using $\oint \vec{E}\cdot d\vec{A} = Q_{enc}/\epsilon_0$, where:</p>

<ul>
  <li>$Q_b(a)$ is the bound charges at $r=a$, which is $4 \pi a^2 \sigma_b(a)$.</li>
  <li>this is consistent with $\vec{E}_{tot} = \frac{Q}{4\pi \epsilon r^2}\hat{r}$.</li>
</ul>

<p>Finally, finding $V(\vec{r})$ for $r &lt; a$ is just doing the integral:</p>

\[V(\vec{r}) = -\int_\infty^r \vec{E}\cdot d\vec{r} = -\int_\infty^b \vec{E}_&lt;\cdot d\vec{r}-\int_b^a \vec{E}_{inside}\cdot d\vec{r}-\int_a^r \vec{E}_&gt;\cdot d\vec{r}\]

<p>for $d\vec{r}=dr \hat{r}+ rd\theta \hat{\theta}$.</p>

<hr />

<p><strong>Magnetization</strong> in matter is <em>essentially the same</em> as polarization, but here due to <em>tiny current loops</em>:</p>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Magnetic Dipoles</td>
      <td>$\vec{m} = I \int d\vec{A}$</td>
      <td>magnetic dipole of a small current loop</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230130142357629.png" alt="image-20230130142357629" style="zoom:33%;" /></td>
      <td>derived from multi-pole expansion of $\vec{A}$, and since the mono-pole term is zero, the first order term is dipole.</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>if you look into any material, electron orbit themselves/spinning = constitute <strong>tiny current loops = dipole</strong>. However, most material has “no magnetization” because those dipoles are randomly oriented</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>But when an external field $\vec{B}_{\mathrm{ext}}$ is supplied, you get some net orientations = net magnetization $\vec{M}$</td>
    </tr>
    <tr>
      <td>Magnetic Moment $\vec{M}(\vec{r})$</td>
      <td>$\vec{M}(\vec{r})\approx \sum \vec{m}$</td>
      <td>think of $\vec{M}$ as specifying a collection of tiny dipoles $\vec{m}$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{M}\equiv$ dipole moment per unit volume</td>
      <td>for continuous case</td>
    </tr>
    <tr>
      <td>$\vec{A}$ from $\vec{M}$</td>
      <td>$\vec{A}=\frac{\mu_0}{4\pi} \sum_{i} \frac{\vec{m}\times \hat{r}}{\vert \vec{r}-\vec{r}_i’\vert }$</td>
      <td>discrete case</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{A}=\frac{\mu_0}{4\pi} \int \frac{\vec{M}\times \hat{r}}{\vert \vec{r}-\vec{r}’\vert }d^3r’$</td>
      <td>continuous case</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>note that $\hat{r}=\vec{r}/\vert \vec{r}\vert$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{A}_{dip} = \frac{\mu_0}{4\pi} \frac{\vec{m}\times \hat{r}}{\vert \vec{r}-\vec{r}’\vert }$</td>
      <td>derived because we know the field of a single dipole</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Most generic form of finding $\vec{B}$ from given $\vec{M}$</td>
    </tr>
    <tr>
      <td>$\vec{A}$ from $\vec{M}$ using bound currents</td>
      <td>$\vec{A}=\frac{\mu_0}{4\pi} \int_{all} \frac{\vec{J}_{b}}{\vert \vec{r}-\vec{r}’\vert }d^3r’+\frac{\mu_0}{4\pi}\oint \frac{\vec{K}_b}{\vert \vec{r} - \vec{r}’\vert }dA’$</td>
      <td>mathematically same as above, derived from the continuous case</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{J}<em>b \equiv \nabla \times \vec{M},\quad \vec{K}</em>{b} \equiv \vec{M}\times \hat{n}$</td>
      <td>for $\hat{n}$ points from the magnetized material to vacuum</td>
    </tr>
    <tr>
      <td>Physical Interpretation of Bound Charges</td>
      <td>$\vec{K}_b = \vec{M}\times \hat{n}$</td>
      <td>surface current = current on the surface of material = treat as normal current and compute $\vec{B}$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230130143248855.png" alt="image-20230130143248855" style="zoom: 33%;" /></td>
      <td>imagine uniform magnetized material = uniform tiny current loops</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Hence inner loops cancel, we only have net outer current</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{J}_b = \nabla \times \vec{M}$</td>
      <td>If non-uniform magnetized material, then net $\vec{J}_b$ comes from difference in current loops</td>
    </tr>
    <tr>
      <td>Auxiliary Field $\vec{H}$</td>
      <td> </td>
      <td>same motivation as $\vec{D}$, now in magnetism we have both contributions from $J_f$ and $J_b$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{H}=\frac{1}{\mu_0}\vec{B}-\vec{M}$</td>
      <td>more useful than $\vec{B}$ when we have magnetized material</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>$\vec{H}$ often in the <strong>same direction</strong> as $\vec{B}$ and $\vec{M}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>The magnetic parallel of $\vec{E}$ field. ($\vec{B}$ would be a parallel to $\vec{D}$ instead)</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\nabla \times \vec{B} = \mu_0 \vec{J}<em>{total} = \mu_0 (\vec{J}_b + \vec{J}</em>{free})$</td>
      <td>derivation from Ampere’s Law, then use $\vec{J}_b = \nabla \times \vec{M}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>true in general</td>
    </tr>
    <tr>
      <td>Differential and Integral form of $\vec{H}$</td>
      <td>$\nabla \times \vec{H} = \vec{J}_{free}$</td>
      <td>follows from the above</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\oint \vec{H}\cdot d\vec{l} =\int \vec{J}<em>{free} \cdot d\vec{A}=I</em>{free_{enc}}$</td>
      <td>very useful when we have symmetry</td>
    </tr>
    <tr>
      <td>Linear Material</td>
      <td>$\vec{M} \equiv \chi_m \vec{H}$</td>
      <td>$\vec{J}<em>{free} \to \vec{B}</em>{free}\to \vec{M}$ if material is magnetizable</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{B}= \mu_0 (1+ \chi_m)\vec{H}=\mu \vec{H}$</td>
      <td>derived from $\vec{H}=\frac{1}{\mu_0}\vec{B}-\vec{M}$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\mu = \mu_r \mu_0 \equiv \mu_0(1 + \chi_m)$</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p><em>Calculate $\vec{B}$ from Bound Currents</em></p>

<p>Suppose you are given a material with frozen in magnetization such that $\vec{M}=M\hat{e}_z$ inside the cylinder. The question is what is the magnetic field everywhere.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Setup</th>
      <th style="text-align: center">Setup with Bound Currents</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230130210609692.png" alt="image-20230130210609692" style="zoom: 67%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230130210622916.png" alt="image-20230130210622916" style="zoom:67%;" /></td>
    </tr>
  </tbody>
</table>

<p>We know we can get $\vec{B}$ either:</p>

<ul>
  <li>calculate $\vec{A}$ then do $\vec{B}=\nabla \times \vec{A}$. You wil see that we have many ways to find $\vec{A}$
    <ul>
      <li>if finite currents to integrate through, consider treating them as rotating charge = current loops $\vec{A}<em>{dip} = \int d\vec{A}</em>{dip}^{loop}$</li>
      <li>or compute $\vec{A}$ from the bound charges using the generic formula above (a lot of work)</li>
    </ul>
  </li>
  <li>calculate $\vec{B}$ directly by treating bound currents as currents (faster here)</li>
  <li>calculate using $\vec{H}$, and then convert back with $\vec{H}=\frac{1}{\mu_0}\vec{B}-\vec{M}$ (works, left to you as a mental exercise)
    <ul>
      <li>furthermore, if $\vec{J}_b=0$ and $\nabla \cdot \vec{M}=0$, then can use $\vec{H}=-\nabla W$ and solve laplacian</li>
    </ul>
  </li>
</ul>

<p>We first compute the bound currents and notice that:</p>

\[\begin{align*}
\vec{J}_b &amp;= \nabla \times \vec{M} = \vec{0}\\
\vec{K}_b &amp;= \vec{M}(\vec{r})|_{surf}\times \hat{n} = \begin{cases}
0, &amp; \text{at top/bottom with }\hat{n} = \hat{e}_z\\
M\hat{e}_\phi &amp; \text{at sides with }\hat{n} = \hat{e}_r
\end{cases}
\end{align*}\]

<p>With this we have the graph on the right, for currents going around the cylinder. In this case, we know that $\vec{B}=B_z\hat{e}_z$, which makes the computation straightforward.</p>

<p>Then we can easily compute $\vec{B}$ given this current by drawing ampere loop:</p>

\[\oint \vec{B}\cdot d\vec{l} = \mu_0 I_{enc}\]

<p>Knowing that $\vec{B}_{outer}=\vec{0}$ from a solenoid, we have:</p>

\[B_z(r)L - 0 = \mu_0 L K_b = \mu_0LM\]

<p>Hence we obtain</p>

\[\vec{B}(\vec{r}) = \begin{cases}
\mu_0 M \hat{e}_z, &amp; r &lt; a\\
0, &amp; r &gt; a
\end{cases}\]

<p>which makes sense by right hand rule.</p>

<hr />

<p><em>Calculate field using $\vec{H}$ from given $\vec{M}$</em>:</p>

<p>Consider given that $\vec{M} = kr^2 \hat{e}_{\phi}$ inside a cylinder</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Setup</th>
      <th style="text-align: center">Ampere Loop</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230130211413434.png" alt="image-20230130211413434" style="zoom:67%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230130211426797.png" alt="image-20230130211426797" style="zoom: 67%;" /></td>
    </tr>
  </tbody>
</table>

<p>Then we first know that the field $\vec{B},\vec{H}$ would therefore also be in $\hat{e}_{\phi}$ direction (do not confuse $\vec{M}$ with bound currents here). Hence drawing a Ampere loop inside:</p>

\[\oint \vec{H}\cdot d\vec{l} = 2\pi r H_\phi(r)= I_{free_{enc}} = 0\]

<p>Hence we easily get $\vec{H}=0$ everywhere. Finally using $\vec{H}=\frac{1}{\mu_0}\vec{B}-\vec{M}$ we get back $\vec{B}$ field by:</p>

\[\vec{B} = \begin{cases}
\mu_0 kr^2 \hat{e}_\phi, &amp; r &lt; a\\
0, &amp; r &gt; a
\end{cases}\]

<p>since we know $\vec{M}$ as they are given.</p>

<ul>
  <li>an exercise of this would be to compute using bound currents and arrive at the same solution here.</li>
</ul>

<hr />

<p><em>When to use $\vec{H}$</em></p>

<p>In general, we can do ampere loops with $\vec{B}$ if we are sure we know all contributions (e.g. from current and from $\vec{M}<em>{induced}$). But consider the case where you have a <strong>magnetizable cylinder</strong> with some external currents $\vec{J}</em>{free} = I/(\pi R^2)\hat{e}_z$ following through</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20220503013832964.png" alt="image-20220503013832964" style="zoom:67%;" /></p>

<p>The finding $\vec{B}$ naively using the loop above would give wrong result:</p>

\[2\pi B_\phi(r) = \mu_0 I \pi \left( \frac{r}{R}\right)^2\]

<p>but then you have ignored $\vec{M}_{induced}$ which could cause other components in $\vec{B}$. Therefore, the correct way is to consider $\vec{H}$:</p>

\[2\pi H_\phi(r) = I \pi \left( \frac{r}{R}\right)^2\]

<p>then using $\vec{H}=\frac{1}{\mu_0}\vec{B}-\vec{M}$ we get $\vec{B}$ (assuming $\vec{M}$ is linear)</p>

<h1 id="chapter-7-electrodynamics">Chapter 7 Electrodynamics</h1>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Ohm’s Law</td>
      <td>$\vec{J}=\sigma \vec{E} = nq\vec{v}$</td>
      <td>when you here you have a conductor, this applies</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{J}=\sigma \vec{f}=\sigma(\vec{E}+\vec{v}\times \vec{B})$</td>
      <td>how the above comes about = charges move given the force $\gets$ $\vec{B}$ is generally ignored</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>consistent with perfect conductor $\vec{E}_{meat}=0$, which refers to steady state position</td>
    </tr>
    <tr>
      <td>Mean free path $\lambda$</td>
      <td>$\bar{v} = \frac{1}{2}at = {a \lambda}/{2v_{thermo}}$</td>
      <td>why is current $\propto \vec{E}$ consistent with $\vec{F}=m\vec{a}\propto \vec{E}$? Because electrons zig-zags in material</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>hence what mattered is their average velocity $\propto \vec{E}$</td>
    </tr>
    <tr>
      <td>Resistance (easy)</td>
      <td>$R=\frac{l}{A\sigma}=\rho\frac{l}{A}$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230301002643207.png" alt="image-20230301002643207" style="zoom:33%;" /></td>
      <td>derived from $\vec{J}=I/A=\sigma \vec{E}$ in wire, then since $\vec{E}l=V$, you get $I(A/l)=\sigma V$</td>
    </tr>
    <tr>
      <td>EMF</td>
      <td>$\varepsilon = \oint {\vec{F}_{source}}/{q}\cdot dl$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230301003229532.png" alt="image-20230301003229532" style="zoom:33%;" /></td>
      <td>fundamentally comes from why current is uniform: there are two forces acting on the electrons: $F_{total}=F_{ext}+ qE$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>then if we consider the <em>net effect over the entire loop</em> $\oint \vec{E}\cdot d\vec{l}=0$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>an example of $F_{ext}$ could be battery providing chemical power/”force”</td>
    </tr>
    <tr>
      <td>Motional EMF</td>
      <td>$\varepsilon = -d\Phi / dt$</td>
      <td>insight from below. Same physics as Lorentz force</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\varepsilon = \oint (qvB/q) \ dl=vBl$</td>
      <td>because magnetic force $q\vec{v}\times \vec{B}$ contributes to $F_{total}$, but integral over a loop is non-zero</td>
    </tr>
    <tr>
      <td>Induced Electric Field/Faraday’s Law</td>
      <td>$\nabla \times \vec{E} = -\partial \vec{B} / dt$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230301004446864.png" alt="image-20230301004446864" /></td>
      <td>all three methods create moving charges = current, but only the first one is due to magnetic force (Lorentz)</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>In the second and third, charges are static but we know they still moved $\gets$ there is an <em>induced electric field</em></td>
    </tr>
    <tr>
      <td> </td>
      <td>$-d\Phi /dt = \oint \vec{E}\cdot d\vec{l}=\varepsilon$ (by definition)</td>
      <td>changing magnetic field <em>induce electric field $\vec{E}$</em></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>from this $\varepsilon$ you can find the induced current</td>
    </tr>
    <tr>
      <td>Lenz’ Law</td>
      <td>nature abhors change in flux</td>
      <td>used to determine the direction of induced current from Faraday’s law</td>
    </tr>
    <tr>
      <td>Mutual Inductance</td>
      <td>$\Phi_1 = M_{12}I_2$</td>
      <td>$M_{12}$ would be the coefficient for the $\vec{B}_{21}$ field produced (from 2 on 1) as a function of $I_2$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$M_{12}=M_{21}$</td>
      <td>purely geometric, <mark>independent of current</mark></td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230301010355036.png" alt="image-20230301010355036" style="zoom:33%;" /></td>
      <td>an example would be realizing $\Phi_1$ for the inner loop is just some geometric factor $\times I_2$. (recall that $B=\mu_0 n I$ for solenoid)</td>
    </tr>
    <tr>
      <td>Self Inductance</td>
      <td>$\Phi = LI$</td>
      <td>because its own current creates magnetic field</td>
    </tr>
    <tr>
      <td>Inductance</td>
      <td>$\Phi_1 = L_1 I_1 +M_{12}I_2$</td>
      <td>but in general we assume $I_2 » I_1$</td>
    </tr>
    <tr>
      <td>Back EMF</td>
      <td>$\varepsilon_{back} = -L dI/dt$</td>
      <td>derived from $\Phi=LI$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>therefore, $L$ is like <mark>inertia mass</mark>: the higher it is, harder for current to move/start moving</td>
    </tr>
    <tr>
      <td>Energy in circuit with $L$</td>
      <td>$U=(1/2)L I^2$</td>
      <td>derived from $W_q = -\varepsilon_{back}q$ which is the work done needed to push charges one loop when I tuned on the circuit</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>then take $/dt$ on both sides, and integrate get $\int dU = L \int IdI$</td>
    </tr>
    <tr>
      <td>Energy stored in magnetic field</td>
      <td>$U_B = (1/2\mu) \int_{\text{all space}} \vert B\vert ^2 dV$</td>
      <td>derived from the above, and using $LI = \Phi =  \int \vec{B}\cdot d\vec{A}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>consistent with the above. Hence can also be used to find $L$.</td>
    </tr>
    <tr>
      <td>Maxwell’s Equation</td>
      <td><mark>replacing the below</mark> to have $\nabla \times \vec{B}=\mu_0 \vec{J} +\mu_0 \epsilon_0 \frac{\partial \vec{E}}{\partial t}$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230301013726090.png" alt="image-20230301013726090" /></td>
      <td>realizing this form before is inconsistent if you test $\nabla \cdot (\nabla \times \vec{B})$ in case of <em>electrodynamics</em>, i.e. $d\rho /dt \neq 0$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>now, this means changing $\vec{B}$ will change $\vec{E}$, and <strong>also vice versa</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>essentially, these equations tells you how <mark>charges/currents produce fields</mark>.</td>
    </tr>
    <tr>
      <td>Change in polarization $\vec{P}$ cause new current</td>
      <td>$\frac{\partial \vec{P}}{dt}=\vec{J}_p$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230301112055421.png" alt="image-20230301112055421" style="zoom: 50%;" /></td>
      <td>if $\vec{P}$ increased, then it means we also have changed $\sigma_b$: $dI = \frac{\partial \sigma_b}{dt}dA$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>since $\sigma_b = \vec{P}\cdot \hat{n}$, we get $dI/da = \partial \vec{P}/dt$</td>
    </tr>
    <tr>
      <td>Current and Charge in material</td>
      <td>$\rho_{total} = \rho_{free} + \rho_b = \rho_{free} - \nabla\cdot\vec{P}$</td>
      <td>since we can only control free charge, we want to express field <em>only as a function of free charge</em></td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{J}<em>{total} = \vec{J}</em>{free} + \vec{J}<em>b + \vec{J}_p = \vec{J}</em>{free}+\nabla\times \vec{M} + \frac{\partial \vec{P}}{\partial t}$</td>
      <td>then we just plug those in Maxwell’s equation, which holds for $\vec{E}<em>{total}$ and $\vec{B}</em>{total}$</td>
    </tr>
    <tr>
      <td>Maxwell’s Equation in <strong>Material</strong></td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230301112719153.png" alt="image-20230301112719153" /></td>
      <td>why is there a difference? Inside material we need to also consider effect from polarization $\vec{P}$ and magnetization $\vec{M}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>$\vec{D}=\epsilon_0\vec{E}+\vec{P}$<br />$\vec{H}=\frac{1}{\mu_0}\vec{B}-\vec{M}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>compared to the one in vacuum, there is an <em>extra</em> term $\partial D / \partial t\equiv \vec{J}_D$ named to be displacement current</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>e.g. inside a <strong>conducting material</strong>, you will have $\vec{J}_{f}=\sigma\vec{E}$ free charges moving and another $\vec{J}_D=\partial \vec{D}/dt$ if there is a change in field.</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>summarizes the fields to <em>include contribution from polarization and magnetization</em>, but as a function of <em>free charges and current</em></td>
    </tr>
    <tr>
      <td>linear material</td>
      <td>$\vec{D}=\epsilon \vec{E}$; $\vec{H} = \frac{1}{\mu}\vec{B}$</td>
      <td>often used to simplify Maxwell’s equations in material to get only E and B</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>if you insert this into Maxwell’s equation in material and use $\mu \to \mu_0, \epsilon\to \epsilon_0$, you <mark>get back the equation in vaccum</mark>!</td>
    </tr>
    <tr>
      <td>Integral form of Maxwell’s Equations</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304000201785.png" alt="image-20230304000201785" /></td>
      <td>can be used to calculate fields</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>also for later chapters, essentially determines the <strong>boundary conditions</strong> when solving equations</td>
    </tr>
    <tr>
      <td>Boundary Conditions</td>
      <td>$D^\perp_1 - D^\perp_2 = \sigma_{free}$<br />$B^\perp_1 - B^\perp_2 = 0$</td>
      <td>derived using the geometry below</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304000717046.png" alt="image-20230304000717046" style="zoom:33%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{E}^\parallel_1 - \vec{E}^\parallel_2 = 0$<br />$\vec{H}^\parallel_1 - \vec{H}^\parallel_2 = \vec{K}_{free}\times \hat{n}$</td>
      <td>derived using the geometry below.</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304000742426.png" alt="image-20230304000742426" style="zoom: 33%;" /></td>
      <td>$\vec{K}<em>{free}$ comes from the possibility $I</em>{f_{enc}}\neq0$, and $\times \hat{n}$ is due to the direction requirement that $I_{f_{enc}} = \vec{K}_f \cdot (\hat{n}\times \vec{l})=(\vec{K}_f \times \hat{n})\cdot \vec{l}$</td>
    </tr>
    <tr>
      <td>Boundary Conditions for Linear Media</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304001455829.png" alt="image-20230304001455829" /></td>
      <td>simply when $\vec{D}=\epsilon \vec{E}$; $\vec{H} = \frac{1}{\mu}\vec{B}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>used quite often as we almost always have a linear media and this form is <strong>only in $\vec{E}$ and $\vec{B}$</strong></td>
    </tr>
  </tbody>
</table>

<p><em>Connection between electrostatics, magnetostatics, induced field:</em></p>

<table>
  <thead>
    <tr>
      <th>Electrostatics</th>
      <th>Magnetostatics</th>
      <th>Faraday’s Induced E field</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$\nabla \cdot \vec{E}=0$</td>
      <td>$\nabla \cdot \vec{B}=0$</td>
      <td>$\nabla \cdot \vec{E}=0$</td>
    </tr>
    <tr>
      <td>$\nabla \times \vec{E}=0$</td>
      <td>$\nabla \times \vec{B}=\mu_0 \vec{J}$</td>
      <td>$\nabla \times \vec{E} = -\partial \vec{B} / dt$</td>
    </tr>
    <tr>
      <td>$\oint \vec{E}\cdot d\vec{l}=0$</td>
      <td>$\oint \vec{B}\cdot d\vec{l}=\mu_{0} I_{enc}$</td>
      <td>$\oint \vec{E}\cdot d\vec{l}=-d\Phi / dt$</td>
    </tr>
  </tbody>
</table>

<hr />

<p><em>Transformer</em> and using Inductance.</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230301011348391.png" alt="image-20230301011348391" style="zoom:33%;" /></p>

<p>Consider the task is to find out (a) show that $V_1/V_2 = N_1/N_2$, (b) that $M^2=L_1L_2$, and (c) the differential equation to solve for $I_1(t),I_2(t)$</p>

<ul>
  <li>
    <p>let the magnetic flux for a single turn be $\Phi_0 = \vert \vec{B}\vert A$. Then we get</p>

\[\varepsilon_1 = N_1 \frac{d\Phi_0}{dt},\quad \varepsilon_2 = N_2 \frac{d\Phi_0}{dt}\]

    <p>then just divide</p>
  </li>
  <li>
    <p>We know that also</p>

\[\Phi_1 = L_1I_1 + M_{12}I_2 = N_1 \Phi_0\\
\Phi_2 = L_2I_2 + M_{21}I_1 = N_2 \Phi_0\]

    <p>then eliminating $\Phi_0$, and find</p>

\[\frac{L_1}{N_1}I_1 + \frac{M_{12}}{N_1}I_2 = \frac{L_2}{N_2}I_1 + \frac{M_{21}}{N_2}I_1\]

    <p>but <mark>as $M$ is purely geometric</mark>, this should hold even if $I_1=0$ and when $I_2=0$. From which you can show that $M_{12}M_{21}=L_1L_2$</p>
  </li>
  <li>
    <p>Let there be an external power giving $V_1\cos(\omega t)$ at $\varepsilon_1$. Then for this to hold, we must have:</p>

\[\varepsilon_1 = -\frac{d\Phi_1}{dt} = -(L_1\dot{I_1} + M_{12}\dot{I}_2) = -V_1 \cos(\omega t)\]

    <p>so basically ODE with $dI/dt$ but coupled</p>
  </li>
</ul>

<hr />

<p><em>How do you find inductance $L$</em>?</p>

<p>One trick is to realize that</p>

\[\Phi = LI = \int \vec{B}\cdot d\vec{A}\]

<p>then you just need to massage the RHS to have $(\text{something})\cdot I$.</p>

<p>Another trick is to use energy. Since energy stored of the circuit = energy of the fields, e.g. for a solenoid</p>

\[U = \frac{1}{2\mu_0}\int |B|^2 dV = \frac{1}{2}LI^2\]

<p>and there are no electric fields as wires are charge neutral.</p>

<hr />

<p><em>Using Maxwell’s Fix on Ampere’s Law</em></p>

<p>Consider finding $\int BdA$ given this Amperian loop.</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230301110149680.png" alt="image-20230301110149680" style="zoom: 50%;" /></p>

<p>From $\nabla \times \vec{B}=\mu_0 \vec{J} +\mu_0 \epsilon_0 \frac{\partial \vec{E}}{\partial t}$, this means</p>

<ol>
  <li>
    <p>using the circular disk are:</p>

\[\oint \vec{B}\cdot d\vec{l} = \mu_0 I_{enc} = \mu_0 I\]
  </li>
  <li>
    <p>if we use the version $\nabla \times \vec{B}=\mu_0 \vec{J}$, then we will get $0$. But:</p>

\[\oint \vec{B}\cdot d\vec{l} = \mu_0 I_{enc} + \mu_0 \epsilon_0 \int_S \frac{\partial \vec{E}}{\partial t}\cdot d\vec{A}\]

    <p>since there is no $I_{enc}=0$, but the electric field within the gap is changing as $\vec{E}(t)=\sigma(t)/\epsilon_0$:</p>

\[\oint \vec{B}\cdot d\vec{l} = \mu_0 \epsilon_0 \int_S \frac{\partial }{\partial t}\frac{Q(t)}{\epsilon_0 A}\cdot d\vec{A}\]

    <p>since $dQ/dt=I$, we recover the same expression as 1.</p>
  </li>
</ol>

<h1 id="chapter-8-conservation-laws">Chapter 8 Conservation Laws</h1>

<p>Basically <strong>how we get energy and momentum from fields themselves</strong> = found that in order for conservation of energy/momentum to work, <em>we need to attach energy and momentum to fields</em>. How do we know things <em>are conserved</em>?</p>

<ul>
  <li>if energy $U$ is conserved, then $dU/dt=0$</li>
  <li>if momentum $\vec{p}$ is conserved, then $d\vec{p}/dt = 0$</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Work Energy Theorem in Electrodynamics</td>
      <td>$\frac{dW}{dt}=-\frac{\partial}{\partial t}\int_{V}\underbrace{\left[ \frac{1}{2}\epsilon_0 E^2 + \frac{1}{2\mu_0}B^2\right]}<em>{u</em>{EM}}dV - \int_{\partial V}\underbrace{\frac{1}{\mu_0}(\vec{E}\times \vec{B})}_{\vec{S}}\cdot d\vec{a}$</td>
      <td>$dW$ here represent work done <strong>by EM field</strong> on <strong>charges</strong> in a volume $V$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>fundamentally, think about how to make charges move = $F=q(\vec{E}+\vec{v}\times \vec{B})$, when find $dW/dt$ in terms of fields.</td>
    </tr>
    <tr>
      <td> </td>
      <td>$u_{EM} = \frac{1}{2}(\epsilon_0 E^2 + \frac{1}{\mu_0}B^2)$</td>
      <td>$u_{EM}$ represent energy stored in the field in $V$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>$\vec{S}$ represent energy per unit area per time = energy flux going <strong>out</strong> of $V$ since $d\vec{a}$ points out</td>
    </tr>
    <tr>
      <td> </td>
      <td>$dW = \vec{F}\cdot d\vec{r} =q\vec{E}\cdot{\vec{v}}dt$, then $dW/dt = \int \vec{J}\cdot \vec{E}dV$ for a density of current</td>
      <td>derivation</td>
    </tr>
    <tr>
      <td>Poynting Vector</td>
      <td>$\vec{S}=\frac{1}{\mu_0}\vec{E}\times \vec{B}$</td>
      <td>energy flux, and also the <strong>direction of energy flowing</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td>$\frac{\partial }{\partial t}\int_V u dV = - \int_{\partial V}{\frac{1}{\mu_0}(\vec{E}\times \vec{B})}\cdot d\vec{a}$</td>
      <td>why? Consider energy is conserved, $dW/dt=0$. Then if LHS decreases, energy is flowing <strong>out</strong> and $\vec{S}$ is positive if $\vec{S}$ also points out</td>
    </tr>
    <tr>
      <td>Need for Maxwell’s Stress Tensor</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304014504261.png" alt="image-20230304014504261" style="zoom:33%;" /></td>
      <td>Consider the instantaneous fields produced causing those forces. Note that net force $\neq 0$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>so momentum is <em>naively not conserved</em> (need to take the fields into account)</td>
    </tr>
    <tr>
      <td>Property of 2D Tensor</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304020412812.png" alt="image-20230304020412812" style="zoom:33%;" /></td>
      <td>one way to visualize $\overleftrightarrow{T}$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{v}=\begin{bmatrix} v^1\v^2\v^3 \end{bmatrix}=v^i$</td>
      <td>upper index is like a vector component (e.g. $\vec{r} = \begin{bmatrix} x\y\z \end{bmatrix}$)</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>in our use, upper index often represents <strong>coordinate</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td>$w_i = [w_1, w_2, w_3]$</td>
      <td>lower index usually row vector, or for convenience</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>in our use, lower index often represents <strong>derivative of a coordinate</strong></td>
    </tr>
    <tr>
      <td>Einstein’s Summation Notation</td>
      <td>sum over repeated index</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$\left( \vec{a} \cdot \overleftrightarrow{T} \right)<em>j = \sum</em>{i}a_i T_{ij}$ = a vector</td>
      <td>basically we want the $j$-th vector after this dot product.</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>in the above visualization, $\vec{a}$ dots into $\overleftrightarrow{T}$ vertically</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\nabla \cdot \vec{T}^x = \partial_j T^{xj}$</td>
      <td>an example, so $\vec{T}^x$ is the horizontal vector</td>
    </tr>
    <tr>
      <td>Maxwell’s Stress Tensor</td>
      <td>$T^{ij}=\epsilon_0(E^iE^j - \frac{1}{2}\delta_{ij}E^2)+\frac{1}{\mu_0}(B^iB^j - \frac{1}{2}\delta_{ij}B^2)$</td>
      <td>so $T$ is a 2D tensor (matrix)</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{F}_{\text{EM on charges}} = \oint \overleftrightarrow{T}\cdot d\vec{a} - \mu_0 \epsilon_0 \frac{d}{dt}\int_V \vec{S}dV$</td>
      <td>explains why we need the stress tensor</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>in my practice, even though this is used more often then the differential form, it is <mark>better to start your thinking with the differential form</mark></td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304015205849.png" alt="image-20230304015205849" style="zoom:33%;" /></td>
      <td>derived from considering <strong>force acting on charges</strong> due to EM fields, so $\vec{F}=q(\vec{E}+ \vec{v}\times \vec{B})=\int_V (\rho \vec{E}+\vec{J}\times \vec{B})dV$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>$T_{ij}$ represents force acting in the i-th direction on surface oriented in $j$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{F}_{EM}=\oint \overleftrightarrow{T}\cdot d\vec{a}$</td>
      <td>why? if there is no change in fields $d\vec{S}/dt =0$. Then we have this</td>
    </tr>
    <tr>
      <td>Momentum of Fields (and conservation)</td>
      <td>$\frac{d}{dt}\vec{P}<em>{\text{mechanical}} = - \frac{d}{dt}\int_V \underbrace{\epsilon_0\mu_0\vec{S}}</em>{\vec{g}<em>{EM}}dV + \oint_S \underbrace{\overleftrightarrow{T}}</em>{\text{momentum flux}}\cdot d\vec{a}$</td>
      <td>re-written the same force formula from Maxwell’s Stress Tensor</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\frac{d\vec{g}<em>{mech}}{\partial t}=\vec{f}</em>{mech} = \nabla \cdot \overleftrightarrow{T} - \frac{\partial \vec{g}_{EM}}{\partial t}$</td>
      <td>differential form of the above</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\frac{d\vec{g}<em>{mech}^i}{\partial t}=\vec{f}</em>{mech}^i = \partial_jT^{ij} - \frac{\partial \vec{g}_{EM}^i}{\partial t}$</td>
      <td>equation for each component (e.g $i=x,y,z$)</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>the integral form is used more in practice, but this may be easier to remember and better to start with</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\frac{d}{dt}\int_V {\epsilon_0\mu_0\vec{S}}dV = \oint_S {\overleftrightarrow{T}}\cdot d\vec{a}$</td>
      <td>how do you interpret this? When there is no change in momentum of charges:</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{g}_{EM} = \mu_0 \epsilon_0 \vec{S}$</td>
      <td>therefore $\overleftrightarrow{T}$ represents momentum flux <strong>passing through</strong> an area; then naturally $\epsilon_0\mu_0\vec{S}$ is the <strong>momentum density inside</strong> volume $V$</td>
    </tr>
    <tr>
      <td>Angular momentum of Fields</td>
      <td>$\vec{l}<em>{EM} = \vec{r}\times \vec{g}</em>{EM}$</td>
      <td>since it has momentum, the the laws apply</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{L}_{EM} = \int_V \vec{l}dV$</td>
      <td>integral form, angular momentum in a volume</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>questions on this usually involve some charged body <em>starts spinning</em> after there is a change in E or B field (e.g. switched off). This can be explained using the $\vec{l}_{EM}$ in fields</td>
    </tr>
  </tbody>
</table>

<p><em>Example using Poynting Vector</em></p>

<p>Consider a current flowing down a wire. What is the power in this wire using Poynting vector? Hint: $P=$energy per unit time delivered</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304013033237.png" alt="image-20230304013033237" style="zoom:33%;" /></p>

<p>Well, if we know the $\vec{E}$ and $\vec{B}$ field <em>just on the boundary</em>, then</p>

\[\int \vec{S}\cdot d\vec{a} = \text{energy flowing out of }\mathcal{V}\]

<p>since since we know $\vec{E}=V/L$, $\vec{B}<em>{surf} = \mu_oI / 2\pi a \,\, \hat{r}</em>\phi$, we get:</p>

\[\vec{S}_{surf} = \frac{VI}{L 2\pi a}\ \text{inwards}\]

<p>therefore, energy flows inwards, with power:</p>

\[P = \int Sda = \frac{VI}{L2\pi a}2\pi a L = VI\]

<hr />

<p><em>A summary of work-energy and momentum equations</em></p>

<p>Perhaps the differential form is easier to remember:</p>

\[\begin{align*}
\text{work-energy conservation}\qquad &amp;\frac{dw_{mech}}{dt} = -\nabla \cdot \vec{S} - \frac{\partial u_{EM}}{dt}\\
\text{momentum conservation}\qquad &amp; \frac{dg_{mech}^x}{\partial t} = \nabla \cdot \overleftrightarrow{T}^x - \frac{\partial g_{em}^x}{dt}\\
&amp; \frac{dg_{mech}^y}{\partial t} = \nabla \cdot \overleftrightarrow{T}^y - \frac{\partial g_{em}^y}{dt}\\
&amp; \frac{dg_{mech}^z}{\partial t} = \nabla \cdot \overleftrightarrow{T}^z - \frac{\partial g_{em}^z}{dt}\\
\text{charge conservation}\qquad &amp;0 = \nabla \cdot \vec{J} + \frac{\partial \rho}{\partial t}
\end{align*}\]

<p>where note that</p>

<ul>
  <li>$w_{mech}$ is the work density, i.e. $W_{mech}=\int w_{mech}dV$</li>
  <li>each equation above <strong>returns a scalar</strong></li>
  <li>$\overleftrightarrow{T}^x$ would represent the first <strong>row</strong> of the stress tensor, so that $\nabla \cdot \overleftrightarrow{T}^x = \partial_i T^{xi}$</li>
</ul>

<blockquote>
  <p>The take away message here is that <strong>field itself has momentum and energy $u_{EM}$ and $g_{EM}$</strong></p>
</blockquote>

<hr />

<p><em>Example of using Stress Tensor</em>: Calculate the <strong>force</strong> acting on the upper hemisphere of a uniformly charged sphere:</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304151816115.png" alt="image-20230304151816115" style="zoom:50%;" /></p>

<p>Well, since this is about force, we can consider</p>

\[\vec{F}_{\text{EM on charges}} = \oint \overleftrightarrow{T}\cdot d\vec{a} - \mu_0 \epsilon_0 \frac{d}{dt}\int_V \vec{S}dV\]

<p>then this means the closed surface is bowl + disk. First since there is no time dependence, and since we know the net force <em>will be in $\hat{z}$</em>:</p>

\[\vec{F}_{\text{EM on charges}} = \oint \overleftrightarrow{T}\cdot d\vec{a} \quad\to\quad  {F}_{z} = \oint \overleftrightarrow{T}^z\cdot d\vec{a} = \oint T^{zi} da_i\]

<ul>
  <li>
    <p>force on bowl: the area vector is in spherical coordinate</p>

\[d\vec{a} = R^2 \sin(\theta)d\theta d\phi\ \hat{e}_r\]

    <p>and using the formula for $T^{ij}$:</p>

\[T^{ij}=\epsilon_0(E^iE^j - \frac{1}{2}\delta_{ij}E^2)+\frac{1}{\mu_0}(B^iB^j - \frac{1}{2}\delta_{ij}B^2)\]

    <p>since $B=0$, and you know that $\vec{E}$ on the surface is, again in spherical coordinate:</p>

\[\vec{E} = \frac{1}{4\pi \epsilon_0}\frac{Q}{R^2}\ \hat{e}_r,\quad \hat{e}_r=\sin\theta \cos\phi\hat{e}_x + \sin\theta \sin\phi\hat{e}_y + \cos\theta\hat{e}_z\]

    <p>then compute:</p>

\[T^{zi}da_i = T^{zx}da_x + T^{zy}da_y + T^{zz}da_z\]

    <p>and do the integral</p>
  </li>
  <li>
    <p>repeat for the disk, using the fact that field inside should go, in polar coordinate:</p>

\[\vec{E}_{disk}=\frac{1}{4\pi \epsilon_0}\frac{Qr}{R^3}\hat{r}\]

    <p>and</p>

\[d\vec{a} = -r drd\phi \hat{z}\]
  </li>
</ul>

<p>but you will see a trick if you <strong>start thinking with</strong> the local form</p>

\[\vec{f}_{mech} = \nabla \cdot \overleftrightarrow{T} - \frac{\partial \vec{g}_{EM}}{\partial t}\]

<p>so that, since <strong>outside the sphere there is no charge</strong>, $\vec{f}_{mech}=0$. Hence we can consider <strong>integrating over a different surface</strong></p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304153829185.png" alt="image-20230304153829185" style="zoom:33%;" /></p>

<p>where if we stretch this to be very big, $E\to 0$ at the bowl. Hence we <strong>only have the horizontal disk component to integrate</strong></p>

<ul>
  <li>
    <p>force on the outer disk (not touching the charge): in the radial direction</p>

\[\vec{E}_{outer} =\frac{1}{4\pi \epsilon_0}\frac{Q}{r^2}\hat{r}\]

    <p>with area for $F_z$</p>

\[d\vec{a} = -r drd\phi \hat{z}\]

    <p>this is much easier then to compute and integrate</p>

\[T^{zi}da_i = T^{zx}da_x + T^{zy}da_y + T^{zz}da_z = T^{zz}da_z\]
  </li>
  <li>
    <p>repeat for the inner disk, which is the same as our previous method</p>
  </li>
</ul>

<hr />

<p><em>Example of Conservation of Angular Momentum</em> (see example 8.4 on textbook) consider a very long solenoid with $n$ turns per length, and inside/outside of it are two cylindrical shell of length $l$ with radius $a,b$, charged with $Q,-Q$ respectively. When $I$ in the solenoid is <strong>switched off</strong> $I \to 0$, the two cylinders will start to <strong>spin</strong>. Physically why did this happen? Is angular momentum conserved?</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304155019677.png" alt="image-20230304155019677" style="zoom:33%;" /></p>

<p>The key mechanism is that there is a <em>change</em> in $B$ field as a result of switching off. Hence:</p>

<ul>
  <li>
    <p><strong>mechanism</strong>: there is a change in $B$, hence we get an induced electric field which would act on the charges</p>

\[\nabla \times \vec{E} = -\frac{\partial \vec{B}}{\partial t} \quad \to \quad \oint \vec{E}\cdot d\vec{l} = -\frac{\partial }{\partial t}\int \vec{B}\cdot  d\vec{A}\]

    <p>and since the current is changing, you will get something like:</p>

\[\vec{E}_{s&gt;R} = - \frac{1}{2}\mu_0n\frac{dI}{dt} \frac{R^2}{s}\ \hat{e}_\phi\\
\vec{E}_{s&lt;R} = - \frac{1}{2}\mu_0n\frac{dI}{dt} s\ \hat{e}_\phi\]

    <p>notice that this field is in the $\phi$ direction, hence the two charged cylinder will feel a torque</p>

\[\vec{N}_b = \vec{r}\times (-Q\vec{E})= \frac{1}{2}\mu_0n QR^2 \frac{dI}{dt} \ \hat{e}_z\]

    <p>then the angular momentum it has at the end is therefore, using $\vec{N}=d\vec{L}/dt$</p>

\[\vec{L}_{final}-0 = \int_0^t \frac{1}{2}\mu_0n QR^2 \frac{dI}{dt} dt\]

    <p>then do the same for $\vec{N}_a$ of the smaller cylinder.</p>
  </li>
  <li>
    <p><strong>conservation of angular momentum</strong>: you will see from above that $\vec{L}_a + \vec{L}_b$ in the end is not zero. So in the beginning there must be something that is spinning, the field:</p>

\[\vec{l}_{EM} = \vec{r}\times \vec{g}_{EM}\]

    <p>since the fields in the beginning is:</p>

\[\vec{E} = \frac{Q}{2\pi \epsilon_0 l} \frac{1}{s}, \quad a &lt; s &lt; b \\
\vec{B} = \mu_0 n I\ \hat{e}_z,\quad s&lt;R\]

    <p>therefore $\vec{g}_{EM}$ is only non-zero inside the solenoid $s &lt; R$. Hence</p>

\[\vec{g}_{EM} = - \frac{\mu_0 n I Q}{2\pi ls} \hat{e}_\phi\]

    <p>and since we only care about angular momentum in the z-direction:</p>

\[L_{EM}^z = \int_{\text{inside solenoid}} l_{EM}^z\ dV =  \int_{\text{inside solenoid}} (\vec{r} \times \vec{g}_{EM})_z \ dV\]

    <p>you will find this matches up with the angular momentum you found in part 1.</p>
  </li>
</ul>

<hr />

<p><strong>List of good questions:</strong></p>

<ul>
  <li>Problem 8.2: deal with Poynting vector</li>
  <li>Problem 8.7
    <ul>
      <li>(a),(b) also involves $da_{x},da_y$</li>
      <li>(c) = one way to interpret $T^{ij}$</li>
    </ul>
  </li>
</ul>

<h1 id="chapter-9-em-waves">Chapter 9 EM Waves</h1>

<p>Charges and current produce $E$ and $B$ field. The main idea is that in vacuum/material, <strong>field themselves need to obey wave equation</strong> if we were to also consider the <strong>time component</strong> of the field = propagate like waves.</p>

<ul>
  <li>
    <p>we will show that in many physical scenarios, solutions have to obey <strong>wave equation</strong>, e.g. in 1D</p>

\[\frac{\partial^2 y}{\partial x^2} - \frac{1}{v^2}\frac{\partial^2 y}{\partial t^2} = 0\]
  </li>
  <li>
    <p>one common solutions is sinusoidal (and you can do Fourier theorem with it to get other functions), and this chapter basically <strong>focus on sinusoidal solutions in complex notation</strong>, e.g.</p>

\[y(x,t)=\mathrm{RE}[\tilde{A}e^{i(kz-\omega t)} + \tilde{B}e^{i(-kz-\omega t)}]\]
  </li>
  <li>
    <p>therefore the <strong>physics</strong> lies in finding $\tilde{A},\tilde{B},k$ using <mark>boundary conditions</mark> derived from physical principles (e.g. $B^\perp_1 -B^{\perp}_2=0$)</p>
  </li>
</ul>

<h2 id="plane-waves-without-rho-and-vecj">Plane Waves without $\rho$ and $\vec{J}$</h2>

<ul>
  <li>Plane waves is a simple case of having the amplitudes being a constant in space, e.g. $\tilde{A}$</li>
  <li>without $\rho,\vec{J}$ means we are in vacuum for a good <em>insulator</em></li>
</ul>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Using Complex Notation</td>
      <td>$I(t) = \mathrm{RE}[\tilde{I}_0e^{i\omega t}]$</td>
      <td>if you know the solution of $I(t)$ is <strong>in the form of cosine/sine</strong>, then using this will <strong>almost always</strong> make math simpler</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\tilde I_0=a+ib = I_0e^{i\phi}$</td>
      <td>so that if $\tilde{I}_0$ is complex, this means we have <strong>phase shifts!</strong> $\omega t \to \omega t + \phi$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304165436626.png" alt="image-20230304165436626" style="zoom:33%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>this form is also the nicest if you want to take the real part in the end, which becomes just $I_0 \cos(\omega t + \phi)$</td>
    </tr>
    <tr>
      <td>Wave “Definition”</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304165920613.png" alt="image-20230304165920613" /></td>
      <td>a “fixed” shape traveling at some velocity $v$</td>
    </tr>
    <tr>
      <td> </td>
      <td>e.g. $y(x-vt)$, traveling to the right</td>
      <td>the fixed shape would be $y(x)$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>e.g. $y(x-vt) = Ae^{-b(x-vt)^2}$ is a valid wave</td>
    </tr>
    <tr>
      <td>Wave on String</td>
      <td>$\frac{\partial^2 y}{\partial x^2} - \frac{1}{T/\mu}\frac{\partial^2 y}{\partial t^2} = 0$</td>
      <td>so that solution is in the form of $y(x,t)=f(x-vt)+g(x+vt)$ for any function $f,g$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td><strong>as a result</strong>, $v^2 = T/\mu$ is the wave’s traveling speed</td>
    </tr>
    <tr>
      <td> </td>
      <td>$F_y = T\sin(\theta’)-T\sin(\theta) = (\mu\Delta z) \frac{\partial^2 y}{\partial t^2}$</td>
      <td>derivation, consider force acting on a small section $\Delta z$ of the string, and using $F_y=ma_y$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\tan(\theta(x)) = \frac{\partial y}{\partial x}\vert _x$</td>
      <td>then using small angle approx $\sin \approx \tan$, we obtain the wave equation</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304170338866.png" alt="image-20230304170338866" style="zoom:50%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td>Sinusoidal Wave</td>
      <td>$y(x,t)=A\cos[k(x - vt)+\delta]$</td>
      <td>for waves in physics, sinusoidal form for $f,g$ is considered mostly because (a) it works well with B.C. and (b) any function can be built from them = Fourier theorem</td>
    </tr>
    <tr>
      <td> </td>
      <td>$y(x,t)=\mathrm{RE}[\tilde{A}e^{i(kz-\omega t)}]$</td>
      <td>in complex form</td>
    </tr>
    <tr>
      <td> </td>
      <td>$g(x,t)=\mathrm{RE}[\tilde{B}e^{i(-kz-\omega t)}]$</td>
      <td>traveling to the left</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>hence $k$ <mark>indicates direction of propagation</mark></td>
    </tr>
    <tr>
      <td>Important quantities by definition</td>
      <td>$\lambda = 2\pi / k$</td>
      <td>by considering $x\to x+(2\pi/k)$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$kv=\omega$, and $\tilde{A}=Ae^{i\delta}$</td>
      <td><mark>wave/phase velocity $v$</mark>!</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304172127708.png" alt="image-20230304172127708" /></td>
      <td> </td>
    </tr>
    <tr>
      <td>start of physics stuff</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>B.C. simple reflection and transmission</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304173941953.png" alt="image-20230304173941953" /></td>
      <td>string extends to infinity at both ends, and given $\tilde{A}_I$, want to know $\tilde{A}_R,\tilde{A}_T$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>assume $\omega$ is the same on both string, hence $\omega=v_1k_1 = v_2k_2$ since velocity has to be different</td>
    </tr>
    <tr>
      <td> </td>
      <td>$y_&lt;=\tilde{A}_I e^{i(k_1x-\omega t)}+\tilde{A}_R e^{i(-k_1x-\omega t)}$</td>
      <td>waves at $x&lt;x_B$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$y_&gt; =\tilde{A}_T e^{i(k_2x-\omega t)}$</td>
      <td>waves at $x&gt;x_B$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$y(0<em>-, t)=y(0</em>+,t)$, $\frac{\partial y}{\partial x}(0<em>-,t)=\frac{\partial y}{\partial x}(0</em>+,t)$</td>
      <td>no B.C. but <mark>continuity constraints</mark>!</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\tilde{A}_R = \frac{k_1 - k_2}{k_1 + k_2}\tilde{A}_I$</td>
      <td>solve and find</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\tilde{A}_T = \frac{2k_1}{k_1 + k_2}\tilde{A}_I$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$\delta_I=\delta_T$, then if $\mu_1 &gt; \mu_2$, $\delta_R = \delta_I$. Otherwise $\delta_R = \delta_I + \pi$</td>
      <td>this has to be <mark>given</mark> by knowing that $\mu_2 » \mu_1$ gives a standing wave like solution.</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>In later questions/setups we will also be able to compute the phase shift $\delta$.</td>
    </tr>
    <tr>
      <td>Wave Equation for EM in vacuum</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304180459157.png" alt="image-20230304180459157" style="zoom:50%;" /></td>
      <td>derived from Maxwell’s eq assuming $\rho=\vec{J}=0$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>so $v^2= 1/\mu_0\epsilon_0=c^2$, so EM waves propagate at speed of light</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>notice that this is 3D wave equation. In reality, we will see that when <mark>assuming plane waves solution</mark>, $E,B$ will be <mark>transverse</mark> = this reduces to a 1D wave equation</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304181007050.png" alt="image-20230304181007050" style="zoom:33%;" /></td>
      <td>derivation of the above</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304181024088.png" alt="image-20230304181024088" style="zoom:33%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td>Monochromatic Plane Waves</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304181731013.png" alt="image-20230304181731013" style="zoom: 50%;" /></td>
      <td>assuming that the amplitude vector <strong>is constant</strong> in all space, i.e. wave looks like a plane</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>$\mathbf{\tilde{E}}_0$ means it is a <em>constant <strong>vector</strong> but is complex</em></td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304183205944.png" alt="image-20230304183205944" /></td>
      <td><mark>almost always the form to start with when solving plane waves question</mark></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>derived using the “Property of Plane Waves”</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304181630251.png" alt="image-20230304181630251" style="zoom: 25%;" /></td>
      <td>up and down is modulated by $e^{i(kz-\omega t)}$ term</td>
    </tr>
    <tr>
      <td>Property of Plane Waves</td>
      <td>$\tilde{E}_z=\tilde{B}_z = 0$</td>
      <td>because $\nabla \cdot \vec{E}=\nabla \cdot \vec{B}=0$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>so EM plane waves are <strong>transverse</strong> (w.r.t direction of propagation $z$)</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\mathbf{\tilde{B}}_0 = \frac{1}{c}\hat{z}\times \mathbf{\tilde{E}}_0$</td>
      <td>if $\hat{z}$ is the direction of propagation. So $\mathbf{B}$ is perpendicular to $\mathbf{E}$ and to $\hat{z}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>derived from $\nabla \times \mathbf = -\frac{\partial \mathbf}{\partial t}$</td>
    </tr>
    <tr>
      <td>Wave vector and polarization vector of Plane Waves</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304183620251.png" alt="image-20230304183620251" style="zoom:50%;" /></td>
      <td>$\hat{n}$ is the polarization vector, and $\vec{k}=k\hat{k}$ is the <mark>wave/propagation vector</mark></td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304181450411.png" alt="image-20230304181450411" /></td>
      <td>e.g. $\hat{k}=k\hat{z}$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304184252710.png" alt="image-20230304184252710" style="zoom:50%;" /></td>
      <td>when you want to know $\vec{E}(\vec{r})$ everywhere in space</td>
    </tr>
    <tr>
      <td>Visualization of Longitudinal Wave</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304182209963.png" alt="image-20230304182209963" /></td>
      <td>this will be useful when considering wave guides = EM waves are not longer purely transverse. But, they are always <strong>transverse w.r.t direction of energy propagation $\vec{S}$</strong></td>
    </tr>
    <tr>
      <td>Energy in EM Waves</td>
      <td>$\lang u_{EM}\rang = \frac{1}{4}(\epsilon_0 \mathbf{\tilde{E}}\mathbf{\tilde{E}}^* + \frac{1}{\mu}\mathbf{\tilde{B}}\mathbf{\tilde{B}}^*)$</td>
      <td>assumes $\mathbf{E}=\mathbf{\tilde{E}}(x,y,z)e^{i(kz-\omega t)}$ and $\mathbf{B}=\mathbf{\tilde{B}}(x,y,z)e^{i(kz-\omega t)}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>time average $\lang u_{EM} \rang = \frac{1}{T}\int_0^T u_{EM}\ dt$ ends up a $1/2$ in front due to $\int \cos^2 dt$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\lang \vec{S} \rang = \frac{1}{2}\mathrm{RE}(\mathbf{\tilde{E}}\times \mathbf{\tilde{B}}^*)\equiv I$</td>
      <td><strong>Intensity</strong> is fact the “average power (E/t) per unit area”!</td>
    </tr>
    <tr>
      <td> </td>
      <td>$u_{EM} = \frac{1}{2}(\epsilon_0 E^2 + \frac{1}{\mu_0}B^2)$</td>
      <td>both of the above are derived from the following</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{S}=\frac{1}{\mu_0}\vec{E}\times \vec{B}$</td>
      <td>previously derived only from Maxwell’s eq, so still holds<br />$E^2 =\vec{E}<em>{total}\cdot \vec{E}</em>{total}$<br />$B^2 =\vec{B}<em>{total}\cdot \vec{B}</em>{total}$</td>
    </tr>
    <tr>
      <td>Energy in Monochromatic Plane Waves</td>
      <td>$\lang u_{EM} \rang = \frac{1}{2}\epsilon_0 E_o^2$</td>
      <td>simpler case since we get $\mathbf{E}=\tilde{E}_0e^{i(kz-\omega t)}\hat{x}$ and $\mathbf{B}=(\tilde{E}_0/c)e^{i(kz-\omega t)}\hat{y}$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\lang \vec{S}_{EM}\rang = \frac{1}{2}c\epsilon_0 E_0^2 \hat{z}$</td>
      <td> </td>
    </tr>
    <tr>
      <td>EM Wave Equation in Matter</td>
      <td>$\nabla^2 \mathbf{E} - \epsilon\mu\frac{\partial^2 \mathbf{E}}{\partial t^2}=0, \nabla^2 \mathbf{B} - \epsilon\mu\frac{\partial^2 \mathbf{B}}{\partial t^2}=0$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304204811146.png" alt="image-20230304204811146" style="zoom: 50%;" /></td>
      <td>derived from realizing the difference between this set of Maxwell’s eq and the vacuum is just replacing $\epsilon_0\mu_0 \to \epsilon\mu$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$v^2 = 1/\epsilon\mu &lt; c^2$</td>
      <td>but now <strong>velocity</strong> is different</td>
    </tr>
    <tr>
      <td> </td>
      <td>$v\equiv c/n$</td>
      <td>$n$ is <mark>index of refraction</mark></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>other than the above (and the B.C.), things are the same (e.g. $v=\omega k$)</td>
    </tr>
    <tr>
      <td>B.C. for EM Wave in Matter</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304205332821.png" alt="image-20230304205332821" /></td>
      <td>B.C. when <strong>crossing from medium 1 to medium 2</strong>, assuming both are linear material</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>was the one from Maxwell Eq linear material in <a href="#Chapter 7 Electrodynamics">Chapter 7 Electrodynamics</a></td>
    </tr>
    <tr>
      <td>Setup for EM Wave in Matter + Oblique Incidence</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304211511742.png" alt="image-20230304211511742" /></td>
      <td>still plane waves, but $\mathbf{\tilde{E}}<em>{0_I} = \tilde{E}</em>{0<em>I} \hat{n}</em>{I}$ and we <mark>need to consider $\vec{r}$</mark></td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304211518571.png" alt="image-20230304211518571" style="zoom:50%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304211629030.png" alt="image-20230304211629030" style="zoom:50%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304211416722.png" alt="image-20230304211416722" style="zoom:50%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td>B.C. for EM Wave in Matter + Oblique Incidence</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304213207452.png" alt="image-20230304213207452" style="zoom:50%;" /></td>
      <td>derived from the B.C. in material + realizing <em>all</em> the exponential cancels out (see below)</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304211823199.png" alt="image-20230304211823199" style="zoom:50%;" /></td>
      <td>additional conclusion for the oblique case, derived by realizing the B.C. yields<img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304212820953.png" alt="image-20230304212820953" /></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>so imagine needing the below to hold for all $\vec{r}$ $A\cos(k_I\cdot \vec{r})+B\cos(k_R\cdot \vec{r})=C\cos(k_T\cdot \vec{r})$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304212103599.png" alt="image-20230304212103599" /></td>
      <td>hence at $z=0$ this has to be true for $\forall x,y$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$(k_I)_y=(k_R)_y=(k_T)_y$</td>
      <td>from letting $y=0$,</td>
    </tr>
    <tr>
      <td> </td>
      <td>$(k_I)_x=(k_R)_x=(k_T)_x$</td>
      <td>from letting $x=0$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304212035659.png" alt="image-20230304212035659" /></td>
      <td>derived then aligning $E_I$ into the x-z plane such that $(k_I)_y=0$. Then all other $(k_I)_y=(k_R)_y=(k_T)_y=0$, i.e. all are in x-z plane</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304212007096.png" alt="image-20230304212007096" /></td>
      <td>from $(k_I)_x=(k_R)_x$, and then realizing that $k_I = k_R$ since $\omega = kv$, both $v,\omega$ is the same for $k_I, k_R$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304212016744.png" alt="image-20230304212016744" /></td>
      <td>from $(k_I)_x=(k_T)_x$, and using $v=c/n$</td>
    </tr>
    <tr>
      <td>Solution for EM Wave in Matter + Oblique Incidence</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304213350101.png" alt="image-20230304213350101" style="zoom:50%;" /></td>
      <td>$\alpha= \cos\theta_T/\cos \theta_I$, $\beta = (\mu_1v_1)/(\mu_2v_2)$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304213423495.png" alt="image-20230304213423495" style="zoom:50%;" /></td>
      <td>derived from this and below + Snell’s law, which comes from the B.C., <em>assuming</em> $\vec{E},\vec{B}$ are also in the x-z plane (see below)</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304213427917.png" alt="image-20230304213427917" style="zoom:50%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230307200713584.png" alt="image-20230307200713584" style="zoom:50%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td>Brewster’s angle $\theta_B$</td>
      <td>$\theta_I$ such that there is <strong>no reflected wave</strong></td>
      <td>e.g. in the case above, when $\alpha=\beta$</td>
    </tr>
    <tr>
      <td>Total Internal Reflection</td>
      <td>$\theta_I$ such that there is <strong>no transmitted energy</strong></td>
      <td> </td>
    </tr>
    <tr>
      <td>Reflection and Transmission index</td>
      <td>$R=\frac{I_R}{I_I}, T=\frac{I_T}{I_I}$</td>
      <td>$I=\lang S\rang_z=c\epsilon_0 E_0^2$ for plane waves <strong>striking the area</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td>$R+T=1$</td>
      <td>basically the <strong>input energy = output energy</strong>, $I_I=I_R+I_T$</td>
    </tr>
  </tbody>
</table>

<p><em>Complex Notation in Circuits</em>: consider a given circuit as follows:</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304164428685.png" alt="image-20230304164428685" style="zoom:33%;" /></p>

<p>we want to know $I$ flowing in this circuit, if $V=V_0\cos(\omega t)$. We know that the differential equation for $V$ must be</p>

\[V_0\cos(\omega t) - L \frac{dI}{dt} - IR=0\]

<p>so $I$ will be sinusoidal in form, and relates to the driving frequency $\omega$. Hence we can consider $I(t)=\tilde{I}_0e^{i\omega t}$:</p>

\[V_0 e^{i\omega t} = L \frac{d}{dt}\tilde{I}_0e^{i\omega t} + R\tilde{I}_0e^{i\omega t}\]

<p>then solving you will find:</p>

\[\tilde{I}_0 = \frac{V_0}{i\omega L +R} = \frac{V_0}{\sqrt{\omega^2L^2 + R^2}e^{i\phi}} = = \frac{V_0}{\sqrt{\omega^2L^2 + R^2}}e^{-i\phi}\]

<p>note that from this step, we realize that:</p>

<ul>
  <li>having $L$ in circuit just means a <mark>resistance of $i\omega L$</mark></li>
  <li>having capacitance $C$ in circuit, as you will see later, just means a <mark>resistance of $i C/\omega$</mark>.</li>
  <li>with the above, you can solve circuits without touching differential equations at all, by just treating them as resistors.</li>
</ul>

<p>for $\tan(\phi)=\omega L/R$, by visualizing $a+ib$ in complex plane. Then you are essentially done since:</p>

\[I(t)= \mathrm{RE}[\tilde{I}_0e^{i\omega t}] =\frac{V_0}{\sqrt{\omega^2L^2 + R^2}}\cos(\omega t - \phi)\]

<hr />

<p><em>Standing Wave</em>: given a boundary condition that both ends of a wall has to be zero, e.g. $y(x,0)=A\sin (\pi x/L)$</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304172216985.png" alt="image-20230304172216985" style="zoom:33%;" /></p>

<p>and obviously since this is a string, it needs to satisfy the wave equation</p>

\[\frac{\partial^2 y}{\partial x^2} - \frac{1}{v^2}\frac{\partial^2 y}{\partial t^2} = 0\]

<p>then you should <strong>guess</strong> that the solution $y(x,t)=f(x-vt)+g(x+vt)$ is superposition to two waves:</p>

\[y(x,t) = \frac{A}{2}\left\{ \sin\left[\frac{\pi}{L}(x-vt)\right] +\sin\left[\frac{\pi}{L}(x+vt)\right] \right\}\]

<p>How does this work? Two oppositely traveling waves with <em>same frequency</em> forms standing waves = has <mark>fixed points</mark>!</p>

<table>
  <tbody>
    <tr>
      <td>![Visualizing RF Standing Waves</td>
      <td>Hackaday](https://hackaday.com/wp-content/uploads/2015/08/350px-standing_wave_2.gif)</td>
    </tr>
  </tbody>
</table>

<hr />

<p><em>EM Wave in Matter</em>: consider the simple example of reflection + transmission for <em>plane waves</em>. Find all amplitudes as a function of $\tilde{E}_I$</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230304210203014.png" alt="image-20230304210203014" style="zoom: 50%;" /></p>

<p>Since these are plane waves, we have</p>

\[\begin{align*}
\mathbf{E}_{I}(z,t)&amp;={\tilde{E}}_Ie^{i(k_1z-\omega t)}\hat{x}\\
\mathbf{E}_{R}(z,t)&amp;={\tilde{E}}_Re^{i(-k_1z-\omega t)}\hat{x}\\
\mathbf{E}_{T}(z,t)&amp;={\tilde{E}}_Te^{i(k_2z-\omega t)}\hat{x}
\end{align*}\]

<p>then the tricky part is realize the <strong>$\vec{B}_R$</strong> direction has to be consistent such that $\vec{S}=\frac{1}{\mu_0}\vec{E}\times \vec{B}$ gives $\vec{v}_R$:</p>

\[\begin{align*}
\mathbf{B}_{I}(z,t)&amp;=\frac{1}{v_1}{\tilde{E}}_Ie^{i(k_1z-\omega t)}\hat{y}\\
\mathbf{B}_{R}(z,t)&amp;=\frac{\textcolor{red}{-1}}{v_1}{\tilde{E}}_Re^{i(-k_1z-\omega t)}\hat{y}\\
\mathbf{B}_{T}(z,t)&amp;=\frac{1}{v_2}{\tilde{E}}_Te^{i(k_2z-\omega t)}\hat{y}
\end{align*}\]

<p>then just put them into the B.C. at $z=0$ you get</p>

\[\begin{align*}
\vec{E}^{\parallel}_1 - \vec{E}^{\parallel}_2 &amp;= 0 \implies \tilde{E}_I + \tilde{E}_R =\tilde{E}_T \\
\frac{1}{\mu_1}{B}^{\perp}_1 - \frac{1}{\mu_2}{B}^{\perp}_2 &amp;= 0 \implies \frac{1}{\mu_1v_1}\tilde{E}_I -\frac{1}{\mu_1v_1} \tilde{E}_R =\frac{1}{\mu_2v_2}\tilde{E}_T
\end{align*}\]

<p>then to solve $\tilde{E}_R, \tilde{E}_T$, you can realize that letting $k_i \gets \frac{1}{\mu_iv_i}$ gives you the same set of equations to solve for wave on a string.</p>

<h2 id="plane-waves-with-vecj">Plane Waves with $\vec{J}$</h2>

<p>Up to here, we have discussed solutions to wave equations derived</p>

<ul>
  <li><strong>assuming no charges/currents</strong>: now we will have <em>another term</em> in Maxwell’s eq, resulting in a <em>damping term</em> in wave equation (and that $\vec{B}$ is out of phase with $\vec{E}$). You will see this results in $k$ $\to$ $\tilde{k}=k+i\kappa$, so that waves are decaying/not propagating!</li>
  <li><strong>assuming wave $v$ (or rather $\epsilon$) is independent of $\omega$</strong> in material. Before we had $v^2=1/(\epsilon\mu)$ $\to$ you will see $v^2=1/(\tilde{\epsilon}(\omega)\mu)$. Hence this will also affect wave vector $k \to k(\omega)$. In this case, even in a <em>non-conducting material</em> we end up with <em>damping term in solution</em>!</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Maxwell’s Equation inside a conductor</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305003116097.png" alt="image-20230305003116097" style="zoom:50%;" /></td>
      <td>basically we have a $\rho_f$ and a $\vec{J}_{free}=\sigma\vec{E}$ inside conductor</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230301112719153.png" alt="image-20230301112719153" style="zoom:50%;" /></td>
      <td>derived from this using linear media</td>
    </tr>
    <tr>
      <td>Wave Equation used Inside Conductor</td>
      <td>$\nabla^2\mathbf{E} = \mu\epsilon \frac{\partial^2 \mathbf{E}}{\partial t^2}+\underbrace{\mu\sigma \frac{\partial \mathbf{E}}{\partial t}}_{\text{damping term}}$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$\nabla^2\mathbf{B} = \mu\epsilon \frac{\partial^2 \mathbf{B}}{\partial t^2}+\underbrace{\mu\sigma \frac{\partial \mathbf{B}}{\partial t}}_{\text{damping term}}$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305003353475.png" alt="image-20230305003353475" style="zoom: 50%;" /></td>
      <td>this is <em>technically</em> derived from this, i.e. assuming charges has disappeared to boundary</td>
    </tr>
    <tr>
      <td>Charge inside conductor</td>
      <td>$\rho_f(t) = \rho_f(0)e^{-t/\tau}$</td>
      <td>hence the $\rho_f$ term is ignored (only) when deriving the wave equation</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>derived from the continutiy equation $-\partial\rho_f / \partial t = \nabla \cdot \vec{J}_f$, then using $\vec{J}_f = \sigma \vec{E}$ and $\nabla \cdot \vec{D} = \rho_f$</td>
    </tr>
    <tr>
      <td>B.C. inside conductor</td>
      <td>$\epsilon_1E^{\perp}_1 - \epsilon_2E^{\perp}_2 = \sigma_f$, etc.</td>
      <td>derive from the Maxwell’s equation in material, with the presence of both $\rho_f$ and $\vec{J}_f$</td>
    </tr>
    <tr>
      <td>Solution for Wave in Conductor</td>
      <td>$\tilde{k}=k+i\kappa$</td>
      <td>found by plugging our usual solution $\mathbf{\tilde{E}}(z,t)=\tilde{E}_0e^{i(kz-\omega t)}\hat{x}$ into wave equation, and found that $k$ needs to be complex</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\mathbf{\tilde{E}}(z,t)=\tilde{E}_0e^{-\kappa z}e^{i(kz-\omega t)}\hat{x}$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$\mathbf{\tilde{B}}(z,t)=\tilde{B}_0e^{-\kappa z}e^{i(kz-\omega t)}\hat{y}=\frac{\tilde{k}}{\omega}\tilde{E}_0e^{-\kappa z}e^{i(kz-\omega t)}\hat{y}$</td>
      <td>notice the coefficient $\tilde{k}/\omega$ is complex, i.e. $\vec{B}$ is <mark>out of phase</mark> with $\vec{E}$. This is derived simply from $\nabla\times \vec{E} = -\partial \vec{B}/\partial t$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>phase difference of $\phi\gets$ converting $\tilde{k}/\omega =Ae^{i\phi}$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305004919734.png" alt="image-20230305004919734" style="zoom:33%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$d\equiv 1/\kappa$</td>
      <td><strong>skin depth</strong>, i.e. an indicator of how far wave can penetrate into conductor</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\alpha \equiv 2\kappa$</td>
      <td><strong>absorption coefficient</strong>, because intensity is proportional to $E^2$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\omega = kv$ holds for the real part of $\tilde{k}$</td>
      <td>because the propagation part is $e^{i(kz-\omega t)}$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305004856356.png" alt="image-20230305004856356" /></td>
      <td>if you need to know</td>
    </tr>
    <tr>
      <td>Modeling electron’s motion given a driving field</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305010538065.png" alt="image-20230305010538065" style="zoom:33%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$m\frac{d^2x}{dt^2}=\vec{F}<em>{electron}=\vec{F}</em>{E}+\vec{F}<em>{damping}+\vec{F}</em>{SHO}$</td>
      <td>where $\vec{F}<em>E = q\vec{E}</em>{ext}$, damping term $-m\gamma \frac{dx}{dt}$, and SHO force due to the <em>atomic attraction</em> for restoration $\vec{F}_{SHO}=-m\omega_0^2x$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305010958944.png" alt="image-20230305010958944" style="zoom:50%;" /></td>
      <td>the equation of motion</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>$\omega_0$ will be different for each electron config/also relevant to <mark>resonance</mark>!</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\tilde{x}(t)=\tilde{x}_0e^{-i\omega t}$ and $\tilde{x}=\frac{q/m}{\omega_0^2-\omega-i\gamma \omega}E_0$   is complex</td>
      <td>solution, by plugging in the steady state $\tilde{x}(t)=\tilde{x}_0e^{-i\omega t}$</td>
    </tr>
    <tr>
      <td>Modeling Polarization given a driving field</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305011452197.png" alt="image-20230305011452197" style="zoom:50%;" /></td>
      <td>notice that $E_0e^{-i\omega t}=\mathbf{\tilde{E}}$ that we supplied</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305011538023.png" alt="image-20230305011538023" style="zoom:50%;" /></td>
      <td>since $\mathbf{P}=N\tilde{p}$, and $N$ is number of molecules per volume</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>$\omega_j$ comes from $\omega_0$ being different for different electrons. $f_j$ is the number of electrons having the same $\omega_j$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\mathbf{\tilde{P}}=\epsilon_0\tilde{\chi}_E(\omega)\tilde{E}$</td>
      <td>rewrite the entire wierd term into $\chi_E$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\tilde{\epsilon}=\epsilon_0(1+\tilde{\chi}_E) = \epsilon_0\left[ 1+\frac{Nq^2}{m\epsilon_0}\sum_j \frac{f_j}{\omega_j^2 - \omega^2 - i \omega \gamma} \right]$</td>
      <td><mark>after all efforts, the net result is that $\epsilon$ becomes complex</mark> and is <mark>a function of $\omega$</mark></td>
    </tr>
    <tr>
      <td>Wave Equation after all these</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305012418254.png" alt="image-20230305012418254" style="zoom:50%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$\mathbf{\tilde{E}}(z,t)=\mathbf{\tilde{E}}_0e^{-\kappa z}e^{i(kz-\omega t)}$</td>
      <td>derived from plugging in $\mathbf{\tilde{E}}(z,t)=\mathbf{\tilde{E}}_0e^{i(kz-\omega t)}$ and realizing $\tilde{k} = \sqrt{\tilde{\epsilon}\mu_0}\omega=k+i\kappa$</td>
    </tr>
    <tr>
      <td>Resonance frequency</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305012926612.png" alt="image-20230305012926612" style="zoom: 33%;" /></td>
      <td>so that at $\omega = \omega_j$, absorption peaks = <mark>amplitudes of electron oscillation becomes huge</mark></td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305013027929.png" alt="image-20230305013027929" style="zoom: 40%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td>The above is a dispersive medium</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305013243995.png" alt="image-20230305013243995" style="zoom:40%;" /></td>
      <td>$n\to n(\omega)$ <mark>index of refraction depends on input wave frequency</mark></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>derived from $\omega = kv,v=c/n$</td>
    </tr>
  </tbody>
</table>

<h2 id="wave-in-wave-guide">Wave in Wave Guide</h2>

<p>No longer plane wave. Now we consider the form</p>

\[\mathbf{E}=\textcolor{red}{\tilde{\mathbf{E}}_0(x,y)}e^{i(kz-\omega t)}\]

<p>which has two changes:</p>

<ul>
  <li>
    <p>our old boundary conditions + now the amplitude is a function of $(x,y)$ results in $E$ and $B$ <strong>cannot both be perpendicular to $\hat{z}$</strong></p>
  </li>
  <li>
    <p>amplitude as a result also has terms:</p>

\[\mathbf{\tilde{E}}_0(x,y) = \tilde{E}_x(x,y)\hat{x} +  \tilde{E}_y(x,y)\hat{y} +  \tilde{E}_z(x,y)\hat{z}\]
  </li>
</ul>

<p>The net result is that the amplitudes/solution becomes more complicated, e.g. TE waves:</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305014934219.png" alt="image-20230305014934219" style="zoom:33%;" /></p>

<p>but notice that $\vec{E}$ and $\vec{B}$ still perpendicular to each other</p>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Setting up Wave Equation <mark>inside Wave Guides</mark></td>
      <td>$\mathbf{E}(x,y,z,t)=\textcolor{red}{\tilde{\mathbf{E}}_0(x,y)}e^{i(kz-\omega t)}$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$\mathbf{B}(x,y,z,t)=\textcolor{red}{\tilde{\mathbf{B}}_0(x,y)}e^{i(kz-\omega t)}$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305015419912.png" alt="image-20230305015419912" style="zoom:33%;" /></td>
      <td>why this change? assuming the <mark>wave guide is a perfect conductor</mark>.</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305015540452.png" alt="image-20230305015540452" style="zoom:40%;" /></td>
      <td>then this B.C. means we cannot have plane waves (e.g. try to draw it with a rectangular wave guide)</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>why this B.C (on the inner surface)? Because $E_{meat}=B_{meat}=0$ for conductor. Then use the usual B.C. from Maxwell’s eq you will get this.</td>
    </tr>
    <tr>
      <td>Generic Solution for Wave in Wave Guide</td>
      <td>$\mathbf{\tilde{E}}_0(x,y) = \tilde{E}_x(x,y)\hat{x} +  \tilde{E}_y(x,y)\hat{y} +  \tilde{E}_z(x,y)\hat{z}$</td>
      <td>our task is <em>just to solve the coefficients</em></td>
    </tr>
    <tr>
      <td> </td>
      <td>$\mathbf{\tilde{B}}_0(x,y) = \tilde{B}_x(x,y)\hat{x} +  \tilde{B}_y(x,y)\hat{y} +  \tilde{B}_z(x,y)\hat{z}$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305015732193.png" alt="image-20230305015732193" style="zoom:50%;" /></td>
      <td>by plugging the above into Maxwell’s equation in vacuum. Notice that <mark>all are a function $E_z,B_z$</mark></td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305015937140.png" alt="image-20230305015937140" /></td>
      <td>so our only task becomes to solve $E_z,B_z$ from this + specific B.C. in a problem</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>the above is again found in Maxwell Eq.</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>so <strong>why not transverse wave</strong> = $E_z=B_z=0$? Then we would get both the $\nabla \cdot E=0,\nabla \times E=0$, hence $E=-\nabla \phi$ inside. <br />But a conductor has $\vec{E}^{\parallel}<em>{inner}=0$ since $\vec{E}</em>{meat}=0$. Therefore on the surface $\phi=$constant. <br />Then since this satisfies Laplace equation = both mean and max on surface, $\phi$=constant inside as well. Hence $E=0$ entirely.</td>
    </tr>
    <tr>
      <td>$TE_{MN}$ waves in Rectangular Wave Guide</td>
      <td>$B_z=B_0\cos(k_xx)\cos(k_yy)=B_0\cos(m\pi\frac{x}{a})\cos(n\pi\frac{y}{b})$</td>
      <td>TE because $E_z=0$ hence $E$ is $T$ransverse</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>once $E_z=0$ and $B_z$ is solved, we can solve everything else</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>$m=0,1,2,3…$, $n=0,1,2,3,…$, but at least one non-zero so that the solution is not trivial</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305020803974.png" alt="image-20230305020803974" style="zoom:50%;" /></td>
      <td>derived from using $B_z(x,y)=X(x)Y(y)$ and plugging into the  eq for $B_z$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305021240165.png" alt="image-20230305021240165" style="zoom:50%;" /></td>
      <td>since the first term is only a function of $x$, second only a function of $y$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305021309163.png" alt="image-20230305021309163" style="zoom:50%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305020749636.png" alt="image-20230305020749636" style="zoom:50%;" /></td>
      <td>B.C. is in this case is<br />$B_y(y=0)=B_y(y=b)=0$ and $B_x(x=0)=B_x(x=a)=0$</td>
    </tr>
    <tr>
      <td>Properties of $TE_{MN}$ wave above</td>
      <td>$k^2 = \frac{\omega^2}{c^2}\left[ 1-\frac{\omega_{mn}^2}{\omega^2} \right]$, so $\omega_{mn}\equiv \omega_{cutoff}$</td>
      <td>since if $\omega_{cutoff}&gt;\omega$, then $k$ becomes complex and your wave decays in $\hat{z}$/does not propagate</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305021905239.png" alt="image-20230305021905239" style="zoom: 33%;" /></td>
      <td>derived from the equation of $k^2$ from the previous concept</td>
    </tr>
    <tr>
      <td> </td>
      <td>$v=\omega/k = c/\sqrt{1-(\omega/\omega_{mn})^2}$</td>
      <td>this is $v&gt;c$? Because $v=v_{phase}$. The actual $v_g$ of <strong>energy propagation</strong> has $v_g &lt;c$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230305022049463.png" alt="image-20230305022049463" style="zoom:50%;" /></td>
      <td>one way to derive the above is $v_g=c\cos(\theta)$, and $v_{phase}=c/\cos\theta$, with knowing $\cos\theta = k/\vert \vec{k}’\vert$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>and $\vec{k}^\prime=k_x\hat{x}+k_y\hat{y}+k\hat{z}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>shows what does $k_x,k_y$ represent!</td>
    </tr>
    <tr>
      <td>Group Velocity as velocity of energy transfer</td>
      <td>$v_g \equiv d\omega /dk$</td>
      <td>in principle represents velocity of a <strong>wave packet</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td>$v_g = \frac{\int \lang S\rang_z\cdot d\vec{a} }{\int \lang u\rang_z da}=\frac{\text{energy/time}}{\text{energy/length}}$</td>
      <td>an intuitive “verification” using poynting vector/energy density</td>
    </tr>
    <tr>
      <td> </td>
      <td>$Ae^{i(k+\Delta k/2)z-(\omega + \Delta \omega /2)t}+Ae^{i(k-\Delta k/2)z-(\omega - \Delta \omega /2)t}$<br />$=Ae^{i(kz-\omega t)}\cos(\frac{\Delta k}{2}z-\frac{\Delta \omega}{2}t)$<br />$=Ae^{i(kz-\omega t)}\cos (k(z-v_gt))$</td>
      <td>where it actually comes from = superposing two waves in a specific wave forms a <strong>wave packet traveling at $v_g$</strong> (see visualization in the examples section)</td>
    </tr>
    <tr>
      <td> </td>
      <td>$v_g = \Delta \omega /\Delta k$</td>
      <td>in this example</td>
    </tr>
  </tbody>
</table>

<p><em>Group Velocity v.s. Phase Velocity</em>:</p>

<p>In this example, $v_g&gt;v_{phase}$, but in general, most physical systems will have $v_g &lt; v_{phase}$</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/Recording 2023-03-05 at 01.40.38.gif" style="zoom:33%;" /></p>

<hr />

<p><strong>List of good questions</strong></p>

<ul>
  <li>Problem 9.7
    <ul>
      <li>(b)(c) dealt with understanding more the B.C. and wave equation</li>
      <li>(d) deals with understanding the complex amplitude $\tilde{A}$</li>
    </ul>
  </li>
  <li>
    <p>Problem 9.17: solid question in understanding B.C. and $\vec{E}$ and $\vec{B}$ with directional $\vec{k}\cdot \vec{r}$.</p>
  </li>
  <li>Problem 9.39
    <ul>
      <li>(f) is magical, about total internal reflection</li>
    </ul>
  </li>
  <li>Problem 9.30: what does velocity of “energy propagation” mean, and why group velocity is relevant</li>
</ul>

<h1 id="chapter-10-retarded-potentials-and-fields">Chapter 10 (Retarded) Potentials and Fields</h1>

<p>The goal is to find $\vec{E}$ and $\vec{B}$ given some <strong>really arbitrary $\rho, \vec{J}$</strong>. (Before, we only looked at when $\rho=0$, or when $\vec{J}_f=\sigma\vec{E}$ in a conductor when solving the wave equations.)</p>

<p>In general this is difficult, so here the idea is (like before)</p>

<ul>
  <li>
    <p>solve instead for $\phi, \vec{A}$ under the Lorentz Gauge:</p>

\[\exists \chi,\quad \nabla \cdot \vec{A} + \frac{1}{c^2}\frac{\partial \phi}{\partial t} = 0\]

    <p>then $\phi, \vec{A}$ satisfies:</p>

\[\begin{cases}
\square^2 \phi = - \rho / \epsilon_0\\
\square^2 \vec{A} =  - \mu_0 \vec{J}
\end{cases}\]

    <p>where LHS is <mark>only the sources</mark>, and $\square^2 \equiv \nabla^2 - \frac{1}{c^2} \frac{\partial^2}{\partial t^2}$. Then the solution of $\phi,\vec{A}$ can be <mark>guessed</mark>:</p>

\[\phi(\vec{r},t) = \frac{1}{4\pi\epsilon_0} \int \frac{\rho(\vec{r}',t_r')}{|\vec{r} - \vec{r}'|} d^3r'\\
\vec{A}(\vec{r},t) = \frac{\mu_0}{4\pi} \int \frac{\vec{J}(\vec{r}')}{|\vec{r} - \vec{r}'|} d^3r'\]

    <p>where $t_r = t - \vert \vec{r} - \vec{r}’\vert /c$  is the retarded time.</p>
  </li>
  <li>
    <p>convert to $\vec{E},\vec{B}$ by $\vec{E} =- \nabla \phi - \frac{\partial \vec{A}}{\partial t}$ and $\vec{B}=\nabla \times \vec{A}$</p>
  </li>
</ul>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Potential of Fields in electrodynamics</td>
      <td>$\vec{E} =- \nabla \phi - \frac{\partial \vec{A}}{\partial t}$</td>
      <td>before in electrostatics we had $\vec{E} =- \nabla \phi$ (from $\nabla \times \vec{E} = 0$)but this no longer works if you consider $\nabla \times \vec{E} = - \partial \vec{B} / \partial t$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{B}=\nabla \times \vec{A}$</td>
      <td>unchanged</td>
    </tr>
    <tr>
      <td>Inhomogenous Wave Equation for $\vec{E},\vec{B}$ given generic $\rho,\vec{J}$</td>
      <td>$\nabla^2 \phi - \frac{1}{c^2} \frac{\partial^2 \phi}{\partial t^2} = - \rho / \epsilon_0$<br />$\nabla^2 \vec{A} - \frac{1}{c^2} \frac{\partial^2 \vec{A}}{\partial t^2} = - \mu_0 \vec{J}$</td>
      <td>the first derived from $\nabla \cdot \vec{E}=-\rho / \epsilon_0$, the second derived from $\nabla\times \vec{B}$ and Lorentz Gauge transformation (see below)</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>or equivalently  $\square^2 \equiv \nabla^2 - \frac{1}{c^2} \frac{\partial^2}{\partial t^2}$</td>
    </tr>
    <tr>
      <td> </td>
      <td>derived from<br />$\nabla^2 \vec{A} - \frac{1}{c^2}\frac{\partial^2 \vec{A}}{\partial t^2} - \nabla(\nabla \cdot \vec{A} + \frac{1}{c^2}\frac{\partial \phi}{\partial t}) = -\mu\vec{J}$</td>
      <td>which comes from $\nabla \times (\nabla \times \vec{A}) = \nabla \times \vec{B}$ and expand $\vec \times \vec{B}$ using Maxwell’s Eq and $\vec{E} =- \nabla \phi - \frac{\partial \vec{A}}{\partial t}$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{A}’ = \vec{A} + \nabla \chi$, and $\phi’ = \phi-\frac{\partial \chi}{\partial t}$</td>
      <td>for some $\chi$ such that the <mark>corresponding $\vec{E}'=E$ and $\vec{B}'=\vec{B}$ is unchanged</mark></td>
    </tr>
    <tr>
      <td>Lorentz Gauge</td>
      <td>$\chi$ such that $\nabla \cdot \vec{A} + \frac{1}{c^2}\frac{\partial \phi}{\partial t} = 0$</td>
      <td>then you easily get $\nabla^2 \vec{A} - \frac{\partial^2 \vec{A}}{\partial t^2} = - \mu_0 \vec{J}$ using the result 2 cells above</td>
    </tr>
    <tr>
      <td>Retarded Potential</td>
      <td>$\phi(\vec{r},t) = \frac{1}{4\pi\epsilon_0} \int \frac{\rho(\vec{r}’,t_r’)}{\vert \vec{r} - \vec{r}’\vert } d^3r’$</td>
      <td>guessed from the Wave equation, just as we guessed from electrostatics<br /><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507170523791.png" alt="image-20230507170523791" /></td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{A}(\vec{r},t) = \frac{\mu_0}{4\pi} \int \frac{\vec{J}(\vec{r}’)}{\vert \vec{r} - \vec{r}’\vert } d^3r’$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$t_r = t - \vert \vec{r} - \vec{r}’\vert /c$</td>
      <td>retarded time, or better seen from $\vert \vec{r} - \vec{r}’(t_r)\vert  = c(t-t_r)$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507170950514.png" alt="image-20230507170950514" style="zoom:13%;" /></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>has relation to relativity since time is a concern, i.e. in another frame, this retarded time would be different</td>
    </tr>
    <tr>
      <td>Lienard-Wiechert Potentials</td>
      <td>$\phi(\vec{r},t) = \frac{1}{4\pi \epsilon_0} \frac{q}{1 - \hat{\mathcal{R}}\cdot \vec{v}(t_r)/c}$</td>
      <td>where $\vec{\mathcal{R}} \equiv \vec{r} - \vec{w}(t_r)$ and $\vec{v}(t_r)$ both are at retarded time</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{A}(\vec{r},t) = \frac{\vec{v}(t_r)}{c}\phi(\vec{r},t)$</td>
      <td>derived from length contraction when seomthing is moving towards you, hence $\tau’ = \tau / (1 - \hat{\mathcal{R}}\cdot \vec{v}(t_r)/c)$ is the volume <em>appears to you</em></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>generic for a point charge moving in any trajectory $\vec{w}(t)$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507173613747.png" alt="image-20230507173613747" style="zoom:23%;" /></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>so that $\vert \vec{r}- \vec{w}(t_r)\vert  = c(t-t_r)$</td>
    </tr>
    <tr>
      <td>Fields of a moving point charge</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507175541022.png" alt="image-20230507175541022" /></td>
      <td>where $\vec{u}\equiv c \hat{\mathcal{R}}-\vec{v}$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507175955450.png" alt="image-20230507175955450" style="zoom:70%;" /></td>
      <td>derived from the above, since we can compute $\vec{E} = -\nabla \phi - \frac{\partial \vec{A}}{\partial t}$ and $\vec{B} = \nabla \times \vec{A}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>generic for any trajectory</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507175913539.png" alt="image-20230507175913539" style="zoom:15%;" /></td>
      <td>velocity field because when $\vert \vec{v}(t)\vert =v$ is constant, then $\vec{E}$ points to its present location <img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507180250215.png" alt="image-20230507180250215" style="zoom: 50%;" /></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>visually:<img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507180131681.png" alt="image-20230507180131681" style="zoom:13%;" /></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>radiation field because that <mark>term $\propto 1/r$,</mark> hence will dominate at large distances (other terms go like $1/r^2$)</td>
    </tr>
  </tbody>
</table>

<p><em>Example Calculation using Lienard-Wiechert Potentials</em>:</p>

<p>Consider a trajectory of a point charge with constant velocity $\vec{w} = vt$. What is its potential $\phi(\vec{r},t)$?</p>

<p>The idea is to express:</p>

\[\phi(\vec{r},t) = \frac{1}{4\pi \epsilon_0} \frac{q}{1 - \hat{\mathcal{R}}\cdot \vec{v}(t_r)/c}\]

<p>in terms of $q,v, t$, so that we need to figure out what is $\hat{\mathcal{R}}$. Graphically, we know that it is the position of the charge at $t_r$:</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507173613747.png" alt="image-20230507173613747" style="zoom:23%;" /></p>

<ol>
  <li>
    <p>find out when is $t_r$:</p>

\[|\vec{r} - vt_r| = c(t-t_r)\]

    <p>and solve for $t_r$</p>
  </li>
  <li>
    <p>find $\hat{\mathcal{R}}$ since we know $t_r$ and $\vec{w}$:</p>

\[\hat{\mathcal{R}} = \hat{\mathcal{R}}(t_r) = \frac{\vec{r} - vt_r}{c(t-t_r)}\]
  </li>
  <li>
    <p>done.</p>
  </li>
</ol>

<p>Surprisingly, you will find in the case of constant velocity <mark>the corresponding $\vec{E}$</mark> points to the <mark>current position of the charge</mark>.</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507180131681.png" alt="image-20230507180131681" style="zoom: 23%;" /></p>

<hr />

<p><em>Thought Experiment of Velocity Field</em>. Consider a point charge moving at $v$ but suddenly stopped at $T$. You are at $\vec{r}$ and that information hasn’t reach you <em>yet</em>. What would the E field look like in space?</p>

<ol>
  <li>Since the information that the charge has stopped hadn’t yet reach me (such information propagates as speed of light), then I would experience a field as if the charge is still moving with $v$</li>
  <li>The field when charge has stopped will be simple, and that will propagate at the speed of light</li>
</ol>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507180720556.png" alt="image-20230507180720556" style="zoom: 33%;" /></p>

<p>so you get a lot of “kinks”</p>

<hr />

<p>List of good questions:</p>

<ul>
  <li>10.17 = draw the space-time diagram version.</li>
  <li>10.21 = mind boggling with field of charge at constant velocity.</li>
</ul>

<h1 id="chapter-11-radiation">Chapter 11 Radiation</h1>

<p>Radiation studies the parts of $\vec{E},\vec{B}$ that goes like $1/r$, such that even for $r\to \infty$ we get $I=\int \vec{S}\cdot d\vec{A} \neq 0$ meaning energy is <strong>radiated and never comes back</strong> = permanently lost.</p>

<p>One example of such a field is the “radiation field” discussed in the previous section. This section will basically focus on studying that field.</p>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Electric Dipole Radiation</td>
      <td>$\vec{E}_{\text{dipole radiation}} = - \frac{\mu_0 p_0 \omega^2}{4\pi}\frac{\sin(\theta)}{r}\cos(\omega(t-r/c))\hat{\theta}$</td>
      <td>where $p_0 = q_0d$ is electric dipole</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>derived from considering an oscillating dipole constructed with $q(t)=q_0e^{i\omega t}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507182443127.png" alt="image-20230507182443127" style="zoom:50%;" /></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>then find its potential $\phi$, discard terms containing any $1/r$, and then compute field $\vec{E}$ to only keep $1/r$ terms</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507182611809.png" alt="image-20230507182611809" style="zoom:50%;" /></td>
      <td>by figuring out $\vec{B}$ as well, then $\vec{S} = (1/\mu_0)\vec{E}<em>{\text{rad}}\times \vec{B}</em>{\text{rad}}$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507182750881.png" alt="image-20230507182750881" /></td>
      <td>total power radiated = energy permanently lost per second</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>this power is 1) frequency dependent and 2) is consistent with future derivation of generic radiation loss</td>
    </tr>
    <tr>
      <td>Magnetic Dipole Radiation</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507192144887.png" alt="image-20230507192144887" style="zoom:67%;" /><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507192154553.png" alt="image-20230507192154553" style="zoom:67%;" /></td>
      <td>derived from considering a current loop such that $\vec{m}(t) = \pi b^2I_0\cos(\omega t)\hat{z}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507192050613.png" alt="image-20230507192050613" /></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>then find its retarded potential $\vec{A}$<br /><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507192324974.png" alt="image-20230507192324974" style="zoom:50%;" /></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>and since we know $\phi=0$ , can compute $\vec{E},\vec{B}$ by taking derivatives after knowing $\vec{A}$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507192434482.png" alt="image-20230507192434482" style="zoom: 67%;" /></td>
      <td>derived from finding $\vec{S}$ and taking integral.</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>very similar to power radiated by electric dipole, but it is much smaller due to $c^3$ term.</td>
    </tr>
    <tr>
      <td>Radiation from <strong>Arbitrary</strong> Source</td>
      <td>$\vec{E}_{\mathrm{rad}}(\vec{r},t) = \frac{\mu_0}{4\pi r}[\hat{r}\times (\hat{r}\times \ddot{\vec{p}})]$</td>
      <td>where $\vec{p}$ is dipole moment for arbitrary distribution $\int r’\rho\,\, d^3r’$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\vec{B}_{\mathrm{rad}}(\vec{r},t) = \frac{\mu_0}{4\pi rc}[\hat{r}\times \ddot{\vec{p}}]$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507192728975.png" alt="image-20230507192728975" /></td>
      <td>derived from expand the retarded potentials to contain dipole terms (see left), and discard other terms higher than $1/r$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507193136550.png" alt="image-20230507193136550" style="zoom:67%;" /></td>
      <td>finally, the power radiated is given by $\oint \vec{S}\cdot d\vec{a}$</td>
    </tr>
  </tbody>
</table>

<h2 id="radiation-of-point-charges">Radiation of Point Charges</h2>

<p>Now we focus on the specific case of point charges. Since we already know the fields of point charges in <a href="#Chapter 10 (Retarded) Potentials and Fields">Chapter 10</a>, essentially we use $\vec{E},\vec{B}$ from there but focus on $1/r$ terms.</p>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Larmor’s Formula</td>
      <td>$P_{\mathrm{rad}} = \frac{\mu_0 q^2 a^2}{6\pi c}$</td>
      <td>derived from assuming $v=0$ at $t_r$ so that $\vec{u}=c \hat{\mathcal{R}}$, but actuallly <mark>holds well for $v \ll c$</mark></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>derived from having a point charge moving with trajectory $\vec{w}$, and only taking $\vec{E}<em>{\mathrm{rad}}$ term to compute $\vec{S}</em>{\mathrm{rad}} = (1/\mu_0 c) E_{\mathrm{rad}}^2$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>then finally $P_{\mathrm{rad}} = \oint \vec{S}_{\mathrm{rad}}\cdot d\vec{A}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td><mark>this formula is used most often</mark> as long as it’s not specified we are at relativistic conditions</td>
    </tr>
    <tr>
      <td>Lienard’s Generalization of Larmor’s Formula</td>
      <td>$P_{\mathrm{rad}} = \frac{\mu_0 q^2}{6\pi c}\gamma^6 (a^2 - \left\vert  \frac{\vec{v}\times \vec{a}}{c} \right\vert ^2)$</td>
      <td>takes care of the case when $v\approx c$.</td>
    </tr>
    <tr>
      <td>Radiation Reaction Force</td>
      <td>$\vec{F}_{\mathrm{rad}} = \frac{\mu_0 q^2}{6\pi c}\dot{\vec{a}}$</td>
      <td>derived from realizing that $P_{rad}$ loss needs to be taken away from the <strong>kinetic energy</strong> of a particle. Hence try to find $\vec{F}<em>{rad}\cdot \vec{v} = -P</em>{loss}=-P_{rad}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>since $P_{loss} = \oint \vec{S}\cdot d\vec{A}$ where $\vec{S}$ includes both velocity field and radiation field, here we <em>assume</em> that $P_{loss}=P_{rad}$ by considering a “periodic motion” of the particle os that at $t_2$ it restores its velocity field</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507195052305.png" alt="image-20230507195052305" style="zoom:8%;" />finally substitute in the Larmor’s formula and find $\vec{F}_{rad}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>note that this force is $\propto \dddot{r}!$</td>
    </tr>
  </tbody>
</table>

<p><em>Using Radiation Reaction to find EoM</em>: since this essentially relates energy loss back to change in acceleration/velocity/position, we can use this if find EoM of an object.</p>

<p>Consider radiation damping of a SHO object, attached to some spring with $\omega_0$ and subject to driving force at $\omega$. Then its EoM look like:</p>

\[m \ddot{x} = F_{\mathrm{spring}} + F_{\mathrm{rad}} + F_{\mathrm{drive}} = - m\omega_0^2 x + m \tau \ddot{x} + F_{\mathrm{drive}}\]

<p>where $\tau = \frac{\mu_0 q^2}{6\pi mc}$ from Larmor’s fomula. Then since the solution should be oscillatory, let $x(t) = x_0 \cos(\omega t + \delta)$ to find</p>

\[\ddot{x} = -\omega \dot{x}\]

<p>putting this back the EoM becomes</p>

\[m \ddot{x}+ \underbrace{m \omega\tau \dot{x}}_{\text{damping term}} + m\omega_0^2 x  = F_{\mathrm{drive}}\]

<p>which makes sense as radiation losses energy.</p>

<hr />

<p>List of good questions:</p>

<ul>
  <li>11.14 = how radiation $P_{rad}$ relates to “physical” change in a system</li>
  <li>11.18 = a bit more into how to use $F_{\mathrm{rad}}$ for energy calculation
    <ul>
      <li>(a) try to derive the EoM and the solution</li>
    </ul>
  </li>
  <li>11.19 = normal EoM using $F_{rad}$</li>
</ul>

<h1 id="chapter-12-electrodynamics-and-relativity">Chapter 12 Electrodynamics and Relativity</h1>

<p>Iin previous chapters, we understand how to find $\vec{E},\vec{B}$ in some frame. In this chapter we consider, after knowing some $\vec{E},\vec{B}$, <strong>how do they transform</strong>.</p>

<p>In this chapter you will realize how $\vec{E},\vec{B}$ (and other related quantities such as $\phi, \vec{A}$) can <mark>transform into each other</mark> when you boost into some inertial frame. Some key findings include</p>

<ul>
  <li><strong>space-time diagram</strong> essentially encodes all features of relativity such as time dilation, length contraction, etc</li>
  <li>
    <p><strong>four vectors and four matrices</strong> are keys to help you perform transformations easily</p>
  </li>
  <li><strong>Maxwell’s Eq is already consistent</strong> with relativity</li>
</ul>

<h2 id="special-relativity-and-space-time">Special Relativity and Space Time</h2>

<p>Because speed of light is <strong>universal in any frame</strong>, this basically:</p>

<ul>
  <li>screwed up spontaneity</li>
  <li>screwed up length = length contration</li>
</ul>

<p>and all of the above can be intuitively shown using a space-time diagram.</p>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>space time coordinate</td>
      <td>$(ct,x,y,z)=(x^0,x^1,x^2,x^3)$</td>
      <td> </td>
    </tr>
    <tr>
      <td>Invariant in space time/hyperbolic space</td>
      <td>$(ct)^2 - x^2 = (ct’)^2 - x’^2$</td>
      <td>signifies length in hyperbolic space uses this minus sign (instead of $x^2 + y^2 = x’^2 + y’^2$ normally)</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>hence define $x^0 \equiv ct$</td>
    </tr>
    <tr>
      <td>Lorentz Transformation with Hyperbolic Functions</td>
      <td>$x^{0’}=\cosh(u)x^0 - \sinh(u)x$<br />$x^{‘}=-\sinh(u)x^0 + \cosh(u)x$<br />$v/c = \tanh(u)$</td>
      <td>where $x=x^1$ above, assuming the $S’$ frame is moving at $v$. $u$ is also called <mark>rapidity</mark></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507201339283.png" alt="image-20230507201339283" style="zoom: 15%;" /></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>e.g. transform <strong>into a Bob’s frame moving at $v$</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td><mark>this is the more fundamental equations</mark>, and makes math also simpler</td>
    </tr>
    <tr>
      <td>Visualization of Rapidity</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507202354910.png" alt="image-20230507202354910" style="zoom:15%;" /></td>
      <td>derived from thinking about “where to put Bob’s $x^{0^{‘}}$axis” in Alice’s set of axes</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>basically found that $v/c = \mathrm{slope} = \tanh(u)$</td>
    </tr>
    <tr>
      <td>Lorentz Transformation</td>
      <td>$\sinh(u) = \frac{v/c}{\sqrt{1-v^2/c^2}} = \frac{v}{c}\gamma$<br />$\cosh(u) = \frac{1}{\sqrt{1-v^2/c^2}} =\gamma$</td>
      <td>derived from $v/c = \tanh(u)$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$t’ = \gamma (t - \frac{v}{c}x)$<br />$x’ = \gamma (x-vt)$</td>
      <td>same Lorentz transformation as above</td>
    </tr>
    <tr>
      <td>Velocity Addition</td>
      <td>$v_{\mathrm{total}}/c = \tanh(u_{\mathrm{total}})=\tanh(u_1+u_2)$</td>
      <td>when you want to find the velocity $v_2$ relative to you, but only given $v_1$ relative to you and $v_2$ relative to $v_1$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$v_{\mathrm{total}} = \frac{v_1+ v_2}{1 + v_1v_2/c^2}$</td>
      <td>same as above, because<img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507202142746.png" alt="image-20230507202142746" style="zoom:15%;" /></td>
    </tr>
    <tr>
      <td>Consequences of living in hyperbolic space</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507202552035.png" alt="image-20230507202552035" style="zoom: 33%;" /></td>
      <td>lines of same lengths becomes wierd</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507202637041.png" alt="image-20230507202637041" style="zoom: 25%;" /></td>
      <td>vector decomposition in a primed/transformed frame</td>
    </tr>
    <tr>
      <td>Relativity of Simultaneity</td>
      <td>two events that are simulatenous to one inertial frame are not, in general, simultaneous in another frame</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507203244450.png" alt="image-20230507203244450" style="zoom:25%;" /></td>
      <td>event $A,B$ are simultaneous to the unprimed frame, but to the primed frame the two events happened at time $b,c$ respectively</td>
    </tr>
    <tr>
      <td>Length Contraction</td>
      <td>Things look longer when moving towards you</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507204037680.png" alt="image-20230507204037680" style="zoom:33%;" /></td>
      <td>note that for things like “length”, we need information to traverse through time, hence the additional photon line</td>
    </tr>
    <tr>
      <td>Lorentz Transformation with Matrix</td>
      <td>$\begin{bmatrix}x^{0^{‘}}\x^{1^{‘}}\x^{2^{‘}}\x^{3^{‘}}\end{bmatrix} = \begin{bmatrix}\cosh(\theta) &amp; -\sinh(\theta) &amp; 0 &amp; 0\-\sinh(\theta) &amp; \cosh(\theta) &amp; 0 &amp; 0\0 &amp; 0 &amp; 1 &amp; 0\0 &amp; 0 &amp; 0 &amp; 1\\end{bmatrix}\begin{bmatrix}x^{0}\x^{1}\x^{2}\x^{3}\end{bmatrix}$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$\begin{bmatrix}x^{0^{‘}}\x^{1^{‘}}\x^{2^{‘}}\x^{3^{‘}}\end{bmatrix} = \begin{bmatrix}\gamma &amp; -\gamma\beta &amp; 0 &amp; 0\-\gamma\beta &amp; \gamma &amp; 0 &amp; 0\0 &amp; 0 &amp; 1 &amp; 0\0 &amp; 0 &amp; 0 &amp; 1\\end{bmatrix}\begin{bmatrix}x^{0}\x^{1}\x^{2}\x^{3}\end{bmatrix}$</td>
      <td>where $\beta = v/c$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>visually, boosting from $S$ to the moving$S’$<img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507204437944.png" alt="image-20230507204437944" style="zoom: 50%;" /></td>
    </tr>
    <tr>
      <td>“Inverse” Lorentz Transformation</td>
      <td>$\begin{bmatrix}x^{0}\x^{1}\x^{2}\x^{3}\end{bmatrix} = \begin{bmatrix}\cosh(\theta) &amp; \sinh(\theta) &amp; 0 &amp; 0\\sinh(\theta) &amp; \cosh(\theta) &amp; 0 &amp; 0\0 &amp; 0 &amp; 1 &amp; 0\0 &amp; 0 &amp; 0 &amp; 1\\end{bmatrix}\begin{bmatrix}x^{0^{‘}}\x^{1^{‘}}\x^{2^{‘}}\x^{3^{‘}}\end{bmatrix}$</td>
      <td>equivalent of the above but $S$ moving to the left relative to $S’$</td>
    </tr>
    <tr>
      <td>Four vectors</td>
      <td>$x^\mu \equiv \begin{bmatrix}x^{0}\x^{1}\x^{2}\x^{3}\end{bmatrix}$</td>
      <td>(same as above cell, but different representation)</td>
    </tr>
    <tr>
      <td> </td>
      <td>$x^{\mu^{‘}} = \Lambda_\nu^\mu x^\nu \equiv \sum_\nu \Lambda_\nu^\mu x^\nu$</td>
      <td>where $\nu$ is row, $\mu$ is column of the matrix.</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>in this case, the <mark>summation notation is equivalent to perform matrix multiplication</mark></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td><mark>any valid four vectors need to satisfy this transformation rule</mark></td>
    </tr>
    <tr>
      <td>Minkovski metric</td>
      <td>$\Delta x_\mu = \eta_{\mu\nu}\Delta x^\nu$</td>
      <td>lowering index</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\Delta x^\mu \cdot \Delta x^\mu = \Delta x_\mu \Delta x^\mu = \text{invariant} = (c^2t^2 - d^2)$</td>
      <td>where $d^2 = x^2 + y^2 + z^2$ (as mentioned before, this is length in space-time)</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\eta_{\mu\nu} = \begin{bmatrix}1 &amp; 0 &amp; 0 &amp; 0\0 &amp; -1 &amp; 0 &amp; 0\0 &amp; 0 &amp; -1 &amp; 0\0 &amp; 0 &amp; 0 &amp; -1\\end{bmatrix}$</td>
      <td>mostly negative convention, called the <strong>metric</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td>$\eta_{\mu\nu}=\eta^{\mu\nu}$</td>
      <td>the RHS is used to raise the index</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>visually, $I$ is the invariant:<img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507210223862.png" alt="image-20230507210223862" style="zoom: 15%;" /></td>
    </tr>
    <tr>
      <td>Time like events</td>
      <td>when $I=(c^2t^2-d^2) &gt; 0$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507210335755.png" alt="image-20230507210335755" style="zoom:33%;" /></td>
      <td>if $A$ happened before $B$ in one frame, this order <strong>must hold in any other frame</strong> = <strong>causality is maintained</strong></td>
    </tr>
    <tr>
      <td>Space like events</td>
      <td>when $I=(c^2t^2-d^2) &lt; 0$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507210401599.png" alt="image-20230507210401599" style="zoom:25%;" /></td>
      <td>no causality, and the order of event is no longer absolute</td>
    </tr>
  </tbody>
</table>

<p><em>Graphical Example of Time Dilation</em></p>

<p>In a primed frame, let an event happened at $\Delta t’ = 1$ hour. The same event to an unprimed frame would have happened at $\Delta t &gt; \Delta t’$:</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507202901028.png" alt="image-20230507202901028" style="zoom: 25%;" /></p>

<h2 id="relativistic-mechanics">Relativistic Mechanics</h2>

<p>Now, we focus on how “definitions” of <mark>energy, momentum</mark>, and conservation principles <strong>“changed” when we consider relativity</strong>, i.e. do they hold when I transformed into another inertial frame? In sum:</p>

<ul>
  <li>
    <p>energy/momentum redefined through <em>proper time</em></p>
  </li>
  <li>
    <p><em>relativistic energy and momentum</em> is conserved</p>
  </li>
</ul>

<p>why need to “redefine”? It turns out using proper time = can write those quantities into four vectors = much easier to transform = nice properties follows such as conservation of relativistic energy.</p>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Transforming ordinary velocity</td>
      <td>$v_x = v^1 = \frac{\Delta x^1}{\Delta t} = c\frac{\Delta x^1}{\Delta t} = c \frac{\cosh(\theta)\Delta x^{0’} + \sinh(\theta) \Delta x^{1’}}{\sinh(\theta)\Delta x^{0’} + \cosh(\theta) \Delta x^{1’}}$</td>
      <td>given $v^{1’}$ to figure out $v^1$ needs to transform both $\Delta x^1\gets \Delta x^{1’}$ and $\Delta t \gets \Delta t’$</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507213334706.png" alt="image-20230507213334706" style="zoom: 50%;" /></td>
      <td>“consequence” of using ordinary velocities</td>
    </tr>
    <tr>
      <td>Proper Time</td>
      <td>$\Delta \tau$ instead of $\Delta t$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$\Delta x_\mu \Delta x^\mu \equiv \Delta s^2 \equiv (c\Delta \tau)^2$</td>
      <td>$\Delta \tau$ is time for a photon to travel $\Delta s$, which is <strong>invariant under transformation</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td>$\Delta \tau = \Delta t / \gamma$</td>
      <td>derived from realizing $\Delta \vec{x}\cdot \Delta \vec{x} = (v\Delta t)^2$, and that $\Delta x_\mu \Delta x^\mu = c^2\Delta t^2 - \Delta \vec{x}\cdot \Delta \vec{x}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td><mark>this is actually quite useful later on since it means $d \tau / dt = 1/\gamma$</mark></td>
    </tr>
    <tr>
      <td>Four velocity</td>
      <td>$\frac{\Delta x^\mu}{\Delta \tau}\equiv u^\mu = \gamma (c, \vec{v})$</td>
      <td>is a four vector and transforms with $u^{\mu^{‘}} = \Lambda_\mu^\mu u^\nu$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>$\vec{v}$ is <strong>ordinary velocity</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td>$u_\mu u^\mu = \gamma^2(c^2 - v^2)=c^2$ is invariant</td>
      <td> </td>
    </tr>
    <tr>
      <td>Four momentum</td>
      <td>$P^\mu \equiv c\cdot m u^\mu$</td>
      <td>we put an extra $c$ so that we get the below</td>
    </tr>
    <tr>
      <td> </td>
      <td>$P^\mu = (\gamma mc^2 , c \gamma \vec{p}) = (E_{relat}, c\vec{p}_{relat})\equiv (E, c \vec{p})$</td>
      <td><mark>relativistic</mark> energy and momentum</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>you can show that $E_{rela} = \gamma mc^2$ includes both $mc^2$ and $(1/2)mv^2$ by expanding $\gamma$. It really is <strong>“total energy”</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td>$P_\mu P^\mu = (mc^2)^2$ is invariant</td>
      <td> </td>
    </tr>
    <tr>
      <td>Mass-Energy equivalence</td>
      <td>$P_\mu P^\mu = E^2 - p^2c^2 = m^2c^4$</td>
      <td>all comes naturally using four vector</td>
    </tr>
    <tr>
      <td>Energy/Momentum of Photon</td>
      <td>$E=pc$</td>
      <td>special case since $m = 0$, then the formula $E=mc^2 \gamma$ doesn’t work as both numerator and denominator has zero</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>hence comes from Mass-energy equivalence</td>
    </tr>
    <tr>
      <td>Conservation of relativistic energy and momentum</td>
      <td>$P^\mu_{\mathrm{IN}}=P^\mu_{\mathrm{OUT}}$</td>
      <td>note that being invariant has nothing to do with being conserved (e.g. mass is invariant but not conserved = some goes into energy)</td>
    </tr>
    <tr>
      <td>Center of mass energy</td>
      <td>find by $P_\mu P^\mu  = P_{CM_\mu} P_{CM}^\mu =E_{CM}^2$</td>
      <td>where $P_{CM}^\mu = (E_{CM},0)$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>utilizing the fact that $P_\mu P^\mu$ is invariant in <em>any frame</em></td>
    </tr>
    <tr>
      <td>Relativistic Force</td>
      <td>$\vec{F} = \frac{d\vec{P}_{relat}}{dt} = \frac{d}{dt} \frac{m\vec{v}}{\sqrt{1-v^2/c^2}}$</td>
      <td>we use the relativistic momentum <strong>but ordinary time</strong></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>as a result, transformation looks somewhat ugly</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>but only <em>this form</em> is consistent with the force in $\vec{F}=q(\vec{E}+\vec{v}\times \vec{B})$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>can use this to compute trajectory of particles under some force</td>
    </tr>
  </tbody>
</table>

<p><em>Mass is not conserved</em>:</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507215614936.png" alt="image-20230507215614936" style="zoom: 67%;" /></p>

<hr />

<p><em>Conservation of Energy and Momentum using Four vectors</em></p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507220130230.png" alt="image-20230507220130230" /></p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507220041890.png" alt="image-20230507220041890" style="zoom: 33%;" /></p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507220153432.png" alt="image-20230507220153432" style="zoom: 18%;" /></p>

<hr />

<p><em>Trajectory of a particle given some force</em>. Let an object move from rest at $t=0$ under <em>constant force</em>. what is $x(t)$ over time?</p>

<p>The key is to think that $\vec{F} = d\vec{p}_{relat}/dt$, which tells you what is $\vec{v}(t)$, then you can integrate to get $x(t)$</p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507221355367.png" alt="image-20230507221355367" style="zoom:33%;" /></p>

<p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507221417439.png" alt="image-20230507221417439" style="zoom:30%;" /></p>

<h2 id="relativistic-electrodynamics">Relativistic Electrodynamics</h2>

<p>Here you will see that:</p>

<ul>
  <li>magnetic process is a relativistic effect of electric process, i.e. you can have magnetic field in one frame, <strong>boost in another frame</strong>, and obtain no magnetic field but electric field (in the end <strong>what matters is the actual force = affecting particles’ motion</strong>)</li>
  <li>Maxwell’s equation is naturally relativistic</li>
  <li>we will show the above by <strong>re-writing</strong> (no new physics) every related Maxwell quantities in <strong>four vector/matrix formation</strong></li>
</ul>

<table>
  <thead>
    <tr>
      <th>Condition/Name</th>
      <th>Equation</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Example of mixing $\vec{E}$ and $\vec{B}$</td>
      <td>$F_M = \frac{1}{\gamma} F_E’$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>frame $S$:<img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507222315675.png" alt="image-20230507222315675" style="zoom:15%;" /></td>
      <td>a charge moving with $v$. Wire is charge neutral hence $\vec{E}=0$</td>
    </tr>
    <tr>
      <td> </td>
      <td>frame $S’$:<img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507222340931.png" alt="image-20230507222340931" style="zoom:15%;" /></td>
      <td>boost into the charge’s frame, now $\vec{v}\times \vec{B}=0$, but $\vec{E}\neq 0$ now!</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>because the charge density changes: $\rho = #\text{charges}/(\Delta x \Delta y \Delta z)$, and one of the dimension experience Lorentz contraction</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>as a result line density $\lambda = (\rho_+’ - \rho_-‘)A \neq 0$ in frame $S’$, hence obtain electric field</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>essentially, what changed under boosts are the <mark>charge densities</mark></td>
    </tr>
    <tr>
      <td>Transformation of $E,B$ field</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507222905638.png" alt="image-20230507222905638" /></td>
      <td>when boosting into some frame with $v$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>derived from parallel plate, and arguing how surface charge <em>density</em> is the only thing that changed</td>
    </tr>
    <tr>
      <td>Transformation of $E,B$ field in Tensor Notation</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507223148861.png" alt="image-20230507223148861" style="zoom:15%;" /></td>
      <td>equivalent of the above!!</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>note that this summation is different from matrix multiplication</td>
    </tr>
    <tr>
      <td>Field Tensor</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507223216187.png" alt="image-20230507223216187" /></td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>$F^{\mu\nu’} =\Lambda^{\mu}<em>\lambda \Lambda</em>{\sigma}^{\nu}F^{\lambda \sigma}$</td>
      <td>in summation notation</td>
    </tr>
    <tr>
      <td> </td>
      <td>$F^{\mu\nu} F_{\mu\nu}= 2(E^2/c^2 - B^2)$ is invariant</td>
      <td> </td>
    </tr>
    <tr>
      <td>Dual of Field Tensor</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507223345979.png" alt="image-20230507223345979" /></td>
      <td> </td>
    </tr>
    <tr>
      <td>Four current and conservation of charges</td>
      <td>$J^\mu \equiv (c\rho, \vec{J})$</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507223748095.png" alt="image-20230507223748095" /></td>
      <td>is equivalent of <img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507223836807.png" alt="image-20230507223836807" style="zoom: 67%;" /></td>
    </tr>
    <tr>
      <td>(helpers) Transformation of Derivatives</td>
      <td>$\frac{\partial }{\partial x^\mu} \equiv (\frac{\partial }{\partial x^0}, \frac{\partial }{\partial x^1}, \frac{\partial }{\partial x^2}, \frac{\partial }{\partial x^3}) \equiv \partial_\mu$</td>
      <td>lower derivatives for upper index</td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507224333843.png" alt="image-20230507224333843" style="zoom: 6%;" /></td>
      <td><em>transformation</em> of derivatives</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>derived from <img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507224244738.png" alt="image-20230507224244738" style="zoom: 5%;" /></td>
    </tr>
    <tr>
      <td> </td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507224353232.png" alt="image-20230507224353232" style="zoom:33%;" /></td>
      <td><em>raising</em> derivatives</td>
    </tr>
    <tr>
      <td>Derivatives to D’ Lambertian</td>
      <td><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507224513593.png" alt="image-20230507224513593" style="zoom:8%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td>Re-Expressing Maxwell’s equation</td>
      <td>$\frac{\partial F^{\mu\nu}}{\partial x^\nu} = \partial_\nu F^{\mu\nu} = \mu_0 J^\mu$<br />$\frac{\partial G^{\mu\nu}}{\partial x^\nu} = \partial_\nu G^{\mu\nu} = 0$</td>
      <td>same as all four of Maxwell’s equation</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>for example<img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507224812071.png" alt="image-20230507224812071" style="zoom:15%;" /></td>
    </tr>
    <tr>
      <td>Re-Expressing Lorentz Force</td>
      <td>$K^\mu \equiv \frac{dp^\mu}{d\tau}$</td>
      <td>proper force (instead of $\vec{F} = \frac{d\vec{P}_{relat}}{dt}$)</td>
    </tr>
    <tr>
      <td> </td>
      <td>$K^\mu = q u_\nu F^{\nu\mu}$</td>
      <td>equivalent of $\vec{F}= q(\vec{E} + \vec{v}\times \vec{B})$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>for example<img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507225102436.png" alt="image-20230507225102436" style="zoom:15%;" /></td>
    </tr>
    <tr>
      <td>Re-Expressing Potentials</td>
      <td>$A^\mu = (\phi/c, \vec{A})$</td>
      <td>four potential</td>
    </tr>
    <tr>
      <td> </td>
      <td>$F^{\mu\nu} = \frac{\partial A^\nu}{\partial x_\mu}-\frac{\partial A^\mu}{\partial x_\nu} = \partial^\mu A^\nu - \partial^\nu A^\mu$</td>
      <td>equivalent to $\vec{E} =- \nabla \phi - \frac{\partial \vec{A}}{\partial t}$ and $\vec{B}=\nabla \times \vec{A}$</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>notice that this is upper index derivative. In a <strong>mostly positive metric</strong> you get an extra minus sign for $x^0$ term:<img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230507230017010.png" alt="image-20230507230017010" style="zoom: 15%;" /></td>
    </tr>
    <tr>
      <td>Re-expressing Gauges and “Wave Equation”</td>
      <td>$A^\mu \to A^\mu + \frac{\partial \chi}{\partial x_\mu}$</td>
      <td>the above hints at Gauge transformation, won’t change $F^{\mu\nu}$</td>
    </tr>
    <tr>
      <td> </td>
      <td>$\partial^\nu\partial_\mu A^\mu = \square^2 A^\mu = -\mu_0 J^\mu$</td>
      <td>equivalent to<br />$\square^2\phi = - \rho / \epsilon_0$<br />$\square^2 \vec{A} = - \mu_0 \vec{J}$</td>
    </tr>
  </tbody>
</table>

<p>List of good questions:</p>

<ul>
  <li>
    <p>12.6 = need to understand the consequence of $t\neq t’$</p>
  </li>
  <li>
    <p>12.8 = not entirely sure how space-time works, potentially needed to deal with hyperbolic space</p>

    <ul>
      <li>one take-away from this is: let me be traveling at $v$ w.r.t. some stationary observer. <strong>When I travelled $d’ = v \Delta t’$ for $\Delta t’$ in my frame,</strong> to other people they <strong>think I travelled $d=v \Delta t \neq d’$!</strong> The “real distance” should be $d’=v\Delta t’$.</li>
    </ul>
  </li>
  <li>
    <p>12.13 = how to draw simultanoues event</p>

    <ul>
      <li>two events simultaneous on a reference frame $\neq$ an observer will see them simultaneously (i.e. no light ray)</li>
    </ul>
  </li>
  <li>
    <p>12.36 = get object <em>velocity</em> from relativistic <em>energy</em></p>
  </li>
  <li>
    <p>professor added question: how <em>rapidity</em> can be used with energies</p>

    <p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230413202735577.png" alt="image-20230413202735577" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>professor added question: Lorentz transfomation and what does a free-fall trajectory look like</p>

    <p><img src="/lectures/images/2023-05-11-PHYS3008_EM_n_Optics/image-20230413225600385.png" alt="image-20230413225600385" style="zoom: 33%;" /></p>
  </li>
  <li>
    <p>professor added question of how to transform momentum</p>
  </li>
  <li>
    <p>12.51: $F_{\mu\nu}F^{\mu\nu}$ is really just summing index, not matrix multiplication</p>
  </li>
</ul>]]></content><author><name></name></author><category term="2022@Columbia" /><summary type="html"><![CDATA[Recap]]></summary></entry><entry><title type="html">POLS1201 Intro to American Politics</title><link href="/lectures/2022@columbia/POLS1201_Intro_to_American_Politics.html/" rel="alternate" type="text/html" title="POLS1201 Intro to American Politics" /><published>2023-05-11T00:00:00+00:00</published><updated>2023-05-11T00:00:00+00:00</updated><id>/lectures/2022@columbia/POLS1201_Intro_to_American_Politics</id><content type="html" xml:base="/lectures/2022@columbia/POLS1201_Intro_to_American_Politics.html/"><![CDATA[<p>Note that a lot of content comes from relevant publications and the <a href="https://openstax.org/books/american-government-3e/pages/1-introduction">OpenStax book</a> (Krutz, G., &amp;  Waskiewicz, S. (2021). <em>American Government 3e</em>. Houston, Texas: OpenStax.)</p>

<h1 id="logistics-and-introduction">Logistics and Introduction</h1>

<ul>
  <li>no recording</li>
  <li>occasional attendance pools/quizzes</li>
  <li>two midterms (02/20 and 03/29) and a cumulative final</li>
  <li>data assignment</li>
</ul>

<p><strong>Approaches within American Politics:</strong></p>

<ul>
  <li>the study of <em>political behavior</em>:
    <ul>
      <li>what does the public actually want?</li>
      <li>how do interest group influence policy?</li>
      <li>what influence who wins an election?</li>
    </ul>
  </li>
  <li>studying specific kinds of organizations - <em>institutions</em>
    <ul>
      <li>Why does congress do so little (or so much)?</li>
      <li>What predicts how the Supreme Court will rule in a lawsuit?</li>
      <li>What pushes state governments to adopt policies?</li>
    </ul>
  </li>
  <li>Yet there is a also a “separate” branch on <em>race, ethnicity, and politics</em>.
    <ul>
      <li>technically those considerations should be embedded into the first two approaches, yet from a developmental perspective this is not what happened</li>
    </ul>
  </li>
</ul>

<p><strong>Approaches in this course</strong>:</p>

<ul>
  <li><em>methodological individualism</em>: explain political phenomenon as a result of (aggregates of) <strong>individual decisions</strong></li>
  <li><em>individual rationality</em>: explain political phenomena as product of people pursuing <strong>subjective interest</strong>
    <ul>
      <li>but of course in reality, <em>what</em> are their “subjective interest” is unknown. (e.g. poor voters voting for candidates could make them even poorer)</li>
      <li>also accidents happen, hence it can be difficult to study only a single event, v.s. <strong>comparing across a category of events</strong> = inference by <strong>drawing parallels</strong> with other similar events!</li>
    </ul>
  </li>
</ul>

<p><strong>Key questions we will ask</strong>:</p>

<ul>
  <li>often decisions are based on a few important actors. Who are they?</li>
  <li>What do they want?</li>
</ul>

<h1 id="theoretical-frameworks-and-political-traditions">Theoretical Frameworks and Political traditions</h1>

<p>Course sign-up and a <strong>prisoner’s dilemma</strong>: because students can choose to sign-up for “shopping” classes</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>$S_2$ No Extra Classes</th>
      <th>$S_2$  Extra Classes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$S_1$ No Extra Classes</td>
      <td>Low Churn (2,2)</td>
      <td>$S_2$ exploits (4,1)</td>
    </tr>
    <tr>
      <td>$S_1$ Extra Classes</td>
      <td>$S_1$ exploits (1,4)</td>
      <td>High Churn (3,3)</td>
    </tr>
  </tbody>
</table>

<p>In this setup:</p>

<ul>
  <li>the numbers indicate rankings for each, e.g. for $S_2$: 1) $S_2$ exploit, 2) low churn, 3) high churn, 4) $S_1$ exploits.</li>
  <li>Signing up for extra classes are <em>always individually rational</em> (at the expense of others)</li>
</ul>

<p>But what if: social norm solution: signing up extra cause social isolation?</p>

<blockquote>
  <p><strong>Model</strong>: a system of concepts that relates series of observable phenomenon to one another. “A way to navigate more efficiently through those concepts”. How is it useful in social science?</p>

  <ul>
    <li>brief summary of existing knowledge/factors and allow for <em>accumulation of additional knowledge easier</em> (e.g. understand what questions/factors are relevant in order to understand novel scenarios)</li>
    <li>can be tested</li>
    <li>can be used to <em>guide decisions</em> we make</li>
  </ul>
</blockquote>

<h2 id="politics-as-collective-action">Politics as Collective Action</h2>

<p>All political action is ultimately <strong>individual action</strong>. However, only when groups of individuals come together to take <strong>collective action</strong> can they make political decisions that lead to change</p>

<h3 id="background">Background</h3>

<blockquote>
  <p><em>Recall</em> that</p>

  <ul>
    <li><strong>Left-wing</strong>: Left-wing believes in that they believe society is best served with an expanded role for the <strong>government</strong>.</li>
    <li>
      <p><strong>Conservative</strong>: People on the right believe that the best outcome for society is achieved when <strong>individual rights</strong> and civil liberties are paramount and the role of gov is minimized</p>
    </li>
    <li>
      <p><strong>Liberal</strong>: Left-wing, federalist. Prefer more regulation and services like free universal health care to be provided by the government to all citizens.</p>
    </li>
    <li><strong>Conservative</strong>: Right-wing, anti-federalist, Prefer smaller government, less regulation, most services to be provided by the private sector in a free market, and a literal interpretation of the Constitution
      <ul>
        <li>conservatives desire security, predictability and authority more than liberals do, and liberals are more comfortable with novelty, nuance and complexity.</li>
        <li>so conservatives opposes gay marriage, abortion and embryonic stem cell research.</li>
      </ul>
    </li>
    <li><strong>Federalists</strong> wanted a <em>stronger national government</em> and the ratification of the Constitution to help properly manage the debt and tensions</li>
  </ul>

  <p>Last but not least</p>

  <table>
    <thead>
      <tr>
        <th style="text-align: center">Democrats</th>
        <th style="text-align: center">Republics</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="text-align: center">In a democracy, the <mark>community of people</mark> are considered to hold power over how they are governed. Kings and tyrants are seen as threats to the innate rights of the people. As such, all eligible citizens get equal say in decisions.</td>
        <td style="text-align: center">Republics are in opposition to rulership by a single person. All eligible citizens get equal say in decisions through <mark>elected representatives</mark>. Unalienable rights of individuals are protected by law to safeguard against a majority abusing the minority</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<p><strong>Ideas/Insights from “Tragedy of Commons”</strong></p>

<ul>
  <li><strong>morality</strong> of an act is a function of the state of the system at the time it is performed (i.e. time and context dependent).
    <ul>
      <li>As a result, it is very difficult to make laws persistent. Hence the current epicyclic solution is, by law we delegate to bureaus</li>
    </ul>
  </li>
  <li><strong>mutual coercion</strong>. the social arrangement that produce <em>responsibility</em> are arrangements that create coercion
    <ul>
      <li>on tax systems: Who enjoys taxes? We all grumble about them. But we accept compulsory taxes because we recognize that voluntary taxes would favor the conscienceless. We institute and support taxes and other coercive devices to <em>escape the horror of the <strong>commons</strong></em>.</li>
      <li>another example: band-robbing. We thereby <em>infringe on the freedom</em> of would-be robbers we neither deny nor regret.</li>
      <li>“individuals locked into the logic of the commons are free only to bring on universal ruin (i.e. deplete themselves); once they see the ncessity of mutual coecion, they become free to pursue other goals” $\implies$ “Freedom is the recognition of necessity”</li>
    </ul>
  </li>
  <li>why is it so hard for <strong>reforms</strong> to happen? Automatic rejection of proposed is based on two unconscious assumptions a) that the status quo is perfect; b) that the choice we face is between reform and no action $\implies$ <em>no action at all while we wait for the perfect proposal</em>. But to be fair, we should see the status quo <em>as an action</em>, and then we can make better comparison.</li>
  <li>“perhaps the simplest summary of this analysis of man’s population problems is this: the commons is justifiable only under conditions of low population density” $\gets$ we abandoned commons n food gathering, enclosing farms and restricting pastures; somewhat later we saw that the commons as a place for waste disposal would also have to be abandoned $\implies$ humans (<strong>in a large scale</strong>) can’t establish self-organization to make a commons work/sustainable</li>
</ul>

<p><strong>How People become political</strong>?</p>

<ul>
  <li>
    <p>The gradual process of developing values and beliefs, of people becoming who they are as adults, is <strong>socialization</strong>, and the slow development of who a person becomes as a political being is <strong>political socialization</strong>. This process shapes your current political belief, and is influenced by countless factors including partly your genetics but also the <em>environment</em> (e.g. your hometown, school, etc.).</p>

    <p>Your social and physical environments <mark>do not determine</mark> your political personality, but they can have an important influence.</p>
  </li>
  <li>
    <p>The <strong>family</strong> is usually considered the most important influence on both a person’s overall socialization and their political socialization.</p>

    <ul>
      <li>but this could also be a complicated factor. How these changing family structures and living conditions impact political socialization?
        <ul>
          <li>e.g. As of 2016, a higher percentage (52 percent) of 18-to-29-year-olds in the <mark>United States</mark> were living with their parents than at any time since 1900. Among wealthy countries, the percentage of 15-to-29 year-olds living with their parents varied from about 80 percent in <mark>Italy</mark> to 30 percent in <mark>Canada</mark>.</li>
        </ul>
      </li>
      <li>but also broader family environment could affect your political view: In China, <em>caring for one’s parents</em> is a <em>sacred</em> duty; in Norway, it is more often seen as an <em>obligation of the government</em>.</li>
    </ul>
  </li>
  <li>
    <p>Another important factor is <strong>your peers</strong>, especially when you grow older/more mature, people tend to <strong>spend more time with your peers than parents</strong></p>

    <ul>
      <li>To the extent that young people, and indeed all individuals, can <em>choose</em> their social networks rather than being placed in them by virtue of their location, it is more likely that peer networks will <strong>reinforce existing beliefs</strong>, attitudes, and behaviors rather than change them.</li>
      <li>One complicating factor is that now, your peers/social network can be <strong>virtual</strong>, hence “a young person’s peers can be almost anywhere in the world”. In this case, political scientists are still trying to decipher what this means for political socialization.</li>
    </ul>
  </li>
  <li>
    <p>Other interesting factors include:</p>

    <ul>
      <li><strong>Ethnicity</strong>: people from dominant ethnic group may assume that politics and government should favor their interests, as they are the majority. Ethnic minorities, in contrast, may be socialized to feel the sting of discrimination and to view the government as no friend.</li>
      <li><strong>Religion</strong>: atheists are more likely to believe that governmental policy should not be based on religious principles.</li>
    </ul>
  </li>
  <li>
    <p>As people are socialized, they become part of larger groupings of individuals with <strong>common characteristics</strong>. The next sections discuss these larger groupings.</p>
  </li>
</ul>

<p><strong>How people express their political identity</strong></p>

<ul>
  <li>The shared <em>political</em> attitudes, values, goals, and practices common to members of a political group, such as a country, a party, or any other political organization or grouping, is the group’s <strong>political culture</strong>.</li>
  <li>A country’s political culture frames how individuals in that society see themselves, as well as their relation to gov.
    <ul>
      <li>e.g. researchers asked <strong>Americans</strong> and <strong>Europeans</strong>, “What’s more important in our society, that everyone can be free to pursue their life’s goals without interference from the state or that the state plays an active role in society so as to guarantee that nobody is in need?” Almost six in 10 Americans surveyed responded that <em>individual freedom</em> was more important, while nearly eight in 10 Lithuanians, whose country was a part of the collectivist Soviet Union for nearly 50 years, responded that the state’s active role was more important.</li>
      <li>therefore, people from United States <mark>*tend*</mark> to <strong>prioritize personal freedom and individual responsibility over more community-centered values</strong>. Of course, not all Americans favor individual freedom over state intervention = <mark>no stereotyping!</mark></li>
    </ul>
  </li>
  <li>Those within a society who, by virtue of their wealth, status, position, and power, have the <strong>greatest influence over the country’s political agenda</strong>, its policy decisions, and its decision-making cadre are the society’s <strong>political elite</strong>.
    <ul>
      <li>The <em><strong>degree</strong> of influence and domination</em> of elite culture varies from country to country.
        <ul>
          <li>At the extreme, in <mark>North Korea</mark>, the ruling class, led by Supreme Leader Kim Jong-un, controls every aspect of political life.</li>
          <li>At the other side would be <mark>New Zealand</mark>. But even the relatively egalitarian New Zealand, however, those with money, status, and power tend to set the agenda, influence policy decisions, and dominate the decision-making process.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The broadest culture within a country is its <strong>mass culture</strong> (e.g. what movies you like to watch). The lines between elite and mass cultures are not always distinct.
    <ul>
      <li>Prior to the rise of newspapers, radio, and television, <em>mass culture (including political culture) did not exist</em>. All culture was local.</li>
    </ul>
  </li>
  <li>However, as media options proliferate, mass culture diminishes and <strong>minority cultures flourish</strong>. Mass culture, including mass political culture, is <strong>weakening</strong>.
    <ul>
      <li>e.g. About 60 percent of the adult population in America watched the presidential debates between Nixon and Kennedy in 1960. In 2020, even during a highly contentious presidential campaign between President Donald Trump and former Vice President Joe Biden, fewer than 30 percent of adults watched the debates</li>
    </ul>
  </li>
</ul>

<h2 id="collective-dilemma">Collective Dilemma</h2>

<blockquote>
  <p><strong>Key question</strong>: thinking through a collective action framework: How do people organize themselves and behave?</p>
</blockquote>

<p><em>Examples of Collective Actions</em>:</p>

<ul>
  <li>
    <p>Speaker of the House Election in 2023</p>
  </li>
  <li>
    <p>Columbia/Barnard course enrollment</p>
  </li>
</ul>

<p><strong>Making Group Decisions and Collective Dilemma</strong>:</p>

<ul>
  <li>If all people agreed on everything, there would be no collective dilemmas. But because individuals do have differing needs, preferences, and goals, they have to overcome challenges to make a decision. Whenever two or more individuals need to make a plan or resolve a conflict and those involved do not agree on the solution, there is a <strong>collective dilemma</strong>.
    <ul>
      <li>e.g. For 18 days in 2013 and then again for 35 days in 2018–2019, the US government shut down because Congress and the president could not agree on ways to fund federal operations.</li>
    </ul>
  </li>
  <li>causes of collective dilemma include
    <ol>
      <li>
        <p>The first is when the participants disagree because they have <strong>irreconcilable</strong> preferences/differences.</p>

        <ul>
          <li>e.g. reduce debt increase or aid to Ukraine</li>
        </ul>
      </li>
      <li>
        <p>(<strong>coordination problem</strong>) when participants generally agree on what they want to do but <strong>disagree over the details.</strong> Collective action will success only if you <em>do get people doing it</em></p>

        <ul>
          <li>protest march: a million people protested <em>on the same day/time</em></li>
          <li>political institutions make public decision can be seen as a solution to this problem</li>
        </ul>
      </li>
      <li>
        <p>when individual motivations are contrary to the groups’ mutual interests = <strong>collective action problem</strong>. E.g. individuals, acting rationally in pursuit of their <strong>self-interest,</strong> have incentives to make decisions that are harmful to the interests of others</p>
        <ul>
          <li>
            <p>note that the first two can be seen as some kind of <em>coordination costs</em>. This problem, like with prisoner’s dilemmas, is that individuals have strong incentives to do things that are not socially beneficial.</p>
          </li>
          <li>
            <p>this problem can be broadly categorized into:</p>
            <ol>
              <li>
                <p><strong>tragedy of the commons</strong>: depletion of a resource available to all (e.g. threats to environment/health);relevant to a resource that can be <em>exhausted</em></p>

                <ul>
                  <li>e.g. fresh water</li>
                  <li>if everyone has access to a commons, then there is an incentive for them to take more than needed $\implies$ can sell this scarce resource $\implies$ benefit today without consideration of future consequences (depletion)
                    <ul>
                      <li>i.e. users ignores cost imposed on others, focus on own short-term benefits</li>
                    </ul>
                  </li>
                  <li><em>too rapid inclusion of others</em>: new users do not share a similar understanding of how a resource work $\implies$ members of the initial community may feel threatened and hence start to join race to exploit the resource</li>
                </ul>
              </li>
              <li>
                <p><strong>free riding</strong>: not participating in a group activity nonetheless benefit from the <em>public activity</em>; also really hard to <em>exclude people</em> from using it, and <em>not exhausted by use</em></p>

                <ul>
                  <li>
                    <p>e.g. Columbia protest for increasing of pay, where many people can benefit without joining the protest</p>
                  </li>
                  <li>in small groups, this might be fine through mutual peer pressure and you care about others feelings. In larger political world, the problem of free riding is much harder to spot and manage</li>
                  <li>e.g. to help climate change, the Paris Climate Accord of 2015, the agreement of 197 countries to limit global warming. However, in reality only a few really implemented those changes. As a result, change is difficult to achieve, given its tendency to <strong>favor the status quo</strong>. (to suggest that climate change politics are only a matter of free riding would be an oversimplification.)</li>
                </ul>
              </li>
              <li>
                <p><strong>prisoner’s dilemma</strong>: individuals act strategically in ways that ultimately harm themselves, demonstrates why it can be challenging to get allies to work together.</p>

                <ul>
                  <li>
                    <p>consider two people being caught by the police, and is asked separately to point out if the others committed crime:</p>

                    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230121155451809.png" alt="image-20230121155451809" style="zoom:30%;" /></p>

                    <p>This is the prisoner’s dilemma: individuals, acting strategically in their own self-interest (want to accuse others), have incentives that lead them to take actions that result in unnecessarily negative outcomes for both parties.</p>
                  </li>
                  <li>
                    <p>an example in real life is: Two opposing political candidates may each prefer to run only positive campaign ads, but each fears the other will “go negative” to gain an advantage. Both candidates consequently <strong>run negative ads</strong>, which tarnish the reputations of each.</p>
                  </li>
                  <li>
                    <p>one key feature of prisoner’s dilemma is that the <mark>optimal policy for one person $\neq$ the optimal policy for the entire group</mark></p>
                  </li>
                </ul>
              </li>
            </ol>

            <blockquote>
              <p>The tragedy of the commons and the prospect of free riding are especially relevant for slow-growing crises like climate change.</p>
            </blockquote>
          </li>
        </ul>
      </li>
    </ol>
  </li>
</ul>

<p>Note that in practice, a bunch of these problems could come up combinatorially.</p>

<h3 id="potential-solutions-to-collective-dilemma">Potential Solutions to Collective Dilemma</h3>

<p><mark>Solutions</mark> to those collective dilemma include include:</p>

<ol>
  <li>
    <p><strong>rules for making a decision</strong> when there is <mark>irreconcilable</mark> preference, e.g. majority vote.</p>

    <ul>
      <li>majority voting: more than 50% agreed</li>
      <li>plurality voting: proposal with most votes</li>
      <li>super-majority: requires sometimes 60%, 67%, or even 75% to agree. Otherwise status-quo = no change
        <ul>
          <li>e.g. supermajority is found in most <strong>US</strong> courtrooms = decide if to jail a person</li>
          <li>e.g. constitutional changes subject to supermajority votes and laws changeable by a simple majority.
            <ul>
              <li>A constitution typically outlines the government’s general powers and duties, while laws fill in the specifics regarding these matters.</li>
            </ul>
          </li>
          <li>One sensible rationale is that the greater the consequences of a decision, the greater the need for a supermajority to guard against making rash or incorrect decisions.</li>
        </ul>
      </li>
      <li>Whenever a <strong>supermajority</strong> rule exists, the status quo is more difficult to change.</li>
    </ul>
  </li>
  <li>
    <p><strong>delegate decision making to a person</strong>, or <strong>do everything by group decision</strong> when there is disagreement over details</p>

    <ul>
      <li>Delegating power to a single person reduces <strong>transaction costs</strong> but increases <strong>conformity costs</strong>. Group decision-making is likely to reduce conformity costs but to increase transaction costs.</li>
      <li><strong>transactional costs</strong>: how much time and effort to make a decision/implement the solution
        <ul>
          <li>e.g. decide amongst 300 people to agree on where to eat = high transactional cost</li>
          <li>e.g. If you are deeply committed to maintain the status quo, then you just need to raise the transaction costs high enough so that no changes can be enacted.</li>
        </ul>
      </li>
      <li><strong>conformity costs</strong> are the “price” those who do not get what they want must
        <ul>
          <li>e.g. in primary/secondary school, high conformity cost as everyone needs to study the same curriculum. In college, lower as you can choose your major/minor, but higher transactional costs as it takes additional registration effort</li>
        </ul>
      </li>
    </ul>

    <p>Political Institutions as solutions to those Problems of Collective Behavior!</p>

    <blockquote>
      <p><strong>Institutions</strong>: a social structure, rule or pattern than can <mark>influence collective behavior</mark>. For example, the supreme court, or the university registrar (determines rule of how you can join the class if you are on the waitlist)</p>
    </blockquote>
  </li>
  <li>
    <p>the most difficult amongst all</p>

    <ol>
      <li>
        <p>resolving tragedy of commons</p>

        <ul>
          <li>
            <p><strong>for small groups</strong>: Each of the three main types of collective action problems is easier to solve, at least in principle, when the problems arise within small groups of people (such as families or tribal units) in which the members know each other well</p>

            <ul>
              <li>provide suitable rewards and enforce appropriate punishments are the keys to avoiding or mitigating collective action problems.</li>
            </ul>
          </li>
          <li>
            <p><strong>for large groups</strong>: collective action problems involving large numbers of people cannot rely on personal relationships</p>

            <ul>
              <li>central institution (the government) the authority to protect the commons through <strong>force</strong>. Alternatively, <strong>privatize</strong> them. But there are also problems</li>
              <li>however, gov may use the resource for the benefits of the elites</li>
              <li>The more politically powerful the group previous exploiting the commons, the more <em>difficult</em> it is for elected officials to protect the resource through privatization. Even if no pressure, it is difficult to set the right price “if the government sets the prices (of fishing permits) too low, the resource will be depleted, and if it sets the prices too high, the community will be deprived of a valuable resource.”</li>
            </ul>
          </li>
          <li>
            <p><strong>for communities</strong>: member roughly know each other</p>

            <ul>
              <li>
                <p>previous solutions are somewhat <em>pessimistic</em> of human’s ability to device long-term, sustainable institutions. In practice, there are a lot of instances when human self-organizations are effective</p>

                <ul>
                  <li>groups of people who can identify one another (e.g. via media) are more likely to draw on trust and reciprocity.</li>
                  <li>e.g. those with reciprocity gain a positive reputation, and others become willing to cooperate = <strong>evolved norms</strong></li>
                  <li>lower the perceived cost: users understand the dynamics of the commons, and hence <strong>value its sustainability</strong></li>
                </ul>
              </li>
              <li>
                <p>Nobel prize winner Elinor Ostrom proposed a relatively effective solution without sovereign or privatization.</p>

                <ol>
                  <li>First, the community must engage in collective decision-making so that all relevant interests can participate.</li>
                  <li>Second, the rules the community makes must be clear so that members know what is allowed and what is not.</li>
                </ol>

                <p>If these conditions are in place, the decisions the community makes are likely to be wise and enforceable</p>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
        <p>resolving free rider: <strong>disincentivize free riders</strong></p>

        <ol>
          <li>e.g. keep groups small, or give punishments to those who don’t. However, this requires additional monitoring cost</li>
          <li>e.g. social solidarity: pay taxes because that is what good, patriotic citizens do.</li>
        </ol>
      </li>
      <li>
        <p>resolving prisoners’ dilemma: <strong>make them cooperate</strong></p>

        <ul>
          <li>A participant is least likely to defect when they know that the other participant will punish them if they do. (e.g. if they each know they will be punished if they defect, then they are <em>more likely to remain silent</em>.)</li>
          <li>Once one of the parties defects in a prisoner’s dilemma setting, it is not easy to get the participants to cooperate later.
            <ul>
              <li>As in the persistent conflict between <mark>Israelis</mark> and <mark>Palestinians</mark>, cases where any two groups are locked in intractable disagreements exemplify how tit-for-tat retaliation dominates any possibility of mutual agreement.</li>
              <li>Avoiding this outcome requires a <strong>third party</strong> that can enforce cooperation or punish those who defect to induce future cooperation.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ol>
  </li>
</ol>

<p><em>Example</em>: How does <strong>policing</strong> help solve collective action problem by intervention?</p>

<p>Consider for a normal <em>individual</em> to intervene and prevent a bad action $A$ to happen:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>Positive</th>
      <th>Negative</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Intervene</td>
      <td>prevent action (A), gain pride (P)</td>
      <td>takes effort (E), may be harmed (H), may face retaliation (R)</td>
    </tr>
    <tr>
      <td>No Intervention</td>
      <td> </td>
      <td>Action occurs</td>
    </tr>
  </tbody>
</table>

<p>Therefore, a rational person will intervene if</p>

\[\text{intervene if:  }\quad P -  E - \pi_1 R - \pi_2 H - (1-\pi_3)A &gt; -A\]

<p>where $\pi_1$ is prob of retaliation happens, $\pi_2$ is when that person is harmed, etc.</p>

<p>But if we have <em>coordination</em>, what could change? (e.g. a group of people intervening at the same time)</p>

<ul>
  <li>probabilities would change (e.g. less likely to be retaliated). $\pi_1,\pi_2 \downarrow$, $\pi_3 \uparrow$</li>
  <li>benefit/costs would change (e.g. less effort needed $E$)</li>
</ul>

<blockquote>
  <p><strong>Written laws</strong> can provide this “improvement”, as it can help people <em>coordinate</em> enforcement.</p>

  <ul>
    <li>but of course, don’t forget <em>conformity</em> cost such as make some people particularly prone to punishments</li>
  </ul>
</blockquote>

<p>What’s different for <strong>designated specialist</strong> (e.g. having a police department)? They can <em>still</em> be modeled as individuals we had before, but</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>Positive</th>
      <th>Negative</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Intervene</td>
      <td>prevent action (A), gain pride (P)</td>
      <td>takes effort (E), may be harmed (H), may face retaliation (R)</td>
    </tr>
    <tr>
      <td>No Intervention</td>
      <td> </td>
      <td>Action occurs, <mark>Discipline (D)</mark></td>
    </tr>
  </tbody>
</table>

<ul>
  <li>probabilities change (e.g. $\pi_3$ increases as they are trained)</li>
  <li>you get an extra cost of enforcers, hence <mark>more likely</mark> the action being prevented to happen!</li>
</ul>

\[\text{intervene if:  }\quad P -  E - \pi_1 R - \pi_2 H - (1-\pi_3)A &gt; -A\textcolor{red}{-D}\]

<p>like providing public goods, a good solution is to <em>“force”</em> the production, i.e.</p>

<blockquote>
  <p><strong>Institutions as solutions</strong> to collective action problem. A single institution can solve/raise multiple “problems”:</p>

  <ul>
    <li>e.g. (-) police enforcers can preserve group inequality, e.g. more south American drinking alcohol $\implies$ being policed more often $\implies$ treats unequal treatments to south American $\implies$ being checked on/cautioned more than other ethnic groups</li>
    <li>e.g. (+) written laws can coordinate enforcement AND protect property</li>
  </ul>
</blockquote>

<p>But this beg several questions/understandings:</p>

<ul>
  <li>when and why do institutions change?</li>
  <li>When are they <em>resistant</em> to change?</li>
  <li>How are institutions chosen?</li>
</ul>

<h2 id="institutional-change">Institutional Change</h2>

<blockquote>
  <p>Political Institutions can be modeled as <strong>increasing returns processes</strong>. As a result:</p>

  <ol>
    <li>a wide range of outcomes can result from same initial conditions</li>
    <li>small actions at the right time can gave large implications for institutional form</li>
    <li>when an event occur matter! (esp. <em>early changes</em> matters)</li>
    <li>once begun, change is difficult (hard to <em>reverse</em>, i.e. <em>path dependence</em>)</li>
  </ol>
</blockquote>

<p>What is increasing returns and path dependence? From “Increasing Returns, Path Dependence, and the Study of Politics” by Paul Pierson</p>

<ul>
  <li>
    <p>the concept of <strong>Path Dependence</strong> can be used in various ways. Here, the author means</p>

    <ol>
      <li>specific patterns of timing and sequence matter;</li>
      <li>large consequences may result from relatively “small” or contingent events; (also see <em>increasing returns</em>)</li>
      <li>particular courses of action, once introduced, can be virtually impossible to reverse; (also see <em>increasing returns</em>)</li>
    </ol>

    <p>those are different from other prominent modes of argument and explaination in political science $\implies$ attribute “large” outcomes to “large” causes</p>
  </li>
  <li>
    <p><strong>Increasing returns</strong>, or self-reinforcing process, refers to the case that “preceding steps in a particular direction <strong>induce further movement in the same direction</strong>”. As a result, the relative benefits of the current activity (or the cost of switching) compared with other possible options <strong>increase over time</strong>.</p>

    <ul>
      <li>e.g. the Polya urn process in which each time you pick a ball, you need to add a ball of the same color into the urn $\implies$ <em>small</em>/random picks in the <em>beginning</em> gives a <em>large</em> effect to the <em>final</em> equilibrium configuration of balls.</li>
      <li>therefore, <strong>sequence is crucial</strong> (path dependent), and <mark>earlier events matter much more than later ones</mark></li>
    </ul>
  </li>
  <li>
    <p>insights from increasing returns in <em>economics</em></p>

    <ul>
      <li>
        <p>the most prominent example is perhaps on <strong>technology</strong>: a particular technology may achieve a decisive advantage over competitors, although it is <mark>not necessarily the most efficient alternative</mark> in the long run. This is because when it is subject to increasing returns (higher pay-off when more user uses it), being the <em>fastest out of the gate</em> becomes critical. Then, once positive feedback effects kick in, competitors are excluded and people are locked in this technology (e.g. “QWERTY” keyboard)</p>

        <p>However, not all technologies work like this. Arthur (1994) listed the four criteria</p>

        <ol>
          <li><strong>large set-up/fixed costs</strong>: so that a) it becomes smaller for the company when production increases b) individual users have incentive to stick with a single option</li>
          <li><strong>learning effects</strong>: the more you use it, the more knowledge gained in this system, and this loop continues/spur further innovations (e.g. plugin system)</li>
          <li><strong>coordination effects</strong>: benefits an individual receives from a particular activity increase as others adopt the same option.</li>
          <li><strong>adaptive expectations</strong>: users are willing to <em>adapt their behaviors</em> towards their future expectation of a product (even if it is bad)</li>
        </ol>
      </li>
      <li>
        <p>examples that worked like this include</p>

        <ul>
          <li>initial <em>centers of economic activity</em> may act like a magnet and influence the locational decisions and investments of other economic actor (e.g. silicon valley)</li>
          <li>(North 1990a, 95) <mark>new institutions</mark> often entail high fixed or start-up costs, and they involve considerable learning effects, coordination effects, and adaptive expectations. Established institutions generate powerful inducements that reinforce their own stability and further development.</li>
          <li>Additionally, <mark>institutional arrangements</mark> induce complementary organizational forms, which in turn may generate new complementary institution</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>how/why is <strong>political science</strong> related to this idea of increasing returns?</p>

    <ul>
      <li><strong>collective nature of politics</strong> in economics, I make individual decisions (e.g. switch firms) and the outcome is aggregated by the market. In politics, your decision depend to a considerable degree on your confidence that <em>a large number of other people will do the same</em> $\implies$ positive feedback frequently due to <em>adaptive expectations</em>
        <ul>
          <li>recall that in politics, <strong>creating conditions favorable to collective action</strong> is a principal issue in political life</li>
        </ul>
      </li>
      <li><strong>institutional density of politics</strong>. Institutions and policies may encourage individuals and organizations to invest in specialized skills, deepen relationships with other individuals and organizations, and develop particular political and social identities. These activities <em>increase attractiveness of existing institutional arrangements</em> relative to hypothetical alternatives</li>
      <li><strong>political authority and power asymmetries</strong>. relatively small disparities in political resources (e.g. power) among contending groups may <em>widen dramatically</em> over time as positive feedback sets in. For example, a group with slightly more power could change rules of the game <strong>designed to enhance their power</strong></li>
      <li><strong>complexity and opacity of politics</strong>. in economics, there is often a clear metric (e.g. market price) on how good you/your company is performing. Politics is a <strong>far, far murkier</strong> environment.
        <ul>
          <li>researchers argue that actors who operate in a social context of high complexity and opacity are heavily biased in the way they <em>filter information</em> into existing “mental maps” $\implies$ confirming information is incorporated/dis-confirming is filtered out $\implies$increasing returns</li>
          <li><strong>harder to “reverse course”</strong> in politics than in economics $\implies$ path dependent
            <ul>
              <li>unlike <strong>competition</strong> in economics that would allow a sub-optimal firm eventually be replaced, political institutions rarely confront a <em>dense</em> environment of competing institutions that will instantly capitalize on inefficient performance</li>
              <li><strong>short-time horizon of political actors</strong>. many actors are interested in short-term consequences because the decision of voters are take in the short turn $\implies$ pay little attention to long term consequences</li>
              <li><strong>power asymmetry</strong>. political actors may create rule that make preexisting arrangement hard to reverse (e.g. to protect themselves); and there is often high barriers of reform (e.g. unanimity requirement in EU)</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><em>“Research Idea”</em>: how can tech such as VR change the density problem</p>
</blockquote>

<h2 id="research-design">Research Design</h2>

<p>An overview:</p>

<ul>
  <li>
    <p>In legal practice, law determines what facts are relevant, but you have to decide what (e.g. numbers) to demonstrate</p>
  </li>
  <li>in advocacy sector, people care the <em>effect</em> of a proposed policy</li>
  <li>in consulting, what changes would affect certain variables in a system</li>
</ul>

<p>In a quantitative study, you may want to:</p>

<ol>
  <li>come up with a model for a key concept (e.g. poverty)</li>
  <li>develop variables to measure the key concept</li>
  <li>develop hypotheses how variables should relate, and other competing models</li>
  <li>collect data</li>
  <li>test (statistically) whether the relationship holds in your data</li>
</ol>

<p>Keep in mind when you are measuring quantities</p>

<ul>
  <li>
    <p>e.g. annual reports released by institutions might be understating; survey results depend on who you asked</p>
  </li>
  <li>e.g. how to measure democratic participation? e.g. voter turn outs, protest participation, watching presidential debates. All of them measure <em>slightly different things</em>, and you need to be clear if your method is <strong>justified</strong>.</li>
  <li>certain data could be <em>biased</em>. e.g. posters showing low support for a president could be due to only people dislike him is in the pool</li>
</ul>

<p>How do you fix the above problems? Consider a candidate claiming election is going to be fraudulent</p>

<ul>
  <li>gather data on many elections where one candidate claims it will be fraudulent, compare them</li>
  <li>gather data on many elections where one candidate claims it will be fraudulent <mark>and some without</mark>, compare them</li>
</ul>

<blockquote>
  <p>Statements about <mark>causation</mark> make claims about what happens with and without some factor, so must define <mark>both kinds of cases</mark></p>
</blockquote>

<p><em>More Examples</em>: a report of studying 173 mass violence happened in US in the past few years</p>

<ul>
  <li>found in those 173 mass violences in common = at some point had suffered from mental illness $\implies$ <mark>does not mean mental illness will cause those violences!</mark></li>
  <li>also does not teach us about how these acts can be prevented</li>
</ul>

<h1 id="institutions-in-us">Institutions in US</h1>

<p>How successful/unsuccessful <strong>institutions can be</strong> at solving the collective action problem?</p>

<blockquote>
  <p><strong>Origin of Separation of Power</strong>: the US separation of power can be traced back to colonial governments by the British. Why did British monarch create strong legislature (alongside the local governments) in it $N$ American colonies?</p>

  <ul>
    <li>purpose of colonies was resource extraction; but governors have the incentive to pocket more than efficient for the crown</li>
    <li>then, this is used as a way for the crown to <mark>control/constrain those local elites</mark></li>
  </ul>

  <p>so it is lodged in the economic reason of those colonial power</p>
</blockquote>

<p>First of all, several key terms</p>

<blockquote>
  <ul>
    <li>
      <p><strong>confederation</strong> = each state is loosely related, like its separate countries = <em>high degree of freedom/autonomy</em></p>
    </li>
    <li><strong>unitary</strong> = power is concentrated in the hands of the central government, while <em>provinces and regions do not enjoy large autonomy</em>
      <ul>
        <li>has nothing to do with democracy/monarchy</li>
      </ul>
    </li>
    <li>
      <p><strong>federal</strong> = federal government as sovereign entity, but also given <em>lower level units (states) to have their own laws</em></p>

      <p><img src="https://openstax.org/apps/archive/20221219.191545/resources/df7dffd16667f5c2ff8a13c934b26b0dc1afa256" alt="A flow chart depicts the three general systems of government: the unitary system, the federation, and the confederation. The unitary system flowchart starts with the National Government, which flows down to the States. Below the chart, it says, “Authority is concentrated in the central government. Examples: United Kingdom, Japan, Sweden.” The Federation flow chart starts with the People on top. The flow branches down and splits between two boxes; the states, and the National Government. Below this chart, it says, “Authority is divided between central and state governments and is derived from the people. Examples: Canada, India, United States under the Constitution”. The Confederation flow chart starts with the States on top, with an arrow flowing down to the National Government. Under this chart, it says “Authority is concentrated in states. Example: United States under the Articles of Confederation”." style="zoom:33%;" /></p>
    </li>
    <li>
      <p><strong>unicameral</strong> legislature has only one chamber, or body, that makes decisions.</p>
    </li>
    <li><strong>bicameral</strong> legislature has two chambers, often with different procedures and powers, that ultimately must work together to make policy and exercise other legislative powers and responsibilities.</li>
  </ul>
</blockquote>

<h2 id="the-us-constitution-basics">The US Constitution Basics</h2>

<blockquote>
  <p><strong>The US Constitution</strong> The Constitution of the United States established America’s national government and fundamental laws, and guaranteed certain basic rights for its citizens.</p>

  <ul>
    <li>
      <p>Its 7 sections (or <em>Articles</em>) detail the core components of how the framers wanted the government to run the country. For example, no the duties of the three main parts of government: the <em>Executive Branch</em>, the <em>Legislative Branch</em>, and the <em>Judicial Branch</em></p>
    </li>
    <li>
      <p><em>The Bill of Rights</em> were <em>first</em> 10 amendments guaranteeing basic individual protections, such as freedom of speech and religion, that became part of the Constitution in 1791. To date, there are 27 constitutional amendments.</p>
    </li>
  </ul>
</blockquote>

<p>Some short historical facts about it:</p>

<ul>
  <li>
    <p>Under America’s first governing document, the Articles of Confederation, the national government was weak and states operated like independent countries.</p>
  </li>
  <li>
    <p>At the 1787 convention, delegates devised a plan for a stronger federal government with three branches—executive, legislative and judicial—along with a system of checks and balances to ensure no single branch would have too much power. This is the US Constitutional Convention in Philadelphia, signed on September 17, 1787.</p>
  </li>
</ul>

<p>Its content in summary (from https://www.pbs.org/newshour/classroom/app/uploads/2013/11/summary-of-the-US-Constitution.pdf)</p>

<ol>
  <li>Article 1: <strong>Legislative Branch</strong>: the <mark>U.S. Congress</mark> makes the laws for the United States. Congress has two parts, called “<mark>Houses</mark>,” the House of Representatives and the Senate.</li>
  <li>Article 2: <strong>Executive Branch</strong>: the President, Vice-President, Cabinet, and Departments under the Cabinet Secretaries carry out the laws made by Congress.</li>
  <li>Article 3: <strong>Judicial Branch</strong>: the <em>Supreme Court</em> decides court cases according to US Constitution. The courts under the Supreme Court decide criminal and civil court cases according to the correct federal, state, and local laws.</li>
  <li>Article 4: <strong>States’ powers</strong>: States have the power to make and carry out their own laws. State laws that are related to the people and problems of their area. States respect other states laws and work together with other states to fix regional problems.</li>
  <li>Article 5: <strong>Amendments</strong>: The Constitution can be changed. New amendments can be added to the US Constitution with the approval by a <mark>two-thirds vote</mark> in each house of Congress (67, 281) and <mark>three-fourth</mark> vote by the states (38).</li>
  <li>Article 6: <strong>Federal powers</strong>: The Constitution and federal laws are higher than state and local laws. All laws must agree with the US Constitution.</li>
  <li>Article 7: <strong>Ratification</strong>: The Constitution was presented to George Washington and the men at the Constitutional Convention on September 17, 1787, Representatives from twelve out of the thirteen original states signed the Constitution. From September 1787 to July 1788, the states meet, talked about, and finally voted to approve the Constitution</li>
</ol>

<p>A few selected amendments which is important/interesting (IMO):</p>

<ul>
  <li>2nd People have the right to <strong>have a weapon to protect themselves</strong>.</li>
  <li>4th The government <em>cannot</em> arrest a person or <em>search their property</em> unless there is “probable cause.”</li>
  <li>13th Slavery is illegal in the United States. (1865)</li>
  <li>14th Every person <strong>born in the USA is a citizen</strong>. An immigrant can become a naturalized citizen. (1868)</li>
  <li>20th The President is inaugurated in January. Congress begins to meet in January. (1933).</li>
  <li>21st Alcohol is legal. <strong>Each state can make laws</strong> about making, selling, and drinking alcohol. (1933).</li>
  <li>22nd The President <strong>cannot serve for more than two terms</strong>. (1951).</li>
</ul>

<hr />

<p>The <a href="https://openstax.org/books/american-government-3e/pages/2-introduction">textbook</a>’s take on the Constitution:</p>

<ul>
  <li>
    <p>should <em>not</em> be seen as a group of like-minded men aligned in their lofty thinking regarding rights and freedoms; you should not refrain from proposing changes just because you admire the <em>longevity</em></p>
  </li>
  <li>
    <p>was designed largely out of necessity following the failure of the first revolutionary government, and it featured a series of <mark>pragmatic compromises</mark> among its disparate stakeholders. It</p>
  </li>
</ul>

<h3 id="origin-of-the-us-constitution">Origin of the US Constitution</h3>

<blockquote>
  <p>How did the Constitution come about?</p>
</blockquote>

<p>The most significant contributions of <mark>Locke</mark>, a seventeenth-century English philosopher, were his ideas regarding the relationship between <strong>government</strong> and <strong>natural rights</strong>, which were believed to be God-given rights to life, liberty, and property.</p>

<p><img src="https://openstax.org/apps/archive/20221219.191545/resources/142952f76fb24a99b4f7847bb319209606c14d58" alt="A painting shows John Locke." style="zoom:50%;" /></p>

<p>for example:</p>

<ul>
  <li>The English Bill of Rights, heavily influenced by Locke’s ideas, enumerated the rights of English citizens and explicitly guaranteed rights to life, liberty, and property.</li>
  <li>Perhaps the most important of Locke’s ideas was regarding the <strong>origins and purpose of government</strong>.
    <ul>
      <li>Most Europeans of the time believed the institution of monarchy had been created by God, and kings and queens had been divinely appointed to rule. Locke, however, theorized that <em>human beings</em>, not God, had created government.</li>
      <li>Locked believed in <strong>social contract</strong>: people sacrificed a small portion of their freedom and consented to be ruled in exchange for the government’s protection of their lives, liberty, and property.</li>
    </ul>
  </li>
  <li>The desire to limit the power of government is closely related to the belief that people should govern themselves $\iff$ the idea of representative government (people vote for choosing representatives)</li>
</ul>

<hr />

<p>A brief history, starting with <strong>Pre-revolutionary Period</strong></p>

<ol>
  <li><mark>US colonists</mark> lived under the rule of the British government for more than a century</li>
  <li>In 1763, Seven Years War between Great Britain and France came to an end.
    <ul>
      <li>Even though US colonists fought alone side British, they were <em>forbidden to purchase land or settle</em> west of the Appalachian Mountains (belonged to the French).</li>
      <li>To raise revenue for post-war, British also imposed of <em>direct taxes</em>: taxes imposed on individuals, yet North American colonists were <em>not allowed to elect representatives</em> to the British Parliament who made this law.</li>
      <li>other similar regulations include Stamp Act (1765), which required that almost all paper goods, such as diplomas, land deeds, contracts, and newspapers, have revenue stamps placed on them; and Townshend Acts (1767), which imposed taxes on many everyday objects such as glass, tea, and paint.</li>
    </ul>
  </li>
  <li>In 1768, US colonists decided to <em>boycott</em> British goods as a mean to show dissent. The British then sent a warship to the city in 1768.</li>
  <li>on the evening of March 5, 1770, an altercation erupted outside the customs house, and soldiers opened fire on the crowd, killing five colonists and injuring six others. <strong>Boston Massacre</strong></li>
  <li>more resistance in 1773, such as <strong>Boston’s Tea Party</strong>, to threw its cargo of tea, owned by the British East India Company, into the water to protest British policies.</li>
  <li>In 1774, British responded by passing a series of laws called the Coercive Acts, intended to punish Boston for leading resistance
    <ul>
      <li>virtually <strong>abolished</strong> town meetings in Massachusetts and otherwise interfered with the colony’s ability to govern itself.</li>
      <li>This assault on Massachusetts and its economy enraged people throughout the colonies, and delegates from all the colonies except Georgia formed the <strong>First Continental Congress</strong></li>
    </ul>
  </li>
  <li>On July 2, 1776, Congress declared American independence from Britain and two days later signed the <strong>Declaration of Independence</strong>.
    <ul>
      <li>drafted by <strong>Thomas Jefferson</strong>, basically on the belief that “God, he wrote, had given everyone the rights of life, liberty, and the pursuit of happiness. People had created governments to protect these rights and consented to be governed by them so long as government functioned as intended.”</li>
    </ul>
  </li>
</ol>

<p><strong>Articles of Confederation</strong>: basically having</p>

<ul>
  <li>no executive or judicial branches</li>
  <li>unicameral legislature with equal representation</li>
  <li>limited central government powers, state responsible for implementing central laws</li>
</ul>

<ol>
  <li>
    <p>aimed to create a new government strong enough to win the country’s independence but <em>not so powerful that it would deprive people</em>. Thus, a <strong>confederation</strong> was created—an entity in which independent, self-governing states form a union</p>
  </li>
  <li>
    <p>The final draft of the <strong>Articles of Confederation</strong>, which formed the basis of the new nation’s government, was accepted by Congress in November 1777. However, as you will soon see, this faced problem of establishing a <em>(too) weak central government</em> that was unable to fund itself, regulate trade, or enforce laws.</p>
  </li>
  <li>
    <p>However, this soon people realized that the Articles had created a central government <strong>too weak to function effectively.</strong></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: left">Weakness of the Articles of Confederation</th>
          <th style="text-align: left">Why Was This a Problem?</th>
          <th>Collective Action Problem?</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">The national government could not impose taxes on citizens. It could only request money from the states.</td>
          <td style="text-align: left">Requests for money were usually not honored. As a result, the national government did not have money to <strong>pay for national defense</strong> or fulfill its other responsibilities.</td>
          <td><strong>free-rider</strong> = central government provides some services, but in return you do not give anything back</td>
        </tr>
        <tr>
          <td style="text-align: left">The national government could not regulate foreign trade or interstate commerce.</td>
          <td style="text-align: left">The government could not prevent <strong>foreign countries</strong> from hurting American competitors by shipping inexpensive products to the United States. It could not prevent states from passing laws that interfered with domestic trade.</td>
          <td><strong>coordination problem</strong> = absent of a single policy for people, hence people act on their own plans</td>
        </tr>
        <tr>
          <td style="text-align: left">The national government could not raise an army. It had to request the states to send men.</td>
          <td style="text-align: left">State governments could choose not to honor Congress’s request for troops. This would make it <strong>hard to defend</strong> the nation.</td>
          <td><strong>free-rider</strong>, etc.</td>
        </tr>
        <tr>
          <td style="text-align: left">Each state had only one vote in Congress regardless of its size.</td>
          <td style="text-align: left">Populous states were <strong>less well represented</strong>.</td>
          <td> </td>
        </tr>
        <tr>
          <td style="text-align: left">The Articles could not be changed without a unanimous vote to do so.</td>
          <td style="text-align: left">Problems with the Articles <strong>could not be easily fixed</strong>.</td>
          <td> </td>
        </tr>
        <tr>
          <td style="text-align: left">There was no national judicial system.</td>
          <td style="text-align: left">Judiciaries are important enforcers of national government power.</td>
          <td> </td>
        </tr>
      </tbody>
    </table>

    <p>Additional collective action problems unaddressed:</p>
    <ul>
      <li>no central currency (coordination problem)</li>
    </ul>
  </li>
  <li>
    <p>In 1786, <strong>Shays’ Rebellion</strong> essentially acted as the trigger for people to find a solution and resolve problems related to commerce, members of Congress called for a revision of the Articles of Confederation.</p>

    <ul>
      <li>Led by Daniel Shays, the heavily indebted farmers marched to a local courthouse demanding relief.</li>
      <li>the incident panicked the governor of Massachusetts, who called upon the national government for assistance.</li>
      <li>However, with no power to raise an army, the government had <em>no troops at its disposal</em>.</li>
    </ul>
  </li>
</ol>

<p><strong>The development of the Constitutions</strong></p>

<blockquote>
  <p>Can be seen as an approach to <strong>solve collective action problems</strong> evident under Articles of Confederation, with a central government being too weak.</p>
</blockquote>

<p>An interesting side note when looking at the debate between those large and small states: <em>Who has the most power in bargaining situation, where agreement is necessary for creation of collective good?</em></p>

<ul>
  <li>a state whose presence for this creation of collective good is <strong>very important</strong>, i.e. will hurt a lot if they decided to drop out</li>
  <li>basically, it depends on the payoff if the agreement is made/fails
    <ul>
      <li>without which: small states more vulnerable to attacks</li>
      <li>with which: large states benefit more (e.g. economically) from stability</li>
    </ul>
  </li>
</ul>

<ol>
  <li>
    <p>Because the shortcomings of the Articles of Confederation proved impossible to overcome, the convention that met in Philadelphia in <strong>1787</strong> decided to create an <strong>entirely new government</strong>.</p>
  </li>
  <li>
    <p>There, a few major points of contention among fifty-five delegates as Philedelphia was</p>

    <ul>
      <li><strong>Small States vs. Large States</strong>: each state one vote (New Jersey Plan) or based on population size (Virginia Plan)?
        <ul>
          <li><strong>Virginia Plan</strong>: preferred by large states and nationalists
            <ul>
              <li>bicameral legislature</li>
              <li>representation based on population</li>
              <li>national government could make any law necessary</li>
            </ul>
          </li>
          <li><strong>New Jersey Plan:</strong>
            <ul>
              <li>unicameral legislature</li>
              <li>equal representation of all states</li>
              <li>limited national government authority, but power of do direct taxation</li>
            </ul>
          </li>
          <li>e.g. still relevant in debate today, whether representation should be proportional to <em>citizen population</em> or <em>just population</em></li>
        </ul>
      </li>
      <li><strong>Slavery and Freedom</strong>: Although some southerners shared similar sentiments, none of the southern states had abolished slavery and none wanted the Constitution to interfere with the institution.</li>
      <li><strong>Federal Supremacy v.s. State Supremacy</strong>: favored a strong national government (necessary for the survival and efficient functioning of the new nation) and those who favored limiting its powers and allowing states to govern
        <ul>
          <li>e.g. overturn of Roe v Wade today.</li>
          <li>e.g. president passing executive orders = president making policy change <em>independent of legislature</em></li>
        </ul>
      </li>
      <li><strong>Individual Liberty v.s. Social Stability</strong> <em>guarantee</em> the rights of life, liberty, and property v.s. more important for the national government to maintain order, and this might require it to <em>limit personal liberty at times</em>.</li>
    </ul>
  </li>
  <li>
    <p>Finally in <mark>1787 September</mark>—after compromising many times—they had worked out a new blueprint for the nation. A overview of US Constitutions have been provided before, and here are the solutions to those major points of contention:</p>

    <ul>
      <li>
        <p><strong>The Great Compromise</strong>. Congress = Senate + House of Representatives = <strong>Bicameral</strong>. (Senate) Each state, regardless of size, would have two senators, making for equal representation as in the New Jersey Plan. (House of Representatives) Representation in the House would be based on population.</p>

        <ul>
          <li>gives collective veto power to smaller states</li>
        </ul>
      </li>
      <li>
        <p><strong>Three-Fifths Compromise</strong>. slaveholding states were allowed to count all their free population, including free African Americans and 60 percent (three-fifths) of their enslaved population.</p>
      </li>
      <li>
        <p><strong>Separation of Power and Checks and Balances</strong>: the idea is to solve the challenge of increasing the authority of the national government while ensuring that it did not become too powerful</p>

        <ul>
          <li><strong>separation of powers</strong> dividing the national government into three separate branches and assigning different responsibilities to each</li>
          <li><strong>checks and balances</strong> by giving each of three branches of government the power to restrict the actions of the others, thus requiring them to work together.</li>
        </ul>

        <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230125231801019.png" alt="image-20230125231801019" style="zoom:40%;" /></p>
      </li>
      <li>
        <p><strong>The Federal System</strong>: power is divided between the federal (or national) government and the state governments.</p>

        <ul>
          <li>Great or explicit powers, called <strong>enumerated powers</strong>, were granted to the federal government (e.g. declare war)</li>
          <li>All powers not expressly given to the national government, i.e. <strong>reserved powers</strong>, are for the states (e.g. intrastate commerce and marriage)</li>
        </ul>
      </li>
      <li>
        <p>How is president chosen?</p>

        <ul>
          <li>state legislature decide how electors are chosen = the electoral voting system today</li>
          <li>without majority, i.e. electoral college is in deadlock, then House chooses president</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>After drafting, the last task is to <strong>be ratified by 9 out of 13 states</strong> in Article VII, but obviously while some people are happy, there are some who would be opposing it $\implies$ Federalists and Anti-Federalists</p>

    <ul>
      <li><strong>Federalists</strong> supported the Constitution. They tended to be among the elite members of society, e.g. being wealthy</li>
      <li><strong>Anti-Federalists</strong> feared the power of the national government and believed state legislatures, with which they had more contact, could better protect their freedoms.</li>
    </ul>
  </li>
  <li>
    <p>In the end after major persuasion efforts, the last two to sign were the wealthy, populous states of Virginia and New York.</p>

    <ul>
      <li>In Virginia, <mark>George Washington</mark>, who wrote letters to the convention, changed the minds of many.</li>
      <li>In New York, <mark>Alexander Hamilton, James Madison, and John Jay</mark> wrote a series of essays, beginning in 1787, arguing for a strong federal government and support of the Constitution</li>
    </ul>
  </li>
</ol>

<p><strong>Constitutional Change:</strong> One of the strengths they built into the Constitution v.s. prior Articles of Confederation</p>

<ol>
  <li>Having drafted nineteen proposed amendments, <mark>James Madison</mark> submitted them to Congress. only ten were accepted by three-quarters of the state legislatures. In 1791, these first ten amendments were added to the Constitution and became known as the <strong>Bill of Rights</strong>.</li>
  <li>The Bill of Rights was intended to quiet the fears of Anti-Federalists that the Constitution did not adequately protect individual liberties and thus encourage their support of the new national government.</li>
  <li>Other important ones include: the Thirteenth, Fourteenth, and Fifteenth Amendments, ratified at the end of the <strong>Civil War</strong>, changed the lives of African Americans who had been held in <strong>slavery</strong>.</li>
</ol>

<h3 id="political-foundation-of-the-us">Political Foundation of the US</h3>

<blockquote>
  <p><em>Some important terms</em>:</p>

  <ul>
    <li><strong>Tocqueville’s Democracy in America</strong>: America has been most shaped by the unusually free and egalitarian ideas and material conditions that prevailed at its found- ing-captures important truths</li>
    <li><strong>Feudalism</strong>: a system where the relationship in society was derived from the holding of land
      <ul>
        <li>collective ownership and control of the means of production.</li>
        <li>land is controlled by a small group of nobles, who hold power and privileges over the common people</li>
        <li>want a <em>stronger government power</em></li>
      </ul>
    </li>
    <li><strong>Socialism</strong>: means of production, distribution, and exchange should be owned or regulated by the community as a whole</li>
    <li><strong>Bourgeoisie</strong>: the middle class/capitalist class who own most of society’s wealth and means of production</li>
    <li><strong>Egalitarianism</strong>: doctrines are generally characterized by the idea that all humans are equal in <em>fundamental worth or moral status</em>.</li>
    <li><strong>Romanticism</strong>: American Romanticism is a frame of thought that places value on the individual above the group, the <em>subjective response and instinct over objective thought</em>, and emotion over logic.
      <ul>
        <li>Romanticism was a literary, artistic, and philosophical movement that first began in Europe late in the 18th century. American Romanticism developed toward the end of the Romantic movement in Europe.</li>
      </ul>
    </li>
  </ul>
</blockquote>

<ul>
  <li><strong>Previously</strong>, analysts have described American political culture as the preeminent example of <strong>modern liberal democracy</strong>, of government by popular consent with respect for the equal rights of all. Here, the idea is that “<strong>inegalitarian ideologies and conditions</strong> that have shaped the participants and the substance of American politics just as deep”.
    <ul>
      <li>for over 80% of U.S. history, its laws declared most of the population to be ineligible for full American citizenship due to race, nationality, or gender.</li>
      <li>Tocqueville is story is centered on relationships among a minority of Americans (e.g. white), and via reference to economic statuses men have held in Europe</li>
      <li>(<strong>race</strong>) Tocqueville treated “Indians and Negros” as <em>tangents</em> to the American nation = exceptions not considered into discussion</li>
      <li>(<strong>gender inequality</strong>) Tocqueville believes that women should be treated in a distinct sphere of action = making them <em>not civic equivalent</em> of men. e.g. denied of ruling at home or taking most professional offices</li>
    </ul>
  </li>
  <li>The author (smith) then gave a few examples work/authors for excluding/<strong>marginalizing</strong> those problems (i.e. see them as minor/external exceptions to the framework) to pretend <em>egalitarian inclusiveness</em> as the norm for US politics. “None of these mainstream approaches to American politics has given prominence to the racial, ethnic, or gender makeup of the American citizenry, though neither have they wholly avoided those issues.”
    <ul>
      <li>e.g. scholars construct the identities of marginal groups as <em>irrational, passionate, dangerous</em> “others,” both to defend their exploitation and to deny the presence of such qualities in mainstream citizens</li>
      <li>but note that colonial British American pursued practices of racial/gender dominance long before any types of liberal and republican idelogies came to play in America $\implies$<mark>racial/gender inegalitarianism is technically *more rooted*</mark> than egalitarian principles.</li>
      <li>e.g. <strong>Higram’s</strong> book had many ingredients to correct the Tocqueville thesis (e.g. American nativism built on ethnocentric attitudes), but did not compel any major reinterpretation of American politics</li>
      <li>e.g. <strong>Fuchs’s</strong> book contained analysis of exclusive civic cultures of America, but does not discuss exclusion of women $\implies$ tend to omit/minimize excluded groups as every author in the Tocquevillian transition do</li>
    </ul>
  </li>
  <li>Therefore, the author offers a <mark>multiple traditions</mark> view of America: we should not presume US politics are rooted in essentially liberal or democratic values and conditions. Instead, we must analyze America as the ongoing <strong>product of often conflicting multiple traditions</strong>.
    <ul>
      <li>i.e. US culture is shaped by a complex and multiple groups interacting with each other, and is thus a result of <strong>recurring conflicts</strong> amongst the apparently inconsistent combinations of the multiple traditions</li>
      <li>additionally, those conflicts often involve each group trying to “<em>valorize their own traits</em>” while “denigrading those of others”</li>
      <li>e.g. for a long time, there is a “separate but equal” treatment to the <strong>blacks</strong> (e.g. segregation of public school) $\implies$ inequal citizens</li>
      <li>e.g. <mark>Chinese</mark> Exclusion Act in 1882 prohibiting all immigration of Chinese laborers for 10 years; in 1889 Chinese Exclusion Case still upheld requirements for Chinese-American to have certificates of citizenship not required of whites</li>
      <li>e.g. <strong>Women</strong> suffrage passed by Congress only on June 4, 1919</li>
    </ul>
  </li>
</ul>

<h2 id="problems-in-the-us-constitution">Problems in the US Constitution</h2>

<p>“How Democratic Is the American Constitution?” by Robert A. Dahl contains a more <strong>critical view</strong> of the US constitutions</p>

<blockquote>
  <ul>
    <li>
      <p>He argues that the Constitution, as originally written and interpreted, has always had <mark>significant undemocratic features</mark>, and that these have been reinforced by subsequent developments.</p>
    </li>
    <li>
      <p>He also points out that the Constitution has been amended over time to address some of its undemocratic features, but that many others remain.</p>
    </li>
  </ul>
</blockquote>

<p>A few selected quotes/key points he mentioned include:</p>

<ul>
  <li>
    <p>The US constitutions was not that “smartly framed”:</p>

    <ul>
      <li>
        <p>framers’ reliable knowledge about constitutions appropriate to a large representative republic was, at best, meager.</p>
      </li>
      <li>
        <p>The necessity for compromise and the opportunities this gave for coalitions and logrolling meant that the Constitution <em>could not possibly reflect a coherent, unified theory of government</em></p>
      </li>
      <li>
        <p>(On why we got the Senate and House of Representative system) The <strong>solution of equal representation</strong> was not a product of constitutional theory, high principle,or grand design. It was nothing more than a practical outcome of a <strong>hard bargain</strong> (e.g. by Delaware) that its opponents finally agreed to in order to achieve a constitution</p>
      </li>
    </ul>
  </li>
  <li>
    <p><mark>Undemocratic</mark> Elements in the Framers’ Constitution</p>

    <ol>
      <li><strong>Slavery</strong>. First, it neither forbade slavery nor empowered Congress to do so</li>
      <li><strong>Suffrage</strong>. the constitution failed to guarantee the right of suffrage, leaving the qualifications of suffrage to the states $\implies$ It implicitly left in placethe exclusion of half the population—women—as wellas African Americans and Native Americans</li>
      <li><strong>Election of the President</strong>. To ensure president election is insulated from both popular majorities and congressional control, the Framer’s solution is a body of presidential electors <em>composed of men of exceptional wisdom</em> and virtue who would choose the chief executive unswayed by popular opinion $\implies$ was almost immediatelycast into the dustbin of history</li>
      <li><strong>Choosing senators</strong>. senators were to bechosen not by the people but by the <em>state legislatures</em> $\implies$ senators would be <em>less responsive to popular majorities</em> and perhaps more sensitive to the needs of property holders</li>
      <li><strong>Equal representation in the Senate</strong>.  each state was, as we have seen, awarded the same number of senators $\implies$ placed and highly privileged minorities—slaveholders, for example—gained disproportionate power</li>
      <li><strong>Judicial power.</strong> failed to <em>limit</em> the powers of the judiciary to declare as unconstitutional laws (i.e. laws opposing the US constitutions) that is passed by the Congress and signed by president $\implies$judges can then affect law making (even though none would have supported this idea)</li>
      <li><strong>Congressional power</strong>. the powers of Congress were <em>limited</em> in a way that could prevent the federal government from regulating or controlling the economy. Without the power to tax incomes, for example, <em>fiscal policy</em>, not to say measures like Social Security, would be <em>impossible</em>.</li>
    </ol>
  </li>
</ul>

<h2 id="why-these-50-states-land-policy-and-state-formation">Why these 50 States? Land Policy and State Formation</h2>

<p>Some facts at current days:</p>

<ul>
  <li>
    <p>Tension in US constitutional design on representation based on population. What percent of US residents (people physically in the US) do no have voting representations in the House or Senates?</p>

    <ul>
      <li>note that you should count in Commonwealth of Puerto Rico, Guam, US Virgin Islands, American Samoa, etc.</li>
      <li>as a result, $1.6$% of US residents have no voting representation (if they physically move to US mainland, then they can vote)</li>
    </ul>
  </li>
  <li>
    <p>When did the US states became “states”? Red is the earliest, and blue the latest</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">When became States</th>
          <th style="text-align: center">Land Acquisition</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="https://www.ereferencedesk.com/resources/statehood/images/us-states-by-date-of-statehood.png" alt="Statehood Order by Dates: Statehood by Dates" style="zoom: 33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230201164014190.png" alt="image-20230201164014190" style="zoom: 33%;" /></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>How to become an independent state? Being a state gives 2 US senators, and representation in US house proportional to share of total population. Therefore, this could impose <em>high influence on future policy making</em>:</p>

    <ul>
      <li>
        <p>new states <em>cannot</em> be granted different privileges than others</p>
      </li>
      <li>requires passage of bill through House and Senate</li>
      <li>it is formed out of a state, then the state legislature has to agree as well</li>
      <li>as statehood changes the balcen of votes in national legislature, hence can be <em>vetoed</em> by national legislative majority</li>
    </ul>
  </li>
  <li>
    <p>Any current movements to change number of states?</p>

    <ul>
      <li>statehood for DC, PR</li>
      <li>cession from California (e.g. state of Jefferson), OR, also WA, UT, etc, as people feels like large cities dominate politics</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>In this section, we consider the question: <strong>does the selection of these statehood have anything to do with policy making in the federal government?</strong> As you shall see soon, why “states” get to be “states” depends a lot on the motivation of reducing conformity cost when implementing government policies.</p>
</blockquote>

<p>Certain backgrounds on relevant US history:</p>

<ul>
  <li>
    <p>scholarly consensus: US government had little ruling capacity <em>before Civil War</em>. As a result, many federal land policy was used to gain control over territory through <strong>private effort</strong> i.e. cannot govern the large territories they owned, hence encourage private individuals to do it</p>

    <ul>
      <li>controlling territory is expensive and difficult, gov has no resource</li>
      <li>can offer reward (e.g. land) to populations with military expertise</li>
      <li>compact settlement enabled effective territorial control</li>
    </ul>
  </li>
  <li>
    <p>however, while all framers agreed to expand territory, they had different <em>vision</em> what their expansion will look like (starting from 13 states). These ideals can be separated into two schools:</p>

    <ul>
      <li>opposition to presense of non-white</li>
      <li>opposition to non-white people with rights</li>
    </ul>

    <p>as a result, this gives</p>

    <ul>
      <li>justification of ethnic cleansing against indigenous population</li>
      <li>
        <p>justified ensalving subset of population</p>
      </li>
      <li>generated opposition to giving political rights to new territory with non-white majorities</li>
    </ul>
  </li>
  <li>
    <p>obviously for federal government to pass a policy, you need <strong>approvals by many states</strong></p>
  </li>
</ul>

<blockquote>
  <p>As a result, lots of strategies arise to <mark>limit conformity cost</mark> in federal gov policy making:</p>

  <ol>
    <li><strong>limit who has right to participate in decision-making</strong> to ensure preferred outcome: e.g. given statehood until there is a sufficiently large white population
      <ul>
        <li>e.g. gerrymandering, franchise restrictions</li>
        <li>e.g. Treaty of Guadalupe Hidalgo, ended war between US and Mexico. then both northerners and southerners are thinking: “How can we get the most territories, with the <em>fewest</em> addition of people”, i.e. “do <em>not</em> want people of Mexico, either as citizens or subjects,” but only land</li>
      </ul>
    </li>
    <li><strong>prevent policy-making/implementation</strong>: limit (e.g. the number of) alternative options to be in favor of your preferred outcome
      <ul>
        <li>e.g. make a policy impossible to happen: e.g. a government weak enough to prevent a future president to pass a law to end slavery</li>
        <li>e.g. limit a government’s action by limiting its fiscal capacity</li>
      </ul>
    </li>
  </ol>
</blockquote>

<p>And as a result these factors <strong>shaped</strong> which states are recognized, and which ones are not.</p>

<p><em>For Example</em>, then under this theory, ceteris paribus (i.e. “all other things being equal”), how could Washington DC or Puerto Rico become a state?</p>

<ol>
  <li>white majority</li>
  <li>their policy do not fly in the face of the federal government’s vision</li>
</ol>

<h3 id="frymers-notes-on-land-policy">Frymer’s Notes on Land Policy</h3>

<p>From the paper <em>A Rush and a Push and the Land Is Ours”: Territorial Expansion, Land Policy, and U.S. State Formation</em></p>

<blockquote>
  <p>“The importance of federal land policies in securing and incorporating territorial borders illuminates an under-examined mechanism by which developing nation states, even those with limited bureaucratic and military capacity, can successfully <strong>assert power over a vast and difficult geographic terrain</strong>.”</p>
</blockquote>

<p>Some major points are:</p>

<ul>
  <li><strong>land policy</strong> such as granting veterans land in conflicted areas $\implies$ increase settlement there which could not only <strong><em>expand its territory</em></strong> but also better defend (e.g. serve as buffer zone). Most often this includes “shrinking the Indian territory”. Examples include
    <ul>
      <li>The <strong>Indian Removal Act</strong> was signed into law by President Andrew Jackson on May 28, 1830, authorizing the president to grant unsettled lands west of the Mississippi in exchange for Indian lands within existing state borders (actions of the United States during this period would constitute genocide under current-day international law)</li>
      <li><strong>“Advancing compactly”</strong> = settle the land “progressively” with “compact” settlements and a “formidable” barrier before advancing on the frontier</li>
      <li>In 1842, Congress passed the <strong>Armed Occupation Act</strong> providing 160 acres of land to those settlers who were armed and willing to occupy land south of Gainesville, Florida as a way of ending the Second Seminole War.</li>
      <li>The success of the Armed Occupation Act prompted calls to extend the policy to western territories. Legislation was quickly proposed to induce a volunteer force of mounted men to settle the Oregon Territory that at the time was contested between the US, British, and Indian nations</li>
      <li><strong>Preemption Act and Homestead Act</strong> in 1841 and 1862 fostered an “unparalleled rush for land in Illonois”</li>
    </ul>
  </li>
  <li>the <mark>implication</mark> of those land policies is that those “federal land policies enabled an otherwise constrained American government to <strong>assert authority over the direction and pace of expansion and settlement</strong> and to maintain an official fidelity to constitutional principles while <strong>conquering territory</strong>, removing indigenous populations, and <strong>engineering a dominant racial vision</strong> by manufacturing white majorities in lands populated by diverse peoples.”</li>
  <li>However, as the aim is population movement, you shall also compare against the method of <em>forming sizeable government bureaucracies to mobilize population movements</em>
    <ul>
      <li>The results of American conquest are certainly significant, but the boundaries could well have been <strong>far more expansive</strong> had nation builders not been constrained by a small military and a need for manufacturing white majorities.</li>
      <li>the reliance on land policies—as opposed to more conventional coercive forms—enabled a certain amount of <strong>racial diversity to thrive</strong> on the frontier despite a white hegemonic society. This diversity is not just a result of ideological conflicts and multiple orders. but is also institutionally constructed from weaknesses in the capacity of the American state that enabled these pockets of diversity to withstand eradication, particularly on frontier borderlands.</li>
    </ul>
  </li>
</ul>

<hr />

<p>Note that, as mentioned near the end:</p>

<blockquote>
  <p>“Expansions have been fundamentally opposed/restricted by people motivated to <mark>preserve policy control or other privileges</mark>” hints at certain <em>undemocratic</em>/<em>inegalitarian</em> values in US policy-making in the past</p>

  <ul>
    <li>
      <p>Egalitarian ideas are important for self-identification, but not to determine their collective actions</p>
    </li>
    <li>
      <p>longevity of US government is not explained by abstract commitment to democratic principles. E.g. otherwise to be allowed for statehood you wouldn’t need stuff such as white majority, etc, if you are truly egalitarian</p>
    </li>
  </ul>
</blockquote>

<p>This brings back to America’s political Traditions discussed in Section <a href="#Political Foundation of the US">Political Foundation of the US</a>, so that policy makers are not really “rooted with egalitarianism” but rather:</p>

<ul>
  <li>desire of constrain who gets rights in order to <strong><em>achieve their own policy goals</em></strong></li>
  <li>hence, when looking at a policy, you should think about really: where does this come from? Who made it? What do they want to achieve?</li>
</ul>

<h1 id="american-federalism">American Federalism</h1>

<p>The federal design spelled out in the Constitution divides powers between two levels of government—the <strong>states and the federal government</strong>—and creates a mechanism for them to check and balance one another. As an institutional design, federalism both safeguards state interests and creates a strong union led by a capable central government.</p>

<blockquote>
  <p>This section traces the origins, evolution, and functioning of the <mark>American system of federalism</mark>, as well as its advantages and disadvantages for citizens.</p>
</blockquote>

<p>Recall that other “non-federalist” approach include</p>

<p><img src="https://openstax.org/apps/archive/20221219.191545/resources/df7dffd16667f5c2ff8a13c934b26b0dc1afa256" alt="”." style="zoom:50%;" /></p>

<p>for example</p>

<ul>
  <li>countries such as France, Japan, and Sweden are democratic with unitary systems.</li>
  <li>as with confederation $\implies$ weak national government $\implies$ American system in the past $\implies$ it maximizes regional self-rule at the expense of effective national governance.</li>
</ul>

<h2 id="division-of-powers">Division of Powers</h2>

<p>Modern democracies divide governmental power in two general ways:</p>

<ol>
  <li>the first and more common mechanism shares power among three branches of government—the legislature, the executive, and the judiciary.</li>
  <li>the second, federalism, apportions power between two levels of government: national and sub-national.</li>
</ol>

<p>Some, like the <mark>United States</mark>, use a <strong>combination</strong> of both structures.</p>

<ul>
  <li>US has a sub-national gov = state gov, and national gov = federal gov</li>
  <li>In both level of gov, there are separation of power
    <ul>
      <li>the <em>President</em> assumes executive power, <em>Congress</em> exercises legislative powers, and the <em>federal courts</em> (e.g., U.S. district courts, appellate courts, and the Supreme Court) assume judicial powers.</li>
      <li>In each of the fifty states, a <em>governor</em> assumes executive authority, a <em>state legislature</em> makes laws, and <em>state-level courts</em> assume judicial powers</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>Federalism</strong> is an institutional arrangement that creates two relatively autonomous levels of government, each possessing the capacity to act directly on behalf of the people. Although many federalism vary by design, they share a lot of key similarities.</p>

  <ul>
    <li>each unit of government has its own set of officials and independent authority</li>
    <li>existence and authority of each level is protected by a constitution</li>
    <li>each unit of government can <mark>pressure others</mark></li>
  </ul>
</blockquote>

<ol>
  <li>First, all federal systems establish two levels of government, with both levels being elected by the people and <strong>each level assigned different functions</strong>. (e.g. federal gov cares more about national affairs, whereas state gov cares more about matters lie within their region)</li>
  <li>National <em>constitution</em> that cannot be changed without the <strong>substantial consent of <em>sub-national</em> governments</strong>. In the US, approval needs two-thirds of both houses of Congress and three-fourths of the states (supermajority)</li>
  <li>allocate legislative, judicial, and executive authority to the two levels of government in such a way as to ensure each level <strong>some degree of autonomy from the other</strong>. (e.g. state gov has its own governor, legislature, and court)</li>
  <li><strong>national courts</strong> commonly resolve disputes between levels and departments of government.</li>
  <li>Finally, <strong><em>sub-national</em> governments are always represented in the upper house</strong> of the national legislature, enabling regional interests to influence national lawmaking. In the US, the Senate functions as a territorial body by representing the fifty states (those are not the same as state governors or state senates)</li>
</ol>

<blockquote>
  <p>Why these different levels in this Federal Design? Mechanism to <strong>minimize conformity costs</strong></p>

  <ul>
    <li>people being represented under the same level of government (e.g. states) <em>wanted the same thing</em> $\implies$ lower interstate conformity cost
      <ul>
        <li>more homogeneous among people being represented</li>
      </ul>
    </li>
    <li>constitution excluding things that might prevent unification/uniform decision</li>
  </ul>
</blockquote>

<p>And again</p>

<blockquote>
  <p><strong>Collective action framework</strong> helps us to see how political institution make certain things more (or less) possible</p>

  <ul>
    <li>institutions can solve coordination or free rider problems</li>
    <li>but they could also <em>not solve</em> certain problems, i.e. so that having an institution could make that harder to happen
      <ul>
        <li>for example, filibuster = use prolonged speechmaking to delay or prevent a vote on a bill.</li>
        <li>The purpose of the filibuster is to prevent the majority from passing a bill that the minority opposes $\implies$ the <em>minority</em> party can use this tactic to try to <em>block the passage of a bill that they oppose</em> $\implies$ a single senator could veto $\implies$ <strong>large conformity costs</strong> as majority preference is vetoed</li>
        <li>poorly designed to solve problems that aren’t represented by eligible voters</li>
      </ul>
    </li>
  </ul>
</blockquote>

<h3 id="federalism-and-constitutions">Federalism and Constitutions</h3>

<p>We have briefly discussed the basics of US constitutions in section <a href="#The US Constitution Basics">The US Constitution Basics</a>. Here we take a more detailed look to see how those articles are related to the US federalist system.</p>

<blockquote>
  <p>In general, some <strong>delineate</strong> the scope of national and state power, while others <strong>restrict</strong> it (e.g. Bill of Rights). The remaining provisions shape relationships among the states and <strong>between</strong> the states and the federal government.</p>

  <ul>
    <li>allow for certain collective actions to be more easily carried out</li>
  </ul>
</blockquote>

<ul>
  <li>
    <p><strong>enumerated</strong> powers of the <strong>national legislature</strong> are found in Article I, Section 8.</p>

    <ul>
      <li>e.g. <strong>elastic clause</strong> or the <em>necessary and proper clause</em>, enables Congress “to make <em>all Laws which shall be necessary and proper</em> for carrying” out its constitutional responsibilities. (this is a rather open construction, hence it did enable national gov to expand authority beyond)</li>
      <li>e.g. <strong>commerce clause</strong> is a provision in the U.S. Constitution (Article I, Section 8, Clause 3) that gives Congress the power “to regulate Commerce with foreign Nations, and among the several States, and with the Indian Tribes.” While this can be interpreted broadly as Congress have a broad power to regulate commerce, the Court has also imposed some limitations on Congress’s power, such as limiting to interstate activity</li>
      <li>establishment of new states</li>
      <li>e.g. <strong>supremacy clause</strong> (see below as well), basically federal laws supersedes all state laws</li>
    </ul>
  </li>
  <li>
    <p>Article I, Sections 9 and 10, along with several constitutional amendments, lay out the <strong>restrictions on federal and state authority</strong>.</p>

    <ul>
      <li>e.g. prevents measures that cause the deprivation of personal liberty (such as slavery, imprisonment without justification)</li>
      <li>e.g. Bill of Rights, including freedom to speech, local police searching you without a warrant</li>
    </ul>
  </li>
  <li>
    <p><strong>supremacy clause</strong> in Article VI of the Constitution regulates <strong>relationships between the federal and state governments</strong> by declaring that the Constitution and federal law are the supreme law of the land.</p>

    <ul>
      <li>however, enforcement is not always that simple.</li>
      <li>In the case of marijuana use, which the federal government defines to be <em>illegal</em>, thirty-six states and the District of Columbia have nevertheless established medical marijuana laws, others have <em>decriminalized its recreational use</em>, and fifteen states have completely <em>legalized</em> it. The federal government could act in this area if it wanted to.</li>
    </ul>
  </li>
  <li>
    <p>powers of the <strong>state governments</strong> were never listed in the original Constitution, but the Tenth Amendment <strong>affirms the states’ reserved powers</strong></p>

    <ul>
      <li>“The powers not delegated to the United States by the Constitution, nor prohibited by it to the States, are reserved to the States respectively, or to the people.”</li>
      <li>most important include police powers = establish mechanism to <em>police</em>, such as rules; and provision of public services; system of local government = <em>how local gov should work</em>; and regulation of intra-state commerce</li>
      <li>however, some reserved powers are no longer exclusively within state domain, e.g. boundary between intrastate and interstate commerce has become indefinable as a result of broad interpretation of the commerce clause.</li>
    </ul>

    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230202164724977.png" alt="image-20230202164724977" style="zoom:50%;" /></p>
  </li>
  <li>
    <p>Various constitutional provisions <strong>govern state-to-state relations</strong>.</p>

    <ul>
      <li>Article IV, Section 1, referred to as the <strong>full faith and credit clause</strong> or the <em>comity clause</em>, requires the states to accept court decisions, public acts, and contracts of other states. Thus, an adoption certificate or driver’s license issued in one state is valid in any other state.</li>
      <li><strong>privileges and immunities clause</strong> of Article IV asserts that states are prohibited from discriminating against out-of-staters by denying them such guarantees as access to courts, legal protection, property rights, and travel rights. The clause has not been interpreted to mean there cannot be <em>any</em> difference in the way a state treats residents and non-residents. For example, individuals cannot vote in a state in which they do not reside.</li>
    </ul>
  </li>
  <li>
    <p>Some areas <strong>both state and federal governments</strong> can regulate</p>

    <ul>
      <li>militia, both state and federal</li>
      <li>states may act in a federal area, so long as it does not contradict federal law</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>In a sense, Constitution basically provides a framework + freedom for the institutions to work out. Then, people can use whatever levers at their disposal to change a policy in a state/entire United States.</p>
</blockquote>

<p>However, there are “governments” that are missing from this:</p>

<ul>
  <li>local governments has no status in federal constitution
    <ul>
      <li>are granted power by <strong>states</strong> (e.g. local establish police department, but state could take over if it wants, e.g. due to corruption)</li>
      <li>so people say local gov are “creature of the states”</li>
    </ul>
  </li>
  <li>in many states, there is a the concept of “home rule” for local governments
    <ul>
      <li>provisions in many <strong>state constitution</strong> <em>limit action in certain areas</em> of local government</li>
      <li>this must be specifically conferred, in practice given to most larger cities
        <ul>
          <li>e.g. city of Baffalo is allowed to establish police academy</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="distribution-of-finances">Distribution of Finances</h3>

<p>Where do national, state, and local government get their money from? A graph below in 2018/2020 illustrates some high level info:</p>

<p><img src="https://openstax.org/apps/archive/20221219.191545/resources/054b305607c99d0a3beb557239a4b7a7d57892bc" style="zoom:50%;" /></p>

<ul>
  <li>for federal government, most of the revenue comes from <strong>income taxes</strong> (includes all kinds of income, paid by you) and <strong>payroll taxes</strong> (includes your payroll, paid by both employer and employee)</li>
  <li>For local governments the <strong>property tax</strong>, a levy on residential and commercial real estate, was the most important source of tax revenue</li>
</ul>

<p>How are those money spent?</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Federal Spending</th>
      <th style="text-align: center">State and Local</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://openstax.org/apps/archive/20221219.191545/resources/e6c3bfa70d0376658434af0fc26ea87e8de7f31d" alt="." style="zoom:40%;" /></td>
      <td style="text-align: center"><img src="https://openstax.org/apps/archive/20221219.191545/resources/bc79aaf6905e8737edba9d131a249cba4b39654e" alt="" style="zoom: 33%;" /></td>
    </tr>
  </tbody>
</table>

<ul>
  <li>A look at the federal budget in 2019 shows that the three largest spending categories were <strong>Social Security</strong>; <strong>Medicare</strong>, Medicaid, the Children’s Health Insurance Program; and <strong>defense and international security assistance</strong> (18 percent) $\iff$ Constitution assigns the federal government various powers that allow it to <em>affect the nation as a whole</em>.</li>
  <li>for local and state, we see that <strong>educational</strong> expenditures constitute a major category for both; state also allocate comparatively more funds to public welfare programs, such as <strong>health care, income support, and highways</strong>.</li>
</ul>

<blockquote>
  <p>Note that one interesting point here is about “free-rider problem”, since grants are given to states but <em>come from taxes states collect</em>, then a state can impose the lowest amount of tax and still get grants/findings from government.</p>
</blockquote>

<h2 id="the-evolution-of-american-federalism">The Evolution of American Federalism</h2>

<p>How did US Federalism work in real life?</p>

<blockquote>
  <p>Since the constitution does <mark>not</mark> specify the precise ruling of states and federal gov, this has led to</p>

  <ul>
    <li>
      <p>several clashes between national gov and state gov</p>
    </li>
    <li>
      <p>changes in the configuration of federalism over time that capture distinct balances between state and federal authority.</p>
    </li>
  </ul>
</blockquote>

<p>Examples of national gov v.s. state gov include:</p>

<ul>
  <li>establishment of the Bank of the United States, and are <strong>states</strong> allowed to <strong>tax federal property (e.g. that bank)</strong>?
    <ul>
      <li>In <em>McCulloch v. Maryland</em>, Chief Justice John Marshall argued that Congress could establish “all means which are appropriate” to fulfill “the legitimate ends” of the Constitution.</li>
      <li>therefore, state (in many cases) cannot tax national institutions as “the power to tax is the power to destroy.”</li>
    </ul>
  </li>
  <li>commerce clause of Article I, Section 8; specifically, it had to determine whether the <strong>federal government had the sole authority to regulate the licensing of steamboats</strong> operating between New York and New Jersey.
    <ul>
      <li>in the end, federal law trumped the New York State license-monopoly law</li>
      <li>As Marshall pointed out, “the acts of New York must yield to the law of Congress.”</li>
    </ul>
  </li>
  <li>what about doctrine of <strong>nullification</strong>—that states had the right to reject national laws they deemed unconstitutional.
    <ul>
      <li>ultimate showdown between national and state authority came during the Civil War</li>
      <li>pro-state: Supreme Court ruled that the national government <em>lacked</em> the authority to ban slavery in the territories $\implies$ Civil War</li>
      <li>The defeat of the South had a huge impact on the balance of power between the states and the national government.
        <ol>
          <li>First, the Union victory put an <strong>end to the right of states to secede and to challenge</strong> legitimate national laws.</li>
          <li>Second, Congress imposed several conditions for readmitting former Confederate states into the Union; among them was ratification of the Fourteenth and Fifteenth Amendments.</li>
        </ol>
      </li>
      <li>In sum, after the Civil War the power balance <strong>shifted toward the national government</strong>.</li>
    </ul>
  </li>
</ul>

<p>In sum, With the exception of the Civil War, the Supreme Court settled the power struggles between the states and national government. From a historical perspective, the national supremacy principle introduced during this period did not so much narrow the states’ scope of constitutional authority as restrict their encroachment on national powers.</p>

<h3 id="dual-cooperative-and-new-federalism">Dual, Cooperative, and New Federalism</h3>

<blockquote>
  <p><strong>Dual federalism</strong>, the states and national government exercise exclusive authority in <em>distinctly delineated spheres</em> of jurisdiction, i.e. limited only to perform within the enumerated powers. As a result, state and gov are like “equal” players in politics, hence dual.</p>

  <p>This happened in the late <strong>1870s</strong>, motivated mainly by:</p>

  <ul>
    <li>
      <p>several Supreme Court rulings blocked attempts by both state and federal governments to step outside their jurisdictional boundaries.</p>
    </li>
    <li>
      <p>prevailing economic philosophy at the time <em>loathed government interference</em> in the process of industrial development.</p>
    </li>
  </ul>

  <p>but was dealt a legal blow in 1895 and is no longer used.</p>
</blockquote>

<p>In the late 1870s, industrialization changed the socioeconomic landscape of the United States. One of its adverse effects was the <strong>concentration of market power</strong> $\implies$ lead to several new issues to federal ruling</p>

<ul>
  <li>there was no national regulatory supervision to ensure fairness in market practices, <mark>collusive behavior among powerful firms emerged</mark> in several industries. e.g. anti-competitive practices in the railroad industry.</li>
  <li>Congress passed the Interstate Commerce Act in 1887, which created the Interstate Commerce Commission; then three years later, this is broarden by <strong>Sherman Antitrust Act of 1890</strong>, which made it <strong>illegal to monopolize or attempt to monopolize</strong> and conspire in restraining commerce</li>
  <li>In 1895, in <em>United States v. E. C. Knight</em>, the Supreme Court ruled that the national government <strong>lacked the authority to regulate manufacturing</strong>, arguing that the national government’s regulatory authority applied only to commercial activities. (If manufacturing activities fell within the purview of the commerce clause of the Constitution, then “comparatively little of business operations would be left for state control,” the court argued.)</li>
</ul>

<p>However, things start to change in <mark>Great Depression</mark> of the 1930s, which brought economic hardships the nation had never witnessed before</p>

<blockquote>
  <p><strong>Cooperative federalism</strong> was born of necessity and lasted well into the twentieth century as the national and state governments each found it beneficial. Under this model, both levels of government <strong>coordinated their actions to solve national problems</strong>, such as the Great Depression and the civil rights struggle of the following decades.</p>

  <ul>
    <li>federal gov can attempt to intervene in all areas of local/public policy, not limited to their enumerated powers</li>
    <li>layers of government do not coerce each other, but <em>national can take leadership role</em> (i.e. coerce)</li>
    <li>federal resources give it an upper hand, in practice</li>
    <li>federal government can influence through <mark>carrots and sticks</mark> (see <a href="#Grant and Mandates">Grant and Mandates</a>)</li>
  </ul>

  <p>the more dominant in 1932/37 - present.</p>
</blockquote>

<p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230208162212758.png" alt="image-20230208162212758" style="zoom: 25%;" /></p>

<p>Essentially there is now a <strong>broadening of federal powers</strong> in concurrent and state policy domains, it is also the era of a <strong>deepening coordination</strong> between the states and the federal government in Washington.</p>

<ul>
  <li>Before the Great Depression, the government offered little in terms of financial aid, social benefits, and economic rights. After the New Deal, it provided old-age pensions (Social Security), unemployment insurance, agricultural subsidies, protections for organizing in the workplace</li>
  <li>The unemployment insurance program, also created by the <strong>Social Security Act</strong>, requires states to provide jobless benefits, but it allows them significant latitude to decide the level of tax to impose on businesses</li>
  <li>coordination between state and national gov is clearest in the social welfare and social insurance programs created during the New Deal and Great Society eras, most of which are <strong>administered by both state and federal authorities and are jointly funded</strong>.</li>
</ul>

<p>Thus, the era of cooperative federalism left two lasting attributes on federalism in the United States:</p>

<ol>
  <li><strong>nationalization of politics</strong> emerged as federal legislative activities were aimed at addressing problem such as <em>marketplace inefficiencies</em>, etc $\implies$ again federal governments gain more policy making power</li>
  <li><strong>flexibility</strong> that states and local authorities were given in the implementation of federal social welfare programs $\implies$ cross-state differences in the levels of benefits and coverage (not to confuse with “full faith and credit clause”)</li>
</ol>

<blockquote>
  <p><strong>New federalism</strong> is based on the idea to <em>restore states’ prominence in policy areas</em> into which the federal government had moved in the past. It is also based on the belief that the decentralization of policies enhances administrative efficiency, reduces overall public spending, and improves policy outcomes.</p>
</blockquote>

<p>The most prominent figure championing this was perhaps Ronald Reagan, along with several efforts by the Supreme Court</p>

<ul>
  <li>
    <p>The election of Ronald Reagan heralded the advent of a “<mark>devolution</mark> revolution” in U.S. federalism, in which the president pledged to return authority to the states according to the Constitution.</p>
  </li>
  <li>in United States v. Lopez, the court struck down the Gun-Free School Zones Act of 1990, which banned gun possession in school zones. It argued that the regulation in question did not “substantively affect interstate commerce” $\implies$ gives this ruling back to state</li>
  <li>However, many would say that the years since the 9/11 attacks have swung the pendulum back in the direction of central federal power.</li>
</ul>

<blockquote>
  <p>Note that it is important <mark>not</mark> to see these systems as “permanently replacing” each other. Each tend to leave some footprints in their succeeding system, and hence it is best to see this as an “evolution process” $\implies$ the combined effect of all of them is more important.</p>
</blockquote>

<h2 id="grant-and-mandates">Grant and Mandates</h2>

<p>The national government’s ability to achieve its objectives often requires the <strong>participation of state and local governments.</strong></p>

<blockquote>
  <p>Intergovernmental grants offer positive financial inducements to get states to work toward selected national goals.</p>

  <ul>
    <li>A <strong>grant</strong> is commonly likened to a “carrot” to the extent that it is designed to entice the recipient to do something.</li>
    <li><strong>Mandates</strong> are typically backed by the threat of penalties for non-compliance and provide little to no compensation for the costs of implementation. Thus, a mandate is commonly likened to a “stick.”</li>
  </ul>

  <p>the revenue used for grants are offered through taxing and spending powers</p>
</blockquote>

<p>In the past, examples of grants include “land grants” e.g. University of Delaware, are land-grant institutions because their campuses were built on land donated by the federal government. But today, grants have become a bit more complicated system</p>

<ul>
  <li><strong>Categorical grants</strong> are federal transfers formulated to limit recipients’ discretion in the use of funds and subject them to strict administrative criteria that guide project selection, performance, and financial oversight, among other things. Medicaid and the food stamp program are examples of categorical grants.
    <ul>
      <li>e.g. establishment of criminal justice at local level was funded by federal gov in the past.</li>
    </ul>
  </li>
  <li><strong>Block grants</strong> come with less stringent federal administrative conditions and provide recipients more flexibility over how to spend grant funds. Example include Workforce Investment Act program, which help youths and adults obtain skill sets that will lead to better-paying jobs</li>
</ul>

<blockquote>
  <p>Grant money can change political calculus (e.g. Medicaid: give extra money to extend health insurance to people otherwise inapplicable. Some states took it and hence changed their policy, some did not.)</p>
</blockquote>

<p>However, the national government has <mark>greatly preferred using categorical grants</mark> to transfer funds to state and local authorities because</p>

<ol>
  <li>this type of grant gives them <strong>more control and discretion</strong> in how the money is spent.</li>
  <li>elected officials who sponsor these grants can <strong>take credit</strong> for their positive outcomes</li>
  <li>block grants lack mechanisms to hold state and local administrators <strong>accountable</strong> for outcomes</li>
  <li>once categorical grants have been established, vested interests in Congress and the federal bureaucracy seek to <strong>preserve</strong> them</li>
</ol>

<p>Block grants have been championed for their <mark>cost-cutting effects</mark> $\implies$ placing a ceiling on funding</p>

<ul>
  <li>By eliminating uncapped federal funding, the national government can reverse the escalating costs of federal grant programs.</li>
  <li>Paul Ryan (R-WI), former chair of the House Budget Committee estimated one could save the federal government upwards of $732 billion over ten years if Medicaid is converted to block grant</li>
</ul>

<hr />

<blockquote>
  <p><strong>Unfunded mandates</strong> are federal laws and regulations that impose obligations on state and local governments <em>without fully compensating them for the administrative costs they incur</em>.</p>

  <p>Penalty of non-compliant often includes either a) threatens civil and criminal penalties for state and local authorities b) suspension of federal grant, or c) a combination of both.</p>
</blockquote>

<p>This is as bad as it sounds, but it is difficult to restrict the temptation of not using it:</p>

<ul>
  <li>The widespread use of federal mandates in the 1970s and 1980s provoked a backlash among state and local authorities, which culminated in the <strong>Unfunded Mandates Reform Act (UMRA)</strong> in 1995. However, since the act’s implementation, states and local authorities have obtained limited relief.</li>
  <li><strong>Real ID Act</strong> of 2005, a federal law designed to beef up homeland security by replacing driver’s license and identification cards (DI/ID) with standardized machine-readable cards. However, while the cost to states of re-issuing DL/IDs is estimated to be $11 billion, the government only reimburse a small portion of the cost. As a result, since 2016 and only thirty-eight were in full compliance with Real ID as of December 2018.</li>
  <li>other examples: National Voter Registration Act.</li>
</ul>

<p>The continued use of unfunded mandates clearly <mark>contradicts new federalism’s call</mark> for giving states and local governments more flexibility in carrying out national goals. As a result, there have been more instances of confrontational interactions between the states and the federal government.</p>

<hr />

<blockquote>
  <p><strong>Preemption</strong>: federal law that assets national government control over an area. Intent is to limit state government authority, hence many of them are also litigated in courts.</p>
</blockquote>

<p>Examples include</p>

<ul>
  <li>recently, over the issue of abortion</li>
  <li>Defensive of Marriage Act (1996) where federal govt took over</li>
</ul>

<h3 id="competitive-federalism-today">Competitive Federalism Today</h3>

<p>One aspect of competitive federalism today is that some policy issues, such as immigration and the marital rights of LGBTQ people, have been redefined as the <strong>roles that states and the federal government play in them have changed</strong> $\iff$ both state and federal government can influence each other.</p>

<p><strong>Contending Issues</strong>: In sum, as the immigration and marriage equality examples illustrate, constitutional disputes have arisen as states and the federal government have sought to <mark>reposition themselves on certain policy issues</mark>, disputes that the federal courts have had to sort out.</p>

<ul>
  <li>before, it was understood that the federal government handled immigration and states determined the legality of marriage.</li>
  <li>Since the late 1990s, <strong>states</strong> have asserted a right to make <strong>immigration policy</strong> on the grounds that they are enforcing, not supplanting, the nation’s immigration laws.
    <ul>
      <li>In 2005, twenty-five states had enacted a total of thirty-nine laws related to immigration;</li>
      <li>In 2012, in <em>Arizona v. United States</em>, the Supreme Court affirmed <strong>federal supremacy on immigration</strong>, as Arizona passed Senate Bill 1070, which sought to make it so difficult for undocumented immigrants to live in the state that they would return to their native country</li>
    </ul>
  </li>
  <li>By passing the Defense of Marriage Act (DOMA) in 1996, the <strong>federal government</strong> stepped into policy making on <strong>marriage</strong>.
    <ul>
      <li>DOMA considered denying same-sex couples from various federal provisions and benefits—such as the right to file joint tax returns and receive Social Security survivor benefits.</li>
      <li>In <em>United States v. Windsor</em>, the Supreme Court changed the dynamic established by DOMA by ruling that the federal government had no authority to define marriage (i.e. laws cannot discriminate between same-sex and different-sex couples based on the equal protection clause of the Fourteenth Amendment)</li>
    </ul>
  </li>
</ul>

<p><strong>Strategizing about new issues</strong>: By creating <mark>two institutional access points</mark>—the federal and state governments—the U.S. federal system enables interest groups such as MADD to strategize about how best to achieve their policy objectives.</p>

<ul>
  <li>Mothers Against Drunk Driving (MADD) was established in 1980 by a woman whose thirteen-year-old daughter had been killed by a drunk driver, and they aim to raise the drinking age and impose tougher penalties
    <ul>
      <li>tried lobbying <strong>state</strong> legislators, but did not succeed</li>
      <li>redirect its lobbying efforts at <strong>Congress</strong>, and <strong>succeeded</strong>. In 1984, the federal government passed the National Minimum Drinking Age Act (NMDAA), raising minimum purchase age to 21.</li>
    </ul>
  </li>
  <li>anti-abortion advocates (in 1973 <em>Roe v. Wade</em> Supreme Court decision making abortion legal nationwide) used the same strategy of venue shopping
    <ul>
      <li>initially targeted at the Congress, but failed</li>
      <li>shift their focus to <strong>state</strong> legislators, where their advocacy efforts have been more successful. By 2015, for example, thirty-eight states required some form of parental involvement in a minor’s decision to have an abortion, etc.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>Surely as a result of the borderline between state v.s. federal policy become intermingled.</p>
</blockquote>

<h3 id="advantages-and-disadvantages-of-federalism">Advantages and Disadvantages of Federalism</h3>

<blockquote>
  <p>[discussion] means this point was made during the discussion section</p>
</blockquote>

<p>Among the <strong>merits</strong> of federalism (i.e. separated power) are that it</p>

<ol>
  <li><strong>limits</strong> ability of federal government to oppress (e.g. people)</li>
  <li>promotes policy <strong>innovation</strong>, “a single courageous state may, if its citizens choose, serve as a <em>laboratory</em>;” = <mark>laboratory of democracy</mark>
    <ul>
      <li>For example, a number of New Deal breakthroughs, such as child labor laws, were <strong>inspired by state policies</strong>.</li>
      <li>[discussion] e.g. police training before enforcement (before, all you need is a badge and a gun. In 1959, California and NY required police training/provided financial incentive)</li>
      <li>[discussion] in general might find a better policy</li>
    </ul>
  </li>
  <li>promotes political <strong>participation</strong>, as it creates a government closer to the people (e.g. only for people in this region)</li>
  <li>accommodates <strong>diversity</strong> of opinion.
    <ul>
      <li>the system of checks and balances in our political system often prevents the federal government from imposing uniform policies across the country.</li>
      <li>As a result, states and local communities have the latitude to address policy issues based on the specific needs and interests of their citizens.</li>
    </ul>
  </li>
  <li>states can act when federal government <strong>can’t agree</strong> (if urgent) = less <strong>coordination and transactional cost</strong> when making <strong>intrastate</strong> policies
    <ul>
      <li>[discussion] but of course, interstate coordination becomes more difficult (see #5 below)</li>
    </ul>
  </li>
</ol>

<p><strong>Drawbacks</strong> include (or adv of centralized power):</p>

<ol>
  <li>economic disparities across states, <strong>race-to-the-bottom</strong> dynamics (i.e., states compete to attract business by lowering taxes and regulations)
    <ul>
      <li>economic disparities include
        <ul>
          <li>e.g. in 2017, Maryland had the highest median household income (80,776), while West Virginia had the lowest (43,469).</li>
          <li>In 2016, New York spent 22,366 per student for elementary and secondary education, while Utah spent 6,953.</li>
        </ul>
      </li>
      <li>The economic strategy of using race-to-the-bottom tactics in order to compete with other states in attracting new business growth also carries a <strong>social cost</strong>.
        <ul>
          <li>For example, workers’ safety and pay can suffer as workplace regulations are lifted, and the reduction in payroll taxes for employers has led a number of states to end up with underfunded unemployment insurance programs.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>the difficulty of taking action on issues of <strong>national importance</strong>.
    <ul>
      <li>federal design of our Constitution and the system of checks and balances has jeopardized or outright blocked federal responses to important national issues.</li>
      <li>but with a national government, this becomes much easier</li>
    </ul>
  </li>
  <li><strong>free-riding</strong>: some states rely on contribution of others, e.g. on the grants issue, or raising military for national defense
    <ul>
      <li>can be decreased if having a national government = third party supervising the prisoner’s dilemma</li>
    </ul>
  </li>
  <li>duplication of efforts $\implies$ inefficiency, as you have so many layers of govt and each has its own authority, <strong>making decisions can be much slower</strong>
    <ul>
      <li>lower <strong>transactional cost</strong> to enforce policies/make decisions</li>
    </ul>
  </li>
  <li>interstate <strong>coordination problem</strong> exists = to coordinate the same traffic laws across different states, it is very difficult and still varied today
    <ul>
      <li>[discussion] becomes even greater today as we have more population and more complicated dynamics such as powerful econ people</li>
    </ul>
  </li>
</ol>

<h1 id="urban-politics">Urban Politics</h1>

<p>What counts as a government?</p>

<blockquote>
  <p><strong>US census of Governments</strong> uses the three criteria</p>

  <ul>
    <li>existence of organized entity</li>
    <li>governmental character: power to levy <mark>taxes</mark>, issue debt, i.e. actions that governments usually take</li>
    <li>substantial <em>autonomy</em></li>
  </ul>
</blockquote>

<p>Examples of local governments that <em>satisfy</em> this definition</p>

<ul>
  <li>
    <p>county government/parish</p>
  </li>
  <li>
    <p>city government</p>
  </li>
  <li>
    <p>township</p>
  </li>
  <li>
    <p>school district: raise taxtes, make policies</p>
  </li>
  <li>
    <p>other <strong>special purpose districts</strong>/governments: e.g. levy taxes and provide funding. This include</p>

    <ul>
      <li>airports, cemeteries, corrections, jails</li>
      <li>electric power, fire protecion, gas supply district</li>
      <li>highways, hospitals, housing, and community development</li>
    </ul>

    <p>to what degree can they tax? This is often restricted/predefined by the state government.</p>
  </li>
</ul>

<blockquote>
  <p><strong>Special district</strong> governments are independent, special purpose governmental units, other than school district governments, that exist as separate entities with substantial administrative and fiscal independence from general purpose local governments.</p>
</blockquote>

<p>Why are we discussing this? Why so many special form of governments?</p>

<blockquote>
  <p>When you want to get something new done, you can</p>

  <ul>
    <li>get it done with an existing governemnt</li>
    <li>create a new government with that responsibility</li>
  </ul>

  <p>Hence this is to explain why are we having <strong>90,126</strong> governments (a lot, because <mark>people want different things</mark>) in the US at the time of this note, according to the census.</p>
</blockquote>

<p>A more detailed breakdown:</p>

<table>
  <thead>
    <tr>
      <th>Type of Govt</th>
      <th>Number</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>County</td>
      <td>3,031</td>
    </tr>
    <tr>
      <td>City</td>
      <td>19,522</td>
    </tr>
    <tr>
      <td>Township</td>
      <td>16,364</td>
    </tr>
    <tr>
      <td>Independent School District</td>
      <td>12,884</td>
    </tr>
    <tr>
      <td>others</td>
      <td>37,381</td>
    </tr>
    <tr>
      <td>etc</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>With this in 2010, this <em>gives 1 govt per 3800 people.</em></p>

<p>But is having so many forms of government good or bad?</p>

<blockquote>
  <p><strong>Proliferation of government</strong> can result in</p>

  <ul>
    <li>[+] allows for diversity of policy</li>
    <li>[-] raises cost of oversight = hard to keep up with what they are doing, and who to support $\implies$ problem for democratic control</li>
    <li>[-] can create coordination problems/free rider .e.g people inaction</li>
    <li>[+] can allow for greater expertise development = governors becomes better at their job in govt = improves quality of action</li>
    <li>[-] surely duplication effort</li>
    <li>[-] allows for greater preference matching and disparity, as shown in the next section</li>
  </ul>
</blockquote>

<h2 id="political-boundaries">Political Boundaries</h2>

<p>Consider you are the <em>green</em> local government, and you want you policy to pass. ‘O’ indicates people who supports your policy, and ‘X’ against it.</p>

<p>Interestingly, you can get policy change if you <mark>change the boundary</mark> of your affected people/region</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Deadlock</th>
      <th style="text-align: center">3/5 Majority</th>
      <th style="text-align: center">3/4 Super Majority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230208180859085.png" alt="image-20230208180859085" /></td>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230208180906170.png" alt="image-20230208180906170" /></td>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230208180916479.png" alt="image-20230208180916479" /></td>
    </tr>
  </tbody>
</table>

<p>In fact, you can “steal” an election</p>

<p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230215161716888.png" alt="image-20230215161716888" style="zoom:15%;" /></p>

<blockquote>
  <p><strong>Gerrymandering</strong> (illegal): manipulate the boundaries of (an electoral constituency) so as to favor one party or class. This is especially done by people who are already in charge. (think of path dependence in <a href="#Institutional Change">Institutional Change</a>)</p>
</blockquote>

<ul>
  <li>e.g. exists, such as in Chicago, it was made so that republicans cannot get enough support</li>
  <li>e.g. NY, which is controlled by democrats, and wanted to redraw on a boundary to increase its chance</li>
</ul>

<p>Therefore, changing jurisdiction boundaries can be beneficial to <mark>control what policy is passed</mark>. This can actually be done in two ways</p>

<blockquote>
  <p><strong>Preference sorting</strong> = change policies that are politically possible, achieved by mechanism indicated above</p>
</blockquote>

<blockquote>
  <p><strong>Economic sorting</strong> = change policies financially possible. Sort the geographical regions such that certain district becomes restricted in funds $\implies$ can no longer enact certain policies. (e.g. many schools are funded by <em>large</em> public money)</p>
</blockquote>

<h2 id="limits-on-local-government">Limits on Local Government</h2>

<p>What can the local government <mark>not do</mark>, given that it seems powerful with all the different mechanics above?</p>

<ul>
  <li><strong>state preemption</strong> = (recall) federal law that asserts national government control over an area. Intent is to limit state government authority</li>
  <li>wealth in jurisdiction/resources</li>
  <li><strong>state restrictions on tax revenue</strong>: state laws restrict what kind of tax revenue or rate a local jurisdiction can set
    <ul>
      <li>hence restricts fiscal ability, and limits what policies are possible</li>
    </ul>
  </li>
  <li><strong>population and business flight</strong> = when you <em>change policy</em> in a region, business and population can just leave = restrict local government’s choices</li>
  <li><strong>elections</strong>: need to cater to people’s wills, otherwise step down of power
    <ul>
      <li>however this is a “twist” to this, being anti-democratic:  can create policies so that a) other policies are much harder to achieve = transactional cost, or b) difficult for people who are against it to “represent” themselves in elections</li>
    </ul>
  </li>
  <li><strong>free-rider</strong> problems (e.g. due to the proliferation of local gov) and <strong>coordination problem</strong> still exists.
    <ul>
      <li>e.g. land policies: local gov has the right to set which area is zoned for what kind of houses. However, they tend to prefer zoning for luxury houses than for affordable houses (wishing other local govs to establish) $\implies$ difficult to build enough affordable housing</li>
    </ul>
  </li>
</ul>

<h2 id="more-on-new-york-city">More on New York City</h2>

<p>ref: <a href="https://clio.columbia.edu/catalog/14759712">Community power in a postreform city: politics in New York City</a>; Pecorella, Robert F, Chapter 1</p>

<blockquote>
  <p>The author presents a <strong>contextual approach</strong> to urban politics, which suggest that</p>

  <ul>
    <li>periodic fiscal crisis $\implies$ regime change in New York’s governance a lot</li>
    <li>politics unfolds within a <strong>social-economic</strong> environment that constraints the breadth of options to public officials</li>
    <li>so that during periods of crisis, local politics becomes <strong>more a function of local economics</strong></li>
  </ul>
</blockquote>

<p>But it is also worth noting the <em>other popular schools of urban politics</em>:</p>

<blockquote>
  <p><strong>Pluralism</strong>, in political science, the view that in liberal democracies power is (or should be) <mark>dispersed among a variety of economic and ideological pressure/interest groups</mark> and is not (or should not be) held by a single elite or group of elites.</p>
</blockquote>

<p><strong>Pluralism believes that</strong></p>

<ul>
  <li><em>diversity</em> is beneficial to society and that autonomy should be enjoyed by disparate functional or cultural groups within a society, including religious groups, trade unions, professional organizations, and ethnic minorities.</li>
  <li><em>continual competition</em> among diverse groups, with none able to accumulate sufficient re­sources to monopolize the political game, is conducive to the development of polyarchy where democratic norms govern</li>
  <li>this plural system thus moves incrementally in <em>balancing</em> the pressures for stability and change</li>
</ul>

<p>Under the pluralist view (in some sense resembles the <a href="#Political Foundation of the US">multi-tradition view of US politics</a>):</p>

<ul>
  <li>New York emphasized group competition when analyzing both periods of normal politics $\implies$ viewed as a <strong>diverse political arena</strong> where competing interest groups interact with city officials to secure some share of the prizes of local politics</li>
  <li>the 1975 fiscal crisis resulted from economic decline following a temporary <strong>imbalance in the city’s interest group configuration</strong></li>
</ul>

<blockquote>
  <p><strong>Statism</strong> is the doctrine that the political authority of the state is legitimate to some degree. This may include economic and social policy, especially in regard to taxation and the means of production.</p>
</blockquote>

<p>Statism differs with Pluraist in</p>

<ul>
  <li>From the statist perspective, then, urban fiscal crises are the predictable con­ sequence of <em>government’s inability</em> to exercise authority and choose among dif­ ferent claims on public resources.</li>
  <li>although resources are noncumulative from a system-wide perspective, the agency-client relationships that characterize group entrenchment represent <em>cumulative power</em> within a particular policy area. The ability of entrenched interests to exclude countervailing groups from their policy domains negates the pluralist concepts of political competition.</li>
</ul>

<blockquote>
  <p><strong>Stratification approach</strong>: local politics is essentially the domain of eco­ nomic elites whose policy influence overrides that of any other group or coali­ tion in the city.</p>
</blockquote>

<p>They differ from previous groups in that:</p>

<ul>
  <li>instead of concentrating their attention on public decision­ making processes group, stratification believes the <em>determinant role that economic elites play</em> in local politics.</li>
  <li><em>elitists</em> researcher thus believes that a) an <em>economic elite</em> controls most major public policy decisions; b) city politics includes a visible political class whose members contest for office but who are, in the final analysis, subservient to the local economic elites</li>
  <li>from the perspective of elite theorists, urban fiscal crises are the consequence of the <em>self-interested policies pursued by the economic elites</em> who control cities</li>
</ul>

<h1 id="us-civil-rights">US Civil Rights</h1>

<p>The U.S Constitution and its founding principles of liberty, equality, and justice are admired and emulated the world over. However, not everyone living in the U.S. has enjoyed the same treatment and freedoms the law promises: e.g. women, immigrants, people of color, LGBTQ people, people with disabilities, and other groups, a majority of Americans have been <em>deprived of basic rights and opportunities</em>.</p>

<p>The belief that people should be treated <strong>equally under the law</strong> is one of the cornerstones of political thought in the United States. Yet not all citizens have been treated equally throughout the nation’s history. Some types of unequal treatment are considered acceptable in some contexts, while others are clearly not.</p>

<blockquote>
  <p>No one would consider it acceptable to allow a ten-year-old to vote, because a child lacks the ability to understand important political issues, but all reasonable people would agree that it is wrong to mandate racial segregation or to deny someone voting rights on the basis of race. It is important to understand <mark>which types of inequality are unacceptable and why</mark>.</p>
</blockquote>

<h2 id="what-are-civil-rights">What are Civil Rights?</h2>

<p>Before we dive in on what is Civil Rights, it is good to know</p>

<blockquote>
  <p>We typically envision <strong>civil liberties</strong> as <mark>limitations on government power</mark>, intended to <mark>protect freedoms</mark> upon which governments may not legally intrude.</p>
</blockquote>

<p>For example</p>

<ul>
  <li>the First Amendment denies the government the power to prohibit “the free exercise” of religion.</li>
  <li>the Eighth Amendment prohibits the application of “cruel and unusual punishments” to those convicted of crimes,</li>
</ul>

<blockquote>
  <p><strong>Civil rights</strong>, on the other hand, are guarantees that government officials will treat <mark>citizens equally</mark> and that decisions will be made on the basis of merit rather than race, gender, or other personal characteristics.</p>

  <p>In a sense this is <em>also limitation on government</em>, but <mark>limiting the government’s ability to discriminate</mark> or treat some people differently, unless the unequal treatment is based on a valid reason, such as age.</p>
</blockquote>

<p>For example:</p>

<ul>
  <li>
    <p><strong>Fifth Amendment</strong>:  “all men are created equal” by providing <em><mark>de jure equal treatment</mark></em> under the law.</p>
  </li>
  <li>
    <p><strong>equal protection clause</strong> of the <strong>Fourteenth</strong> Amendment, which states, in part, that “No State shall . . . deny to any person within its jurisdiction the equal protection of the laws.”; also ensure that the states would respect the civil liberties of <em>formerly enslaved</em> people (from Civil War).</p>
  </li>
</ul>

<p>But how do you identify discrimination? What count as discrimination? Consider the following examples:</p>

<ul>
  <li>need a a minimum age for driving $\to$ age discrimination?</li>
  <li>school only enroll students have a high school diploma or a particular score on the SAT or ACT $\to$ discriminate students with weaker grades?</li>
</ul>

<p>How can the federal, state, and local governments “discriminate” in all these ways even though the equal protection clause seems to suggest that everyone be treated the same?</p>

<blockquote>
  <p>The decision between what is discrimination and what is not lies in the <strong>purpose</strong> of the discriminatory practice, and really, <strong>how justifiable it is</strong>.</p>
</blockquote>

<p>The simple, most general rule is the <strong>rational basis test</strong>. That is, as long as there’s a reason for treating some people differently that is “rationally related to a legitimate government interest,” the discriminatory act or law or policy is acceptable.</p>

<ul>
  <li>e.g. universities discriminate against students with weaker grades and test scores because these students most likely do not yet possess the knowledge or skills needed to do well in their classes</li>
</ul>

<p>However, depending on what group of people is discriminated, courts apply more stringent rules to policies, laws, and actions</p>

<blockquote>
  <p>Discrimination based on <strong>gender or sex</strong> is generally examined with <strong>intermediate scrutiny</strong>.</p>

  <ul>
    <li>need to demonstrate such discrimination is “<em>substantially</em> related to an important governmental objective.”</li>
    <li>e.g. laws that treat men and women differently are <em>sometimes</em> upheld,</li>
  </ul>
</blockquote>

<blockquote>
  <p>Discrimination against members of <strong>racial, ethnic, or religious groups</strong> or those of <strong>various national origins</strong> is reviewed with the <strong>strict scrutiny</strong> standard</p>

  <ul>
    <li>there is a compelling governmental interest in treating people from one group differently</li>
    <li>if there is a <em>non-discriminatory way to accomplish the goal</em> in question, discrimination should not take place.</li>
    <li>e.g. laws and actions that are challenged under strict scrutiny have rarely been upheld</li>
  </ul>
</blockquote>

<p>In summary, a simple helper method for you to <mark>identify true discrimination</mark></p>

<ol>
  <li><em>Which groups?</em> First, identify the group of people who are facing discrimination.</li>
  <li><em>Which right(s) are threatened?</em> Second, what right or rights are being denied to members of this group?</li>
  <li><em>What do we do?</em> Third, what can the government do to bring about a fair situation for the affected group? Is proposing and enacting such a remedy realistic?</li>
</ol>

<h2 id="the-african-american-struggle-for-equality">The African American Struggle for Equality</h2>

<p>Here I summarize some major events related to civil rights and civil war:</p>

<p><em>Antebellum</em>: 1787-1865</p>

<ol>
  <li>In the Declaration of Independence, Thomas Jefferson made the radical statement that “all men are created equal” and “are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness.”</li>
  <li>But at his time, Jefferson also owned dozens of other human beings as his personal property. He recognized this contradiction, and agreed to free those upon his death</li>
  <li>but still, framers of the Constitution <strong>chose not to address the issue in any definitive way</strong>. Political support for abolition was very much a minority stance in the United States at the time</li>
  <li>As US expanded westward $\to$ They feared the expansion of slavery would lead to the political dominance of the South over the North and would deprive small farmers in the newly acquired western territories who could not afford to enslave others.</li>
  <li>President Abraham Lincoln had been willing to allow slavery to continue in the South to preserve the Union, he changed his policies regarding abolition over the course of the war.</li>
  <li><strong>Emancipation Proclamation</strong> on January 1, 1863: Although it stated “all persons held as slaves . . . henceforward shall be free,” the proclamation was limited in effect to the states that had rebelled</li>
</ol>

<blockquote>
  <p>Basically a period where you have:</p>

  <ul>
    <li><strong>anti-slavery thoughts</strong>: abolitionists, black religious, ed, prof, business groups; small farmres, merchants, markers, esp. N &amp; border
      <ul>
        <li>note that they are here for <em>different reasons</em>, e.g. purely economical, ideological, moral.</li>
      </ul>
    </li>
    <li><strong>pro-slavery thoughts</strong>: slave owners, textile; industrialists in N, artisans and working-class, European immigrates</li>
  </ul>
</blockquote>

<hr />

<p><em>Civil Rights in the Court</em>: 1877-1960s</p>

<ol>
  <li>
    <p>After the civil war, changes wrought by Fifth and Fourteens Amendment introduced banning of slavery and equal rights/treatments</p>
  </li>
  <li>
    <p>But soon, violence in the hands of white men was used to discourage Black people from exercising the rights they had been granted.</p>
  </li>
  <li>
    <p>The revocation of voting rights, or <strong>disenfranchisement</strong>, took a number of forms</p>

    <table>
      <thead>
        <tr>
          <th>Method</th>
          <th>How it works</th>
          <th>How it discriminates</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>literacy tests</strong> and <strong>understanding tests</strong></td>
          <td>call on voter to demonstrate his (and later, her) ability to read a particular passage of text.</td>
          <td>more difficult passages to those whose registration they wanted to deny (typically, Black people).</td>
        </tr>
        <tr>
          <td><strong>grandfather clause</strong></td>
          <td>exempted those who had been allowed to vote in that state prior to the Civil War and their descendants from literacy and understanding tests.</td>
          <td>to protect in some states, poorer, less-literate white voters feared being disenfranchised due to the literacy/understanding test</td>
        </tr>
        <tr>
          <td> </td>
          <td> </td>
          <td>allowed most illiterate white people to vote while leaving obstacles in place for Black people who wanted to vote as well.</td>
        </tr>
        <tr>
          <td><strong>poll tax</strong></td>
          <td>pay to register to vote.</td>
          <td>Because formerly enslaved people were usually quite poor, they were less likely than White men to be able to pay poll taxes.</td>
        </tr>
        <tr>
          <td><strong>white primary</strong></td>
          <td>they held primary elections to choose the Democratic nominee in which only White citizens were allowed to vote.</td>
          <td>make the votes from Black people meaningless since since White voters can agree beforehand to support whoever won the Democrats’ primary</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>alongwith disenfranchisement, there is also <strong>discrimination of treatment</strong> - “<strong>separate but equal</strong>”</p>
  </li>
</ol>

<ul>
  <li>As long as nominally equal facilities were provided for both races, it was legal to require members of each race to use the facilities designated for them.</li>
  <li>state and local governments passed laws limiting neighborhoods in which Black and White people could live.</li>
  <li>Collectively, these discriminatory laws came to be known as <mark>Jim Crow laws = legalized racial segregation</mark></li>
</ul>

<ol>
  <li>
    <p>Then comes a series of <strong>court rulings and accusations</strong> made by organizations such as National Association for the Advancement of Colored People (NAACP) for equal treatment</p>

    <ul>
      <li>e.g. overturning segregation in education.</li>
      <li>Beyond these favorable court rulings, however, progress toward equality for African Americans remained slow in the 1950s.</li>
    </ul>
  </li>
</ol>

<blockquote>
  <p>Basically a period where you have:</p>

  <ul>
    <li><strong>anti-Jim Crow thoughts</strong>: liberal democrats and liberal republicans; black business; most non-white advocacy organizations</li>
    <li><strong>pro-Jim Crow thoughts</strong>: conservative south democrats and republicans, most white business, and most white academic institution</li>
  </ul>
</blockquote>

<hr />

<p><em>Legislating Civil Rights and Post Civil Rights Movement</em>: 1970s - (2016?)</p>

<ol>
  <li>After Rosa Parks refused to give up her bus seat to a White person and was arrested, Civil rights pioneers adopted these measures in the 1955–1956 Montgomery bus boycott.
    <ul>
      <li>prefer more confrontational approaches, including the use of <strong>direct action</strong> campaigns relying on marches and demonstrations.</li>
      <li>The strategies of nonviolent resistance and <strong>civil disobedience</strong>,</li>
    </ul>
  </li>
  <li>As the campaign for civil rights continued and gained momentum, President John F. Kennedy called for Congress to pass new civil rights legislation, which began to work its way through Congress in 1963 $\implies$ for the first time <mark>outlawed segregation/discrimination</mark> and other forms of discrimination by most businesses that were open to the public</li>
  <li>Progress in registering African American voters remained slow in many states despite increased federal activity supporting it, so <mark>civil rights leaders including Martin Luther King, Jr</mark>. decided to draw the public eye to the area where the greatest resistance to voter registration drives were taking place.
    <ul>
      <li>planned a march from <strong>Selma</strong> to Montgomery in March 1965.</li>
      <li>The events at Selma galvanized support in Congress for a follow-up bill solely dealing with the right to vote. The <strong>Voting Rights Act</strong> of 1965 went beyond previous laws by requiring greater oversight of elections by federal officials.</li>
    </ul>
  </li>
  <li>But of course, there are other approaches to black rights. <mark>Malcolm X</mark> expressed significant distrust of White people, and advocated for their <strong>separation</strong> from the United States through eventual emigration to Africa.
    <ul>
      <li>His position was attractive to many young African Americans, especially after Martin Luther King, Jr. was assassinated in 1968.</li>
    </ul>
  </li>
</ol>

<blockquote>
  <p>Basically a period where you have:</p>

  <ul>
    <li><strong>Race-Conscious</strong>: abolitionists; most democrats; non-white advocacy orgs
      <ul>
        <li>recognizes and takes into account the significance of race in society, including its impact on individuals and groups.</li>
        <li>This approach acknowledges that race is an important factor in shaping experiences and outcomes and seeks to address racial disparities and inequities.</li>
      </ul>
    </li>
    <li><strong>Color-blind</strong>: most republicans; conservative democrats; most federal and state judges
      <ul>
        <li>assumes that race should not be a factor in how people are treated or perceived</li>
      </ul>
    </li>
  </ul>

  <p>which is like trying to answer the question: <em>how do you treat</em> people equally</p>
</blockquote>

<hr />

<p>So in short:</p>

<ul>
  <li>
    <p>south wanted slavery, 19th century northern and <strong>westerners</strong> had to fight to end it</p>
  </li>
  <li>
    <p>south wanted to limit black rights post-emancipation - <strong>federal</strong> courts had to stop it</p>
  </li>
  <li>
    <p>civil rights movement removed the last elements of white supremacy from law</p>
  </li>
</ul>

<blockquote>
  <p><strong>Substance of policy debates determines coalition possibilities</strong>. i.e. depending on different time periods/context, there are different racial problems (e.g. due to economic grounds, etc) $\implies$ different support groups, some of which might seem confounding</p>
</blockquote>

<h3 id="geography-of-white-supremacy">Geography of White Supremacy</h3>

<p>It is widely held (but <strong>false</strong>) that racial conflicts in the US caused by <strong>Southern racism</strong>. Why?</p>

<ol>
  <li>federalism allowed variety of tactics to preserve white supremacy</li>
  <li>black population concentrated in South (by design) until 20th century</li>
  <li>Federal restricted non-Black citizenship advocated by western states</li>
</ol>

<p>Another piece of data would be the probability of being <strong>lynched</strong> = 1889 - 1918</p>

<ul>
  <li>physical violence as a tactic to suppress the political rights of people $\implies$ show others to obey more</li>
  <li>a period where white people trying to deter black from political participation</li>
</ul>

<p>There is also discrimination against other groups:</p>

<ul>
  <li><strong>Racial Restrictions on Citizenship</strong>: In 1780-1870: only ‘free whites’ were allowed to naturalize, and for example, Chinese, were only allowed to naturalize in 1943. From 1952, finally no racial restrictions.</li>
</ul>

<blockquote>
  <p>Racial hierarchy is an <strong>American legacy</strong>, not Southern.</p>
</blockquote>

<p>But at the same time:</p>

<blockquote>
  <p>Population change since 1965 has opened new frontiers</p>
</blockquote>

<p>Some of the <strong>very recent issues include</strong></p>

<ul>
  <li><strong>Redistricting</strong>: Changes in population can require redistricting, or the redrawing of electoral boundaries, which can lead to political battles over how to allocate political power and representation.</li>
  <li><strong>Immigration policies:</strong> As immigration patterns have changed, there have been debates and political conflicts over how to manage borders, regulate immigration, and balance concerns around national security and economic growth with issues of human rights and social justice.</li>
  <li><strong>Urban-rural divides:</strong> Population change has also contributed to the urban-rural divide in many countries, with different political priorities and values emerging in urban and rural areas, and political leaders struggling to bridge these differences.</li>
</ul>

<h3 id="voting-rights">Voting Rights</h3>

<p>Several related courts:</p>

<ul>
  <li>Dred Scott v Sanford (1857): held back people with enslaved ancestor could not be citizen. But then supemacy court decided that black <em>does not have the right to sue</em></li>
  <li>Plessy v. Ferguson (1896): whether or not state mandated segregation is a violation of equal protection. Decision: 14th amendment.</li>
  <li>Korematsu v. United States (1944): upheld internment of Japanses-Americans as allowed</li>
  <li>Shelly v. Kraemer (1948): previously allowed private agreements to involve racial restrictions. Now unconstitutional under this one
    <ul>
      <li>the issue here was that private owners created a covenant and the Fourteenth Amendment applies to state action.</li>
      <li>However, the Court reasoned that the Fourteenth Amendment applies to judicial enforcement of such covenants, as that is state action. Thus, the Court concluded that the state is taking action in this case, therefore such an <em>private racial agreement cannot be allowed</em>.</li>
    </ul>
  </li>
  <li>Brown v. Board of Education (1954): banned segregation in public schools</li>
  <li>Shelby County v. Holder (2013): certain states who were racially restrictive are require to pre-clear before elections. Ruling is that those pre-clearance requirement is unconstitutional
    <ul>
      <li>i.e. previously required certain states and localities with a history of discrimination in voting to obtain federal approval, or “preclearance,” before changing their voting laws or procedures</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>Sometimes the judgment is conservative, and sometimes liberal.</p>
</blockquote>

<p>More on <strong>white primary</strong> (Texas style):</p>

<ul>
  <li>Texas banned white people voting in primary, but then it is sued to be unconstitutional</li>
  <li>In 1935, they won a rule “party rule banning Black voting in primary was private action, so it is <em>allowed</em>”</li>
  <li>In 1944, delegating power to parties to run primary still a form of state action, so it is <em>unconstitutional again</em></li>
</ul>

<p>What does this show us?</p>

<ul>
  <li>white supremacists persistence, that people even try to move discriminatory actions into private sphere to prevent scrutiny</li>
</ul>

<blockquote>
  <p>therefore, it is very difficult to use fixed actions or policy positions to treat discriminatory intent.</p>
</blockquote>

<h2 id="the-fights-for-womens-rights">The Fights for Women’s Rights</h2>

<ol>
  <li>At the time of the American Revolution, women had few rights. Although single women were allowed to own property, married women were not.
    <ul>
      <li>e.g. all personal property they owned legally became their husbands’ property.</li>
      <li>e.g. their husbands were entitled to their wages.</li>
    </ul>
  </li>
  <li>Following the Revolution, women’s conditions did not improve. Women were not granted the right to vote by any of the states except New Jersey.</li>
  <li>In 1848, Stanton and Mott called for a women’s rights convention, the first ever held specifically to address the subject, at Seneca Falls, New York.
    <ul>
      <li>Stanton wrote the <strong>Declaration of Sentiments,</strong> which was modeled after the Declaration of Independence and proclaimed women were equal to men and deserved the same rights.</li>
      <li>The Declaration passed, but the resolution demanding <strong>suffrage</strong> was the only one that <strong>did not pass</strong> unanimously.</li>
    </ul>
  </li>
  <li>The more radical <strong>National Woman’s Party</strong> (NWP), led by Alice Paul, advocated the use of stronger tactics. The NWP held public protests and picketed outside the White House
    <ul>
      <li>Finally, in 1920, the triumphant passage of the Nineteenth Amendment granted all women the <strong>right to vote</strong>.</li>
    </ul>
  </li>
</ol>

<p>Civil Rights and the Equal Rights amendment</p>

<ol>
  <li>Just as the passage of the Thirteenth, Fourteenth, and Fifteenth Amendments did not result in equality for African Americans, the Nineteenth Amendment <em>did not end discrimination</em> against women in education, employment, or other areas of life</li>
  <li>A second women’s rights movement emerged in the 1960s to address these problems. <strong>Title VII of the Civil Rights Act</strong> of 1964 prohibited discrimination in employment on the basis of sex as well as race, etc
    <ul>
      <li>Nevertheless, women continued to be denied jobs because of their sex and were often sexually harassed at the workplace.</li>
    </ul>
  </li>
  <li>National Organization for Women (NOW) = NOW promoted workplace equality, including equal pay for women. NOW also declared its support for the <strong>Equal Rights Amendment</strong> <strong>(ERA)</strong>, which mandated equal treatment for all regardless of sex.
    <ul>
      <li>but until today, ERA failed to be ratified</li>
      <li><strong>Title IX</strong> of the United States Education Amendments of 1972 passed into law as a federal statute (not as amendment) $\implies$ if a school receives federal aid, it cannot spend more funds on programs for men than on programs for women.</li>
    </ul>
  </li>
</ol>

<p>Pressing Issues today</p>

<ol>
  <li><strong>Roe v. Wade,</strong> (1973) was a landmark decision of the U.S. Supreme Court conferred the right to choose to have an abortion. In June 2022, the Supreme Court <mark>overruled</mark> Roe in <em>Dobbs v. Jackson Women’s Health Organization</em> on the grounds that the substantive right to abortion was not “deeply rooted in this Nation’s history or tradition”.</li>
  <li><strong>glass ceiling</strong>, an invisible barrier caused by discrimination, prevents women from rising to the highest levels of American organizations, including corporations, governments, academic institutions, and religious groups. <strong>Women earn less money than men for the same work.</strong></li>
</ol>

<h2 id="civil-rights-for-indigenous-groups">Civil Rights for Indigenous Groups</h2>

<blockquote>
  <p>This includes group such as Native Americans, Alaskans, and Hawaiians</p>

  <ul>
    <li>Ironically, Native Americans were not granted the full rights and protections of U.S. citizenship until long after African Americans and women were, with many having to wait <strong>until the Nationality Act of 1940 to become citizens</strong>.</li>
  </ul>
</blockquote>

<p>NATIVE AMERICANS LOSE THEIR LAND AND THEIR RIGHTS</p>

<ol>
  <li>From the very beginning of European settlement in North America, Native Americans were abused and exploited.</li>
  <li>As White settlement spread westward over the course of the nineteenth century, Indian tribes were forced to move from their homelands.</li>
  <li>In 1830, Congress passed the Indian Removal Act, which forced Native Americans to move west of the Mississippi River.
    <ul>
      <li>Not all tribes were willing to leave their land, however. The <strong>Cherokee</strong> in particular resisted</li>
      <li>Between 1831 and 1838, members of several southern tribes, including the Cherokees, were forced by the U.S. Army to move west</li>
      <li>The forced removal of the Cherokees to Oklahoma Territory, which had been set aside for settlement by displaced tribes and designated Indian Territory, resulted in the death of one-quarter of the tribe’s population. The Cherokees remember this journey as the <strong>Trail of Tears</strong>.</li>
    </ul>
  </li>
  <li>By the time of the Civil War, most Indian tribes had been relocated west of the Mississippi. However, once large numbers of White Americans and European immigrants had also moved west after the Civil War, Native Americans once <em>again found themselves displaced</em>.</li>
  <li>In 1898, the Curtis Act dealt the final blow to Indian sovereignty by <strong>abolishing all tribal governments</strong>.</li>
</ol>

<p>THE FIGHT FOR NATIVE AMERICAN RIGHTS</p>

<ol>
  <li>As Indians were removed from their tribal lands and increasingly saw their traditional cultures being destroyed over the course of the nineteenth century, a movement to protect their rights began to grow.
    <ul>
      <li>e.g. Sarah Winnemucca, member of the Paiute tribe, lectured throughout the east in the 1880s in order to acquaint White audiences with the injustices suffered by the western tribes.</li>
    </ul>
  </li>
  <li>In 1924, the <strong>Indian Citizenship Act</strong> granted citizenship to all Native Americans born after its passage.</li>
  <li>In 1934, Congress passed the <strong>Indian Reorganization Act</strong>, which ended the division of reservation land into allotments. It returned to Native American tribes the right to institute self-government on their reservations.
    <ul>
      <li>However, most tribes remained <em>impoverished</em>, and many Native Americans, despite the fact that they were now U.S. citizens, were <strong>denied the right to vote</strong></li>
    </ul>
  </li>
  <li>In the 1960s, a modern Native American civil rights movement, inspired by the African American civil rights movement, began to grow.
    <ul>
      <li>In 1969, a group of Native American activists from various tribes, took control of <strong>Alcatraz</strong> Island in San Francisco Bay</li>
      <li>In 1973, members of the <strong>American Indian Movement</strong> <strong>(AIM)</strong>, a more radical group than the occupiers of Alcatraz, temporarily took over the offices of the Bureau of Indian Affairs in Washington, DC.</li>
    </ul>
  </li>
  <li>The current relationship between the U.S. government and Native American tribes was established by the <strong>Indian Self-Determination and Education Assistance Act</strong> of 1975.
    <ul>
      <li>tribes assumed control of programs that had formerly been controlled by the BIA, such as education and resource management, and the federal government provided the funding.</li>
    </ul>
  </li>
  <li>In addition to gains in <strong>water rights and land rights</strong>, Native American tribes made other gains in recent decades. Tribes have robust and well-recognized governing institutions based on democratic principles.</li>
  <li>Finally, the appointment by President Biden, and subsequent Senate confirmation, of <strong>Rep. Deb Haaland (D-NM)</strong> as Secretary of the Interior was a powerful and pathbreaking moment. She is the first Native American to hold that position at Interior, which includes the Bureau of Indian Affairs.</li>
</ol>

<h2 id="equal-protection-for-other-groups">Equal Protection For Other Groups</h2>

<p>Many groups in American society have faced and continue to face challenges in achieving equality, fairness, and equal protection under the laws and policies of the federal government and/or the states.</p>

<blockquote>
  <p>Some of these groups are often overlooked because they are <strong>not as large of a percentage of the U.S. population</strong> as women or African Americans, and because organized movements to achieve equality for them are <strong>relatively young</strong>.</p>
</blockquote>

<p><strong>Hispanic/Latino Civil Rights</strong></p>

<ul>
  <li><em>Hispanic</em> usually refers to native speakers of Spanish or those descended from Spanish-speaking countries. <em>Latino</em> refers to people who come from, or whose ancestors came from, Latin America. Not all Hispanics are Latinos and vice versa. People from Spain are Hispanic but are not Latino, while people from Brazil are Latino but not Hispanic.</li>
  <li>Many Latinos became part of the U.S. population following the annexation of <mark>Texas</mark> by the United States in 1845. The Spanish-speaking population of the United States increased following the Spanish-American War in 1898 with the incorporation of <mark>Puerto Rico</mark> as a U.S. territory.
    <ul>
      <li>In the early twentieth century, waves of violence aimed at Mexicans and <strong>Mexican Americans</strong> swept the Southwest. Mexican Americans in Arizona and in parts of Texas were denied the right to vote,</li>
    </ul>
  </li>
  <li>Today, Latinos constitute the largest minority group in the United States. They also have one of the highest birth rates of any ethnic group.</li>
</ul>

<p><strong>Asian American Civil Rights</strong></p>

<ul>
  <li><strong>Asian Americans</strong> have also often been discriminated against and denied their civil rights. Often stereotyped as the “the model minority” (because it is assumed they are generally financially successful and do well academically), the truth is that Asian Americans have long faced discrimination.</li>
  <li>The <mark>Chinese</mark> were the first large group of Asian people to immigrate to the United States.
    <ul>
      <li>Their willingness to work for less money than White workers led White workers in California to call for a ban on Chinese immigration. In 1882, Congress passed the <strong>Chinese Exclusion Act</strong>, which prevented Chinese from immigrating to the United States for ten years</li>
      <li>With the passage of the <strong>Immigration Act</strong> of 1924, all Asian people, with the exception of Filipinos, were prevented from immigrating to the United States or becoming naturalized citizens.</li>
    </ul>
  </li>
  <li>Discrimination against Asian Americans, regardless of national origin, increased during the <strong>Vietnam War.</strong>
    <ul>
      <li>Chinese, Japanese, Koreans, and Vietnamese caused members of these groups to unite around a shared <strong>pan-Asian identity</strong>, much as Native Americans had in the Pan-Indian movement.</li>
      <li>(<em>history</em>) The Vietnam war is fought between the communist forces of North Vietnam and the government forces of South Vietnam (with eventual allies of US troops and Chinese=strong ally of north Vietnam as well). The main cause of the Vietnam war was the spread of communism and the desire of the North Vietnamese to reunify the country under a communist government. The war was characterized by guerrilla tactics and unconventional warfare, and resulted in a significant loss of life and widespread destruction.</li>
    </ul>
  </li>
  <li>Unfortunately, recently racist vitriol related to the origin of COVID-19 has recently highlighted discrimination against Asian Americans again</li>
</ul>

<h1 id="civil-liberties">Civil Liberties</h1>

<p>In writing the Declaration of Independence in 1776, Thomas Jefferson drew on the ideas of English philosopher John Locke to express the colonists’ belief that they had certain <strong>inalienable or natural rights</strong> that no ruler had the power or authority to deny to their subjects.</p>

<blockquote>
  <p>The framers of the Constitution wanted a government that <em>would not repeat the abuses of individual liberties</em> and rights that caused them to declare independence from Britain.</p>
</blockquote>

<p>What are those freedoms? And how should we balance them against the interests of society and other individuals?</p>

<h2 id="what-are-civil-liberties">What are Civil Liberties?</h2>

<p>Recall that we defined a distinction between civil liberties and civil rights in <a href="#What are Civil Rights?">What are Civil Rights?</a>: <strong>civil liberties</strong> as limitations on government power, intended to <mark>protect freedoms upon which governments may not legally intrude</mark>.</p>

<blockquote>
  <p>Two general <strong>form of protection</strong></p>

  <ul>
    <li><strong>substantive</strong> restraints (i.e. to a particular action). For example, get contraception; neither states nor the national government can forbid people to follow a religion of their choice, even if politicians and judges think the religion is misguided.</li>
    <li><strong>procedural</strong> restraints. For example, police must follow certain procedure when arresting/interrogating people</li>
  </ul>

  <p>That said, the <strong><em>way</em></strong> you practice your religion, like any other practice, may be regulated if it impinges on the rights of others.</p>
</blockquote>

<p>The first tool you think of as to “restrict the government on regulating civil freedom” could be the “<mark>bill of rights</mark>”:</p>

<ol>
  <li>
    <p>The Constitution as drafted in 1787 <strong>did not include a Bill of Rights</strong>, although the idea of including one was proposed and, after brief discussion, dismissed in the final week of the Constitutional Convention.	The framers of the Constitution believed they</p>

    <ul>
      <li>faced much more pressing concerns—most notably keeping the fragile union together in the light of internal unrest and external threats.</li>
      <li>had adequately covered rights issues in the main body of the document
        <ul>
          <li><strong>bills of attainder</strong>: prohibit convicts or punishes someone for a crime without a trial,</li>
          <li><em>prohibiting</em> <strong>ex post facto laws</strong>: prohibit the retroactive effect that it can be used to punish crimes that were not crimes at the time they were committed,</li>
          <li>limiting the ability of Congress to suspend the <strong>writ of habeas corpus</strong>: allow a neutral judge decide whether someone has been lawfully detained.</li>
        </ul>
      </li>
      <li>Hamilton went on to argue that listing some rights might actually be dangerous, because it would provide a pretext for people to claim that rights <em>not</em> included in such a list were not protected.</li>
    </ul>
  </li>
  <li>
    <p>However, many large states—New York and Virginia in particular—believed the Constitution’s lack of specified rights became a serious point of contention, and hence did not want to ratify the constitution. As a result, the framers agreed to consider incorporating provisions (i.e. later the <strong>Bill of Rights</strong>). Ultimately, <mark>James Madison</mark> proposed ten of the amendments were successfully ratified</p>

    <table>
      <thead>
        <tr>
          <th>First Amendment</th>
          <th>Right to freedoms of religion and speech; right to assemble and to petition the government for redress of grievances; right to a free press</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Second Amendment</td>
          <td>Right to keep and bear arms to maintain a well-regulated militia</td>
        </tr>
        <tr>
          <td>Third Amendment</td>
          <td>Right to not house soldiers during time of war</td>
        </tr>
        <tr>
          <td>Fourth Amendment</td>
          <td>Right to be secure from unreasonable search and seizure</td>
        </tr>
        <tr>
          <td>Fifth Amendment</td>
          <td>Rights in criminal cases, including due process and indictment by grand jury for capital crimes, as well as the right not to testify against oneself</td>
        </tr>
        <tr>
          <td>Sixth Amendment</td>
          <td>Right to a speedy trial by an impartial jury</td>
        </tr>
        <tr>
          <td>Seventh Amendment</td>
          <td>Right to a jury trial in civil cases</td>
        </tr>
        <tr>
          <td>Eighth Amendment</td>
          <td>Right to not face excessive bail, excessive fines, or cruel and unusual punishment</td>
        </tr>
        <tr>
          <td>Ninth Amendment</td>
          <td>Rights retained by the people, even if they are not specifically enumerated by the Constitution</td>
        </tr>
        <tr>
          <td>Tenth Amendment</td>
          <td>States’ rights to powers not specifically delegated to the federal government</td>
        </tr>
      </tbody>
    </table>
  </li>
</ol>

<blockquote>
  <p>BoR can be thought of a way to limit conformity cost. i.e. to limit the ability of the majority to impose their preferences on minority groups through legislation or other means. $\implies$ certain <strong>minority preference/rights are still preserved</strong></p>

  <p>However, the meaning and intent of BoR is often unclear.</p>
</blockquote>

<p>For example:</p>

<ul>
  <li><strong>ambiguous language</strong>
    <ul>
      <li>in 8th amendment What is “curel and unusual punishment”</li>
      <li>establishment clause and prayer (does praer in public school count as religious )</li>
    </ul>
  </li>
  <li><strong>practical contradictions</strong>
    <ul>
      <li>press freedom (1st), but public trial with impartial jury (8th) $\implies$ very hard if facts have been exposed in media, even illegal, can make it hard to make impartial decisions</li>
    </ul>
  </li>
  <li><strong>omissions</strong>
    <ul>
      <li>who does the BoR restrict? Does it apply to state governments? What about local governments?</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>As a result, the Supreme Court had to make a lot of decisions.</p>
</blockquote>

<ol>
  <li>the Barron Case (1830) ruled that BoR does not applied to state $\implies$ then BoR has no meaning really as states are the implementations</li>
  <li>then, after the Civil War, succeeded states had to agree to amendments (e.g. 14th) in order to rejoin US</li>
  <li>in the 14th amendment, obligated states to provide equal protectoin, due procecss
    <ul>
      <li>national citienship (e.g. for black people)</li>
      <li>equal protection: but note that police department was not there</li>
      <li>due process: without due proces of law, state cannot deprice any person of life and liberty</li>
    </ul>
  </li>
  <li>establishment of a monopoly of slaughter house in Arizona
    <ul>
      <li>decided that BoR does not apply to states $\to$ the decision limited the ability of the federal government to protect the rights of citizens against state abuses, and it helped to reinforce the power of state governments to regulate the activities of their citizens.</li>
      <li>It was only later, through other landmark cases such as Brown v. Board of Education and Roe v. Wade, that the Supreme Court began to expand the scope of federal power and protect the rights of citizens against state infringement.</li>
    </ul>
  </li>
  <li>over time, more and more elements of BoR gets incorporated into state $\to$ **selective incorporation **(see below as well)</li>
</ol>

<hr />

<p>EXTENDING THE BILL OF RIGHTS TO THE STATES</p>

<ol>
  <li>In the decades following the Constitution’s ratification, the Supreme Court <strong>declined to expand the Bill of Rights to curb the power of the states</strong></li>
  <li>The festering issue of the rights of enslaved persons and the convulsions of the <strong>Civil War</strong> and its aftermath forced a reexamination of the prevailing thinking about the application of the Bill of Rights to the states.
    <ul>
      <li>e.g. after the civil war, states passed “Black codes” that restricted the rights of formerly enslaved people</li>
    </ul>
  </li>
  <li>Their long-term solution was to propose and enforce two amendments to the Constitution to guarantee the rights of freed men and women.
    <ul>
      <li>With the ratification of the <strong>Fourteenth Amendment</strong> in 1868, the scope and limits of civil liberties became clearer: “<strong>no State</strong> shall make or enforce any law which shall abridge the privileges or immunities of citizens of the United States”</li>
      <li>second provision of the Fourteenth Amendment pertaining to the application of the Bill of Rights to the states is the <strong>due process clause</strong>, which requires fair treatment and procedural safeguards (e.g. the right to a trial, and that people be treated <em>fairly and impartially by government officials</em>) before the government can deprive a person of life, liberty, or property.</li>
    </ul>
  </li>
  <li>there has been a process of <strong>selective incorporation</strong> of the Bill of Rights into the practices of the states: c<em>ertain provisions must be upheld by the states</em>, even if their state constitutions and laws (and the Tenth Amendment itself) do not protect them
    <ol>
      <li><strong><em>when issue arises</em></strong>, the Supreme Court decides whether state laws violate the Bill of Rights and are therefore unconstitutional.</li>
      <li>it this still consistent with the supremacy clause? The key is that <em>if there is a conflict</em>, then supremacy clause overrules.</li>
      <li>e.g. It was only in the <em>McDonald v. Chicago</em> case two years later that the Supreme Court incorporated the Second Amendment (keep and bear arms) into state law.</li>
    </ol>
  </li>
</ol>

<h2 id="securing-basic-freedoms">Securing Basic Freedoms</h2>

<p>We can broadly divide the provisions of the Bill of Rights into three categories</p>

<p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230215170855266.png" alt="image-20230215170855266" style="zoom:25%;" /></p>

<ul>
  <li>protect basic individual freedoms;</li>
  <li><strong>criminal procedural protections</strong>:  protect people suspected or accused of criminal activity or facing civil litigation;</li>
  <li>express the view that Bill of Rights is not necessarily an exhaustive list of all the rights people have and guarantees a role for state as well as federal government</li>
</ul>

<p>A bit more details into the different amendments</p>

<ol>
  <li><strong>The first amendment</strong>: guarantees both religious freedoms and the right to express your views in public.
    <ul>
      <li><strong>establishment clause</strong>. Congress is prohibited from creating or promoting a state-sponsored religion (this now includes the states).</li>
      <li><strong>free exercise clause</strong>, on the other hand, limits the ability of the government to control or restrict religious practices.</li>
      <li>basically, it not only forbids the creation of a “Church of the United States” or “Church of Ohio” it also forbids the government from favoring one set of religious beliefs over others or favoring religion (of any variety) over non-religion.</li>
    </ul>
  </li>
  <li><strong>The second amendment</strong>: the right of the people to keep and bear Arms
    <ul>
      <li>however, due to school shootings and gun violence. As a result, gun rights have become a highly charged political issue.</li>
    </ul>
  </li>
  <li><strong>The third amendment</strong>: “No Soldier shall, in time of peace be quartered in any house, without the consent of the Owner, nor in time of war, but in a manner to be prescribed by law.”
    <ul>
      <li>citizens remembered having their cities and towns occupied by British soldiers and mercenaries during the Revolutionary War, and they viewed the British laws that required the colonists to house soldiers particularly offensive</li>
    </ul>
  </li>
  <li><strong>The fourth amendment</strong>: indicates that government officials are required to apply for and receive a <strong>search warrant</strong> prior to a search or seizure;
    <ul>
      <li>sits at the boundary between general individual freedoms and the rights of those suspected of crimes.</li>
      <li>can be seen as to protects us from overzealous efforts by law enforcement to root out crime by ensuring that police have good reason before they intrude on people’s lives with criminal investigations.</li>
      <li><em>however</em>, the courts have found that police <strong>do not</strong> generally need a warrant to search the passenger compartment of a car, or to <strong>search people entering the United States from another country</strong>.
        <ul>
          <li>but they must demonstrate to a judge that there is probable cause to believe a crime has been committed or evidence will be found.</li>
          <li><strong>Probable cause</strong> is the legal standard for determining whether a search or seizure is constitutional or a crime has been committed; it is a lower threshold than the standard of proof at a criminal trial.</li>
        </ul>
      </li>
      <li><strong>exclusionary rule</strong>: obtained <em>without</em> a warrant could not be counted as evidence in a trial</li>
    </ul>
  </li>
</ol>

<h2 id="rights-of-suspects">Rights of Suspects</h2>

<blockquote>
  <p>In addition to protecting the personal freedoms of individuals, the Bill of Rights <strong>protects those suspected or accused of crimes</strong> from various forms of unfair or unjust treatment.</p>
</blockquote>

<p>The next four amendments pertain to those suspected, accused, or convicted of crimes, as well as people engaged in other legal disputes.</p>

<ol>
  <li><strong>the fifth amendment</strong>:
    <ul>
      <li>protection against <strong>self-incrimination</strong>: you have the right <em>not to give evidence</em> in court or to law enforcement officers that <em>might constitute an admission of guilt</em> or responsibility for a crime.</li>
      <li>protects individuals against <strong>double jeopardy</strong>, a process that subjects a suspect to prosecution twice for the same criminal act.</li>
    </ul>
  </li>
  <li><strong>the sixth amendment</strong>: contains the provisions that govern criminal trials, i.e. after which a person is charged with crime
    <ul>
      <li>the right to have a <em>speedy, public trial by an impartial jury</em> (i.e. excessively lengthy delays must be justified and balanced against the potential harm to the defendant.)</li>
      <li><strong>plea bargain</strong>, an agreement between the defendant and the prosecutor in which the defendant pleads guilty to the charge(s) in question, or perhaps to less serious charges, in exchange for more lenient punishment than they might receive if convicted after a full trial.</li>
    </ul>
  </li>
  <li><strong>the seventh amendment</strong>: deals with the rights of those engaged in civil disputes</li>
  <li><strong>the eighth amendment</strong>: cannot impose bail or fines that are unreasonably high or disproportionate to the alleged offense, and prohibits any cruel and unusual punishment
    <ul>
      <li>e.g. drawing and quartering, burning people alive, and the electric chair—are prohibited by this provision.</li>
    </ul>
  </li>
</ol>

<p>Examples include (criminal procedural protections)</p>

<ul>
  <li><em>Mapp v. Ohio</em> - materials obtained by unconstitutional searches cannot be used in criminal courts</li>
  <li><em>Gideon v. Wainwright</em> -  Can’t afford lawyers? State required to pay for lawyer for anyone who cannot afford it</li>
  <li><em>Miranda v. Arizona</em> - police must notify suspects of rights prior to interrogation</li>
  <li><em>In re Gault</em> - can this 15 year old be protected? Decision: procedural constitutional protections apply to juveniles as well</li>
</ul>

<h2 id="interpreting-the-bill-of-rights">Interpreting the Bill of Rights</h2>

<blockquote>
  <p>Ninth and Tenth Amendments indicate <strong>how the Constitution and the Bill of Rights should be interpreted</strong>, and lay out the residual powers of the state governments - these two amendments affect our understanding of the Constitution as a whole.</p>
</blockquote>

<ol>
  <li>
    <p><strong>the ninth amendment</strong>: “The enumeration in the Constitution, of certain rights, shall not be construed <em>to deny or disparage others</em> retained by the people.”</p>

    <ul>
      <li>i.e. James Madison and the other framers were aware they might endanger some rights if they listed a few in the Constitution and omitted others.</li>
    </ul>
  </li>
  <li>
    <p><strong>the tenth amendment</strong>: “The powers not delegated to the United States by the Constitution, nor prohibited by it to the States, are reserved to the States respectively, or to the people.”</p>

    <ul>
      <li>also allows states to guarantee rights and liberties more fully or extensively than the federal government does</li>
      <li>however, by the supremacy clause, if the federal government passes a law or adopts a constitutional amendment that restricts rights or liberties, or a Supreme Court decision interprets the Constitution in a way that narrows these rights, the state’s protection no longer applies.</li>
    </ul>
  </li>
  <li>
    <p><mark>the right to privacy</mark>: scholars have interpreted <em>several Bill of Rights provisions</em> as an <em>indication</em> that James Madison and Congress sought to protect a common-law right to privacy: a right to be free of government intrusion into our personal life, particularly within the bounds of the home.</p>

    <ul>
      <li>
        <p>stem from the 9th amendment, i.e. implicitly reasoned from the other amendments/laws</p>
      </li>
      <li>
        <p><strong>sexual privacy</strong>: including right to obtain contraception, <strong>abortion</strong> rights (overturned recently), the rights for adults to have noncommercial, consensual sexual relationships in private.</p>

        <ul>
          <li><em>Dobbs v. Jackson Women’s Health Organization</em>: now abortion is not protected by constitution (overruled <em>Joe v. Wade</em>)</li>
        </ul>
      </li>
      <li>
        <p><strong>privacy of communication and property</strong>: this has been complicated in modern era where the society is under pervasive surveillance.</p>

        <ul>
          <li>pervasive use of GPS; and research shows that even metadata—information about the messages we send and the calls we make—can tell governments and businesses a lot about what someone is doing.</li>
          <li>increased use of drones, small preprogrammed or remotely piloted aircraft.</li>
          <li>In the United States, many advocates of civil liberties are concerned that laws such as the USA <strong>PATRIOT Act</strong> (i.e., Uniting and Strengthening America by Providing Appropriate Tools Required to Intercept and Obstruct Terrorism Act), passed weeks after the 9/11 attacks in 2001, have given the federal government too much power by making it easy for officials to seek and obtain search warrants or, in some cases, to bypass warrant requirements altogether.</li>
        </ul>

        <p>as a result, the emergence of these technologies (while unarguably beneficial) means calls for vigilance and limits on what businesses and governments can do with the information they collect and the length of time they may retain it.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>other “found” rights</strong> (implied by interpreting other laws)</p>

    <ul>
      <li>to procreate, i.e. people do have fundamental right to have children
        <ul>
          <li>living with extended family</li>
          <li>To control own child’s upbringing (e.g. <em>Meyer v NE</em>, to teach a child a foreign language)</li>
          <li>etc.</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<blockquote>
  <p>One takeaway message from the privacy issues. e.g. abortion case with Dobbs</p>

  <ul>
    <li>the same conclusion can be reasoned to by multiple paths</li>
    <li>part of the US Supreme Court reasoning is very political palatable, given the current context
      <ul>
        <li>Hence to make a case successful it largely depends on *how you reason your case</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>And fundamentally, both the Constitutions and the BoR can be seen as an attempt to solve the collective action problem.</p>

<blockquote>
  <p>By having the Constitutions and BoR:</p>

  <ol>
    <li>Constitution $\to$ a separation of powers $\to$ ensures that decisions are made through a <strong>collective process</strong> involving multiple branches of government
      <ul>
        <li>by requiring cooperation and compromise among different groups and branches of government, it encourages coordination and limiting the ability of any one group to dominate the decision-making process</li>
      </ul>
    </li>
    <li>the Bill of Rights provides protections for individual rights and freedoms that can help to <strong>reduce conformity costs</strong> and <strong>encourage political participation.</strong>
      <ul>
        <li>By guaranteeing freedoms such as free speech, freedom of assembly, and the right to petition the government, the Bill of Rights helps to ensure that minority groups are able to have their voices heard in the decision-making proces</li>
      </ul>
    </li>
    <li>the Constitution and Bill of Rights establish a legal framework $\to$ disputes can be resolved without resorting to violence or coercion $\to$ providing a means for <strong>resolving conflicts and coordinating actions</strong>
      <ul>
        <li>e.g. as there is a law, you have knowledge of what other people can or not do to you</li>
      </ul>
    </li>
  </ol>
</blockquote>

<h1 id="problem-of-delegation">Problem of Delegation</h1>

<p>we will discuss agency models,and then discuss house and senate system in US</p>

<h2 id="agency-model">Agency Model</h2>

<blockquote>
  <p><strong>Agency Model</strong>: developed most in economics, to analyze the phenomenon that one person <strong>delegates some task to another</strong> to get something done (in stead of doing it yourself)</p>
</blockquote>

<p><em>For Example</em>:</p>

<ul>
  <li>voters delegate policy making to governments</li>
  <li>government don’t provide service directly, but sometimes ask private companies</li>
  <li>congress delegates enforcement of laws (but makes a lot of laws) to president and bureaucracy</li>
  <li>school departments delegates teaching to professors</li>
  <li>professor delegate teaching instructors/discussion sections to TAs</li>
  <li>students/parents delegate education and safety to the college they attend</li>
</ul>

<blockquote>
  <p>Sometimes really consequential decisions/responsibilities being delegated to others</p>
</blockquote>

<p>in general, leaders in an organization delegate certain decisions and responsibility to lower members $\implies$ occurs everywhere. <mark>But why did it occur?</mark></p>

<ul>
  <li>take advantage of <strong>specialization</strong> = those delegated with narrow set of tasks can develop better skills at it</li>
  <li>overcome individual <strong>time/resource constraints</strong> = simply too difficult for a single person to control everything
    <ul>
      <li>e.g. all polices report to the chief $\to$ at some point too overwhelming for that single chief to understand what is happening $\to$ hierarchical</li>
    </ul>
  </li>
  <li><strong>mitigate collection action problems</strong> (e.g. free rider) . for example, this <em>small</em> group of people has this responsibility</li>
  <li><strong>deflect responsibility</strong>: let other people enact certain harsh decisions/implementations
    <ul>
      <li>e.g. let IRS collect taxes, but when using it to build infrastructure such as bridges, MC shows up</li>
    </ul>
  </li>
</ul>

<p>While this sounds great, <mark>what can go wrong in this agency model</mark>?</p>

<ul>
  <li>they might not do what you want $\to$ <strong>moral harzard problem</strong> = personal interest for those agents could come first</li>
  <li>they might just be bad at it $\to$ <strong>adverse selection problem</strong></li>
</ul>

<blockquote>
  <p>This basically comes down to <strong>Agency Loss</strong> = different between the quality of you doing it v.s. someone else doing it = i.e. cost of due to delegating power to others</p>
</blockquote>

<p>(note that this is applicable to the proliferation of local government = different lens to the same problem)</p>

<hr />

<p>How do you reduce agency loss?  (i.e. cost of delegating power to others)</p>

<ul>
  <li><strong>Intentional disobedience</strong> can be <strong>mitigated</strong> by
    <ul>
      <li>set clear rules and instructions, be explicit what the agent should do</li>
      <li>punishment/reward, e.g. monitoring</li>
    </ul>
  </li>
  <li><strong>incompetence</strong> can be <strong>mitigated</strong> by
    <ul>
      <li>careful selection of agent with right skills</li>
      <li>dismissing agents without skills, e.g. competitions</li>
    </ul>
  </li>
</ul>

<p>But of course, this might not be easy to implement in real life</p>

<ul>
  <li>how do you keep certain FBI work on law enforcement but not CIA, so that if you tried to remove them they threaten with some compromised documents?</li>
</ul>

<h2 id="the-us-congress">The US Congress</h2>

<p>Recall that:</p>

<ul>
  <li>Instead of having all power delegate to a president (after years of tyranny under a king), framers, while recognizing the need for centralization in terms of a stronger national government with an elected executive wielding its own authority, those at the Constitutional Convention <strong>wanted a strong representative assembly at the national level</strong>: the congress</li>
  <li>Thus, Article I of the Constitution <strong>grants several key powers to Congress</strong>, which include overseeing the budget and all financial matters, introducing legislation, confirming or rejecting judicial and executive nominations, and even declaring war.</li>
</ul>

<blockquote>
  <p>Background:</p>

  <ol>
    <li><strong>Speaker of the House</strong>: The Speaker of the House is the presiding officer of the House of Representatives and is responsible for overseeing the House’s proceedings, setting the agenda, and managing its operations. The Speaker is also second in line to the <em>presidency</em>, after the Vice President. The <em>Speaker is elected by the members of the House</em> and is <strong>typically the leader of the majority party.</strong></li>
    <li><strong>Majority Leader</strong>: The Majority Leader is responsible for managing and scheduling the House’s legislative agenda. They work with the Speaker of the House to set the legislative agenda and help guide legislation through the House. The Majority Leader is typically the second-ranking member of the majority party in the House.</li>
    <li><strong>Minority Leader</strong>: The Minority Leader is responsible for representing the minority party in the House and works with the Majority Leader and Speaker of the House to negotiate and craft legislation. The Minority Leader is typically the leader of the minority party in the House.</li>
    <li><strong>Whip</strong>: The Whip is responsible for counting votes and ensuring that members of their party <strong>vote in accordance with the party’s position</strong>. They work closely with the Majority and Minority Leaders to build support for legislation and to ensure that their party’s position is reflected in the House’s votes.</li>
  </ol>

  <p>What’s special about the Congress system in the US?</p>

  <ul>
    <li>The bicameral system established at the Constitutional Convention and still followed today requires the two houses to pass <strong>identical bills</strong>, or proposed items of legislation. This is not easy, hence
      <ul>
        <li>reduce hasty decisions</li>
        <li>large-scale dramatic reform is exceptionally difficult to pass and that the status quo is more likely to win the day</li>
        <li>difficult for a single faction or interest group to enact laws and restrictions</li>
      </ul>
    </li>
    <li>The congress is a <em>bicameral</em> system
      <ul>
        <li>the <strong>Senate</strong> every state will have two senators who each serve a six-year term.</li>
        <li>the <strong>House of Representatives</strong> are distributed among the states based on each state’s population</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>Certain <strong>powers of the congress</strong> include (granted by the Constitution)</p>

<ol>
  <li><strong>levy taxes</strong>: quite possibly the most important power Congress possesses, i.e. controls the money.</li>
  <li>setting budget and regulate interstate and international commerce</li>
  <li><strong>introduce legislation</strong></li>
  <li><strong>oversight</strong> of the actions of the president and the administration: the Senate’s final say on many presidential nominations and treaties signed by the president, and the House’s ability to impeach or formally accuse the president or other federal officials of wrongdoing</li>
  <li><strong>war declaration</strong>: they don’t run military, but they can decide whether if war can happen</li>
  <li>also have a “necessary and proper clause”</li>
</ol>

<p>How does <strong>Constitution limit Congress’ power</strong> (therefore incurs conformity costs)</p>

<ul>
  <li>need periodic (2y) <strong>elections</strong> = congressmen needs to respond to people’s needs</li>
  <li>separation of power
    <ul>
      <li>president being able to veto legislations</li>
      <li>house + senate</li>
    </ul>
  </li>
  <li>different elections
    <ul>
      <li>some people could be representing parts of NY, and certain the entire state of NY</li>
      <li>different goals</li>
    </ul>
  </li>
  <li>BoR limiting what congress can do</li>
</ul>

<p>The traditional process by which a bill becomes a law is called the <em>classic legislative process</em>. How does a bill get passed in the congress?</p>

<ol>
  <li>legislation must be drafted</li>
  <li>majority leadership consults with the parliamentarian about which committee to send it to.</li>
  <li>hold a hearing on the bill.
    <ul>
      <li>If the chair decides to not hold a hearing, this is tantamount to killing the bill in committee.</li>
    </ul>
  </li>
  <li>Once hearings have been completed, the bill enters the <strong>markup</strong> stage.
    <ul>
      <li>This is essentially an amending and voting process.</li>
      <li><em>Tabling a bill</em> typically means the bill is dead, but there is still an option to bring it back up for a vote again.</li>
      <li>If the committee decides to advance the bill, however, it is printed and goes to the chamber, either the House or the Senate.
        <ul>
          <li>House can debate and add amendments. Once the limits of debate and amendments have been reached, the House holds a vote. A majority (51%) is needed to pass</li>
          <li>in the Senate, the bill is placed on the calendar so it can be debated. Typically, senators allow each other to talk and debate as long as the speaker wants = the filibuster problem. To invoke <em>cloture</em> (prevent filibuster), the Senate had to get a two-thirds majority.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Post-fixing:</strong> recall that for a legislation to pass, both House and the Senate need to pass identical bills. Typically one of the two approach is taken:
    <ul>
      <li>the chamber to simply accept the bill that ultimately makes it out of the second chamber.</li>
      <li>first chamber to further amend the second chamber’s bill and send it back to the second chamber.</li>
    </ul>
  </li>
  <li>Pass to <strong>president for signature</strong>.
    <ul>
      <li>If the president does veto the bill, both chambers must muster a two-thirds vote to overcome the veto and make the bill law without presidential approval</li>
    </ul>
  </li>
</ol>

<p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230224232743479.png" alt="image-20230224232743479" style="zoom:30%;" /></p>

<h2 id="congress-with-agency-model">Congress with Agency Model</h2>

<p>How do <strong>collective action problem</strong> limit Congress</p>

<ul>
  <li>need for information
    <ul>
      <li>free-rider: the acquisution of knowledge incurrs some costs, but once you know it everybody can take advantage of it</li>
    </ul>
  </li>
  <li>compromise/building coalitions
    <ul>
      <li>legislation need majorities to make decisions</li>
    </ul>
  </li>
  <li>need to <strong>decide</strong> what to prioritize, since workload is inhuman (coordination problem)</li>
  <li>getting members of congress to work towards the <strong>same goal</strong>. Arises since individual and collective goals could be different
    <ul>
      <li>individual goals: reelection/higher office; power in Washington. i.e. MC might be better of
        <ul>
          <li>doing casework = directly helping a person = getting support back</li>
          <li>focus on pet legislation = what you personally really cared about</li>
          <li>just spend a lot of time campaigning in the district</li>
          <li>not drafting legislation (which is technically the job as congress member)</li>
        </ul>
      </li>
      <li>collective goal: good public policy, maintaining the institution</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>Collective action of the congress (e.g. drafting good polict) significantly <strong>undermined by individual interests</strong></p>
</blockquote>

<p>But this is not without hope:</p>

<ul>
  <li><strong>Specific members</strong> (i.e. a hierarchy) have special powers to <strong>induce coordination</strong> (solve coordinate action)
    <ul>
      <li><strong>legislative parties</strong>: Members of Congress are organized into political parties, and party leaders play a critical role in p<em>romoting coordination among members</em>.
        <ul>
          <li>Party leaders work to <strong>build consensus</strong> (balance individual interests) and ensure that their party’s positions are <strong>reflected in legislative outcomes</strong>.</li>
          <li>reduce the cost of information exchange and promote the exchange of information and ideas</li>
        </ul>
      </li>
      <li><strong>committee system</strong>: allows for members to work together to craft policy and can help to <strong>balance individual interests</strong> with the interests of the legislative body as a whole; can also seen as being <strong>delegated</strong> some power
        <ul>
          <li>so that this <em>smaller group of people</em> can do collective action stuff more easily, e.g. gathering information</li>
          <li>but the tradeoff is of course that there is still agency loss? How do we mitigate that?
            <ul>
              <li>select the right members (e.g. to control what kind of bills show up at the first place, e.g. giving leadership positions to loyal members)</li>
              <li>deploy reward and punishments (e.g. reward specific members things they are interested in)</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>shift some of the benefits of individual goals/powers</strong> to speakers of the house/whips
    <ul>
      <li>Speaker of the House and the Majority Leader have the ability to decide which bills are brought to the floor for consideration, and they have the power to shape the legislative agenda. This allows them to prioritize certain issues and work to build consensus among members, rather than allowing individual members to dictate the agenda based solely on their own interests.</li>
      <li>the Whips do focus on getting votes for their party’s positions, they also work to ensure that party members are represented and that their interests are taken into account in the legislative process.</li>
      <li>MC give up some individual freedom for collective benefits</li>
      <li>but given speaker of house’s power, this means that:
        <ul>
          <li>[-] e.g. Gaetz v.s. McCarthy. Gaits said we are not voting for you unless you change the powers to limit yourself. Note that in republican there are extreme factions = members want restraints on the speaker of house.</li>
          <li>[+] e.g. can use reward/punishment = essentially their power to achieve what they want. Nacy Pelosi to get AOC (Alexandria Ocasio-Cortez) if you do what;
            <ul>
              <li>threats = cut you out on majority committee</li>
              <li>get another candidate to compete with you</li>
            </ul>
          </li>
          <li>in summary, leader use reward and penalty to motivate the party. But party can change what power leaders have correspondingly</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><mark>agency model as a solution:  delegation of power</mark> from the house, and intended to use them to solve the collection problem
    <ul>
      <li>Resources of delegated to Party Leaders
        <ul>
          <li><strong>scheduling (agenda control)</strong>: setting rules of <em>how to make decisions</em> can affect the final decision!
            <ul>
              <li>e.g. preference for three senators A&gt;B&gt;C v.s. B&gt;C&gt;A v.s. C&gt;A&gt;B</li>
              <li>then A v.s. B will have A win; A v.s. C will have C win = what actually gets passed</li>
              <li>hence, this could <em>also be misused</em> for bad purposes</li>
            </ul>
          </li>
          <li>can control campaign money = solve coordination problem by giving reward and threats = controlling priority and working towards the same goal
            <ul>
              <li>e.g. Pelosi denying party members of Campaign funds when they don’t do their job (in Pelosi’s eyes)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Resource for Party in Senate (some what weaker and much more limited)
        <ul>
          <li>no rules committee</li>
          <li>unlimited debate and amendments
            <ul>
              <li>less efficient = small member of senate can kill legislation</li>
            </ul>
          </li>
          <li>decide committee leadership by seniority</li>
        </ul>
      </li>
      <li>delegate work to a committee: as explained before, a committee with less people have a smaller collective action problem. But</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>In the collective action framework, those are strategies to get one policy/preference passed among many conflicting preferences.</p>
</blockquote>

<hr />

<blockquote>
  <p>In general, political change is hard</p>

  <ul>
    <li>federal system has created a lot of veto points, so people can maintain policies they liked</li>
    <li>entrenched political power extensive, used to preserve status quo (e.g. the conservatism in the bicameral Congress)</li>
  </ul>
</blockquote>

<p>Hard to change, but not impossible. It is important for you to understand <em>what it takes/you need to do</em> to change the world.</p>

<ul>
  <li>abortion now banned 12 states now</li>
  <li>slavery and Jim Crow segregation ended</li>
</ul>

<h2 id="typology-of-legislation">Typology of Legislation</h2>

<blockquote>
  <p>crucial to explain <em>what</em> legislation can be passed more easily in the congress. A lot of this depends on:</p>

  <ul>
    <li>who/how many is going to <em>come to you</em> and complain (e.g. people being unhappy)</li>
    <li>who/how many is going to is going to <em>come to you</em> and reward/support you (e.g. people being happy)</li>
  </ul>
</blockquote>

<p>To see why this happens, we can first understand how <strong>targeted a particular legislation will be</strong></p>

<ul>
  <li>e.g. if you take a <em>particular group</em> benefit away/give, people will notice. If everybody pays a little, is fine = diffuse cost</li>
</ul>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>Concentrated Costs</th>
      <th>Diffuse Costs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Concentrated Benefits</td>
      <td>NA Free Trade Agreement<br />Cigarette tax to fund inner city education</td>
      <td>Farm subsidies (farmers get money for keeping land but funded by taxation)<br />Automotive subsidies</td>
    </tr>
    <tr>
      <td>Diffuse Benefits</td>
      <td>Environmental Protection<br />Eminent domain</td>
      <td>Military<br />Public education</td>
    </tr>
  </tbody>
</table>

<p>why the above:</p>

<ul>
  <li>NA Free Trade Agreement: any business can have the entire NA for trade; all those business that depends on the tariff needs to bear a huge costs</li>
  <li>Environmental Protection: business who pollutes need to bear the immense costs; benefit is for everyone in general = diffuse</li>
  <li>Eminent domain: government taking over some property (e.g. land) for a public project</li>
  <li>Military: the US entirely benefits form the strong military; paid by the broad tax based</li>
</ul>

<p>In general:</p>

<ul>
  <li>if costs/benefits are concentrated = leads to recipients <em>very likely</em> to provide feedback/show up</li>
  <li>if costs/benefits are diffuse = leads to recipients <em>unlikely</em> to notice</li>
</ul>

<blockquote>
  <p>Hence</p>

  <ul>
    <li><strong>MC biased toward</strong> well organized <strong>narrow interests</strong> = concentrated benefits and diffuse costs $\to$ benefited people will more likely show up to support the bill</li>
    <li><strong>MC will be bad passing</strong> at diffuse benefits and concentrated cost = not a lot of people show up to support it, but a lot showing up to condemn</li>
  </ul>
</blockquote>

<h1 id="the-presidency">The Presidency</h1>

<p>Some background</p>

<ul>
  <li>
    <p><strong>Election Process: primaries and electoral college</strong></p>

    <ul>
      <li>The rise of the <strong>presidential primary</strong> and <strong>caucus</strong> system as the main means by which presidential <mark>candidates</mark> are selected has had a number of anticipated and unanticipated consequences.
        <ul>
          <li>i.e. the political <strong>party system</strong>, + primaries, which are elections in which candidates vied for the support of state delegations to the party’s nominating convention.</li>
          <li><em>caucus</em> or large-scale gathering was made up of legislators in the Congress who met informally to decide on nominees from their respective parties.</li>
          <li>Hence, to win in primaries $\to$ candidates seek to align themselves with committed partisans,</li>
        </ul>
      </li>
      <li>then, the candidate who wins the popular vote in November receives <strong>all the state’s electoral votes</strong>.
        <ul>
          <li>the Electoral College consists of a body of 538 people called electors, each representing one of the fifty states or the District of Columbia.</li>
          <li>this system created certain irregularities: e.g. Donald Trump comfortably won the Electoral College by narrowly winning the popular vote in several states, while Hillary Clinton collected nearly 2.9 million more votes nationwide.</li>
          <li>Should no candidate receive a majority of the votes cast, the <em>House of Representatives</em> would select the president, with each state casting a single vote, while the <em>Senate</em> chose the vice president.</li>
        </ul>
      </li>
    </ul>

    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230225003637956.png" alt="image-20230225003637956" style="zoom:33%;" /></p>
  </li>
  <li>
    <p><strong>Impeachment</strong>: removing the president over serious wrongdoing</p>

    <ol>
      <li>the House of Representatives could impeach the president by a simple <strong>majority</strong> vote.</li>
      <li>the Senate could remove the president from office by a <strong>two-thirds majority</strong></li>
    </ol>

    <p>e.g. the most recent impeachments were of President Donald Trump, who was impeached in the House twice. However, support for removal in the Senate did not meet the super-majority requirement,</p>
  </li>
  <li>
    <p><strong>Power of the president</strong>: a few note-worthy ones include</p>

    <ol>
      <li><strong>commander-in-chief</strong> of the armed forces of the United States
        <ul>
          <li>today, this has been expanded greatly, with presidents waging undeclared wars,</li>
        </ul>
      </li>
      <li>negotiate treaties with the advice and consent of the Senate, and receive representatives of foreign nations</li>
      <li><strong>nominating federal judges, including Supreme Court justices</strong>, as well as other federal officials, and making appointments to fill military and diplomatic posts.</li>
      <li><strong>veto</strong> legislation if necessary, although a two-thirds supermajority in both houses of Congress could override that veto;</li>
      <li>(later developed) <strong>executive privilege</strong>, the right to withhold information from Congress, the judiciary, or the public.</li>
    </ol>

    <p>The rather vague wording in Article II, which says that the “<em>executive power shall be vested</em>” in the president, has been subject to broad and sweeping interpretation in order to <strong>justify actions beyond those specifically enumerated</strong></p>
  </li>
</ul>

<p>In general, we now see a growth of presidential power attributable to the growth of the United States $\to$ rising profile of the United States on the international stage has meant that the president is a far more important figure as leader of the nation.</p>

<hr />

<p>After winning an election:</p>

<ul>
  <li>
    <p><strong>appointments</strong></p>

    <ul>
      <li>most importantly selection of a <strong>cabinet</strong>.
        <ul>
          <li>today in total there are 15 members</li>
          <li>inner cabinet—the heads of the Departments of Defense, Justice, State, and the Treasury (echoing Washington’s original cabinet)—receive the most attention from the president, the Congress, and the media.</li>
          <li>president nominate those positions, while the <strong>Senate confirms or rejects these nominations</strong>. Though most of the time it is confirm.</li>
        </ul>
      </li>
      <li>selection of <strong>the West Wing of the White House</strong> = president’s staff, and the name is where they worked
        <ul>
          <li>e.g. political advisers, speechwriters, and a press secretary to manage the politics and the message of the administration</li>
          <li><em>not</em> subject to Senate approval</li>
        </ul>
      </li>
      <li>selection of <strong>vice president</strong>: before, vice presidents were often sent on minor missions or used as mouthpieces for the administration. But now they are taking a much more active role + collaboration with the president.</li>
    </ul>
  </li>
  <li>
    <p><strong>forging an agenda</strong>: decide how to deliver upon what was promised during the campaign.</p>
    <ul>
      <li>most presidents do recognize that they must address their major initiatives during their <strong>first two years</strong> in office.</li>
      <li>the delivery of an <strong>inaugural address</strong>: set forth priorities within the overarching vision of what they intend to do.</li>
    </ul>
  </li>
</ul>

<hr />

<p>The public presidency: can you use media + IT to get more political popularity?</p>

<ul>
  <li>before, using radio to broadcast the president’s voice into many of the nation’s homes.</li>
  <li>now, <strong>television and the internet</strong>, but it remains a question <mark>whether choosing to go public actually enhances a president’s political position</mark> in battles with Congress.
    <ul>
      <li>[-] polarize political debate</li>
      <li>[-] increase public opposition to the president</li>
      <li>[-] complicate the chances to get something done.</li>
      <li>[+] rallying supporters</li>
    </ul>
  </li>
  <li>but also the <strong>first lady</strong>: help to gain public support and help their husbands
    <ul>
      <li>e.g. increasing public political role of the first lady continued in the 1980s with Nancy Reagan’s “Just Say No” antidrug campaign</li>
    </ul>
  </li>
</ul>

<hr />

<p>President’s action during office:</p>

<ul>
  <li><strong>direct action</strong>, it may break a policy deadlock or establish new grounds for action
    <ul>
      <li>exercises the power of <strong>pardon</strong> without conditions, i.e. fully forgiven for their offense, and their criminal record is effectively erased</li>
      <li><strong>line-item veto</strong> is a type of veto that keeps the majority of a spending bill unaltered but nullifies certain lines of spending within it.</li>
      <li><strong>signing statements</strong> are statements issued by a president when agreeing to legislation</li>
      <li><strong>executive orders</strong> or proclamations to achieve policy goals = direct government agencies to pursue a certain course, but are subject to court rulings or changes in policy enacted by Congress
        <ul>
          <li><mark>often used in cases of national security</mark>, e.g. aggressively deploy U.S. military force.</li>
          <li><strong>rally around the flag effect</strong>, in which presidential popularity spikes during international crises = during national emergencies and war, presidents need to act independently and vigorously</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>informal powers</strong> of <strong>persuasion</strong> and negotiation essential to working with the legislative branch $\to$ to secure policy achievements in cooperation with Congress.
    <ul>
      <li>e.g. when the president nominates and the Senate confirms persons to fill vacancies on the Supreme Court</li>
      <li>e.g. In times of divided government (when one party controls the presidency and the other controls one or both chambers of Congress), it is up to the president to cut deals and make compromises that will attract support from at least some members of the opposition party</li>
    </ul>
  </li>
</ul>

<h2 id="how-powerful-is-the-us-president">How Powerful is the US President</h2>

<blockquote>
  <p>19th century president had weak power, more like clerks than leaders</p>

  <ul>
    <li>limited role in domestic policy making</li>
    <li>limited capacity in federal agencies</li>
    <li>cabinet (parties) made most of the policy choices</li>
    <li>exceptions of this include
      <ul>
        <li>Lincoln: assumed unpredence tpower during civil <em>war</em></li>
        <li>Jackson - incredibly popular so can go against Congress and courts</li>
      </ul>
    </li>
  </ul>

  <p>20 century - instead of lead by congress, federal government lead by the <strong>executives</strong></p>

  <ul>
    <li>due to industrial revolution = a lot happened and <strong>Congress appointed</strong> those stuff to the <em>executives</em></li>
    <li>New Deal programs expanded purview of <em>executives</em></li>
    <li>Great Society continued</li>
    <li>eventually the Congressional monitoring resource did not keep pace with executives work, could not monitor anymore</li>
  </ul>
</blockquote>

<p><strong>Advantage/Disadvantage of extensive delegation of power to executives</strong> by the Congress</p>

<ul>
  <li>[+] specialization: possibly greater expertise acquisition</li>
  <li>[+] reduced a lot of workload congress</li>
  <li>[+] more flexible policy-making
    <ul>
      <li>faster to change = congress might want certain policy changes more <em>up-to-date</em> with economic, medical, advances in science situations today</li>
      <li>but of course in the Congress’s perspective, you are <em>giving up power</em> = delegation problem</li>
    </ul>
  </li>
  <li>[+] avoid contentious policy issues (a political benefit for the congress, deflect responsitbility)</li>
  <li>[-] policy control becomes harder (one solution they employed is to make <em>rules</em> on how those policy can be made)</li>
</ul>

<p>As a result, the <strong>president’s power today can hugely affect policy-making</strong></p>

<ul>
  <li><strong>veto</strong> power of president
    <ul>
      <li>even if president doesn’t veto = still huge impact because policies being written, hidden in mind, want to comply to president = but incredible difficult to measure its impact</li>
      <li><strong>veto bargining</strong></li>
    </ul>
  </li>
  <li><strong>persuasion</strong>: if the congress passed something the president doesn’t like, one choice is to appeal to/persuade the public and let the public put pressure on the congress! (it is often very easy for the president to gather media attention)</li>
  <li><strong>unilateral executive action</strong>: allow presidents to “make” policy outside of the regular lawmaking process, allowing them to <a href="https://doi.org/10.1111/j.1741-5705.2005.00258.x">move first and act alone</a> in policy-making
    <ul>
      <li>i.e. “if the congress is not doing it, I will do it”.</li>
    </ul>
  </li>
</ul>

<h2 id="veto-bargaining">Veto Bargaining</h2>

<p>What will happen to the <em>bill devised by the Congress leaders</em> (ignoring Senator for now), if they know it can be vetoed by president?</p>

<ul>
  <li>sometimes it is <strong>not about passing a policy</strong>, but to <strong>send message</strong>
    <ul>
      <li>e.g. objective was to signal to policy maker that they are committed to change the policy</li>
    </ul>
  </li>
  <li>ordinarily, presidential veto is taken into account <strong>when coming up with a policy</strong>.
    <ul>
      <li>
        <p><strong>spatial model:</strong> a single dimension of <code class="language-plaintext highlighter-rouge">&lt;----- P ------- C -----&gt;</code>. Let SQ be the status quo policy, and distance being how disliked it is</p>

        <ol>
          <li><code class="language-plaintext highlighter-rouge">&lt;--SQ-- P ------- C -----&gt;</code>. Congress can draft a policy $p$ <em>towards their ideal upto</em> here <code class="language-plaintext highlighter-rouge">&lt;--SQ-- P --p---- C -----&gt;</code> and president won’t veto.</li>
          <li><code class="language-plaintext highlighter-rouge">&lt;----- P ------- C --SQ--&gt;</code>. Congress can draft a policy <em>exactly at their ideal</em>, to <code class="language-plaintext highlighter-rouge">&lt;----- P ------- Cp --SQ--&gt;</code>, and the president will also pass it</li>
          <li><code class="language-plaintext highlighter-rouge">&lt;----- P ---SQ--- C -----&gt;</code>. Then status quo cannot be changed = congress <em>cannot</em> propose a new legislation different from this = <mark>gridlock</mark>. (i.e. <strong>P and C want to move the policy in opposite direction</strong>). For example,
            <ul>
              <li>immigration reform = Republican want to make immigrant less pleasant, and democrats want to improve</li>
              <li>Environmental policy = Biden want to increase control on env, but Congress want to decrease environmental monitor;</li>
              <li>Abortion</li>
            </ul>
          </li>
        </ol>
      </li>
      <li>what can politicians do if it is in gridlock?
        <ul>
          <li>omnibus = pack something the president like into the policy, but also something you like so that president more likely pass it</li>
          <li>C: best option is to pass/think about other policies, or if they can, change what P wants</li>
          <li>P: can perform <mark>unilateral executive action</mark> = change policy on their own, and wait for congress to stop them. Why <mark>executives are so powerful today</mark></li>
        </ul>
      </li>
      <li>from the spatial model
        <ul>
          <li><strong>if $P$ and $C$ are aligned</strong>, the interval of opposite pull will be smaller = pass policy easier as they have the same interest</li>
          <li><strong>greater polarization</strong>: the gridlock interval becomes wider = president party very very different from the Congress = harder to make policy</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>but of course, several nuances in the spatial model</p>

<ul>
  <li>
    <p>Congress can overrule veto with super-majority = then this model doesn’t work = need to also model senators</p>
  </li>
  <li>
    <p><strong>First-Mover Advantage</strong>: whoever passes something first will <em>force the other to either veto it or pass it</em>. Consider the three scenarios above</p>

    <ul>
      <li>Congress moves first (because they are legislative anyway):
        <ul>
          <li>case 1) [+] congress can draft a policy $p$ <em>towards their ideal upto</em> here <code class="language-plaintext highlighter-rouge">&lt;--SQ-- P --p---- C -----&gt;</code></li>
          <li>case 2) [+] can draft <em>exactly at their ideal</em>, to <code class="language-plaintext highlighter-rouge">&lt;----- P ------- Cp --SQ--&gt;</code></li>
          <li>case 3) no gain no loss</li>
        </ul>
      </li>
      <li>President move first by passing <mark>executive order</mark>, so Congress is forced to either veto or pass it
        <ul>
          <li>case 1) [+] president can move directly at his/her ideal</li>
          <li>case 2) [+] can move to <code class="language-plaintext highlighter-rouge">&lt;----- P ----p-- C --SQ--&gt;</code> hence becomes closer to the president than before</li>
          <li>case 3) no gain no loss</li>
        </ul>
      </li>
    </ul>

    <p><mark>in all cases, whoever moves first gains advantage!</mark> An example IRL is Biden’s 400billion student loan relief program passed using executive order. Now congress/USSC is unhappy and checking it.</p>
  </li>
</ul>

<p>Therefore: agreements will be much harder to reach, but it depends the above strategies</p>

<h2 id="unilateral-executive-action">Unilateral Executive Action</h2>

<blockquote>
  <p><strong>Executive orders</strong>: direct/ask agencies in how they should carry out their job but technically cannot touch on law-making</p>
</blockquote>

<p>Example: Case of DACA: how executive orders can be used to “change” policy</p>

<ul>
  <li>DACA stands for Deferred Action for Childhood Arrivals. It is a program that offers work permits and deportation relief to more than 640,000 undocumented immigrants <strong>brought to the U.S. when they are children</strong></li>
  <li>One memo signed by President Biden <strong>ordered</strong> the Departments of Homeland Security to safeguard the Obama-era DACA program</li>
</ul>

<p>Legislative orders:</p>

<ul>
  <li>immigration reform has been an issue = federal gov failed to pass any significant policy in immigration</li>
  <li>2012- Obama admin issued rule on discretoin over deportatoin</li>
  <li>USSC said Trump had this power but the way he uses it is wrong</li>
</ul>

<blockquote>
  <p>Conclusion: president is powerful, but</p>

  <ul>
    <li>limited on political circumstances.</li>
    <li>mismatch in expectations bending the laws = innovation</li>
  </ul>
</blockquote>

<h1 id="the-courts">The Courts</h1>

<p>Some backgrounds:</p>

<ul>
  <li>along with part of the <strong>check and balance system</strong>, the judiciary is arguably the branch where the <strong>individual has the best chance to be heard</strong>. For the most part, the Supreme Court is an appeals court, operating under <strong>appellate jurisdiction</strong> (i.e. hearing appeals from the lower courts)</li>
  <li>
    <p>the power of <strong>judicial review</strong>: as part of the system of checks and balances, to look at actions taken by the other branches of government and the states and determine whether they are constitutional.</p>
  </li>
  <li>
    <p>before, the basic structure of the judicial branch was:</p>

    <ul>
      <li>At the lowest level are the <strong>district courts</strong>, where federal cases are tried, witnesses testify, and evidence and arguments are presented.</li>
      <li>A losing party who is unhappy with a district court decision may appeal to the circuit courts, or <strong>U.S. courts of appeals</strong>, where the decision of the lower court is reviewed.</li>
      <li>Still further, appeal to the U.S. Supreme Court is possible, but of the thousands of petitions for appeal, the Supreme Court will typically hear fewer than one hundred a year.</li>
    </ul>
  </li>
  <li>
    <p>the judiciary today continues as a <strong>dual court system</strong></p>

    <ul>
      <li>
        <p>with courts at <mark>both the national and state levels</mark>.</p>
      </li>
      <li>
        <p>Both levels have three basic tiers consisting of <strong>trial court</strong>, appellate court, and finally courts of last resort, typically called supreme courts</p>

        <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230225023717252.png" alt="image-20230225023717252" style="zoom:22%;" /></p>

        <p>in case of federal courts:</p>

        <ul>
          <li>there are ninety-four U.S. <strong>district courts</strong> in the fifty states and U.S. territories, of which eighty-nine are in the states (at least one in each state).</li>
          <li>On the U.S. Supreme Court, there are nine justices—one chief justice and eight associate justices. Circuit courts each contain three justices, whereas federal district courts have just one judge each.</li>
          <li>court system operates on the principle of <strong><em>stare decisis</em></strong> (Latin for <em>stand by things decided</em>), which means that today’s decisions are based largely on rulings from the past = if legal facts of today’s court is the same as before, then it should be treated the same way. <mark>court interpretations can change as times and circumstances change</mark>, hence changes is still possible.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>Courts and Public Policy</p>

<ul>
  <li>United States has a <strong>common law</strong> system. With code law in place, as it is in many nations of the world, it is the job of judges to simply apply the law. Under common law, as in the United States, they <em>interpret</em> it</li>
  <li><strong>last resort</strong> for individuals or a group believing there as been a wrong
    <ul>
      <li>e.g. employment <strong>discrimination</strong> based on their religious attire,</li>
      <li>e.g. put limits on the ability to impose the death penalty, ruling, for example, that the government may not execute a person with cognitive disabilities</li>
    </ul>
  </li>
</ul>

<hr />

<p><strong>Courts and Federalism</strong></p>

<ul>
  <li>
    <p>State courts really are the core of the <strong>U.S. judicial system</strong>, and they are responsible for a huge area of law.</p>

    <ul>
      <li>Although the Supreme Court tends to draw the most public attention, it typically hears fewer than one hundred cases every year.</li>
      <li>The federal courts, on the other hand, will hear any case that involves a foreign government, patent or copyright infringement.</li>
    </ul>

    <table>
      <thead>
        <tr>
          <th style="text-align: left">State Courts</th>
          <th style="text-align: left">Federal Courts</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: left">Hear most day-to-day cases, covering 90 percent of all cases</td>
          <td style="text-align: left">Hear cases that involve a “federal question,” involving the Constitution, federal laws or treaties, or a “federal party” in which the U.S. government is a party to the case</td>
        </tr>
        <tr>
          <td style="text-align: left">Hear both civil and criminal matters</td>
          <td style="text-align: left">Hear both civil and criminal matters, although many criminal cases involving federal law are tried in state courts</td>
        </tr>
        <tr>
          <td style="text-align: left">Help the states retain their own sovereignty in judicial matters over their state laws, distinct from the national government</td>
          <td style="text-align: left">Hear cases that involve “interstate” matters, “diversity of citizenship” involving parties of two different states, or between a U.S. citizen and a citizen of another nation (and with a damage claim of at least $75,000)</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>this federal design has both pluses and minuses</p>
    <ul>
      <li>[+] more than just one court system ready to protect that</li>
      <li>[-]  judicial rulings about what is legal or illegal may differ from state to state $\leftarrow$ state law that governs the authority of state courts
        <ul>
          <li>different courts in which a person could face charges for a crime or for a violation of another person’s rights.</li>
          <li>Just as the laws <strong>vary</strong> across the states, so do <strong>judicial rulings and interpretations</strong>, and the judges who make them.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<hr />

<p><strong>The federal court system</strong>: the basics has been mostly covered before with the three level. Here we discuss the <strong>selection of judges</strong></p>

<ul>
  <li>
    <p>At the federal level, the <strong>president nominates a candidate</strong> to a judgeship or justice position, and the <strong>nominee must be confirmed</strong> by a majority vote in the U.S. Senate</p>

    <ul>
      <li>through such <strong>senatorial courtesy</strong>, senators exert considerable influence on the selection of judges in their state,</li>
    </ul>
  </li>
  <li>
    <p>All judges and justices in the <em>national courts</em> (from US District to USSC) serve <strong>lifetime</strong> terms of office. This is to provide the judicial branch with enough independence such that it could not easily be influenced by the political winds of the time.</p>
  </li>
  <li>
    <p>What was once a predominately White, male, Protestant institution is today much more diverse:</p>

    <table>
      <thead>
        <tr>
          <th>First Catholic</th>
          <th>Roger B. Taney (nominated in 1836)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>First Jew</td>
          <td>Louis J. Brandeis (1916)</td>
        </tr>
        <tr>
          <td>First (and only) former U.S. President</td>
          <td>William Howard Taft (1921)</td>
        </tr>
        <tr>
          <td>First African American</td>
          <td>Thurgood Marshall (1967)</td>
        </tr>
        <tr>
          <td>First Woman</td>
          <td>Sandra Day O’Connor (1981)</td>
        </tr>
        <tr>
          <td>First Hispanic American</td>
          <td>Sonia Sotomayor (2009)</td>
        </tr>
      </tbody>
    </table>

    <p>However, the number of women and people of color on the courts <strong>still lags behind the overall number of White men</strong>.</p>

    <ul>
      <li>As of 2021, the federal judiciary consists of 67 percent men and 33 percent women.</li>
      <li>In terms of race and ethnicity, 74 percent of federal judges are White, 12 percent African American, 8 percent Latinx, and 4 percent Asian American.</li>
    </ul>
  </li>
</ul>

<hr />

<p><strong>The US Supreme Court</strong></p>

<ul>
  <li>structure
    <ul>
      <li>There is one <strong>chief justice</strong>, who is the lead or highest-ranking judge on the Court, and eight <strong>associate justices</strong></li>
      <li>Each justice has three or four <strong>law clerks</strong>: law clerks’ work and recommendations influence whether the justices will choose to hear a case</li>
    </ul>
  </li>
  <li>selecting cases
    <ul>
      <li>Case names, written in italics, list the name of a petitioner versus a respondent, as in <em>Roe v. Wade</em>, for example. Since the petitioner is the one bringing up the case and the party unhappy with the decision of the lower court will be the one $\to$ can tell which party lost at the lower level of court (e.g. Roe, for example)</li>
      <li>accepts <strong>fewer than 2 percent</strong> of the as many as ten thousand cases it is asked to review every year.
        <ul>
          <li>most often it is <strong>writ of <em>certiorari</em></strong>, a request that the lower court send up its record of the case for review. Then four of the nine justices must vote to accept a case. This is called the <strong>Rule of Four</strong>.</li>
          <li><strong>solicitor general</strong> is the lawyer who represents the federal government before the Supreme Court: He or she decides which cases (<strong>in which the United States is a party</strong>) should be appealed from the lower courts and personally approves each one presented. Most of the cases the solicitor general brings to the Court will be given a place on the docket.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>supreme court procedures
    <ul>
      <li>Once a case has been placed on the docket, <strong>briefs</strong>, or short arguments explaining each party’s view of the case, must be submitted
        <ul>
          <li>first by the petitioner and respondent</li>
          <li>other non-involving groups may also file may file an <strong>*amicus curiae*</strong> (“friend of the court”) brief giving their opinion, analysis, and recommendations about how the Court should rule.</li>
        </ul>
      </li>
      <li>After brief filed, USSC hears <strong>oral arguments</strong> in cases from October through April. The proceedings are quite ceremonial.
        <ul>
          <li>each side’s lawyers have thirty minutes to make their legal case, though the justices often interrupt the presentations with questions.</li>
          <li>decide the case in a (private) conference by discussions and then voting</li>
          <li>Oral arguments are open to the public.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Judicial opinions
    <ul>
      <li>along with the decision, there will be a published <strong>majority opinion</strong> = explanation of the majority vote, and a <strong>dissenting opinion</strong>, being written by the people assigned by most senior justice in the dissenting group</li>
    </ul>
  </li>
  <li>Influencing the decision
    <ul>
      <li>courts must rule on its facts. Although the courts’ role is interpretive, judges and justices are still constrained by the facts of the case, the Constitution, the relevant laws, and the courts’ own precedent.</li>
      <li>but in reality <strong>many factors play a role in its decision-making</strong>
        <ul>
          <li>including law clerks, the solicitor general, interest groups, and the mass media. But additional legal, personal, ideological, and political influences weigh on the Supreme Court and its decision-making process.</li>
          <li>judges personal beliefs and political attitudes also matter</li>
          <li>affected by another “court”—the court of public opinion, e.g. swayed by special-interest pressure, the mass media, etc.</li>
        </ul>
      </li>
      <li>Both the <strong>executive and legislative branches check and balance</strong> the judiciary in many different ways.
        <ul>
          <li>President appoint nominees, Congress retains the power to modify the federal court structure and its appellate jurisdiction, and the Senate may accept or reject presidential nominees to the federal courts.</li>
          <li>court rulings matter only to the extent they are heeded and followed = <strong>judicial implementation</strong>. While it is true that courts play a major role in policymaking, they have <em>no mechanism to make their rulings a reality</em> = <mark>relies on the executive to implement</mark> or enforce its decisions.</li>
          <li>in general both the president and other branches <em>tend to provide support</em> rather than opposition $\to$ what becomes of court decisions is largely due to their credibility, their viability, and the assistance given by the other branches of government.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>Therefore, <strong>US legal system is federalized</strong> with the legislatures:</p>

<ul>
  <li>50 state court systems and 50 state constitutions</li>
  <li>federal courts can declare <strong>state laws invalid</strong> if they conflict with the federal constitution (supremacy clause)
    <ul>
      <li>e.g. abortion is explicitly protected in some states while not in the constitution = allowed under this framework</li>
    </ul>
  </li>
</ul>

<h2 id="judiciary-court-and-the-agency-problem">Judiciary Court and the Agency Problem</h2>

<p>What’s the aim of federal court?</p>

<ul>
  <li><strong>resolving disputes</strong>: often <em>state</em> and <em>federal</em> governments disagree, or <em>congress</em> and <em>president</em> disagree
    <ul>
      <li>e.g. Trump admin threatening California air quality standards (i.e. your cars need to meet a particular efficiency threshold, and they set their own standards). California wanted to raise the standard due to the large amount of cars there, but Trump disagrees.</li>
      <li>e.g. ACA medicaid expansion</li>
      <li>e.g. Trump v. Hawaii</li>
    </ul>
  </li>
  <li><strong>judicial review</strong> = declare laws invalid/enforce state agencies to do stuff = <mark>most important for political science</mark></li>
</ul>

<p>Structure: USSC is really the court of <strong>final appeal</strong></p>

<ul>
  <li>justices vote whether or not to accept a case, usually important ones such as from solicitors (represent US gov)</li>
  <li>judgments from USSC set precedent for the entire country = so laws are <strong>even across states</strong></li>
</ul>

<p>Agency problem and USSC:</p>

<ul>
  <li>government chooses USSC members, hence delegation = <strong>judges act as agents of Congress and President</strong>
    <ul>
      <li>to help implement decisions</li>
      <li>to help adjudicate bureaucracti obedience</li>
      <li>but of course, the aim of USSC is to reduce agency loss (e.g. congress has 800+ people)</li>
    </ul>
  </li>
  <li>Regular criticism: life appointment inconsistent with democratic policy control</li>
  <li>Regular defense: protect the rights to unpopular people/minority (i.e. even against popular idea, you will not be removed = less impetus to conform simply to majority)</li>
</ul>

<p><strong>How can the agency loss be <em>limited</em></strong>?</p>

<ul>
  <li>careful selection: president appoints judges and senate confirms</li>
  <li>reasonably <strong>controlled/monitored</strong> by the congress and other branches:
    <ul>
      <li>congress sets structure of fedearl courts</li>
      <li>if congress is unhappy with it, congress can change laws, e.g. start the process of amending the constitution</li>
    </ul>
  </li>
</ul>

<p>What factors <strong>motivate USSC’s decision</strong> in a case?</p>

<ol>
  <li>follow the <strong>rules/constitution/federal statutes</strong>, which can be vague sometimes, and sometimes <em>contradictory</em>/inconsistent with others
    <ul>
      <li>how do they interpret those complex laws? (a) Intent of <em>authors</em> (b) purpose of the <em>law</em> (c) the plain meaning of the text</li>
    </ul>
  </li>
  <li>follow their <strong>own ideology</strong> = a preconceived notion of what is good or bad
    <ul>
      <li>this can be a big influencer, the cases that <em>reached USSC are often hard to decide by just following the rules</em></li>
    </ul>
  </li>
  <li>care about the <strong>legitimacy</strong> of the institution itself = want it to be revered and respected</li>
</ol>

<p><strong>Why might USSC still care about public opinion/maintaining legitmacy?</strong></p>

<ul>
  <li>they have no enforcement power, so what happens in reality depends on if policy enforcers will do it (e.g. only if it is popular)</li>
  <li>themselves suffer from delegation problem, e.g. they <mark>cannot control the president to actually perform those decisions</mark></li>
</ul>

<h2 id="how-ussc-is-affected-by-public-opinion">How USSC is affected by Public Opinion</h2>

<blockquote>
  <p><strong>Key idea</strong>: supreme court cares about their public approval, even though they will never be thrown out = wants to maintain legitimacy in the <strong>eyes of the public</strong></p>
</blockquote>

<p>But if an external event/some social forces affects both the public opinion and the USSC in a same way, it will look like public opinion affecting USSC but in reality this is a <strong>spurious correlation</strong>.</p>

<p>In the paper, they show that</p>

<p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230306220636520.png" alt="image-20230306220636520" style="zoom: 33%;" /></p>

<ul>
  <li>e.g. positive correlation of “Public Mood” is $1.59^*\pm0.78$ being statistically significant</li>
  <li>therefore, changing public mood and court ideology drive USSC decision making</li>
</ul>

<p>in the first section, they concluded that USSC will follow public opinions when:</p>

<ul>
  <li><strong>high profile decisions</strong> mattered the most, so justices care the most = had to stick to their personal ideologies/principles = most <strong><em>costly</em></strong> for the justice to just go with public opinion</li>
  <li>so for <strong>low profile decisions</strong> = USSC care more about public opinion</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Table 2</th>
      <th style="text-align: center">Figure 1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230306220736599.png" alt="image-20230306220736599" style="zoom:33%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230306220711393.png" alt="image-20230306220711393" style="zoom:33%;" /></td>
    </tr>
  </tbody>
</table>

<p>so that in this table:</p>

<ul>
  <li>following “public mood” is <strong>correlated with non-salient court cases</strong>, but no clear correlation with salient court cases</li>
</ul>

<blockquote>
  <p><strong>Conclusion</strong>: good evidence that USSC sometimes responds to public opinions = justices are balancing between public opinion and their legitimacy</p>
</blockquote>

<h2 id="democratic-trade-offs">Democratic Trade-offs</h2>

<p>To some extent, this is also related to the agency problem/limiting agency loss:</p>

<blockquote>
  <p>USSC <strong><em>can</em> prevent</strong> majority actions by elected branches = in some sense an anti-democratic institution. But, in those cases, many USSC blocks can be overcome through other means:</p>

  <ul>
    <li>US Constitution can be amended</li>
    <li>over time, USSC justices can be replaced</li>
  </ul>
</blockquote>

<p>What are the mechanisms that federal courts can use to <strong>affect policy making</strong></p>

<ol>
  <li>restrain federal/state action, e.g. your action violates some rights of people = <strong>blocks</strong> majoritarian policy making</li>
  <li>remove/change the set of restraints on federal/state actions, e.g. Dobbs v. Jackson on Women’s health = <strong>changes venue</strong> for majoritarian policy making</li>
  <li>change the rules of electoral competition = <strong>changes the means</strong> for majoritarian policy making
    <ul>
      <li>e.g. USSC have expanded the set of question they adjudicate = <strong>can determine the rules on how parties compete in redistricting</strong> = can affect the policy that comes out!
        <ul>
          <li>previously, the court cannot tampered with political actions, and the constitution does not specify this power as well. Now, USSC can review redistricting</li>
          <li>(Wesberry v. Sanders) USSC brings in 14th amendment ad requires US <em>house</em> districts on basis of population</li>
          <li>(Reynolds v. Sims) 14th Amendment requires <em>state</em> legislative districts on the basis of population = cannot have a city has only 1 senate for million, and a rural area 1:1000.</li>
        </ul>
      </li>
      <li>the above example results in massive shift in the balance of power between city and rural areas = came out from the USSC decisions even though they did not explicit tamper with the redistricting process itself</li>
    </ul>
  </li>
</ol>

<p>Note that:</p>

<ul>
  <li>it is often difficult for the USSC to entirely prevent a societal goal from happening (e.g. segregation), but to only <strong>block/remove a particular mechanism</strong> from achieving a goal:
    <ul>
      <li>e.g. recall the segregation fight between people (education segregation, white primaries, racial covenant, etc) and the courts</li>
      <li>i.e. difficult to fix all bugs all at once, but a few at a time when it pops up</li>
    </ul>
  </li>
  <li>if USSC had been weaker = would not block majoritarian policy making. e.g. DACA would be gone
    <ul>
      <li>recall that DACA is an administrative relief that protects eligible immigrants who came to the United States when they were children from deportation. DACA gives undocumented immigrants: 1) protection from deportation, and 2) a work permit</li>
      <li>DACA is created by the executive branch/Obama, but Trump admins want to revoke = <em>USSC decided</em> that is inconsistent with administrative rule, hence kept it in place</li>
    </ul>
  </li>
</ul>

<p><strong>A democratic bargain</strong> = whatever you do to the opposition when in power, that party can do the same to you when you step our of power</p>

<ul>
  <li>this alternation of power mechanism therefore act as a deterrent = a threat to tyranny</li>
  <li>but works if that party can wield the power when in place</li>
  <li>therefore, this alternation of power can protect <em>powerful</em> groups</li>
</ul>

<blockquote>
  <p><strong>Conclusion</strong>: courts are part of the rules of the game = e.g. decide how policies are made. Solve certain problems but also introduces others</p>
</blockquote>

<h1 id="the-bureaucracy">The Bureaucracy</h1>

<p>the many arms of the federal <strong>bureaucracy</strong>, often considered the fourth branch of government, are valuable components of the federal system.</p>

<ul>
  <li>elevated certain types of <mark>nonelected workers</mark> (i.e. hired) are elevated to positions of relative <strong>power</strong> within the governmental structure.</li>
  <li>Collectively, these essential workers are called the bureaucracy.</li>
  <li>examples in include: The Interstate Commerce Commission, Federal Reserve Board, etc</li>
</ul>

<blockquote>
  <p>A <strong>bureaucracy</strong> is an administrative group of nonelected officials charged with carrying out functions connected to a series of policies and programs.</p>

  <ul>
    <li>fundamentally, implementing the laws (e.g.) passed by Congress. Also include <strong>writing the more specifics laws, enforcing them,</strong> etc.</li>
    <li>public administration: the implementation of <strong>public policy</strong> as well as the academic study that prepares civil servants to work in government</li>
    <li>but, their roles are <mark>barely mentioned in the Constitution</mark>, despite being seen as “the <mark>fourth branch</mark> of the government”</li>
  </ul>
</blockquote>

<p><em>The origin of US Bureaucracy</em></p>

<ul>
  <li>For example, Article II, Section 2, provides the president the power to appoint officers and department heads. In the following section, the president is further empowered to see that the laws are “faithfully executed.” $\to$ Granting the president and Congress such responsibilities appears to anticipate a bureaucracy of some size, yet the design of the bureaucracy is <mark>not described</mark>.</li>
  <li>first developed in 1820s with the rise of <strong>centralized party politics</strong> is the <strong>spoils system</strong>: political appointments were transformed into political patronage = appointing federal posts as rewards for supporters swelled over the following decades.</li>
  <li>next, there is <strong>industrial revolution</strong> that increases the economic size of the US and brought people together with railroads and telegraphs</li>
  <li>President Woodrow Wilson believes that administrative activities should be <mark>devoid of political manipulations</mark> (while politics does set tasks for administration, public administration should be built on a science of management)</li>
</ul>

<p><em>Fall of political patronage</em></p>

<ul>
  <li>supporting the patronage system held that their positions were well earned; those who condemned it argued that federal legislation was needed to ensure jobs were awarded on the <strong>basis of merit</strong>.</li>
  <li><strong>Civil Service Reform Act</strong> of 1883 (<mark>Pendleton</mark> Act). The act established the Civil Service Commission, a centralized agency charged with <mark>ensuring that the federal government’s selection</mark>, retention, and promotion practices were based on open, competitive examinations in a <mark>merit system</mark></li>
</ul>

<p><em>The Bureaucracy comes of Age</em></p>

<ul>
  <li>With the onset of the Great Depression in 1929, President Roosevelt and U.S. Congress rapidly reorganized the government’s problem-solving efforts into a series of programs designed to revive the economy $\to$ In the 1930s, the <strong>federal bureaucracy grew</strong>, and by 1940, approximately 700,000 U.S. workers were employed in the federal bureaucracy.</li>
</ul>

<p><em>The Civil Service Commission</em></p>

<ul>
  <li>the Pendleton act had important consequences due to
    <ol>
      <li>the law attempted to reduce the impact of politics on the civil service sector by making it <strong>illegal to fire</strong> or otherwise punish government workers <strong>for strictly political reasons</strong>.</li>
      <li>raised the qualifications for employment in civil service positions by <strong>requiring applicants to pass exams</strong> designed to test their competence in a number of important skill and knowledge areas.</li>
      <li>allowed for the creation of the United States <strong>Civil Service Commission (CSC)</strong>, which was charged with enforcing the elements of the law.</li>
    </ol>
  </li>
  <li>Congress and the president responded (to prior skepticism on bureaucracy) with the <mark>Civil Service Reform Act of 1978</mark>, which abolished the Civil Service Commission. In its place, the law created two new federal agencies:
    <ul>
      <li><strong>Office of Personnel Management (OPM)</strong> has responsibility for recruiting, interviewing, and testing potential government employees in order to choose those who should be hired.</li>
      <li><strong>Merit Systems Protection Board (MSPB)</strong>, responsible for investigating charges of agency wrongdoing and hearing appeals when corrective actions are ordered.</li>
    </ul>
  </li>
</ul>

<p><em>Merit-Based Selection</em></p>

<ul>
  <li>
    <p>In this system, the large majority of jobs in individual bureaucracies are <strong>tied to the needs of the organization</strong> rather than to the political needs of the party bosses</p>
  </li>
  <li>
    <p>Before, a civil service exam is required, stipulated by the Pendleton Act. This mandatory testing has since been <strong>abandoned</strong>, and now approximately <strong>eighty-five percent of all federal government jobs are filled through an examination</strong> of the applicant’s education, background, knowledge, skills, and abilities. (amongst them a few still requires testing)</p>
  </li>
  <li>
    <p>Civil servants receive pay based on the U.S. Federal General Schedule.</p>

    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230319022934917.png" alt="image-20230319022934917" style="zoom: 25%;" /></p>

    <p>this system is to create an environment in which those most likely to succeed are in fact those who are ultimately appointed. However</p>

    <ul>
      <li>[+] naturally result in organizations composed of experts who dedicate their lives to their work and their agency.</li>
      <li>[-] permanent employees can become too independent of the elected leaders. While a degree of separation is intentional and desired, too much can result in <strong>bureaucracies that are insufficiently responsive to political change</strong>.</li>
      <li>[-] accepted expertise of individual bureaucrats can sometimes <strong>hide their own chauvinistic impulses</strong>.</li>
    </ul>
  </li>
</ul>

<p><em>Models of Bureaucracy</em></p>

<ul>
  <li>The patronage system tied the livelihoods of civil service workers to their party loyalty and discipline. Without the patronage network (spoils system), <strong>bureaucracies form their own motivations</strong>.</li>
  <li>models for understanding how bureaucracy works
    <ul>
      <li><strong>Weberian Model</strong>:
        <ul>
          <li>ideal type of bureaucracy, the Weberian model, was one in which <strong>agencies are apolitical, hierarchically organized, and governed by formal procedures</strong>.</li>
          <li>specialized bureaucrats would be better able to solve problems through <strong>logical reasoning</strong></li>
          <li>as a result, it would impose order and efficiency, create a clear understanding of the service provided, reduce arbitrariness, ensure accountability, and limit discretion.</li>
        </ul>
      </li>
      <li><strong>Acquisitive Model</strong>: bureaucracy compete for limited resources
        <ul>
          <li>bureaucracies are naturally competitive and power-hungry $\to$ they recognize that limited resources are available to feed bureaucracies, so they will work to <strong>enhance the status of their own bureaucracy to the detriment of others</strong>.</li>
          <li>e.g. attempt to emphasize their work to Congress and maximize its budget by depleting all its allotted resources each year</li>
          <li>In this way, the bureaucracy will eventually grow far beyond what is necessary and <strong>create bureaucratic waste</strong></li>
        </ul>
      </li>
      <li><strong>Monopolistic Model</strong>: <em>absence</em> of competition in bureaucracy
        <ul>
          <li>recognize the similarities between a bureaucracy like the Internal Revenue Service (IRS) and a private monopoly like a regional power company</li>
          <li>there are rare bureaucratic exceptions that typically compete for presidential favor, most notably organizations such as the CIA, the National Security Agency, and the intelligence agencies in the Department of Defense. Apart from these, bureaucracies have <strong>little reason to become more efficient or responsive</strong> due to absence of competition.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><em>Types of Bureaucractic Organizations</em></p>

<ul>
  <li>
    <p>In the U.S. government, there are four general types: <strong>cabinet departments</strong>, <strong>independent executive agencies</strong>, <strong>regulatory agencies</strong>, and <strong>government corporations</strong>.</p>
  </li>
  <li>
    <p><strong>Cabinet departments</strong> are major executive offices that are directly accountable to the president.</p>

    <ul>
      <li>
        <p>they include the Departments of State, Defense, Education, Treasury, and several others = <strong>headed by a single person nominated by the pres</strong>.</p>
      </li>
      <li>
        <p>usually have many smaller agencies within them, e.g. FBI within DoJ.</p>
      </li>
      <li>
        <p>individual cabinet departments are composed of numerous levels of bureaucracy. These levels descend from the department head in a mostly <strong>hierarchical</strong> pattern</p>

        <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230319143221201.png" alt="image-20230319143221201" style="zoom: 50%;" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Independent Executive Agencies and Regulatory Agencies</strong></p>

    <ul>
      <li>Like cabinet departments, independent executive agencies report directly to the president.</li>
      <li><strong>Unlike</strong> cabinet, independent executive agencies:
        <ul>
          <li>they are assigned far <strong>more focused tasks</strong>.</li>
          <li>These agencies are considered independent because they are <strong>not subject to the regulatory authority</strong> of any specific department.</li>
          <li>located outside of cabinet departments (obv.)</li>
        </ul>
      </li>
      <li>examples of <em>Independent Executive Agency</em> include Central Intelligence Agency (CIA), National Aeronautics and Space Administration (<strong>NASA</strong>), and Environmental Protection Agency (EPA)</li>
      <li><strong>Independent Regulatory commissions</strong>
        <ul>
          <li>to grant control and limit agency loss = Congress writes a law, these are the people who can oppose it even if popular
            <ul>
              <li>e.g. a federal reserve system = people insulated from popular anger; in the long term people will be better-off</li>
            </ul>
          </li>
          <li>independent from President as well</li>
        </ul>
      </li>
      <li>examples of <em>Regulatory Agency</em> include Interstate Commerce Commission (ICC), charged with regulating that most identifiable and prominent symbol of nineteenth-century industrialism, the railroad; Securities and Exchange Commission (SEC) expanded significantly in the digital era beyond mere regulation of stock floor trading</li>
    </ul>
  </li>
  <li>
    <p><strong>Government Corporations</strong></p>

    <ul>
      <li><strong>subject to market forces</strong> and tend to generate enough profit to be self-sustaining, but they also <strong>fulfill a vital service the government has</strong> an interest in maintaining.</li>
      <li>Unlike a private corporation, a government corporation does not have stockholders. Instead, it has a board of directors and managers; they are also exempted from taxes</li>
      <li>examples: most widely used government corporation is the <strong>U.S. Postal Service (USPS)</strong>. Another widely used government corporation is the National Railroad Passenger Corporation, which uses the trade name <strong>Amtrak</strong></li>
    </ul>
  </li>
</ul>

<p><em>Bureaucracy Rule-Making</em>: the processes of <strong>rulemaking and bureaucratic oversight are equally complex</strong> (since bureaucracy is complex)</p>

<ul>
  <li>before, <strong>notice-and-comment rulemaking</strong>: bureaucracy publicize its proposals, and allow for the public to comment.
    <ul>
      <li>if you want to deletage a task to an agent, what would you do? = <mark>monitoring</mark>: notice and comment rule-making</li>
      <li>e.g. <strong>FDA</strong> = which packaged food can be labeled healthy. This rule was put up , and would limit added sugars and other changes
        <ul>
          <li>of course, some unhappy as certain cereals would be <em>not</em> be labeled as healthy</li>
          <li>several manufacturing lobbied and this ruling is <em>still</em> in process = <mark>allows interest groups to "self-fix" them</mark> = interest groups to monitor bureaucrat compliance = and also policy to be influenced by science and the public!</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>now, some uses the <strong>negotiated rulemaking process</strong>: neutral advisors known as convenors put together a committee of those who have vested interests in the proposed rules $\to$ then, with the help of neutral mediators, the committee eventually reaches a general consensus on the rules.</li>
</ul>

<p><em>Government Bureaucratic Oversight</em></p>

<ul>
  <li>The ability for bureaucracies to develop their own rules and in many ways control their own budgets has often been a matter of great concern for elected leaders. As a result, elected leaders have employed a number of strategies and devices to <strong>control public administrators in the bureaucracy</strong>.</li>
  <li><strong>The Congress</strong>
    <ul>
      <li>because of its power to <strong>control funding</strong> and approve presidential appointments.</li>
      <li>perhaps the most powerful oversight tool is the Government Accountability Office (GAO) $\to$ produce <strong>reports</strong>, mostly at the insistence of Congress.
        <ul>
          <li>e.g. from Bureau of Prisons = needed to report the number of prisoners they incarcerate, and Congress found that 45% of the prisoners who are released are re-arrested within 3 years.</li>
          <li>Congress thinks this is too high, and decided to require BoP create programs to fix this (e.g. to help them during incarceration), and also metrics to evaluate its effectiveness</li>
          <li>BoP has still yet implemented an evaluation plan due to various difficulties = <strong>in reality you might need to do more to push bureaucracies to do what you want</strong></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>The president</strong>:
    <ul>
      <li>Most directly, the president controls the bureaucracies by <strong>appointing the heads</strong> of the fifteen cabinet departments and of many independent executive agencies, such as the CIA, the EPA, and etc.</li>
      <li>other way to conducts oversight over the federal bureaucracy is the Office of Management and Budget (OMB) $\to$ produce the president’s annual budget for the country</li>
      <li><strong>repealing bureaucratic rules</strong> = if you are appointed new president but disagree with previous admins. What can you do with the bureuacracies?
        <ul>
          <li>wanted to make sure that <mark>TODO</mark></li>
          <li>new President directed agencies to review <em>every single rule</em> that was promulgated between that period</li>
          <li>Department of Labor issued a new rule = note that Presidents can’t write rules themselves, <mark>make new rules through agencies under control</mark></li>
          <li>Congress passed resolution to overrule the rule</li>
          <li>President vetoed that resolution on Monday, so this new rule will probably stand</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>The citizens</strong>
    <ul>
      <li><mark>Freedom of Information Act of 1966</mark> = provides journalists and the general public the right to <strong>request records from various federal agencies</strong>. These agencies are required by law to release that information unless it qualifies for one of nine exemptions.</li>
      <li><mark>Government in Sunshine Act of 1976</mark> = requires all multi-headed federal agencies to <strong>hold their meetings in a public forum on a regular basis</strong>.
        <ul>
          <li>this name comes from the belief that corruption thrive in secrecy but shrink when exposed to the light of public scrutiny.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Within Bureaucracy itself</strong>
    <ul>
      <li>When Congress drafted the Civil Service Reform Act of 1978, it specifically included rights for federal <strong>whistleblowers</strong>, those who <strong>publicize misdeeds committed within a bureaucracy</strong> or other organization, and set up protection from reprisals.</li>
      <li>Over time, Congress and the president have strengthened protections of those whistleblowers with Whistleblower Protection Act of 1989 and the Whistleblower Protection Enhancement Act of 2012.</li>
    </ul>
  </li>
</ul>

<p><em>Government Privitization</em>: a more controversial solution to the perceived and real inefficiencies</p>

<ul>
  <li>[+] rhetoric of privatization—that market competition would <strong>stimulate innovation and efficiency</strong>—sounded like the proper remedy to many people and still does.</li>
  <li>[-] certain government functions are simply <strong>not possible to replicate in a private context</strong>.</li>
  <li>ways of privitization
    <ul>
      <li><strong>Divestiture, or full privatization</strong>, occurs when government services are transferred, usually through sale, from government bureaucratic control into an entirely market-based, private environment. Rare but: <strong>Student Loan Marketing Association</strong> in 1973 to full privatization in 2004</li>
      <li><strong>Issuing government contracts to private companies</strong> in order for them to provide necessary services. e.g. By 2006, reliance on contracting to run the war was so great that contractors outnumbered soldiers. = a <strong>very routine form of privatization</strong></li>
      <li><strong>Third-party financing</strong> = the federal government signs an agreement with a private entity so the two can form a <em>special-purpose vehicle</em> to take ownership of the object being financed. The special-purpose vehicle is empowered to reach out to private financial markets to borrow money.</li>
    </ul>
  </li>
</ul>

<h2 id="bureaucratic-structure-and-independence">Bureaucratic Structure and Independence</h2>

<blockquote>
  <p>Structure of the bureaucracy depends a lot on the leadership (who is in charge), funding, and mandate</p>
</blockquote>

<p>How does Congress decide on structure?</p>

<ul>
  <li>how similar are the goals: if a bureaucracy is often making decision on political <em>unpopular</em> matters</li>
  <li>can change the legislation of bureaucracy to prevent tyranny = achieve 51% $\gets$ may want a group of people in charge instead of a single person on sensitive/contradictory issues.</li>
</ul>

<p>Creating bureaucracy creates <strong>agency problem</strong></p>

<ul>
  <li>[-] a hired bureaucrat can have a different incentive compared to what you wanted</li>
  <li>[-] hard to watch everything = monitoring problem
    <ul>
      <li>e.g. the stuff they do is so complicated, it is difficult to assess how well they are doing it</li>
    </ul>
  </li>
  <li>As a result
    <ul>
      <li>[-] (w.r.t President and Congress) making policies President and the Congress dislikes, especially if staffed with extreme preferences</li>
      <li>[-] corruption can happen</li>
      <li>[-] shirking, difficult to fire a person due to political reason by design (as those jobs are politically protected to decouple from politics)</li>
    </ul>
  </li>
</ul>

<p>How can congress control this agency loss:</p>

<ul>
  <li>Pass new laws; senate confirmation when appointing offices</li>
  <li>hold hearing where bureaucrats must answer</li>
  <li><strong>Congressional Review Act</strong> = allows congress to <strong>override a rule</strong> through joint resolution</li>
  <li><strong>Administrative Procedures Act</strong> = establishes rules for <strong>how bureaucracies make policy</strong>, and requires them to solicit comments, allow time, and etc.</li>
  <li><strong>Freedom of Information Act</strong> = requires certain records from the bureaucrats be made public</li>
</ul>

<p><strong>Bureaucratic Autonomy</strong> - where does it come from?</p>

<ul>
  <li>
    <p>bureaucracies develop a <strong>reputation</strong> for competence</p>

    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230323120545278.png" alt="image-20230323120545278" style="zoom:40%;" /></p>

    <p>where interests groups are the people who vote/have interest</p>
  </li>
  <li>
    <p>with unique organizationl abilities</p>

    <ul>
      <li>have well-resourced mezzo-level bureaucrats to figure out what people likes, and do more of that</li>
    </ul>
  </li>
  <li>
    <p>has distinct political agendas</p>
  </li>
</ul>

<p><strong>Why bureaucracy are really the fourth branch</strong></p>

<ul>
  <li>bureaucracies also have constituencies = people supporting them = very specific group of people who are benefited</li>
  <li>this is different from the constituency for electing president/Congress</li>
</ul>

<h2 id="bureaucratic-private-enforcement-regime">Bureaucratic Private Enforcement Regime</h2>

<p>Why was there a massive increase in federal litigation before?</p>

<blockquote>
  <p><strong>Private enforcement regime</strong> refers to the system of legal mechanisms and procedures that allow <strong>individuals or private entities to enforce</strong> their legal rights against other individuals, companies, or government entities. This can involve seeking compensation for harm suffered or seeking an injunction to prevent harm from occurring.</p>

  <p>This is to be in contrast to public enforcement, where regulatory bodies such as the <em>government or law enforcement agencies are responsible</em> for enforcing the law.</p>
</blockquote>

<ul>
  <li><strong>allow private citizens to be able to sue</strong> private entities = stop violation of laws; rather have federal bureaucracy agents to enforce this</li>
  <li>e.g. law in Taxes that empowered individuals to sue people</li>
  <li>motivates people because people will be receiving benefits (e.g. suing employment inequality)</li>
  <li>emerged as a strategic choice (see benefits and drawbacks below)</li>
</ul>

<p>Why PER is beneficial?</p>

<ul>
  <li>[+] decouples with president = president who disagrees <strong>cannot prevent</strong> this</li>
  <li>[+] tie the enforcement process with the American population = ensure it is proportional to public preference
    <ul>
      <li>i.e. <strong>self-correction</strong> relative to the interest groups of that entity</li>
    </ul>
  </li>
  <li>[+] by creating individual benefit from those private enforcement process (e.g. money), <strong>less free-rider</strong> = people waiting others to sue</li>
</ul>

<p>but also comes with certain costs</p>

<ul>
  <li>[-] more litigation, hence need <em>more judges</em> to hear them, or the entire process become <em>slow</em></li>
  <li>[-] selective use of PER: people who are more wealthy gets more attention; an uneven advantage <em>favoring the more powerful</em> = <mark>more inequality</mark>
    <ul>
      <li>so uncertain areas are more vulnerable to judicial backlogs = e.g. not getting attention and went into backlogs to be “waitlisted”</li>
    </ul>
  </li>
  <li>[-] gives judiciary large role in determining policy (bad if you want more unpolitical opinions)</li>
</ul>

<p>How to <strong>motivate more people to do PER</strong>:</p>

<ul>
  <li>
    <p>if you win a PER:</p>

    <ul>
      <li>=’win damages, legal fees to be paid, time lost’</li>
      <li>therefore, you can increase probability of wining, reduce legal fees, etc, to motivate people do PER more</li>
      <li>basically find ways to increase the expected benefit by changing various components/burdens</li>
    </ul>
  </li>
  <li>
    <p>if you lose:</p>

    <ul>
      <li>=’no damages, legal fees to be paid, time lost’</li>
    </ul>
  </li>
  <li>
    <p>hence there is a balance between how to “assign” those burdens</p>

    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230323115914771.png" alt="image-20230323115914771" style="zoom:33%;" /></p>
  </li>
</ul>

<p>But in general, PER has been used a lot. The grey line being US plaintiffs litigation has been shifted to private people.</p>

<p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230323115653828.png" alt="image-20230323115653828" style="zoom: 40%;" /></p>

<blockquote>
  <p>Bureaucracy is not the only option to stop violation of law/promote equality, but PER can also have drawbacks.</p>

  <ul>
    <li><strong>inequality occurs in PER</strong>.
      <ul>
        <li>e.g. greater employment inequality due to employers know, depending on how wealthy/powerful the employee is, how likely they are being sued</li>
        <li>e.g. to uphold environmental protection standards, company will select poorer community to dump all the environmental wastes</li>
      </ul>
    </li>
    <li>a strong bureaucracy could prevent the above from happening. But there is the <strong>other problem of president oversights, etc</strong></li>
  </ul>
</blockquote>

<h2 id="progressive-reformers">Progressive Reformers</h2>

<blockquote>
  <p>A <strong>trade-off</strong> between controlling (e.g. bureaucracies) with expertise v.s. controlling with democracy</p>

  <ul>
    <li>more expertise = to protect policy from being changed by simply winning a majority vote</li>
    <li>more democracy = less corruption/tyranny</li>
  </ul>
</blockquote>

<p>During the progressive era, people worked to change governments at all levels from 1890s to 1920s and wanted gov to run like a business. They focused on the bureaucracies to have:</p>

<ul>
  <li>less corruption = fix voting systems</li>
  <li>more efficient</li>
  <li>immorality = e.g. alcohol ban</li>
  <li>social improvement and safety = e.g. more on women’s suffrage, so that they care more about limiting corruption = who supported their goal</li>
</ul>

<p>During this era, changes to achieve this include</p>

<ul>
  <li>16th = can levy taxes and require more from healthier states</li>
  <li>17th = popular electrion of senators = less corruption</li>
  <li>18th = prohibition of alcohol</li>
  <li>19th = women’s right to vote</li>
</ul>

<p>And this gives some <strong>hint to “ideal” bureaucratic designs</strong></p>

<ul>
  <li>need a mix of bureaucrats with expertise/political independence + bureaucrats with “democratic” opinions
    <ul>
      <li>e.g. <strong>Federal Reserve System</strong> reflects this. There are 12 regional banks getting regional interests (democracy), but 7 governors serving 14-years term to be less affected by politics (expertise)</li>
      <li>e.g. <strong>Council-Manager form of city government</strong>. Professional manager serves longer in charge of government functions (expertise), and manager reports to council who does final decision incorporating public opinions</li>
    </ul>
  </li>
  <li>so basically there is a <strong>trade-off</strong> between “listening to people” and “making expert decisions”
    <ul>
      <li>if main threat is incompetence, the “solution” is political independence = <mark>complex/technical policy areas often fit this</mark></li>
      <li>if main concern is subversion/extremism, then more political control is a good solution</li>
    </ul>
  </li>
</ul>

<h2 id="welfare-state">Welfare State</h2>

<blockquote>
  <p>Welfare state = A series of agencies through which <strong>government</strong> takes care of health and well-being of the people</p>

  <ul>
    <li>you will see how this becomes an example of agency loss and a debate/conflict between fed and state</li>
  </ul>
</blockquote>

<p>What are the major elements of US welfare state?</p>

<ul>
  <li>social security = pension for older people</li>
  <li>Medicare and Medicaid = health insurance</li>
  <li>Unemployment insurance</li>
  <li>etc.</li>
</ul>

<p>Examples <em>not</em> counted as welfare include: public education, mortgage assistance, policing, etc. Hence as you can see:</p>

<blockquote>
  <p>Surly, boundaries of ‘welfare state’ is politically contested.</p>
</blockquote>

<p>But who runs the welfare state?</p>

<ul>
  <li>social security = by federal government</li>
  <li>medicare = by fed government</li>
  <li>medicaid = by state governments</li>
  <li>earned income tax credit = by federal</li>
  <li>etc.</li>
</ul>

<p>Why are some programs managed by fed, some by state? Specifically, why give states power to decide criterion for eligibility for Medicaid, for example?</p>

<ul>
  <li>reduces agency loss for political majorities in states = they might not trust the federal bureaucrat</li>
  <li>increases agency loss for majority in congress = as states can do what they want</li>
  <li>
    <p>a lower level government in general also lower agency loss of voter = more responsive.</p>
  </li>
  <li>e.g. max income for medicaid for parent eligibility is different for different states (e.g. Texas very low, hence few Medicaid eligibility)</li>
</ul>

<blockquote>
  <p>This therefore also results in long history of conflict over <strong>who should be eligible for the benefits</strong> $\gets$ government and states want different group of people to be receiving the benefits</p>
</blockquote>

<h2 id="police-reform">Police Reform</h2>

<p>This topic is not on midterm, but has a lot on bureaucracy and agency problems, also a research project by the professor.</p>

<blockquote>
  <p><strong>Research question</strong>: how well did police policy-making process serve Black people?</p>

  <ul>
    <li>how democratic responsible are they = are they listening to the people?</li>
    <li>how well did police policies actually protect black people.</li>
  </ul>
</blockquote>

<p>A policy-making process for police:</p>

<ol>
  <li>(many) black people unhappy with policing</li>
  <li>advocacy groups propose solutions, e.g. more training, Police Community Relations (PCR), more black cops, break policy department into smaller units = more accountability</li>
  <li>policing experts settle on PCR and hiring Black officers</li>
  <li>other solutions pruned</li>
</ol>

<p>Empirical questions answered by the reading/paper:</p>

<ul>
  <li>Did PCR programs change arrest rates for Black people?</li>
  <li>Did PCR programs reduce crime rates?</li>
</ul>

<p>The short summary is a decreased low level arrest for white, <strong>not</strong> a lot for black people.</p>

<hr />

<p>Historical context: 1945-70</p>

<ul>
  <li>Popular constraints in 1955:
    <ul>
      <li>complaint that black victims were not concerned</li>
      <li>brutality, e.g. police hurting the suspect during arrest</li>
      <li>unreliable protetion from white vigilantes</li>
      <li>wide-spread complaints on disrespect</li>
    </ul>
  </li>
  <li>reform proposals
    <ul>
      <li>training = give officers a different set of skills
        <ul>
          <li>e.g. introduce police officers to prejudices and make them aware of those</li>
          <li>e.g. teach cops to see crimes not as race but environemntal efforts</li>
        </ul>
      </li>
      <li>hiring black officers = believing it happened due to adversarial selection problem</li>
      <li>civilian review board</li>
      <li>police community relations = began in 1955
        <ul>
          <li>how do we get black leaders and police together, work together and solve</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>during this time, there was also a lot on women reform, but also on Vietnam war</li>
  <li>this results in the most common features of PCR programs
    <ul>
      <li>training</li>
      <li>community advisory councils or meetings; residents come to police and can file complaints</li>
      <li>specialized outreach officers= sell the police department to residents of various colors</li>
    </ul>
  </li>
  <li>however, the result is
    <ul>
      <li>Dallas had no PCR and ended with decreasing arrests</li>
      <li>so we are not uniforming seeing PCR helping it. Raises the question: what effect does PCR have? Control variables?</li>
    </ul>
  </li>
</ul>

<p>Related works</p>

<ul>
  <li>no studies of PCR program effect on punishment</li>
  <li>black perference $\neq$ low punishment; black people wanted a bunch of diverse things to be safe. But
    <ul>
      <li>high rates of crime victimization drive support for punitive approaches</li>
      <li>black officers took these jobs to be police officer, often <em>not</em> to change the racial-police relationship = should not expect that just putting black police will make them act different from other polices</li>
    </ul>
  </li>
  <li>conjecture that policy-making environment may bias against black preference</li>
</ul>

<blockquote>
  <p>Hypothesis:</p>

  <ol>
    <li>these programs effects will depend on city racial conposition</li>
    <li>PCR increase arrest rates for low-level offenses, if
      <ul>
        <li>reduced risk of intervention for officers = don’t want to be involved with brutal cases to hurt themselves</li>
        <li>increased service for crime victims, i.e. more police is answering your help</li>
      </ul>
    </li>
    <li>PCR decrease arrest rates for low-level offenses, if
      <ul>
        <li>greater deference to community preferences, e.g. want less arrests for gambling</li>
        <li>officers working less hard = greater shirking</li>
        <li>effort switched to serious crimes</li>
      </ul>
    </li>
  </ol>
</blockquote>

<p>The empirical study then considers data of PCR program status, population, black and white minor crimes arrest rates. Then perform mixed effect models and measure how PCR changed things.</p>

<blockquote>
  <p>Results summary:</p>

  <ul>
    <li>PCR units reduced minor crime arrest rates for white, no clear effect on Black arrests rates</li>
    <li>PCR units reduced violent crime rates</li>
  </ul>

  <p>so unfortunately one of the major policy used in policy departments, PCR, had no clear effect in helping the black</p>
</blockquote>

<p>But why? This is still being worked on.</p>

<p>But be careful that arrest rates can mean different things, e.g. if they are not perpetrators, then this indicates police wrongdoings.</p>

<ul>
  <li>e.g. can look at dismissal rates <em>in addition</em> to arrest rates = a lot of people who were arrested have not committed the crime.</li>
</ul>

<h1 id="public-opinion">Public Opinion</h1>

<blockquote>
  <p><strong>Public opinion</strong>: aggregation of people’s view about issues, situations, &amp; public figures.</p>

  <ul>
    <li>e.g. when situations arise internationally, polling companies survey whether citizens support U.S. intervention in places like Syria or Ukraine. These individual opinions are collected together to be analyzed and interpreted for politicians and the media.</li>
  </ul>

</blockquote>

<p>But where do people’s opinions come from? Most citizens base their political opinions on their <strong>beliefs</strong> and their <strong>attitudes</strong></p>

<p><strong>Belief</strong>: closely held ideas that support our values and expectations about life and politics.</p>

<ul>
  <li>for example, the idea that we are all entitled to equality, liberty, freedom, and privacy is a belief most people in the United States share.</li>
  <li>i.e. what we <em>think</em> are true about the world, e.g. who do we <em>think</em> are responsible for xxx.</li>
  <li>can change rapidly over time</li>
</ul>

<p><strong>Attitude</strong>: surveys want to measure people’s view on an issue = measuring their attitude</p>

<ul>
  <li>represent the <em>preferences</em> (e.g. like or dislike) we form based on our life experiences and values.
    <ul>
      <li>more specific than ideologies; people of the same ideology can have different attitudes on the same issue (e.g. due to a variety of factors)</li>
      <li>can be <strong>more effective affecting survey responses</strong> than belief (e.g. I believe this is true, but I still dislike it.)</li>
    </ul>
  </li>
  <li>organized and consistent manner of thinking, feeling, and reacting to people/groups/social issues
    <ul>
      <li>but <strong>most</strong> people’s attitudes are <strong>quite losely structured</strong>/inconsistent</li>
      <li>but still more stable than beliefs</li>
      <li>e.g. consumer confidence = belief in economy changes rapidly during Trump/Pandemic/Biden, despite in reality the real change in economy is much less = <em>people’s attitudes on presidency/certain events affect their belief on the economy</em></li>
    </ul>
  </li>
  <li>attitude might be strong/weak = can change over time or not = depends on people and on issues
    <ul>
      <li>e.g. racial attitudes</li>
    </ul>
  </li>
</ul>

<p><strong>Ideology</strong>/Belief system: configuration of your beliefs and attitudes such that it can <strong>explain/connect one’s belief and attitudes</strong></p>

<ul>
  <li>established beliefs and ideals about how government and public policy should work</li>
  <li>in theory, this promotes consistency among political attitudes</li>
  <li>in practice, ideology combine attitudes linked by policy groups</li>
</ul>

<hr />

<p>Some examples of contemporary idelogies</p>

<ul>
  <li><strong>liberal</strong> positions
    <ul>
      <li>pro-choice</li>
      <li>higehr and more progressive taxation</li>
      <li>environmental protection</li>
      <li>social welfare programs</li>
    </ul>
  </li>
  <li><strong>conservative</strong> positions
    <ul>
      <li>pro-life</li>
      <li>lower taxes</li>
      <li>‘traditional’ values</li>
    </ul>
  </li>
  <li>one interesting issue is on <strong>military intervention</strong>
    <ul>
      <li>it seems party identification (democrat or republican) is <em>not</em> a good predictor for military intervention</li>
      <li>party identification is not identical to ideology but <em>a reasonably good proxy recently</em></li>
    </ul>
  </li>
</ul>

<p>On gross, what are majorities ideologies? Liberal-Conservative Self-Identification shows:</p>

<ul>
  <li>
    <p><strong>about half of the population don’t identify</strong> with any of those labels</p>
  </li>
  <li>
    <p>(a survey of 7 point scale, extremely conservative; …; extreme liberal; don’t know)</p>
  </li>
</ul>

<p><strong>Influence of Public Opinion</strong> on public policy</p>

<ul>
  <li>US constitution give mechanism to make it easier for folks to express and develop their public opinons
    <ul>
      <li>broad suffrage</li>
      <li>freedom of speech and press</li>
    </ul>
  </li>
  <li>public opinion affect politicians making decisions = they need to monitor public opinions
    <ul>
      <li>e.g. need to deal with regular elections</li>
    </ul>
  </li>
</ul>

<p>Origin/factors that <strong>influence public opinion</strong></p>

<ul>
  <li>they have shared political <strong>values</strong> (e.g. equlity of opportunity, individual freedom)
    <ul>
      <li><strong>basic model: people form opinion using those values they have</strong></li>
      <li>but those values are not <em>born with those values</em> = political socializatoin</li>
    </ul>
  </li>
  <li><strong>political socialization</strong>
    <ul>
      <li>influenced by family, social groups (e.g. unions and churches)</li>
      <li>education = years of formal education associated with more tolerance; more participation in politics</li>
      <li>major political events = people who have gone through those major events (e.g. Civil War, new Deals) have a shared opinions; this makes their opinions more similar to each other than people from other times</li>
    </ul>
  </li>
</ul>

<h2 id="us-opinion-over-time">US Opinion over time</h2>

<p>Many events which has <strong>opinions change over time</strong> (measured from public opinion pool)</p>

<ul>
  <li><strong>abortion</strong>: in the past (1988) about 40% opposing abortion, now only 10-15% opposes it
    <ul>
      <li>a further breakdown for recent opinions = about 30-40% thinks it abortion should be permitted when rape, etc. And another 25-40% thinks it should be woman’s freedom</li>
    </ul>
  </li>
  <li><strong>guns</strong>: about 5% people thinks it should be made easier to acquire guns; about 50% more difficult, and 45% keep same.
    <ul>
      <li>interestingly, this trend has been remarkably stable</li>
      <li>why more stable? several possible reasons
        <ul>
          <li>this is a distant issue, v.s. abortion is recent = unstable</li>
          <li>in reality, there had been decisions <em>making gun purchases easier</em>.
            <ul>
              <li>e.g. recently expired ban on buying assault rifles = more easier;</li>
              <li>e.g. USSC also passed laws to make it easier</li>
            </ul>
          </li>
          <li>an example where decisions can go against political opinion</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>income difference</strong>: should government take action to reduce the difference
    <ul>
      <li>about 50% agree that government should try to reduce income diff, about 20% thinks status quo</li>
    </ul>
  </li>
  <li><strong>public schools</strong>: about 70% wanted increase in public schools</li>
  <li><strong>social security</strong>: about 50% wanted increase in social security</li>
  <li><strong>more aid to poor</strong>: about 50% thinks that federal should spend more to aid the poor, and about 40% thinks status quo</li>
  <li><strong>reduce deficit</strong>: about 75% people think it is very to extremely important</li>
</ul>

<p>The above is very weird: everybody wanted more spending on income/social security/more aid, but also reduce deficit = less spending = <strong>inconsistency</strong>.</p>

<ul>
  <li>
    <p>wrong question wording/wrong measurement</p>
  </li>
  <li>maybe public opinon should influence but <em>not used to determine</em> policy</li>
  <li>elite notions of policy coherency should be abandoned</li>
</ul>

<blockquote>
  <p><strong>Interpretation of those surveys are often complicated</strong>, and <strong>consistency</strong> in aggregate opinion is rare (e.g. see above).</p>
</blockquote>

<h2 id="what-can-go-wrong-in-public-pooling">What can go wrong in Public Pooling?</h2>

<p><strong>Can public opinion be manipulated/what can affect people’s attitudes?</strong></p>

<ul>
  <li>
    <p>first of all, this is difficult because many contributing factors are fixed, i.e. are steadfast and hard to change</p>

    <ul>
      <li>e.g. culture, religion. Have impact on your opinons, and they don’t change much over time</li>
    </ul>
  </li>
  <li>
    <p>opinions on contradictory issues can manipulate through <strong>framing</strong></p>

    <ul>
      <li>given an issue, how you frame the issue affects how people think about it (e.g. religious freedom problem v.s. discrimination problem)</li>
      <li>basically answer could change based on how you frame the question</li>
    </ul>
  </li>
  <li><strong>sampling error</strong></li>
  <li>
    <p>drawing random samples is subject to <strong>trade-off</strong> between more data/less error v.s. more time/money costly</p>
  </li>
  <li><strong>selection bias</strong>, often selective non-response: might have missed certain populations.
    <ul>
      <li>e.g. survey in college and apply it to real life</li>
      <li>
        <p>e.g. the survey results we did in class is <em>different</em> than the results in public poll</p>

        <ul>
          <li>e.g. folks don’t trust the government won’t answer surveys, hence missed</li>
        </ul>
      </li>
      <li>
        <p>solution is a random sample of the entire population where everyone has chance of selection, and over-sampling plus re-weighing</p>

        <ul>
          <li>but this is difficult to implement in real life. e.g. no single directory to entire US population, and no reliable way to reach everyone (e.g. no internet access)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>measurement error</strong>: people’s answer might not be what they actually think</p>

    <ul>
      <li>you asked the wrong question, so data you collected <strong>does <em>not</em> answer what you wanted to measure</strong></li>
      <li>often this happens when your question is unclear/too simple
        <ul>
          <li>e.g. LA Times poll in 1980s “Do you think a pregnant women should or should not be able to get a legal abortion, <em>no matter what the reason?</em>” 57% says no.</li>
          <li>e.g. CBS poll a few months later “If a woan wants to have an abortion, and here doctor agrees to it, should she be allowed to have an abortion?” 58% said yes</li>
          <li>yea, questions are a bit different, but the point is that people’s majority opinion changes on the issue of abortion.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Measurement Validation</strong>: But how do you even <mark>quantify how good your methodolgy is</mark>, given that there is no “ground-truth to begin with”?</p>

<ul>
  <li>the simple idea is to ask the public if they think the methodology will answer the question you have in mind</li>
  <li>e.g. want to research how changing a priming text can change how people want to run for office
    <ul>
      <li>idea is to manipulate sense of racial discrimination, group solidarity, difficult etc.</li>
      <li>then by this validation technique, you can <strong>reduce (some) measurement errors</strong> (i.e. people did not answer the way you wanted) by:
        <ul>
          <li>e.g. just survey/interview people what they <em>think</em> the answer is asking (vast majority to just make sure this)</li>
          <li>e.g. in this research ask people in survey if they think those text approximately induce what you wanted to do</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>e.g. want to research: does the exposure of racial identity (e.g. people of Asian descent) change your support to the republican party?
    <ul>
      <li>Idea is to have a two sets of people: White and Asian American. Then random subset of both groups were treated with micro-aggression “I forgot that this study is only for US citizens. Are yuo a US citizen I cannot tell.” = cue a sense of exclusion to Asian Americans. The hypothesis is that this should only affect results for Asian Americans, not white.</li>
      <li>Result: Asian descent after micro-aggression had less support for republicans, v.s. White descent after micro-aggression. = <em>exposure to racialized micro-aggression caused Asian-identifiers to be more supportive of Democrats</em></li>
      <li><strong>Why is this useful?</strong> Implication that trend in democratic voting among Asian America may due to experiences of discrimination. = Hence republicans can have more support if they break this association with discrimination.</li>
    </ul>
  </li>
</ul>

<h1 id="elections">Elections</h1>

<p>How do you select a candidate? <strong>What are some “metrics” you would use to evaluate competence</strong>?</p>

<ul>
  <li>their policy proposals</li>
  <li>
    <p>policy priorities and party alignments; endorsements (who sponsored them)</p>
  </li>
  <li>their identity (age, race, gender, class)</li>
  <li>political track records/resume</li>
  <li>ask yourself: how are things going for you/others given that he/she will be in office?</li>
</ul>

<p>What are elections for?</p>

<ul>
  <li>
    <p><strong>mechanism for principals (votres) to keep agents in line/accountable</strong> (reduce agency loss)</p>

    <ul>
      <li>allow selection of candidates with desirable qualities</li>
      <li>prospect of fture electrions creates incentive for office-holders to behave themselves/care about eopple</li>
      <li>possibility of unseating incumbent creates incentive to monitor</li>
    </ul>

    <p>basically tie policy to what voters are interested in</p>
  </li>
  <li>
    <p>voting produces collective goods</p>

    <ul>
      <li>victory for party</li>
      <li>signal voter (dis)satisfaction to officials (so they can react)</li>
      <li>an opportunity to remove agents who are not performing well</li>
    </ul>
  </li>
</ul>

<h2 id="rational-theory-of-elections">Rational Theory of Elections</h2>

<p><strong>Elections/voting as a free-rider problem</strong>: it can be costly</p>

<ul>
  <li>
    <p>if voters wanted to maximize their individual well-being, would you vote?</p>

    <ul>
      <li>benefits: voting gives greater tie to the community</li>
      <li>costs: you have to do all the effort/studying, or the party you don’t like wins</li>
    </ul>
  </li>
  <li>
    <p><mark>a classical model of voting</mark></p>

\[V = P*B - C + D\]

    <p>where $V$ whether to vote, $P$ the prob of individual vote will change outcome, $B$ the benefit if candidate wins, $C$ the cost of voting, and $D$ duty of psychological gratification. Therefore in this simple model, you would vote if:</p>

\[P*B + D &gt; C\]

    <p>some factors</p>

    <ul>
      <li>if a coup/vote manipulation occurs, then $P\to 0$.</li>
      <li>$P$ would go up if: the vote is currently tied, there is a small voting population</li>
      <li>$B$ would go up if there are big difference between candidate policy goals</li>
      <li>$C$ would go up if: the financial status of the person, registration/voting laws, intimidation/violence</li>
      <li>$D$ would go up if: peer/social group pressure want you to vote</li>
    </ul>
  </li>
  <li>
    <p><strong>low-info rationality</strong>. In reality, it is found that <strong>on average, people know little about politics</strong></p>

    <ul>
      <li>does this mean that they are bad voters? Not necessarily</li>
      <li>learning all these info is time-consuming, but good substitutes around
        <ul>
          <li>can rely on cues
            <ul>
              <li>e.g. relying on price to infer quality when buying clothes</li>
              <li>hence, can making choosing an agent (who is better for you) much simpler</li>
            </ul>
          </li>
          <li>examples of cues involve
            <ul>
              <li>party labels/involvement</li>
              <li>endorsements: what kind of organization is backing him/her
                <ul>
                  <li>American Civil Liberties Union: civil liberties focused, on the rights of racial minorities</li>
                  <li>Newspaper can give endorsement as well (e.g. editorial board)</li>
                </ul>
              </li>
              <li>identity feature such as gender or race</li>
              <li>candidate experience</li>
            </ul>
          </li>
          <li>it turns out that providing this informational is <strong>indeed a major objective of campaigns</strong></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="research-example-candidate-evaluation">Research Example: Candidate Evaluation</h2>

<p>2021 World Bank data: US ranks below other rich liberal democracy in the proportional of national legislative seats (senate+house) held by women.</p>

<blockquote>
  <p>Does this indicate US is behind in terms of gender discrimination? This is a complicated question.</p>
</blockquote>

<ul>
  <li>
    <p>Q: if imbalance in office matches imbalance in candidate pool, does this mean no discrimination?</p>

    <p>Not if candidates are strategic</p>
  </li>
  <li>
    <p>Q: does euqal win rates in general elections mean on discrimination?</p>

    <p>Not if selection process produces different candidate pools</p>
  </li>
  <li>
    <p>What would be the “good” questions to ask? We need to consider: <strong>would the voter’s evaluation change if gender were different</strong>?</p>
  </li>
</ul>

<p>Path to (federal) office:</p>

<ol>
  <li>decision to run for office
    <ul>
      <li>women might have a harder time getting their main messages out due to discrimination in voters</li>
    </ul>
  </li>
  <li>wining in primary (need more fund-raising)</li>
  <li>winning general election</li>
</ol>

<p>The discrimination process <em>may</em> happen <em>anywhere</em> in this trajectory. Therefore even if in the end you have “equal win rates” there might still be discrimination. (e.g. discrimination against women in 1 and 2, but reversed in 3)</p>

<blockquote>
  <p>Takeaway: total effect of social features like gender is <strong>more expansive</strong> than quantitative studies we have today</p>

  <ul>
    <li>quantitiative tools are useful for testing a <em>single change</em></li>
    <li>therefore, all the estimates of effects we measure will be partial</li>
  </ul>
</blockquote>

<blockquote>
  <p>Research Question: Association of the task with gender implications can affect women’s win rate</p>
</blockquote>

<p>Hypothesis:</p>

<ol>
  <li>women have a larger advantage over men in <em>legislative</em> than in executive (women better at talking)</li>
  <li>women have a larger advantage where policy domain are <em>perceived towards women’s task</em> (e.g. school boards)</li>
  <li>women have  a larger advantage over men in constituents that are more <em>liberal</em> (so voters have less attachment with traditional gender values = more likely to vote for women)</li>
</ol>

<p>The idea is to study this from the election result in 2021. Assuming there is</p>

<ul>
  <li>
    <p><strong>no candidate quality different between genders</strong></p>
  </li>
  <li>
    <p><strong>similar selection process in the different elections</strong> (e.g. school board, mayor=more executive, city council=more legislative)</p>
  </li>
</ul>

<p>The result is:</p>

<ul>
  <li>women win rate does seem higher in school boards, and also higher in city council than mayor</li>
  <li>women’s win rate gaped more than men in school boards when there are more liberal voters. But there is a mixed effect in council elections and mayor</li>
</ul>

<h2 id="campaigns-and-persuasion">Campaigns and Persuasion</h2>

<p>How do I gather more more votes?</p>

<ul>
  <li>should I persuade those who disagree (involves democratic value of listening to people)?</li>
  <li>should I mobilize those who agree (just want them to show up and actually vote for me)?</li>
</ul>

<p>How do you decide voting?</p>

<ul>
  <li><strong>issue-based voting</strong>:
    <ul>
      <li>a person’s vote depends on if you agree with the candidate’s take on it</li>
      <li>a person’s vote depends on the weights of those issues (how important)</li>
      <li>but in reality, you will see that many people also vote <em>just for the candidate</em> regardless of his positions</li>
    </ul>
  </li>
  <li>how can campaigns change things?
    <ul>
      <li>can change weights of those issues</li>
      <li>can add new considerations to the issue
        <ul>
          <li>not an easy task = voters can be saturated with considerations</li>
          <li>there is only a small number of people who are persuadable</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>J. Kalla and Broockman in 2017 did a study on <strong>if campaigns are helpful in changing people’s votes</strong>
    <ul>
      <li>finding: little evidence of impact = all those money spent on campaigns have a net effect of zero</li>
      <li>why?
        <ul>
          <li>persuasion <mark>TODO</mark></li>
          <li>there may be an impact in the beginning, but wears off when actually voting</li>
          <li>odd cases <mark>TODO: how does this relate to spending money</mark>.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Then why do campaigns spend so much money?
    <ul>
      <li>maybe: <strong>in the real world campaigns are to “cancel” each other out</strong>. One party says bad things about others, and vice versa = zero net output.</li>
      <li>the change of the campaigns <strong>might have long term effects</strong> (e.g. decade), hence measuring in a single season is not suitable</li>
      <li>even if peoples votes didn’t change, those campaigns can <strong>affect people’s values/belief about the world</strong></li>
    </ul>
  </li>
</ul>

<h2 id="does-policy-derive-how-people-vote">Does Policy Derive how People Vote?</h2>

<p><strong>Voter Competence Test</strong>:</p>

<ul>
  <li>should we see elections as driven by voters, or do voters follow their politicians they prefer</li>
  <li>elections not by what voters want, but what the campaigns</li>
</ul>

<p>Research:</p>

<ul>
  <li>
    <p>focus on respondents who only learned the policy positions during campaigns</p>
  </li>
  <li>
    <p>when people <em>realized</em> their candidates is different from position they support, they still voted for them = it looks like <strong>people are following politicians</strong> instead of the policies</p>

    <ul>
      <li>e.g. Bush v Gore, who is social security funds handled</li>
      <li>
        <p>e.g. Carter v. Ford - whether federal gov should fund more <mark>TODO</mark></p>
      </li>
      <li>then ask people: Q: do you know who is supporting what position? Tell them the info, and ask again. Some people who knows about this issue got it right in the first round. Some people (learners) learns it afterwards.</li>
    </ul>
  </li>
  <li>
    <p>Finding: voters (learners) <strong>don’t change their votes even when there’s changes in their candidate support</strong></p>
    <ul>
      <li>Does this mean candidates <em>face no pressure</em> to take certain issue positions? No
        <ul>
          <li>the study is only on voters who <em>learned</em> the positions taken by the candidate. Hence this excludes the cases of those voters who already know the positions (and changed their votes)</li>
          <li>excludes interest groups, who typically take a strong hold/attention to the positions taken</li>
        </ul>
      </li>
      <li>If pressure comes mostly from interest groups, is it bad?</li>
    </ul>
  </li>
</ul>

<p>What are politician punished for?</p>

<ul>
  <li>strong evidence that <em>shark</em> attacks depressed Wilson vote in NJ (beach state) = people blindly attribute this to Wilson</li>
  <li>strong evidence <em>drought</em> reduces incumbent party vote share</li>
</ul>

<blockquote>
  <p>So based on all those “bad” findings, <strong>are US voters incompetent</strong>? A really complicated question.</p>
</blockquote>

<blockquote>
  <p>This shows that many voters’ voting behavior <strong>does not really represent their interest</strong> (e.g. blind rationale, learners, etc). Therefore, we may need to <strong>re-think elections</strong> = collecting votes as a mechanism to <strong>aggregate people/voters’s interest</strong> to form policies</p>
</blockquote>

<ul>
  <li>Politics not as competition between policies but competitions between groups for government</li>
  <li>politics as policy competition leaves more room for compromise</li>
</ul>

<h2 id="democratic-benchmarks">Democratic Benchmarks</h2>

<p>Whenever assessing the performance of a political system, you should to think about alternatives (what it <em>can</em> do). Why?</p>

<p>It turns out there is a <mark>limit on democratic choice system</mark>. <mark>No choice aggregation rule can satify four conditions simultaneously</mark></p>

<ol>
  <li>if everyone prefers A to B, the rule will pick A</li>
  <li>choice between two optins not influenced by third</li>
  <li>responds to more than one person’s wants</li>
  <li>decision cannot be manipulated by choice order</li>
</ol>

<blockquote>
  <p>All institutions doesn’t do at least some of the four.</p>
</blockquote>

<p>As a result, this means all of the following features of US political system are not “really” democratic = influence the final aggregated result</p>

<ul>
  <li>influence the aggregation process</li>
  <li>eventually all procedures are flawed</li>
</ul>

<p>all of the above features influence what public policy is.</p>

<h1 id="political-party">Political Party</h1>

<p>What is a political party, and how would you tell if the party is changing?</p>

<blockquote>
  <p><strong>political parties</strong> are groups of people with similar interests who work together to create and implement policies.</p>
</blockquote>

<p>On a high level: what do they do? Essentially they gain control over the government by winning elections.</p>

<ul>
  <li><strong>recruit</strong> candidates = exercise control over who they want
    <ul>
      <li>v.s. why not let candidates apply by themselves? = the party might have a different set of interest than candidates who are applying</li>
      <li>e.g. Trump candidacy in 2015/16</li>
    </ul>
  </li>
  <li><strong>nominate</strong> candidates (run for state government, Congress, and the presidency.)
    <ul>
      <li>different state has different rules (e.g. top two in votes end up in a runoff)</li>
      <li>in the end, state laws affect this selection progress significantly</li>
    </ul>
  </li>
  <li>guide members of Congress in <strong>drafting</strong> legislation.</li>
  <li>etc.</li>
</ul>

<p>But it is also helpful to break down political party into the three categories</p>

<ul>
  <li>party in government</li>
  <li>party in electorate,</li>
  <li>party organizations (fight for what the rules should be)</li>
</ul>

<p><strong>What can political party do for politicians?</strong> solve <strong>collection action</strong> problems</p>

<ul>
  <li>provide a host of funds/resources (people needed to) to help a politician win an office
    <ul>
      <li>especially to gather votes and sure <em>people</em> vote consistently if they are in the party</li>
    </ul>
  </li>
  <li>compromise/coordination when lawmaking = parties guide proposed laws through Congress and inform party members how they should vote on important issues.
    <ul>
      <li>e.g. you can ask party to pressure people if they want things different than what you want</li>
    </ul>
  </li>
  <li>agency problem/trade-off: politicians only want help to achieve office position
    <ul>
      <li>e.g. politicians want parties to leave them alone after helping, but party members prefer the opposite!</li>
    </ul>
  </li>
</ul>

<h2 id="who-identifies-with-which-party">Who identifies with which party?</h2>

<p>This is decided over a range of empirical studies, and it is found that</p>

<blockquote>
  <p>People align with a political party <strong>not because of its policies</strong>, but to <strong>compete</strong> against/dislike groups who share different values/identity = really for their own interest.</p>
</blockquote>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Data 1</th>
      <th style="text-align: center">Data 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230417202032980.png" alt="image-20230417202032980" /></td>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230417202150189.png" alt="image-20230417202150189" /></td>
    </tr>
  </tbody>
</table>

<p>here we see that there is a</p>

<ul>
  <li>fair amount of stability in party memberships = those party members usually vote for their parties</li>
  <li>but one place you see change is “how intensely” are you partisan
    <ul>
      <li>see a rise of strong partisan to 44% from around 35% and less weak partisanship</li>
      <li>intensity of people’s commitment to the identity increases = shift in partisan system is not more people coming but <strong>more committed to partisanship</strong> = affect how politicians make electoral strategy</li>
    </ul>
  </li>
</ul>

<p>But what do people/voters really think of the political party as?</p>

<ul>
  <li>Q: which party is more conservative? 80% answered republicans correctly, but 20% either don’t know or answered wrongly
    <ul>
      <li>= hints that some people align with a party without really knowing its policy</li>
    </ul>
  </li>
  <li>Q: do you think the two parties are different? a lot of people think the parties are the same in the past, now mostly different, but still
    <ul>
      <li>= hints that some people align with a party without really knowing its policy</li>
      <li>making polarization increasing, but people at least know</li>
    </ul>
  </li>
  <li>
    <p>Q: how do you feel about the rival party? On average 19.3% happy with members of the other party, and 71.5% happy with own members.</p>

    <ul>
      <li>^ but specifically what traits are different? e.g. close-mindedness/unintelligent
        <ul>
          <li>are very parallel observation that both parties share the same trend of disliking other parties</li>
          <li>but it is also found that in general, people dislike <em>any other</em> groups, not necessarily rival</li>
          <li>yet still, the <strong>increase in dis-likeness=polarization</strong> is important</li>
        </ul>
      </li>
    </ul>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Anti-Group</th>
          <th style="text-align: center">Increasing Polarization</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230417202830606.png" alt="image-20230417202830606" style="zoom:50%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230417202620818.png" alt="image-20230417202620818" style="zoom: 33%;" /></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Q: what groups of people tilt the politician group? Here we member within each party <em>grouped by their traits</em></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Tilt Republican</th>
          <th>Tile Democratic</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230417203202854.png" alt="image-20230417203202854" style="zoom:33%;" /></td>
          <td><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230417203212104.png" alt="image-20230417203212104" style="zoom:33%;" /></td>
        </tr>
      </tbody>
    </table>

    <ul>
      <li>= increasing <strong>separation</strong> of the identities between people in each parties = how social group change opinion = politics as <mark>competition between groups</mark> (a newer theory today) v.s. competition between policy (older)</li>
      <li>also implies politician within group may only care about moving powers to people who think like yourself</li>
    </ul>
  </li>
  <li>
    <p>finding: misconceptions of the parties can influence how people feel of the other party = also support the above conclusion that <strong>party alignment may have not much to do with the real policy they put out</strong> = people are bit egoistic</p>

    <ul>
      <li>perceived of the republican supporters:
        <ul>
          <li>folks in the survey think the republican are 40% over 65 aged people, in reality 20%, etc.</li>
          <li>in conclusion: many folks don’t have an accurate impression of the party composition</li>
        </ul>
      </li>
      <li>perceived of the democratic supporters:
        <ul>
          <li>folks in the survey think the democrats are 30% gay, lesbian, or bisexual, and 40% black, but in reality the proportion is much lower</li>
          <li>same conclusion as above.</li>
        </ul>
      </li>
      <li><strong>when corrected of those impressions, people’s view of the other party improved</strong></li>
      <li>and that those mis-perceptions are most skewed among those who look at political news most often</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>Conclusion: today we may have a shift in how we understand people’s stance for their political party/competition between them</p>
</blockquote>

<ul>
  <li>older models: members of each party have <em>many overlapping interest/identities</em> (but conflicts/argues over a few ideologies)</li>
  <li>today: parties are more not very related/very polarized/huge difference between political groups
    <ul>
      <li>perhaps due to <strong>political sorting</strong> = people are much more polarized = members inside the same group aligned / <strong>hate other groups</strong></li>
      <li>also results in <strong>stronger partisanship</strong> = greater/more negative affects against other parties</li>
      <li>partisan identification and sense of difference has increased</li>
      <li>but this increasing political difference may come at a cost (TBD)</li>
    </ul>
  </li>
</ul>

<h2 id="median-voter-theorem">Median Voter Theorem</h2>

<blockquote>
  <p><strong>Median Voter Theorem</strong>: in a majority-rule voting system, the outcome will be determined by the preferences of the median voter.</p>
</blockquote>

<p>Why would this happen? Consider the following leader position, where <code class="language-plaintext highlighter-rouge">x</code> goes with the Left and <code class="language-plaintext highlighter-rouge">o</code> goes with the right</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xxxLxxxoooRooo
</code></pre></div></div>

<p>assuming that</p>

<ul>
  <li>candidates <code class="language-plaintext highlighter-rouge">L</code> and <code class="language-plaintext highlighter-rouge">R</code> want to win electrions</li>
  <li>people vote for candidates whose policy is <em>closest</em> to their ideal</li>
</ul>

<p>then you have on a <strong>single dimension</strong></p>

<ul>
  <li>
    <p>if <code class="language-plaintext highlighter-rouge">L</code> moves further from the center then <code class="language-plaintext highlighter-rouge">L</code> will be <strong>losing</strong>: <code class="language-plaintext highlighter-rouge">Lxxxx-ooooRooo</code></p>
  </li>
  <li>
    <p>if <code class="language-plaintext highlighter-rouge">R</code> moves to the closer to the center then <code class="language-plaintext highlighter-rouge">R</code> will be winning: <code class="language-plaintext highlighter-rouge">xxxLxxooRooooo</code></p>
  </li>
  <li>
    <p>therefore, both parties would need to move closer to the center so that the other party cannot gain advantage. This results in</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xxxxxxLRoooooo
</code></pre></div>    </div>
  </li>
</ul>

<p>therefore, rational parties will converge to center = <mark>2-party competition results in moderate parties</mark></p>

<p><strong>How well does this describe actual elections in US? Is this model too simplified?</strong></p>

<ul>
  <li>
    <p>but of course, the above assumes that voter is still enthusiastic to vote despite this sad situation, etc.</p>
  </li>
  <li>At district level this is plausible, but there are at least two violations
    <ul>
      <li>candidates of parties are selected by the <em>primary</em> system = primary candidates really diverge from each other</li>
      <li>elections in states influence each other</li>
      <li>as seen last time (<a href="#Who identifies with which party?">Who identifies with which party?</a>), people often vote <em>not because</em> of similar policies to their idea, but if they heard of them, or if they share similar physical identity, etc.</li>
    </ul>
  </li>
  <li>in general, many voters might not vote based on “whose policy is <em>closest</em> to their ideal”, but
    <ul>
      <li>if they have heard of them</li>
      <li>if they have endorsement/trusted sources support them (i.e. weird reason people vote)</li>
      <li>if they share identity with the voters (i.e. weird reason people vote)</li>
      <li>and candidate recruits (e.g. party organizations) can <em>manipulate</em> all these things in a district</li>
    </ul>
  </li>
  <li>this means, <strong>in reality, to recover MVT</strong> you would need at least:
    <ul>
      <li>name-recognition not too skewed towards a candidate</li>
      <li>endorsement not to skewed</li>
      <li>candidate ideneity not too skewed</li>
    </ul>
  </li>
</ul>

<h2 id="a-theory-of-parties-as-interest-group-coalitions">A Theory of Parties as Interest Group Coalitions</h2>

<p><strong>Who affects</strong> the political parities?</p>

<ul>
  <li>
    <p><strong>politician</strong> centered theory: politicians (when selected in office) drive changes in political parties</p>
  </li>
  <li>
    <p><strong>interest group</strong> centered theory: interest groups exert huge influence on <em>who</em> gets elected during primaries (e.g. fund a guy to be prominent) = can exert influence in political parties</p>
  </li>
</ul>

<blockquote>
  <p><strong>Provisional conclusions</strong></p>

  <ul>
    <li>interest groups play a major role shaping the political party, especially in affecting the <em>candidate</em> before he/she is elected in office</li>
    <li>once politicians are in office, they themselves surely exert large influence the political party</li>
  </ul>
</blockquote>

<p>(Democratic) Parties mimic levels of national government</p>

<ul>
  <li>you have democratic party in Manhattan; democratic party in New York; democratic party in the National level
    <ul>
      <li>in theory, all those political parties should be <strong>independent</strong> = e.g. Manhatton GoP more liberal than Bonner Counter GoP.</li>
      <li>this held true mostly in the past</li>
      <li>but since the 1970s, state parties have become much more <em>similar</em> = they don’t respond to voters in their district, but <strong>aimed at a national agenda</strong> = “How national parties transformed state parties”</li>
    </ul>
  </li>
</ul>

<p>Why might interest groups and parties shift policy making to <strong>focus on a state level</strong> instead of a national level?</p>

<ul>
  <li>[+] some policies only apply to certain states
    <ul>
      <li>no easy “one size fits all” given variantions betweem states</li>
    </ul>
  </li>
  <li>[+] you can get more done in state houses than national houses = more money efficient</li>
  <li>[+] many folks do not pay attention to issues on the state level
    <ul>
      <li>in theory, the lower the government (e.g. local/state) the more attention people pay</li>
      <li>but empirically many people do the reverse: people don’t pay much attention to state levels but more to national affairs</li>
      <li>hence easier to get (bad) policies passed if nobody pays attention</li>
    </ul>
  </li>
</ul>

<h3 id="federalism-and-parties">Federalism and Parties</h3>

<p>What are some <strong>evidences</strong> that lower level political parties are do not listen much to the public/become more centralized to <strong>national agenda</strong>?</p>

<ul>
  <li>
    <p>since 1970s, <em>states</em> are taking in more policy making spending</p>
  </li>
  <li>
    <p>state parties are becoming more <em>similar to each other</em> = responding more to a national agenda than public opinon</p>

    <ul>
      <li>evidence = direction of <strong>policy change</strong> is increasingly predicted by <strong>whether or not the party has uniform control</strong></li>
      <li>graph: if a party has uniform control, what would the average state policy look like?</li>
    </ul>

    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230424173436164.png" alt="image-20230424173436164" style="zoom: 33%;" /></p>

    <ul>
      <li>
        <p>findings 1: before, states “do what they want” hence averages out to zero despite national control; nowadays, which party is taking charge greatly shapes <em>individual state’s policies</em></p>
      </li>
      <li>
        <p>findings 2: some exceptions are civil rights and criminal justice</p>

        <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230424173529209.png" alt="image-20230424173529209" style="zoom:33%;" /></p>
      </li>
      <li>
        <p>conclusion = national party control is a <strong>strong predictor of policies on a state level</strong></p>
      </li>
    </ul>
  </li>
  <li>
    <p>test the counter-argument: do changes/trend in state policy follow changes/trend in public opinion policy?</p>

    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230424173602178.png" alt="image-20230424173602178" style="zoom:50%;" /></p>

    <ul>
      <li>most policy areas doesn’t work = state policies affected by other factors
        <ul>
          <li>abortion: public opinion looks flat, but significant shits in policies;</li>
          <li>civil rights: the other way around; in both cases the two look unrelated</li>
        </ul>
      </li>
      <li>but there are ones that works, e.g. LGBTQ</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>Conclusion: divergence in state level policy is <strong>not explained by changes in public opinion</strong>, but increasingly by <strong>partisan control</strong>.</p>
</blockquote>

<p>Why? <strong>Interest groups</strong> involvement in <strong>parties</strong> can be one explanation as a strong force</p>

<ul>
  <li>
    <p>regular donors are more extreme (than ordinary donors)</p>

    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230424173810661.png" alt="image-20230424173810661" style="zoom:33%;" /></p>

    <p>where those who donates to Interest Groups (IG) and/or legislation are more extreme in their political ideology (most liberal and most conservative)</p>
  </li>
  <li>
    <p>contacted with the legislators more (than ordinary donors)</p>

    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230424173855509.png" alt="image-20230424173855509" style="zoom:33%;" /></p>

    <p>similar to above, those who donated to IG and/or legislations contacted more</p>
  </li>
  <li>
    <p>better predictor of legislative ideologies (than ordinary donors)</p>

    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230424173930676.png" alt="image-20230424173930676" style="zoom:33%;" /></p>

    <p>there is a strong association between <strong>identity of donors and characteristics of the candidates</strong></p>
  </li>
</ul>

<blockquote>
  <p>Conclusion:</p>

  <ul>
    <li>
      <p>parties responsiveness seem to <strong>follow money</strong> (from specific sources), not public opinion = political party evolving with interest group system</p>
    </li>
    <li>
      <p>party system being more <strong>nationalized</strong> = <strong>polarized</strong></p>
      <ul>
        <li>nationalized parties <em>at state level</em> mean polarized policies not driven by state-level opinion anymore</li>
        <li>MVT theorem disrupted = left and right position being more affected by <strong>other factors than just policy preferences</strong></li>
        <li>state has less freedom to find policy through experimentation = <strong>less creative</strong> policy making</li>
      </ul>
    </li>
  </ul>
</blockquote>

<h1 id="interest-groups-and-lobbying">Interest Groups and Lobbying</h1>

<blockquote>
  <p><strong>Interest groups</strong>: <mark>individuals</mark> would band together in <mark>an attempt to use government in their favor</mark>. In general formal association of individuals or organizations that attempt to influence government decision-making and/or the making of public policy.</p>
</blockquote>

<p>How is interest groups different from political parties?</p>

<ul>
  <li>interest groups are much <strong>narrower</strong> in their pursuits. e.g. focused on areas like taxes, the environment, and gun rights or gun control, or their membership is limited to specific professions.</li>
  <li><strong>do not</strong> function primarily to <strong>elect candidates</strong> under a certain party label or to directly control the operation of the government</li>
</ul>

<p>Categories of IG</p>

<ul>
  <li><strong>trade association</strong>: any economically based grouping. consumer brands association (e.g. for food regulation)</li>
  <li><strong>labor union</strong>: AFL-CIO, FOP, highly active in politics</li>
  <li><strong>individual membership associations</strong> (grassroot): random people who joined that cared abotu the same thing</li>
  <li><strong>professional associations</strong>: membership is individual, and goal is to participate in that occupation group. AMA, ABA</li>
</ul>

<p>What do IGs do?</p>

<ul>
  <li><strong>elections</strong>: mobilize voters to vote for campaigns, and act as <mark>endorsements for candidates</mark> (see previous sections)</li>
  <li><strong>legislatures</strong>: help draft bills, etc.</li>
  <li><strong>courts</strong>: if something bad happened, threatening to sue; file briefs when brought by others</li>
  <li><strong>bureaucracies</strong>: certain professional licensing run by interest group</li>
  <li>A very diverse branching = IGs use every aspect of the US political system to achieve their goal.</li>
</ul>

<p>Imagine you are a legislator and you heard the following from a lobbyist:</p>

<p><em>“Our research indicates the accessibility of guns is leading to unnecessary deaths”</em></p>

<ul>
  <li>if you heard this from a national rifle association v.s. Mom’s association of Gun sense…; former more convincing</li>
</ul>

<p><em>“Our research indicates that carbon emissions need to be significantly curtailed in the next few yeras or the US will face significant ecnomic har from climate change”</em></p>

<ul>
  <li>if you heard this from greenpeace v.s. american petroleum association; latter more convincing</li>
</ul>

<blockquote>
  <p>Intuition: <strong>source bias</strong> makes some statement harder to believe = less persuasive if it comes from IG who anyway wanted you to do this.</p>
</blockquote>

<p>But then <strong>why spend money to lobbying</strong>, if everyone knows what your group wants?</p>

<ul>
  <li>persuade those who <strong>disagree</strong> with you: often hard</li>
  <li>convince those who <strong>agree</strong> with you to <strong>focus on the issues</strong> you care the most.
    <ul>
      <li>i.e. subsidizing the efforts of those who agree with you = reduce your efforts</li>
      <li>lobbists do more things than persuasion = providing resource subsidies for people who want to sue</li>
    </ul>
  </li>
</ul>

<hr />

<p><em>For Example</em> Colorado Juvenile Defend Center</p>

<ul>
  <li>2012 they found that 45% kids charge with offenses had no council representing them</li>
  <li>2013 contacted sympathetic legislator, convinced them to form an interim committee</li>
  <li>2014 participated in negotiations and re-drafting of bill = the law changed <strong>because of this IG’s efforts</strong></li>
</ul>

<p>But given this effort, does this <em>process correct for poor representation through elections</em>, or <em>subvert democracy of people</em>? (interesting arguments to consider)</p>

<hr />

<p>Lobbying at the state level: (i.e. groups that lobby)</p>

<ul>
  <li>municipal leagues</li>
  <li>county commissioner associations</li>
  <li>school board associations</li>
  <li>local government: e.g. Colorado wanted bars to be closed at 2am. Then people and local government/mayor lobbied state legislators for change.</li>
  <li>etc.</li>
</ul>

<p>California require every lobby group to file forms. From data collected, it is found that</p>

<ul>
  <li>
    <p>local government spent by far the most among IGs in California ;</p>
  </li>
  <li>many cities do lobby, and especially in California cities lobby a lot</li>
  <li>and it is not just cities, over 500 cases are lobbied by counties, and over 1500 from special districts.</li>
  <li>lobbying at the state government is most common, at national government reasonably common</li>
</ul>

<blockquote>
  <p><strong>On local lobbying:</strong></p>

  <ul>
    <li>
      <p>it is a pervasive practice, and targets a lot on state government</p>
    </li>
    <li>
      <p>has the potential to compound disadvantage for poor regions = don’t have money for IGs to toss around</p>
    </li>
  </ul>

  <p><strong>In general, lobbying</strong></p>

  <ul>
    <li>is baked in to democracy = is a <strong>crucial part of US politics</strong></li>
    <li>but has a trade-off between the influence of interest groups/anti-democracy</li>
    <li>interest group environment may not be a leveling playing field
      <ul>
        <li>not every issues have an interest group</li>
        <li>IGs have <strong>different resource distribution</strong>; some group has more power/money = features of the group can also affect if how far can you get this issue solved</li>
        <li>Strolovitch finds that organizations are substantially less active when it comes to issues affecting <strong>disadvantaged subgroups</strong> than they are when it comes to issues affecting more advantaged subgroups.</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>e.g. current measures to restrict IG’s power:</p>

<ul>
  <li>requires lobbying data be recorded and <strong>disclosed</strong></li>
  <li><strong>cooling-off period</strong> = laws that require a person who works for a legislator cannot lobby for two years after they leave; to prevent them lobbying on things that are advantageous for them (but they can ask others to lobby)</li>
  <li>campaign donation limits</li>
  <li>tax disclosure laws</li>
</ul>

<h2 id="collective-action-and-free-riding-in-igs">Collective Action and Free Riding in IGs</h2>

<p>As mentioned before, an example of IGs in US is the labor organization/unions. But think about this:</p>

<ul>
  <li>The benefits sought by <strong>unions</strong>, such as higher wages, collective bargaining rights, and safer working conditions, are often enjoyed by <strong>all workers regardless of whether they are members</strong>.</li>
  <li>therefore, <strong>free riders</strong> can receive the benefit of the pay increase without helping defray the cost by paying dues, attending meetings or rallies, or joining protests,</li>
</ul>

<blockquote>
  <p>If <strong>free riding</strong> is so prevalent, why are there so many interest groups and <strong>why is interest group membership so high</strong> in the United States?</p>
</blockquote>

<p>One explanation is that free riding is overcame by:</p>

<ol>
  <li>Groups with <strong>financial</strong> resources/patrons outside the group have an advantage in mobilizing in that they can <strong>offer incentives</strong> or hire a lobbyist.</li>
  <li>opinions within <strong>smaller</strong> IGs may be
    <ul>
      <li><em>easier</em> to reach consensus</li>
      <li>if you don’t voice your opinion and the policy is not what you liked, high chance your <em>preference will not be taken into account</em></li>
      <li>easier to <em>spot if you are not contributing</em></li>
    </ul>
  </li>
  <li>Group <strong>leaders</strong> also play an important role, for example
    <ul>
      <li>offer <strong>material incentives</strong>, which are tangible benefits of joining a group. (AARP, for example, offers discounts on hotel accommodations and insurance rates for its members)</li>
      <li>offer <strong>solidary incentives</strong>, which provide the benefit of joining with others who have the same concerns or are similar in other ways, as people are naturally drawn to others with similar concerns.</li>
    </ul>
  </li>
  <li><strong>disturbance theory</strong>: why groups mobilize <strong>due to an event</strong> in the political, economic, or social environment = people will naturally join groups in response to <strong>disturbances</strong>. for example
    <ul>
      <li>in 1962, Rachel Carson published <em>Silent Spring</em>, a book exposing the dangers posed by pesticides such as DDT $\to$ many individuals start to worry about environment and dangers of pesticides $\to$ an increase in both the number of environmental interest groups, such as Greenpeace and American Rivers,</li>
      <li>In May 2020, George <em>Floyd</em> died shortly after police officer Derek Chauvin leaned his knee on Floyd’s neck for nine and half minutes, while Floyd was handcuffed and laying face down on the ground $\to$ massive protests across US</li>
    </ul>
  </li>
</ol>

<h1 id="the-media">The Media</h1>

<p>Freedom of the press and an independent media are important dimensions of a liberal society, and the media can have a huge impact in how we see the society today.</p>

<p>Some basic terms:</p>

<ul>
  <li>The collection of all forms of media that communicate information to the general public is called <strong>mass media</strong> (e.g. television, print, radio, and Internet.)</li>
  <li>The Internet also facilitates the flow of information through <strong>social media</strong>, which allows users to instantly communicate with one another and share with audiences that can grow exponentially.</li>
</ul>

<blockquote>
  <p>Regardless of where we get our information, the various media avenues available today, versus years ago, make it <strong>much easier for everyone to be politically and socially engaged</strong>.</p>
</blockquote>

<p>But who controls the media we rely on? Suprisingly today, most media is controlled by a limited number of conglomerates (a collection of companies, organizations, and media networks)</p>

<p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230503164855628.png" alt="image-20230503164855628" style="zoom: 25%;" /></p>

<p>what does this mean? When a media conglomerate has <strong>policies or restrictions</strong>, they will apply to all stations or outlets under its ownership, potentially limiting the information citizens receive.</p>

<ul>
  <li>This raise the question whether the media still operate as an independent source of information. Is it possible that <strong>corporations and CEOs now control the information flow</strong>, making profit more important than the impartial delivery of information?</li>
  <li>The reality is that media outlets, whether newspaper, television, radio, or Internet, are <strong>businesses</strong>, they need to raise revenue! How do they get revenue? Get advertising and sponsors. How do they get them? You need active viewers. In the end, <strong>what attracts viewers and advertisers is what survives</strong>.</li>
</ul>

<h2 id="functions-of-the-media">Functions of the Media</h2>

<p>So what do those media do? What can they control?</p>

<ul>
  <li><strong>help maintain democracy</strong> and keeps the government accountable for its actions, even if a branch of the government is reluctant to open itself to public scrutiny.</li>
  <li>
    <p><strong>promote the public good</strong> by offering a platform for public debate and improving citizen awareness. Network news informs the electorate about national issues, elections, and international news.</p>
  </li>
  <li><strong>agenda setting</strong>, which is the act of choosing which issues or topics deserve public discussion. e.g. In the spring of 2015, when the Dominican Republic was preparing to exile Haitians and undocumented (or under documented) residents, major U.S. news outlets remained silent.</li>
</ul>

<blockquote>
  <p>Large network newscasts and major newspapers are still more powerful at <mark>initiating or changing a discussion</mark>.</p>
</blockquote>

<h2 id="regulating-the-media">Regulating the Media</h2>

<p>The approval of the First Amendment, as a part of the Bill of Rights, demonstrated the framers’ belief that a <strong>free and vital press was important</strong> enough to protect = serves as the basis for the political freedoms of the United States. It said:</p>

<blockquote>
  <p>“Congress shall make no law respecting an establishment of religion, or prohibiting the free exercise thereof; or abridging the freedom of speech, or of the press; or the right of the people peaceably to assemble, and to petition the government for a redress of grievances.”</p>
</blockquote>

<p>Although the media are independent participants in the U.S. political system, their liberties are not absolute and <mark>there are rules they must follow</mark>.</p>

<ol>
  <li>First, the media do not have the right to commit <strong>slander</strong>, speak false information with an intent to harm a person or entity, or <strong>libel</strong>, print false information with an intent to harm a person or entity. But it seems that newspaper has been doing this a lot?
    <ul>
      <li>libel and slander occur only in cases where false information is presented as <strong>fact</strong>.</li>
      <li>When editors or columnists write <em>opinions</em>, they are protected from many of the libel and slander provisions because they are not claiming their statements are facts.</li>
      <li>the defamed individual or company to bring a <em>lawsuit</em>, and the courts have different standards depending on whether the claimant is a private or public figure.</li>
    </ul>
  </li>
  <li>media have only a limited right to publish material the <strong>government says is classified</strong>.
    <ul>
      <li>If the journalist calls the White House or Pentagon for quotations on a classified topic, the president may order the newspaper to stop publication in the interest of national security. The <strong>courts</strong> are then asked to rule on what is censored and what can be printed.</li>
      <li>e.g. in 19721, US gov sued New York Times and Washington Post to stop release information from a classified study of the Vietnam war. In the end, the court gave the newspapers the right to publish much of the study, but revelation of troop movements and the names of undercover operatives are some of the few approved reasons for which the government can stop publication or reporting.</li>
    </ul>
  </li>
  <li>television and radio broadcasters are monitored by both the courts and a <strong>government regulatory commission</strong>.
    <ul>
      <li>Radio Act of 1927 was the first attempt by Congress to regulate broadcast materials.</li>
      <li>Communications Act of 1934 replaced the Radio Act and created a more powerful entity to monitor the airwaves—a seven-member <strong>Federal Communications Commission (FCC)</strong> to oversee both radio and telephone communication.</li>
      <li>the idea is to ask radio/TV stations to apply for <strong>licenses</strong>, which is granted only if stations follow rules about limiting advertising, providing a public forum for discussion, and serving local and minority communities. The licensing requires
        <ul>
          <li><strong>equal-time rule</strong>: registered candidates running for office must be given equal opportunities for airtime and advertisements at non-cable television and radio stations beginning forty-five days before a primary election and sixty days before a general election.</li>
          <li>While the idea behind the equal-time rule is fairness, it may <em>not apply</em> to supporters of that candidate or of a cause. Hence, there potentially may be a loophole in which broadcasters can give free time to just one candidate’s supporters.</li>
          <li><strong>indecency regulations</strong>: limit indecent material and keep the public airwaves free of obscene material.
            <ul>
              <li>However, broadcasters can show indecent programming or air profane language between the hours of 10 p.m. and 6 a.m.</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><strong>net neutrality</strong>: required internet service providers to give everyone equal access to their services and disallowed biased charging of internet access fees.</li>
    </ul>
  </li>
  <li>and many more</li>
</ol>

<h2 id="impact-of-the-media">Impact of the Media</h2>

<p>Since media release information consumed by the people, this information may <strong>affect what we think and the actions we take.</strong></p>

<p>There are many theories debating how much impact the media has, e.g.</p>

<ul>
  <li>Lippmann’s statements led to the <strong>hypodermic theory</strong>, which argues that information is “shot” into the receiver’s mind and readily accepted.</li>
  <li><strong>minimal effects theory</strong>, which argues the media have little effect on citizens and voters. Information is transmitted in two steps, with one person reading the news and then sharing the information with friends.</li>
  <li><strong>cultivation theory</strong>, hypothesized that media develop a person’s view of the world by presenting a perceived reality, and the media can set norms for readers and viewers by choosing what is covered or discussed.</li>
</ul>

<p>and some common techniques the Media use to sway peoples opinions:</p>

<ul>
  <li><strong>framing</strong>: the creation of a narrative, or context, <em>for</em> a news story.</li>
  <li><strong>priming</strong>: when media coverage predisposes the viewer or reader to a particular perspective on a subject or issue.
    <ul>
      <li>e.g. If a newspaper article focuses on unemployment, struggling industries, and jobs moving overseas, the reader will have a negative opinion about the economy. If then asked whether they approve of the president’s job performance, the reader is primed to say no.</li>
    </ul>
  </li>
</ul>

<p>In the end, the consensus among observers is that media have some effect, even if the effect is subtle. Some <mark>important ways</mark> include</p>

<ul>
  <li>effects on governance and caompaigns</li>
  <li>effects on the society</li>
</ul>

<h3 id="medias-effect-on-governance-and-campaigns">Media’s Effect on Governance and Campaigns</h3>

<p>Some historical examples:</p>

<ul>
  <li>in 1972, candidates with the most media coverage build momentum and do well in the first few primaries and caucuses.</li>
  <li>In the 1980s, campaigns learned that tight control on candidate information created more favorable media coverage.</li>
  <li>In 1992, both Bush’s and Bill Clinton’s campaigns maintained their carefully drawn candidate images by also limiting photographers and television journalists to photo opportunities at rallies and campaign venues.</li>
</ul>

<p>However, <strong>campaign coverage now focuses on shallow reports</strong></p>

<ul>
  <li>i.e. colorful personalities, strange comments, lapse of memories, and embarrassing revelations are more likely to get air time than the candidates’ issue positions.</li>
  <li>i.e. citizens want to see updates on the race and electoral drama, not boring issue positions or substantive reporting.</li>
</ul>

<p>As a result, all these factors have likely led to the shallow press coverage we see today, sometimes dubbed <strong>pack journalism</strong> because journalists follow one another rather than digging for their own stories.</p>

<ul>
  <li>
    <p>In 1968, the average sound bite from Richard Nixon was 42.3 seconds, while a recent study of television coverage found that sound bites had decreased to only eight seconds in the 2004 election.</p>
  </li>
  <li>
    <p>that study also found the news showed images of the candidates, but for an average of only twenty-five seconds while the newscaster discussed the stories.</p>
  </li>
  <li>
    <p><strong>media’s discussion of campaigns has also grown negative</strong>.</p>

    <ul>
      <li>During the 2012 campaign, seventy-one of seventy-four MSNBC stories about Mitt Romney were highly negative</li>
      <li>FOX News’ coverage of Obama had forty-six out of fifty-two stories with negative information</li>
      <li>major networks—ABC, CBS, and NBC—were somewhat more balanced, yet the overall coverage of both candidates tended to be negative.</li>
    </ul>

    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230504013541363.png" alt="image-20230504013541363" style="zoom: 25%;" /></p>
  </li>
</ul>

<blockquote>
  <p>Due in part to the lack of substantive media coverage, campaigns increasingly use <strong>social media</strong> to relay their message.</p>
</blockquote>

<p>So this includes:</p>

<ul>
  <li>using Facebook, Twitter, and YouTube accounts to provide information to voters. The best example would be Donald Trump, who took social media posts to a new level, both in terms of the number of posts and the intensity.</li>
  <li>Yet, on social media, candidates still need to combat negativity.</li>
</ul>

<h3 id="medias-effects-on-society">Media’s Effects on Society</h3>

<blockquote>
  <p>The media choose what they want to discuss. This <strong>agenda setting</strong> creates a reality for voters and politicians that affects the way people think, act, and vote.</p>
</blockquote>

<p>Even if the crime rate is going down, for instance, citizens accustomed to reading stories about assault and other offenses still perceive crime to be an issue. More dominant examples today include, especially on issues of <mark>race and gender</mark>:</p>

<ul>
  <li>
    <p>that local news shows were more likely to show pictures of <strong>criminals</strong> when they were African American,</p>
  </li>
  <li>Network news similarly <strong>misrepresents the victims of poverty</strong> by using more images of African Americans than White people in its segments.</li>
  <li>media coverage of <strong>women</strong> has been similarly biased.
    <ul>
      <li>The media’s historically uneven coverage of women continues in its treatment of <mark>women candidates</mark>. Early coverage was sparse.</li>
      <li>Women were often seen as a <em>novelty</em> rather than as serious contenders who needed to be vetted and discussed.</li>
    </ul>
  </li>
</ul>

<h1 id="side-notes">Side Notes</h1>

<p>A few topics that is not on the US politics, but related</p>

<h2 id="data-and-descriptive-representation">Data and Descriptive Representation</h2>

<p>Republicans become more conservative over time.</p>

<p>(vertical graph here)</p>

<p>How do you rate if a policy is conservative v.s liberal?</p>

<ul>
  <li>
    <p>a few easy ones:</p>

    <ul>
      <li>
        <p>tax rates</p>
      </li>
      <li>
        <p>military spending</p>
      </li>
    </ul>
  </li>
  <li>
    <p>some hard ones</p>

    <ul>
      <li>economic regulation = republicans are not all against it, but certain kinds of it</li>
    </ul>
  </li>
</ul>

<p>On what basis do you decide <strong>if a person is liberal or conservative</strong>?</p>

<ul>
  <li>self-identification</li>
  <li>policy goals, using fixed defintions</li>
  <li>who they vote with</li>
</ul>

<p><strong>DW-Nominate:</strong> spatially representing where people stand on the political spectrum, and explain what factor causes the clustering</p>

<ul>
  <li>
    <p>procedure sketch:</p>

    <ul>
      <li>takes all members and their votes for 2 yeras</li>
      <li><mark>who they vote with</mark> and who they vote against (similarity embedding between each other)</li>
    </ul>
  </li>
  <li>
    <p>found that</p>

    <ul>
      <li>just using the economic dimension + race can almost explain the clustering</li>
      <li>the clustering is changing over time, being now very <strong>polarized</strong></li>
    </ul>

    <p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230228193056148.png" alt="image-20230228193056148" style="zoom:33%;" /></p>

    <ul>
      <li>the polarization movement is <strong>asymmetric</strong>: <strong>republican</strong> have moved towards polarization/clustering earlier</li>
      <li><strong>high predictability of political decision</strong>/policy as groups are very polarized = less variety in a pro-econ people voting for a con-econ policy</li>
    </ul>
  </li>
</ul>

<p><strong>Polarization as a feature of congress</strong>: more agreement inside group and aggression outside. This</p>

<ul>
  <li>makes legislation a lot harder since we need votes across the entire house</li>
  <li>hence explains why policies are polarized</li>
  <li>but note that the definition/baseline changes over time = e.g. democrats worried by econ problems could have voted with republicans</li>
</ul>

<p>To note: important to think about descriptive representation from different <strong>dimensions</strong>:</p>

<p>e.g. consider the following data representing women in congress</p>

<p><img src="/lectures/images/2023-05-11-POLS1201_Intro_to_American_Politics/image-20230227170321928.png" alt="image-20230227170321928" style="zoom:33%;" /></p>

<ul>
  <li>doesn’t show the proportion of how is running and how is a candidate</li>
  <li>other dimension include profession of those women, economic background, etc.</li>
</ul>

<h2 id="reading-empirical-research-paper">Reading Empirical Research Paper</h2>

<blockquote>
  <p>What are the goals of quantitivative emprical research?</p>

  <ul>
    <li><strong>reduce</strong> the number of competing explanations (i.e. which existing theories might be wrong)</li>
    <li><strong>refine</strong> theories that mostly work (i.e. we had a good theory, but we need to patch it a bit to explain this as well)</li>
  </ul>
</blockquote>

<p>Therefore, we will first</p>

<ul>
  <li><strong>experiments</strong>: good at identifying causal effects, have controlled variables, but it is very difficult to know if your variable is indeed the cause</li>
  <li><strong>observational studies</strong>: a big dataset, but is that correlation driven by stuff in the dataset or something else</li>
</ul>

<p>We want:</p>

<ul>
  <li><strong>explanation</strong> for a particular event, e.g. <em>rule out</em> theories</li>
  <li><strong>prediction</strong> of what will happen in the future</li>
</ul>

<hr />

<p>Therefore, for quantitative empirical research paper will be organized like:</p>

<ol>
  <li><strong>introduction</strong>: previews of the arguments to be made in this paper</li>
  <li><strong>theory</strong>: situates question and aguments
    <ul>
      <li>also contains justifications why they used this particular approach</li>
      <li>also look for defensive language = reviewers had criticism on those</li>
    </ul>
  </li>
  <li><strong>data and methods</strong></li>
  <li><strong>results/discussion</strong>: here is what we think we have learned</li>
</ol>

<blockquote>
  <p>Therefore, <strong>just with abstract and introduction</strong>, you can get a descent summary of what is happening</p>

  <ul>
    <li>but this will only give you what the author <em>wants you to remember</em>. to critique you will have to read the entire paper</li>
  </ul>
</blockquote>]]></content><author><name></name></author><category term="2022@Columbia" /><summary type="html"><![CDATA[Note that a lot of content comes from relevant publications and the OpenStax book (Krutz, G., &amp; Waskiewicz, S. (2021). American Government 3e. Houston, Texas: OpenStax.)]]></summary></entry><entry><title type="html">UN1494 Intro to Exp</title><link href="/lectures/2022@columbia/UN1494_Intro_to_Exp.html/" rel="alternate" type="text/html" title="UN1494 Intro to Exp" /><published>2023-05-11T00:00:00+00:00</published><updated>2023-05-11T00:00:00+00:00</updated><id>/lectures/2022@columbia/UN1494_Intro_to_Exp</id><content type="html" xml:base="/lectures/2022@columbia/UN1494_Intro_to_Exp.html/"><![CDATA[<h1 id="introduction-and-logistics">Introduction and Logistics</h1>

<ul>
  <li><strong>Lecturer</strong>: Emily Tiberi ect2158@columbia.edu. Office hours: TBA or by appointment</li>
  <li><strong>Expectations</strong>
    <ul>
      <li>your data analysis should be on <code class="language-plaintext highlighter-rouge">Python</code>  or <code class="language-plaintext highlighter-rouge">Mathematica</code>, but <em>not</em> <code class="language-plaintext highlighter-rouge">Excel</code></li>
      <li>Background physics: have taken any physics class at college level</li>
      <li>Time commitment: expected to spend on average <em>less than 10 hours on your lab report each week</em></li>
    </ul>
  </li>
  <li><strong>Absence Policy</strong>
    <ul>
      <li>Attendance includes lab participation and lab report submission</li>
      <li>You are allowed two excused absences and one unexcused absence</li>
    </ul>
  </li>
  <li><strong>Lab sessions</strong>:
    <ul>
      <li>Each lab session will begin with a brief recap with the TA.</li>
      <li>Your lab group will collect raw data</li>
      <li>There will be in-lab discussions. Work in groups, analyze data and answer the discussion questions.</li>
      <li>You will have <mark>a week</mark> to finish the lab report</li>
      <li>bring your laptop, recommend recording <em>raw data</em> using excel and export</li>
    </ul>
  </li>
  <li><strong>Lab report</strong>: your lab report should be your own, but all the others will be/<em>can be</em> collaborative
    <ul>
      <li>your first week lab report will only be personal feedback, no grade</li>
      <li>there <mark>will be a rubric</mark> for lab reports</li>
    </ul>
  </li>
  <li><strong>Grading</strong>: no quizzes, 90% lab report, and 10% in-lab discussion and participation (discussion with the TA)</li>
</ul>

<h1 id="scientific-writing">Scientific Writing</h1>

<p>Readers interpret prose more easily when it flows smoothly… From background rationale conclusion</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230123150215405.png" alt="image-20230123150215405" style="zoom:33%;" /></p>

<ul>
  <li>Don’t force the reader to figure out your logic – clearly state the rationale.</li>
  <li>Clear writing is also concise writing. The report should be fairly brief (<mark>up to 4 pages</mark>).</li>
</ul>

<p>Your report should look like:</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230123150517402.png" alt="image-20230123150517402" style="zoom:50%;" /></p>

<p>where</p>

<ul>
  <li>
    <p>“<strong>References</strong>” most of the time empty</p>
  </li>
  <li>
    <p><strong>Abstract</strong> can be there, but is optional. For example</p>

    <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230123150706887.png" alt="image-20230123150706887" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>the <strong>introduction</strong> should usually be <mark>no more than half a page in single column</mark></p>

    <ul>
      <li>describe the research question, why it is important, and what approaches (briefly) you used (optional: briefly mention the results if you want)</li>
    </ul>
  </li>
  <li>
    <p><strong>method</strong>: you really want to talk about your setup, including your apparatus and instruments used, any techniques, etc.</p>

    <ul>
      <li>this <em>should be brief</em> in general</li>
    </ul>

    <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230123151119020.png" alt="image-20230123151119020" style="zoom:50%;" /></p>
  </li>
  <li>
    <p><strong>results and analysis</strong>: the <mark>most important section</mark> in your report. You should <mark>succinctly</mark> give</p>

    <ul>
      <li>data obtained, graphs and tables</li>
      <li>how you calculated those quantities (if not obvious)</li>
      <li>comments on uncertainties. Why are certain error bars so big?</li>
      <li>is your result good?</li>
    </ul>
  </li>
  <li>
    <p><strong>conclusions</strong>: should be short. Contain your interpretation of the result, what you expected</p>
  </li>
</ul>

<p>Other notes for writing <mark>these reports</mark></p>

<ul>
  <li>example, annotated lab reports are also provided in Courseworks</li>
</ul>

<h1 id="error-analysis">Error Analysis</h1>

<blockquote>
  <p>When we measure any quantity, we <em>cannot</em> expect to measure it exactly = we will have <strong>errors/uncertainties</strong> in our experiment!</p>
</blockquote>

<p>Therefore, instead of giving each of your friend $2.3684$ slices of pizza, you might say:</p>

\[2.37 \pm 0.01 \quad \mathrm{slices}\]

<p>note that</p>

<ul>
  <li>you may want to <em>match</em> the number of significant figures in your number and your uncertainty</li>
  <li>usually keep up to 2 sig. figs.</li>
</ul>

<h2 id="type-of-errors">Type of Errors</h2>

<p>There are mainly two types of errors you get in your experiment</p>

<blockquote>
  <ul>
    <li><strong>Statistical/Random Errors</strong> = no going around this, but are <strong>quantifiable</strong>
      <ul>
        <li>Due to random fluctuations from measurement to measurement</li>
        <li>Can be reduced by taking <em>more measurements</em>, computing their <mark>mean and std</mark></li>
      </ul>
    </li>
    <li><strong>Systematic Errors</strong> = e.g. how you are measuring
      <ul>
        <li>Always bias the data in one direction</li>
        <li>“do you best” to identify and correct it</li>
        <li><em>Hard</em> to quantify</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>How do we quantify statistical/random errors?</p>

<ul>
  <li>
    <p>calculate mean $\bar{x}$, std $\sigma$</p>
  </li>
  <li>
    <p>but also Standard Error of the Mean $\sigma_\bar{x}$ = uncertainty we have on our measured average = <mark>uncertainty in your lab report</mark></p>

\[\sigma_\bar{x} = \frac{s}{\sqrt{N}}\]

    <p>because each time one more measurement is taken, your mean will change. So here is that measure of “<strong>precision in our measurement of the mean</strong>”</p>
  </li>
</ul>

<blockquote>
  <p>What happens when you have different measurements all with different precisions and you want to combine them into a unique result?</p>
</blockquote>

<p>For example, consider you are measuring a length with:</p>

<ul>
  <li>4 different rulers, each time measure once = $x_1\pm \sigma_1, x_2\pm \sigma_2,x_3 \pm \sigma_3,x_4 \pm \sigma_4$</li>
  <li>4 different rulers, with each ruler you measured a lot of times, hence four averages $\bar{x}<em>1 \pm \sigma</em>{1}, \bar{x}<em>2 \pm \sigma</em>{2}, \bar{x}<em>3 \pm \sigma</em>{3}, \bar{x}<em>4 \pm \sigma</em>{4}$</li>
</ul>

<p>And you want to report a <em>single length</em> measurement by a <strong>weigthed average</strong> of them. Then you can do this:</p>

\[\bar{x} = \frac{\sum_i w_i x_i}{\sum_i w_i}, \quad w_i = \frac{1}{\sigma_i^2}\]

<p>and then your <strong>error</strong> for this weighted mean is:</p>

\[\frac{1}{\sigma^2} = \sum_{i=1}^N \frac{1}{\sigma_i^2}\]

<p>(the more general way to derive those uncertainty is in the section: <a href="#Error Propagation">Error Propagation</a>)</p>

<h2 id="confidence-intervals">Confidence Intervals</h2>

<blockquote>
  <p>You want to see <strong>if</strong> a theoretically calculated = true average, $\mu$, <strong>falls at a certain distance from the statistical mean=your measured mean, $\bar{x}$</strong> in your experiments.</p>
</blockquote>

<p>The idea is, say, your measurement follows a <strong>Gaussian distribution</strong></p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230130155232209.png" alt="image-20230130155232209" style="zoom:50%;" /></p>

<p>then we can “<em>estimate</em>” whether a certain result is reasonable:</p>

<ul>
  <li>if within $1\sigma_x$, then in general you can say it is good agreement</li>
  <li>within $1\sigma \sim 2\sigma$, it is consistent (but probably need more measures)</li>
  <li>beyond that it is not very good</li>
</ul>

<p>note that <strong>if the error bar is very large</strong>, it does not mean your measurement is automatically good = caveat to mention in your report</p>

<h2 id="error-propagation">Error Propagation</h2>

<p>Given some function $f(x,y,z)$, where each variable has uncertainty $x \pm \sigma_x$ etc, then:</p>

\[\sigma_f^2 = \left( \frac{\partial f}{\partial x} \right)^2 \sigma_x^2 + \left( \frac{\partial f}{\partial y} \right)^2 \sigma_y^2 + \left( \frac{\partial f}{\partial z} \right)^2 \sigma_z^2\]

<p>which is valid if the errors on x, y and z are uncorrelated.</p>

<blockquote>
  <p><strong>Note</strong>: you may want to automate this calculation in your python code.</p>
</blockquote>

<hr />

<p><em>Examples</em>:</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230130152506629.png" alt="image-20230130152506629" style="zoom: 33%;" /></p>

<p>where notice that</p>

<ul>
  <li>relative uncertainty = $1\pm (\sigma_x / \bar{x})$, absolute uncertainty $\sigma_x$</li>
  <li>relative uncertainty is useful when you are doing multiplication</li>
</ul>

<h2 id="graphical-analysis-of-data">Graphical Analysis of Data</h2>

<p>When plotting data, you want to show <em>at minimum</em> a) uncertainty = error bars; b) axis labels</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230130152733661.png" alt="image-20230130152733661" style="zoom:50%;" /></p>

<p>But often you would also want to <strong>fit a linear model</strong> given this data, i.e.</p>

\[y_i = ax_i + b\]

<p>where your measurements are $(x_i, y_i)$. Obviously you will not be able to get a perfect fit, so we consider:</p>

\[\hat{y}_i = ax_i + b\]

<p>and hope to pass as close as possible to the highest number of points = <strong>linear regression</strong> = <strong>minimize least square errors</strong></p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230130152902895.png" alt="image-20230130152902895" style="zoom:50%;" /></p>

<p>given the error = residuals $\Delta y_i = y_i - \hat{y}_i$, then you consider a</p>

\[\min_\beta J = \min_\beta \frac{1}{2N}\sum_{i=1}^N \left( y_i - \hat{y}_i \right)^2 = \min_\beta \frac{1}{2n}\sum_{i=1}^N \Delta y_i^2\]

<p>where $\beta = (a, b)$ in this example.</p>

<ul>
  <li>
    <p>the more general case if to of course consider linear algebra formulation</p>

\[\mathbf{y} = \mathbf{X\alpha + \beta} = \mathbf{[1,X] \beta} \equiv \mathbf{X\beta}\]

    <p>where $\beta = [\alpha_1, \alpha_2…,\alpha_n, \beta]$. This is so that you can more easily find your least square solution.</p>
  </li>
  <li>
    <p>one interpretation of <em>why</em> your model is not perfect is to consider <em>how $y$ are constructed</em>. Consider a process where you have a <strong>random Gaussian noise</strong> to generate those data</p>

\[\mathbf{y} = \mathbf{X\beta} + \epsilon\]

    <p>meaning the residuals you have $\Delta y_i = \epsilon_i$, so that if the your model is correct you should see</p>

    <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230130153058507.png" alt="image-20230130153058507" style="zoom:50%;" /></p>

    <p>which would be a good way to perform <strong>sanity check</strong>.</p>
  </li>
</ul>

<p>But there are cases when you see that plotting $\Delta y_i$ gives (not limited to only those two cases):</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Case 1</th>
      <th style="text-align: center">Case 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230130171539106.png" alt="image-20230130171539106" style="zoom:50%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230130171552081.png" alt="image-20230130171552081" style="zoom:50%;" /></td>
    </tr>
  </tbody>
</table>

<p>where:</p>

<ul>
  <li>in case 1 it could be you are fitting a <em>wrong model</em>, or you have some <em>systematic error</em></li>
  <li>in case 2, you might need a some form of a <em>weighted fit</em></li>
</ul>

<h1 id="lab-1">Lab 1</h1>

<p>Basically we are re-imagining Galileo’s ramp experiment, where basically we are considering:</p>

<ul>
  <li>motion under constant acceleration</li>
  <li>forces will affect the acceleration of a mass (newton’s second law)</li>
</ul>

<p>The apparatus we will be using is the Fritionless Air-Track</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230206150149419.png" alt="image-20230206150149419" style="zoom:50%;" /></p>

<p>where Timing is performed by Sonic Ranger.</p>

<ul>
  <li>Sonic Ranger: Measuring Velocity: It simply computes the average velocity over very small time intervals</li>
</ul>

<p>Then, one can then have a measure of the <strong>elasticity</strong> of a collision by computing the <strong>coefficient of restitution</strong></p>

\[e = \left| \frac{v_f}{v_i} \right| = \begin{cases}
1 &amp; \text{elastic}\\
&lt;1 &amp; \text{non elastic}
\end{cases}\]

<p>Three main parts</p>

<ol>
  <li>
    <p>Leveling the ramp</p>
  </li>
  <li>
    <p>Measuring the elasticity of the bumper (under constant velocity)</p>

    <ul>
      <li>
        <p>By comparing the velocity before and after, you can compute elasticity (note to propagate uncertainty to compute $e$)</p>
      </li>
      <li>
        <p>note that since $e = \vert v_f / v_i\vert$, then the uncertainty is:</p>

\[\sigma_e^2 = \frac{1}{v_i^2}\sigma_{v_f}^2 + \frac{v_f^2}{v_i^4}\sigma^2_{v_i}\]
      </li>
      <li>
        <p>will measurements/error of $v_i$ be dependent on $v_f$? In this experiment, theses two are treated as independent variables so intuitively no. But practically you need to be careful about this.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Measuring the acceleration due to gravity (under constant acceleration</p>

    <ul>
      <li>
        <p>When you incline the ramp, the size of the gravitational force along the ramp is proportional to the angle of the ramp incline</p>

        <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230206152530984.png" alt="image-20230206152530984" style="zoom:50%;" /></p>

        <p>for which you can estimate acceleration with both $v(t)=a_x t$ and $x(t)=…$.</p>
      </li>
      <li>
        <p>then, once you have measured $a_x$, you can compute your $g$ by</p>

\[a_x = g \sin(\theta) = g\frac{h}{L}\]
      </li>
      <li>
        <p>Do you expect steeper slopes to be more accurate than shallower ones? Why or why not?</p>
        <ul>
          <li>measurement readings error as there is less time when $h$ is high $\implies$ $a_x$ is high $\implies$ less time to collect data $\implies$ more error introduced</li>
          <li>if there is systematic uncertainty, then relative uncertainty of height <em>becomes less</em></li>
          <li>the higher velocity means other contributions such as air resistance becomes more significant</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Challenge: estimate friction by looking at the loss of energy</p>
  </li>
</ol>

<blockquote>
  <p><strong>Check</strong>: when you doing linear regression for this lab, you are <em>probably</em> going to just do the unweighted version $\implies$ do not need to capture uncertainty</p>
</blockquote>

<h1 id="lab-2-projectile-motion-and-conservation-of-energy">Lab 2: Projectile Motion and Conservation of Energy</h1>

<p>Overview: basically <strong>launching a ball of a ramp</strong>, so that you can</p>

<ul>
  <li>estimate friction</li>
  <li>predicting landing position</li>
</ul>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230213144921560.png" alt="image-20230213144921560" style="zoom:33%;" /></p>

<blockquote>
  <p><strong>Primary objectives</strong></p>

  <ul>
    <li>understanding distributions of data</li>
    <li>Gaussian statistics</li>
    <li>write (at least some part) of your derivation in your lab report</li>
  </ul>
</blockquote>

<p>So how does this work? We are essentially exchanging potential and kinetic energy in a closed system</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230213145210803.png" alt="image-20230213145210803" style="zoom: 33%;" /></p>

<p>Then, since kinetic energy is</p>

\[E_{k} = \frac{1}{2}mv^2 + \frac{1}{2}I\omega^2\]

<p>for rolling without slipping, $\omega R = v$. and potential energy is</p>

\[E_{p}(r) = -G \frac{M_e m }{r} \approx mgh\]

<p>But of course, often we get energy “leaked” to friction, e.g. $W_f$ work done by friction</p>

\[E_{k}^{ini} = E_k^{fin} + W_f\]

<p>or the canonical form from work-energy theorem</p>

\[W = \frac{1}{2}mv_f^2 - \frac{1}{2}mv_i^2\]

<p>Then, the position of the ejected ball can be described by</p>

\[x(t) = x_0 + v_{x,0}t\\
y(t) = y_0 + v_{y,0}t - \frac{1}{2}gt^2\]

<p>This should summarize all you need. You basically get</p>

<ul>
  <li>$E$</li>
  <li>$\Delta E_p = mg \Delta h$</li>
  <li>$\Delta E_k = (7/10) m v_0^2$</li>
  <li>$W_f = mg \Delta h’$ for $\Delta h’$ being the height at which the ball stops</li>
  <li>..blablabla</li>
</ul>

<p>with which you can find out the final landing position $x(t)$</p>

<blockquote>
  <p><strong>Note that</strong></p>

  <ul>
    <li>the friction force we are estimating is technically velocity dependent. So measuring friction at one configuration might not mean you have the same friction in later setups</li>
    <li>The experiment is <mark>extremely sensitive to the value of $W_f$</mark>, so measure it as carefully as possible!</li>
  </ul>
</blockquote>

<hr />

<p><strong>Taking Data</strong></p>

<p>Basically you will record the position of the landing by having the ball hitting a carbon paper:</p>

<ul>
  <li>draw a marker of where you <em>expect</em> it to land</li>
  <li>compare against the actual data</li>
</ul>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230213151427100.png" alt="image-20230213151427100" style="zoom: 33%;" /></p>

<p>Then, we can look at the <strong>distribution of the data</strong></p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230213151532695.png" alt="image-20230213151532695" style="zoom:28%;" /></p>

<blockquote>
  <p><strong>Note</strong></p>

  <ul>
    <li>
      <p>you should expect your data to look like a normal distribution (even if your model is wrong) if you are testing stuff in the <em>same configuration</em></p>
    </li>
    <li>
      <p>error propagation in this lab is onerous. It is then highly recommended that you define</p>

\[x_{app} = \frac{D\sqrt{2h_2h_E}}{L};\quad h_E = \frac{10}{7}(\Delta h - \Delta h')\]

      <p>$h_2$ and $h_E$ are <mark>not independent</mark>. Therefore you should really calculate $\sigma_u$ for $u = h_2h_e$</p>
    </li>
  </ul>
</blockquote>

<h1 id="lab-4">Lab 4</h1>

<p>Primary Learning Goals:</p>

<ul>
  <li><strong>Weighted</strong> linear regressions</li>
  <li><strong>Weighted</strong> means of population of data</li>
</ul>

<p>And we will be probing <strong>atomic structures</strong>. Before, we understood the <strong>classical macroscopic force</strong> between matter, but <strong>not</strong> really what the constituents of matter were</p>

<ul>
  <li>JJ Thomson shows that matter has constituents that are negatively charged and whose charge/mass ratio is <strong>constant</strong> = <mark>quantization</mark>!</li>
  <li>proposed the plum pudding model (not quite right, improved by latter models)</li>
  <li>today, quantum mechanics! Ann the standard model of elementary particles</li>
</ul>

<p>Experiment: <strong>measure $e/m$</strong> by using lorentz force giving a circular motion</p>

<ol>
  <li>
    <p>given a loop current, we can compute the magnetic field created</p>

    <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230227145721191.png" alt="image-20230227145721191" style="zoom: 33%;" /></p>

    <p>specifically, we will use a <strong>Helmholtz coil</strong>, which is basically two coils:</p>

    <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230227150611603.png" alt="image-20230227150611603" style="zoom:33%;" /></p>

    <p>and $C$ will be given.</p>

    <p>magnetic field at the <mark>center</mark> of experimental apparatus. Finally we also want to <em>not have contribution from external field</em>, hence you want to <strong>align your apparatus with any external field</strong> (<mark>very important</mark>)</p>

    <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230227150800379.png" alt="image-20230227150800379" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>Then, in this field (around the axis of the loop) <strong>if we send in a moving charge</strong>:</p>

\[F = q\vec{v}\times \vec{B} = m \frac{v^2}{R}\]

    <p>which performs a circular motion with radius $R$. Hence</p>

\[\frac{q}{m} = \frac{2v}{R^2 B^2}\]
  </li>
  <li>
    <p>but we don’t have an easy way to measure the velocity $v$. One solution to this problem is to speed the electrons up thanks to a known potential difference</p>

\[K_{\mathrm{gain}} = e V = \frac{1}{2}mv^2\]

    <p>assuming $v_0=0$ is at rest and accelerated across $V$.</p>

    <p>Spefically:</p>

    <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230227150903458.png" alt="image-20230227150903458" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>measure the radius of curvature</p>

    <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230227151108697.png" alt="image-20230227151108697" style="zoom:33%;" /></p>
  </li>
</ol>

<p>Finally, plot with a <strong>line of best fit</strong> to a equation = shows that the equation is linear hence has more <em>physical meaning</em> (e.g. than computing $e/m$ for each of your trial and averaging across)</p>

<ul>
  <li>note that you will need to pick different $I$, one good way is to pick it such that it hits one of the markers</li>
  <li>what about the error of the $I$? You will notice that the marker is quite thick. So you can take $I_\min$ and $I_\max$ that hits that marker, and then take $\bar{I}\pm \sigma_I$ as uncertainty</li>
</ul>

<h1 id="lab-5-polarization-and-interference">Lab 5: Polarization and Interference</h1>

<p>A few background:</p>

<ul>
  <li>
    <p>light as EM wave = oscillating E and B fields</p>
  </li>
  <li>
    <p>Electric and magnetic fields <strong>are always perpendicular to each other</strong></p>
  </li>
  <li>
    <p>Everyday light is usually <strong>unpolarized</strong>. All directions of the electric field are equally probable</p>

    <ul>
      <li>
        <p>a <strong>polarized</strong> light, e.g. electric fields points in one direction only</p>

        <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306145053943.png" alt="image-20230306145053943" style="zoom:50%;" /></p>
      </li>
      <li>
        <p>so a better definition/visualization of <strong>unpolarized light = cannot define a plane where it oscillates in</strong></p>
      </li>
    </ul>
  </li>
</ul>

<p>Then how much field will be transmitted is given by a <mark>linearly polarized light</mark>:</p>

\[|\vec{E}_{trans}| = | \vec{E}_0 | \cos\theta\]

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306145519617.png" alt="image-20230306145519617" style="zoom: 33%;" /></p>

<p><strong>Experiment 1 Background Mauls’ law</strong>: but all we care is <strong>its intensity</strong> because that is what <em>our eyes can observe</em></p>

\[I \propto | \vec{E} |^2\]

<p>Therefore we get <strong>Malus’ Law</strong> (at the second polarizer)</p>

\[I=I_0 \cos^2\theta\]

<p>so you should see something like this</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306145638472.png" alt="image-20230306145638472" style="zoom:33%;" /></p>

<p>So how do you measure this? You will get a setup with a rotatable polarizer:</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306153933205.png" alt="image-20230306153933205" style="zoom: 33%;" /></p>

<p>So that you can</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Measure this</th>
      <th style="text-align: center">Plot this</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306154027663.png" alt="image-20230306154027663" /></td>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306154048970.png" alt="image-20230306154048970" /></td>
    </tr>
  </tbody>
</table>

<p>where in the plot you will need to extract at least 20 points = 20 different values of $\cos^2\theta$</p>

<hr />

<p><strong>Experiment 2 Background: Young’s Double Slit</strong></p>

<ul>
  <li>
    <p>constructive interference = same propagation direction, same frequency, in phase</p>
  </li>
  <li>destructive interference = same propagation direction, same frequency, but out of phase</li>
  <li>(recall that standing wave = <em>opposite</em> propagation direction, same frequency)</li>
</ul>

<p>Here we focus on the constructive and destructive interference</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306150046067.png" alt="image-20230306150046067" style="zoom:33%;" /></p>

<p>the idea is to measure <mark>where the peaks/dark spots</mark> are. The key insight is that:</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306150331011.png" alt="image-20230306150331011" style="zoom: 33%;" /></p>

<p>assumption to make thing easier: two waves are parallel, as $D » d$</p>

<ul>
  <li>
    <p>for <strong>bright spot to appear</strong>, then the $\Delta l$ must be an <em>integer multiple of wavelength</em> = $m\lambda$</p>
  </li>
  <li>
    <p>for <strong>dark spot to appear</strong>, then $\Delta l$ will be $(m+1/2)\lambda$</p>
  </li>
</ul>

<p>Then for the positions for the bright spot is</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306150627704.png" alt="image-20230306150627704" style="zoom:50%;" /></p>

<p>How do you measure this? There will be a sensor you can move <em>along $x$</em>, and record intensity $I(x)$ so that you can find $x_m$</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306151618379.png" alt="image-20230306151618379" style="zoom:50%;" /></p>

<hr />

<p><strong>Experiment 3 Background: Diffraction</strong>: can be thought of as self-interference:</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306151014923.png" alt="image-20230306151014923" style="zoom:50%;" /></p>

<p>where the <strong>diffraction single-slit minima</strong> occurs at</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306150927858.png" alt="image-20230306150927858" style="zoom:50%;" /></p>

<p>so that you can <em>overlay</em> your single-slit minima envelop on top of your double slit experiment. How did this happen?</p>

<ul>
  <li>in an ideal double slit, all the amplitudes will be constant. In an “ideal” single split, you get your envelope</li>
  <li>therefore in the practical double split, the observed intensity is actually an <em>ideal double split $\times$ single slit</em></li>
</ul>

<p>How would yuo measure this? Once again take measurements by moving the sensor in the transverse direction</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230306151823319.png" alt="image-20230306151823319" style="zoom:50%;" /></p>

<hr />

<p>What are some questions to think about:</p>

<ul>
  <li><strong>What limits the precision of these measurements with light?</strong> theory, physical limitations, aberration, diffraction, ambient lights</li>
</ul>

<p>Some tips:</p>

<ol>
  <li>For all the three parts: Move the RMS slowly when recording data.</li>
  <li>For the polarizer part: Try your best to minimize the amount of environmental light coming in. E.g. using the dim light in the room, move components closer to the sensor, etc.</li>
  <li>For the last part: move the laser closer to the light sensor to see more fringes but remember to <strong>record the value of D</strong>!</li>
</ol>

<h1 id="lab-6-interferometer">Lab 6: Interferometer</h1>

<p>The idea that we can use light as a precision measurement tool. Recall that some key properties include</p>

<ul>
  <li>
    <p><strong>interference</strong></p>

    <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320145027594.png" alt="image-20230320145027594" style="zoom:33%;" /></p>

    <p>basically when <em>two</em> waves interfere under different conditions</p>
  </li>
  <li>
    <p><strong>refraction</strong>, governed by snell’s law</p>

    <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320145320632.png" alt="image-20230320145320632" style="zoom: 33%;" /></p>

    <p>so that basically, as Maxwell’s equation is “different” in medium, we get</p>

\[v = c/n,\quad n \text{ being index of refraction}\]
  </li>
  <li>
    <p><strong>optical path length</strong>: how many “cycles” the light spend during the a physical distance</p>

    <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320150452652.png" alt="image-20230320150452652" style="zoom:33%;" /></p>

    <p>in the case of different medium (but same physical distance), then you can simply calculate the <strong>number of wavelength we can fit</strong> in each “box” (i.e. physical distance)</p>

    <p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320150625225.png" alt="image-20230320150625225" style="zoom: 33%;" /></p>

    <p>why would this quantity be useful? Recall that in the previous lab this difference in wavelength relates to constructive/destructive interf.</p>
  </li>
</ul>

<p>Finally, <strong>interferometry</strong>, the idea being</p>

<ol>
  <li>Split single beam into two, then recombine.</li>
  <li>Observer sees interference patterns projected onto a small screen.</li>
  <li>By moving one of the mirrors, the observer can change the path length difference  . The consequence is a shift in the interference pattern.</li>
</ol>

<p>so that as you move the $M_1$ length back and forth, you will see a different interference pattern</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320151553834.png" alt="image-20230320151553834" style="zoom:33%;" /></p>

<p>where basically you get two rays because <strong>one is being transmitted and other being reflected</strong></p>

<p>measure the gravitational wave=stretching/compressing space=<strong>changes the physical distance=interference pattern</strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Inteferometers Today</th>
      <th>Recorded Interference due to Gravitational Wave</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320151329891.png" alt="image-20230320151329891" style="zoom:50%;" /></td>
      <td><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320151437742.png" alt="image-20230320151437742" style="zoom: 50%;" /></td>
    </tr>
  </tbody>
</table>

<p>Alternatively, the beams that are transmitted and reflected+transmitted will have interference = can measure the gap</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320152244339.png" alt="image-20230320152244339" style="zoom:50%;" /></p>

<blockquote>
  <p>If we change the path length by a certain distance</p>

\[2d_m = m \lambda,\]

  <p>where $d$ is the distance you moved the mirror w.r.t the original position, then you will <strong>restore the original intereference pattern</strong>.</p>

  <ul>
    <li>be careful that the drawings we did are “assuming” a single light ray, but of course in reality is a “spherical wave front”</li>
    <li>therefore, if you moved $d_{10}$, then you would have seen the bright spot reappeared $10$ times <em>during the time you moved it</em></li>
  </ul>
</blockquote>

<hr />

<p><strong>Experiment: you will use both the Michelson and the Fabry-Perot interferometers</strong></p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320152916248.png" alt="image-20230320152916248" style="zoom:33%;" /></p>

<p>How to read the micrometers</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320152419592.png" alt="image-20230320152419592" style="zoom:33%;" /></p>

<p>You will turn the knob and count how many fringes have passed.</p>

<p>Then you will do this again:</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320153053961.png" alt="image-20230320153053961" style="zoom:33%;" /></p>

<blockquote>
  <p>To think about:</p>

  <ul>
    <li>in the end both setup measures the same thing. Which configuration is better?</li>
    <li>sometimes count the first fringe might be hard. It could be better to count the second ring, etc = the <mark>largest error is most likely mis-counting the number of fringes</mark>. So that should be <mark>included in your uncertainty measurement</mark></li>
  </ul>
</blockquote>

<p>The last part is we can change the optical distance <strong>by changing the medium</strong> (before we are changing the physical distance)</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320153256202.png" alt="image-20230320153256202" style="zoom:50%;" /></p>

<p>so that we can <strong>change the pressure=change index of refraction</strong> and observe different interference patterns.</p>

<p>Therefore, since the interference patterns re-occur every integer number of wavelengths apart:</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320153435220.png" alt="image-20230320153435220" style="zoom: 50%;" /></p>

<p>Then finally from this we can compute $n_{air}$ by</p>

<p><img src="/lectures/images/2023-05-11-UN1494_Intro_to_Exp/image-20230320153539028.png" alt="image-20230320153539028" style="zoom: 50%;" /></p>

<blockquote>
  <p><strong>Tips</strong></p>

  <ul>
    <li>start turning the knob <strong>from</strong> the 500 $\mu m$ mark</li>
  </ul>
</blockquote>

<h1 id="feedback-received">Feedback Received</h1>

<p>Feedback for Lab 1:</p>

<p>Total score: 13.5/20</p>

<p><strong>Overall Communication/Organization rubric items: Full points</strong></p>

<p><strong>Data Vis: -1</strong>
Plots must have titles as well as captions.
Note: A short table or two with some of your measurements would not have been out of place here, but it’s not strictly necessary and in this case, you wouldn’t lose points</p>

<p><strong>Data Manipulation &amp; Error Analysis rubric items: -1</strong>
- Uses Python, Mathematica, or similar: Yes
- Only most relevant equations or analyses are explicitly shown: Yes
- Analysis and modeling are connected to physical concepts: Yes
- Uncertainties are justified: There is <mark>no such thing as “human error.” This will fall under “random error”</mark> but never use the phrase “human error” or anything like it.</p>

<p><strong>Discussion rubric items: -3.5</strong>
- Comparison of results to expectation with justification: <mark>Agreement of measured e with expected value (1) is not reported</mark>. When discussing whether results are in agreement with predictions, don’t say that your results are “satisfactory” or “close” or anything like that (e.g. when you talked about your result for b, the y-intercept). When it comes to analyzing results, there’s only one thing that matters. <mark>Are your measurements the same as the predicted values within 3 sigma?</mark> If yes, they’re in agreement with predictions. If not, there’s a statistically significant error and they’re not in agreement. Once you have established this, you go into <mark>discussing the quality of your results (why they were or weren’t in agreement), and then you can potentially use more qualitative descriptions</mark>, but only once the quantitative actual analysis has been established.
- Discussion of quality (quantitative and qualitative) of results: Whether or not your results are in agreement with expectation, need to comment on why. This hasn’t been done fully.
- Sources of errors reference model, assumptions, and technical limitations: Sources of error for e not commented on.
- Responds to discussion questions: Not all</p>

<p>Narrative flow &amp; context rubric items: -1
- Sufficiently contextualize results and discussion: Yes
- Include only necessary and relevant background: Yes. If you want it to be perfect, you need to include just one or two sentences that <mark>capture the really big picture (why do we even care about any of the things we investigated in this experiment).</mark> You’re really almost there, but think of the intro as the part that will convince the reader that this is worth reading. Think of a scientific journal article where the intro always has something to make the project sound <mark>immediately relevant to everyone</mark>, no matter their background.
- Separate information appropriately: Yes
- Summarize concisely: Yes</p>]]></content><author><name></name></author><category term="2022@Columbia" /><summary type="html"><![CDATA[Introduction and Logistics]]></summary></entry><entry><title type="html">APPH4010 Intro to Nuclear</title><link href="/lectures/2022@columbia/APPH4010_Intro_to_Nuclear.html/" rel="alternate" type="text/html" title="APPH4010 Intro to Nuclear" /><published>2022-12-20T00:00:00+00:00</published><updated>2022-12-20T00:00:00+00:00</updated><id>/lectures/2022@columbia/APPH4010_Intro_to_Nuclear</id><content type="html" xml:base="/lectures/2022@columbia/APPH4010_Intro_to_Nuclear.html/"><![CDATA[<p>Equations and Concepts for Intro to Nuclear</p>

<h1 id="1-basic-concepts">1. Basic Concepts</h1>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name of Concept/Equation</th>
      <th style="text-align: left">Definition/Equation</th>
      <th style="text-align: left">Notes</th>
      <th style="text-align: left">Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Isotopes</td>
      <td style="text-align: left">same atomic number but different neutrons</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Electron Volt</td>
      <td style="text-align: left">energy equal to the amount gained to accelerate rest electron through a potential difference of 1 volt</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Atomic Mass Unit/Dalton</td>
      <td style="text-align: left">1/12 of the mass of a neutral atom of $^{12}_6C$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Magnetic Moment</td>
      <td style="text-align: left">Magnetic Dipole Moment associated with spin of nucleus</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Spin Quantum Number</td>
      <td style="text-align: left">nucleons have spin of 1/2 in units of $h / (2\pi)$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Mass to Energy</td>
      <td style="text-align: left">$E^2 = p^2c^2 + m_0^2 c^2$</td>
      <td style="text-align: left">$m_0$ is rest mass, and if at rest, $p=0$</td>
      <td style="text-align: left">$E_{\mathrm{electron}}=511keV$</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">$E_{\mathrm{amu}}=931.5keV$</td>
    </tr>
    <tr>
      <td style="text-align: center">Binding Energy</td>
      <td style="text-align: left">Energy required to separate its constituent nucleus</td>
      <td style="text-align: left">using $E=mc^2$</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$B = [Z\cdot m_H + N\cdot m_N - m(A,Z)]c^2$</td>
      <td style="text-align: left">energy used for binding, so the actual atomic mass $m(A,Z)$ is smaller</td>
      <td style="text-align: left">consider for carbon $^{12}_6C$ we have $m(A,Z)=12$, but $m_H=1.007825$ and $m_N=1.008665$</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">$m_H$ is mass of hydrogen so that it includes weight of electron</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Binding Energy Curve</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221013004334846.png" alt="image-20221013004334846" /></td>
      <td style="text-align: left">$B/A$ plotted because binding energy increases just as there are more proton to hold</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">the more $A$, much much more $B$ is needed due to short range of internuclear force</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">but the above only works until a point where there is only a fixed number of neutrons affecting a proton</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">since higher $B$ also means more energy required to break = more energy released when making bonds, we want fission to go from right</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Nuclide Stability Curve</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221013005606999.png" alt="image-20221013005606999" /></td>
      <td style="text-align: left">more neutrons is needed for more protons, hence this stability curve in the middle</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">so above it is more proton then needed = proton rich</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Properties of Radioactivity</td>
      <td style="text-align: left">Decay is a random process, but the probability of occurring can be modelled, and macro quantity such as $t_{1/2}$ can be computed</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">usually an unstable nuclide “parent” transforms into a more stable nuclide “daughter”</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">radioactivity measured in Becquerel = 1 decay per second</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">often heavy nuclei gives $\alpha$, and light nuclei $\beta$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Alpha Emission Properties</td>
      <td style="text-align: left">$(A,Z) \to (A-4, Z-2)$</td>
      <td style="text-align: left">preferred by heavy nuclides</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\alpha$-particle is preferred because it is <strong>very</strong> stable, hence net effect of decay releases energy</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">(see below)</td>
    </tr>
    <tr>
      <td style="text-align: center">Decay Energy Released</td>
      <td style="text-align: left">$Q = \Delta m c^2 =  (m_{\mathrm{left}}-m_{\mathrm{right}})c^2$</td>
      <td style="text-align: left">if net mass loss = net energy released = RHS more stable = RHS less actual mass</td>
      <td style="text-align: left">U(238)$\to$ Th(234) + He(4)</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$Q_\alpha = \mathrm{KE}<em>{\mathrm{daughter}}+ \mathrm{KE}</em>{\mathrm{\alpha}}$</td>
      <td style="text-align: left">for alpha decay</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$Q_\alpha = E_\alpha[1+ \frac{m_\alpha}{m_D}]$</td>
      <td style="text-align: left">conservation of momentum</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">since $Q_\alpha,m_\alpha/m_D$ is known, this means KE energy spectrum for $\alpha$ will be discrete in this case</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Beta Decay Properties</td>
      <td style="text-align: left">for proton-rich nuclides, often see $\beta^+$ decay or electron capture to convert $P \to N$</td>
      <td style="text-align: left">$p \to n + e^+ + \nu$</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">$p+e^- \to n + \nu$</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">otherwise, light nuclides often have $\beta^-$, which is $N\to P$</td>
      <td style="text-align: left">$n \to p + e^- + \bar{\nu}$</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221013014759439.png" alt="image-20221013014759439" /></td>
      <td style="text-align: left">KE Spectrum of electron becomes continuous because you have three particles released</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Gamma Decay Property</td>
      <td style="text-align: left">occurs when excited nucleus lose energy $\Delta E$ as photons</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Rate of Radioactive Decay</td>
      <td style="text-align: left">$\frac{dN}{dt} = -\lambda N$</td>
      <td style="text-align: left">Given that macroscopically the rate is proportional to number of radioactive nuclei</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$N(t)=N_0e^{-\lambda t}$</td>
      <td style="text-align: left">$\lambda$ is probability per unit time that a nuclide decays</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$A=\lambda N$</td>
      <td style="text-align: left">since $\lambda$ is prob/time, activity is rate of decay of a sample, measured in Becquerel</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Relativistic Effect</td>
      <td style="text-align: left">$\Delta T’ = \gamma \Delta T$</td>
      <td style="text-align: left">high energy particle emitted so that $v \approx c$, then the actual half life becomes $\Delta T’$</td>
      <td style="text-align: left">$v=0.995c$ when $\nu$ is released with large energy</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\gamma = \frac{1}{\sqrt{1-v^2/c^2}}$</td>
      <td style="text-align: left">is Lorentz fraction</td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<h1 id="5-interaction-of-radiation-and-matter">5. Interaction of Radiation and Matter</h1>

<p>Nuclear radiation normally consists of <mark>any particle with energy</mark> or photons (particle radiation is the <strong>radiation of energy by means of fast-moving subatomic particles</strong>). Its <strong>interactions with matter</strong> gives us opportunity for all experimental work. Therefore, this chapter we consider:</p>

<ul>
  <li>how charged particle interact with matter</li>
  <li>how uncharged particle interact with matter</li>
  <li>how photons interact with matter</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name of Concept/Equation</th>
      <th style="text-align: left">Definition/Equation</th>
      <th style="text-align: left">Notes</th>
      <th style="text-align: left">Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Num Atoms and Atom Density</td>
      <td style="text-align: left">$N = \frac{m}{M}N_A$</td>
      <td style="text-align: left">$m$ is mass of the substance you care, $M$ is the atomic weight of it</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$N/V = \frac{m}{V\cdot M}N_A = \frac{\rho}{M}N_A$</td>
      <td style="text-align: left">$\rho$ is the density of the substance you are</td>
      <td style="text-align: left">$H_2O$ has $\rho \approx 1g/\mathrm{cm}^3$, and $M=18.0153$</td>
    </tr>
    <tr>
      <td style="text-align: center">Heavy Charged Particles Interaction Properties</td>
      <td style="text-align: left">Two Ways of Interaction:<br />1) its electric field can ionize atoms in its passage<br />2) collision (e.g. with electrons)</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Deflect very little from path because its heavy</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Well-defined range, depending on its energy, mass, charge, and the stopping medium</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\Delta E \approx E_\alpha(\frac{4m_e}{M_\alpha})$</td>
      <td style="text-align: left">max energy lost per collision</td>
      <td style="text-align: left">incident alpha particle</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Though short range, as it can produce ionization = excited nuclei produces x-rays = need thicker $&gt;R$ protection layer</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Stopping Power</td>
      <td style="text-align: left">Rate at which a particle loses energy per unit path length</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221013235440171.png" alt="image-20221013235440171" /></td>
      <td style="text-align: left">Bethe-Bloch Formula</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Energy Dependence of Stopping Power</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221013235351944.png" alt="image-20221013235351944" style="zoom:50%;" /></td>
      <td style="text-align: left">variation of stopping power with energy if incident proton. This general shape works for any charged ion</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221025164843434.png" alt="image-20221025164843434" style="zoom: 33%;" /></td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\frac{dE}{dx} \approx \frac{\mathrm{const}}{E^k},k\approx 0.8$</td>
      <td style="text-align: left">the faster the ion travels, the less chance it interacts with stopping medium, hence negative slope</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$R=\int_{E}^0 dE/(dE/dx) \propto E^{k+1}$</td>
      <td style="text-align: left">derived from above</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Projectile Dependence of Stopping Power</td>
      <td style="text-align: left">$dE/dx \propto z^2 f(v)$</td>
      <td style="text-align: left">depends on particle charge</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$R \propto (m/z^2) F(v)$</td>
      <td style="text-align: left">range depends on incident particle mass and charge, derived from above</td>
      <td style="text-align: left">if two charged particle has the same energy, then $R_1/R_2 = (m_1/m_2)(z_2/z_1)^2$ because velocity is the same</td>
    </tr>
    <tr>
      <td style="text-align: center">Stopping Medium Dependence of Stopping Power</td>
      <td style="text-align: left">$\frac{R_1}{R_2} \approx \frac{\rho_2 \sqrt{A_1}}{\rho_1 \sqrt{A_2}}$</td>
      <td style="text-align: left">depends on stopping medium’s density and mass number</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Bragg Curve</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014000422271.png" alt="image-20221014000422271" /></td>
      <td style="text-align: left">utilize the fact that stopping power increases when energy decreases</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">particle travels slower = can produce more ions per unit path</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">hence Brag Peak = peak stopping power = peak ionization energy</td>
      <td style="text-align: left">hit tumor at this distance</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">when all energy is lost, it does nothing and stops/halts</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Electrons/$\beta$-particle Properties</td>
      <td style="text-align: left">Two Ways of Interaction:<br />1) its electric field can ionize atoms in its passage<br />2) collision (e.g. with electrons)</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">a zig-zag path</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">a much faster speed = less stopping force</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">less well-defined range, hence uses mean-free-path</td>
      <td style="text-align: left">mean free path is the average distance over which a moving particle travels before substantially changing its direction or energy</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">you can also use max-range $R_{\max}$ as a measure, in which case$\rho  R_{\max} \propto E_{\max}$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Stopping Power v.s. Electron Energy</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014142135607.png" alt="image-20221014142135607" /></td>
      <td style="text-align: left">as electrons accelerate by rapidly changing directions, it emits a lot of Bremsstrahlung radiation meaning $-\frac{dE}{dx}_{\mathrm{rad}}$ contributes a lot to stopping power</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Reaction Cross Sections</td>
      <td style="text-align: left">measures area within which if you hit the particle near the target $T$, reaction will occur</td>
      <td style="text-align: left">can be used for both Neutron and Photon</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">hence measures how strongly target $T$ reaction will occur</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Microscopic Cross Section</td>
      <td style="text-align: left">$\sigma = \sigma(E)$</td>
      <td style="text-align: left">$E$ is energy of incident particle</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">unit is uslaly $\mathrm{cm}^2$ or in Barnes ($10^{-24}\mathrm{cm}^2$)</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\sigma_{\mathrm{total}} = \sigma_{\mathrm{abs}}+\sigma_{\mathrm{sca}}+\sigma_{\mathrm{n,2n}}+…$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Reaction Rate</td>
      <td style="text-align: left">$R=N \cdot \sigma \phi = \Sigma \phi$</td>
      <td style="text-align: left">$N$ is atomic density, $\phi$ is particle flux (particle per cm$^2$ per second)</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">$\sigma \phi$ measures number of reactions triggered per second</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Macroscopic Cross Section</td>
      <td style="text-align: left">$\Sigma \equiv N \sigma$</td>
      <td style="text-align: left">is the macroscopic cross section</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Gamma Ray Interaction Properties</td>
      <td style="text-align: left">Primary ways of interaction:<br />1) photo-electric effect<br />2) Campton scattering<br />3) pair production</td>
      <td style="text-align: left">because gamma rays are very energetic and they are photons</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">we consider attenuation coefficient $\mu_m$ as a measure of <strong>probability the photon interact with material = photon vanished</strong></td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Photoelectric Effect</td>
      <td style="text-align: left">photon absorbed by electrons (near nucleus for conservation of momentum) to be ejected</td>
      <td style="text-align: left">hence that photon disappeared = attenuated</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$T=E_\gamma - B_e = hv - B_e$</td>
      <td style="text-align: left">$T$ is the emitted photoelectron and $B_e$ is the binding energy of the electron</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">secondary reactions might occur if<br />1) rest of the electrons rearrange themselves for de-excitation and release $\gamma$-ray<br />1) eject low energy electrons for de-excitation and hence <strong>Auger</strong> electrons  to deal with the excess energy</td>
      <td style="text-align: left">The Auger effect is a physical phenomenon in which the filling of an inner-shell vacancy of an atom, by an electron, is accompanied by the <em>emission of another electron</em> from the same atom <em>instead of releasing energy</em>.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\sigma_{PE} \propto z^5 / E_\gamma^{3.5}$</td>
      <td style="text-align: left">free electron = low probability of reaction</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">higher electron binding energy = more tightly bound electron has a higher chance (also for <strong>conservation of momentum</strong>)</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Campton Scattering</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014150725380.png" alt="image-20221014150725380" /></td>
      <td style="text-align: left">$\gamma$ ray scattered off electron and hence we get an electron recoiling and a lower energy photon</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$T = E_\gamma - E_{\gamma ‘} = E_{\text{KE of elec}}$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$E_{\gamma ‘} = E_{\text{KE of elec}} = E_e - m_ec^2$</td>
      <td style="text-align: left">for $E_e$ is the total energy of the recoil electron</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$E_{\gamma ‘} = \frac{E_\gamma}{1+(E_\gamma/mc^2)(1-\cos \theta)}$</td>
      <td style="text-align: left">energy of scattered photon from conservation of energy and momentum</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">a problem for shielding in real life as $\gamma$ photon didn’t disappear</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Pair Production</td>
      <td style="text-align: left">creates an electron-positron pair (when heavy nucleus is near to conserve momentum)</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$E_\gamma = 2m_ec^2 + T_- + T_+$</td>
      <td style="text-align: left">$2m_ec^2$ is the rest mass energy of positron and electron</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">has secondary effect when positron recombine with electron $\to$ annihilate and produce two oppositely traveling photon $\to$ can do PE or scattering</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Photon Attenuation</td>
      <td style="text-align: left">from the three mechanism above, photon either disappear or scattered = not observed by detector = attenuated</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014151515070.png" alt="image-20221014151515070" /></td>
      <td style="text-align: left">can measure and find out attenuation dependence on the three mechanism</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014151526416.png" alt="image-20221014151526416" /></td>
      <td style="text-align: left">difficult to measure</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Collimated Photon Attenuation</td>
      <td style="text-align: left">$dI = - N\sigma I dx$</td>
      <td style="text-align: left">$x$ is thickness of the material, $N$ is material atomic density, and $\sigma$ is interaction cross section</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\mu \equiv N\sigma$</td>
      <td style="text-align: left">linear attenuation coefficient</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">represents the probability per unit path length of a photon undergoing an interaction that would remove it from the beam</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$I = I_0 e^{-N\sigma x} = I_0 e^{-\mu x}$</td>
      <td style="text-align: left">intensity observed is $I$</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\mu_m = \mu / \rho$</td>
      <td style="text-align: left">mass attenuation coefficient</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Photon Attenuation Coefficient Graph</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014152131327.png" alt="image-20221014152131327" /></td>
      <td style="text-align: left">again, there are three phenomenon contributing to $\sigma$ hence $\mu_m$</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Neutron Interactions</td>
      <td style="text-align: left">A variety of interactions but mostly nuclear reactions:<br />1) fission if neutrons at few MeV<br />2) scattering<br />3) slowed neutrons can give neutron absorption</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Fission Fragments</td>
      <td style="text-align: left">When $N$ and $_{238}U$ react, it will create two <strong>fission fragment</strong> and 2-3 neutrons</td>
      <td style="text-align: left">hence neutron attenuated</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">those neutrons can then start chain reactions</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">requires low neutron energy</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Neutron Moderation</td>
      <td style="text-align: left">if elastic collision, can calculate energy $E$ of neutron with initial energy $E_0$ <strong>after colliding</strong> with some target nucleus at rest</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$n = (1/\varepsilon) \ln(E_0 / E_n)$</td>
      <td style="text-align: left">$n$ is the number of collisions of neutrons</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">$E_n$ is the energy of neutron after $n$ collisions</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\varepsilon = (2/A) - (4/(3A^2))$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">if reached low neutron energy = thermal neutron, can do fission</td>
      <td style="text-align: left">hence attenuated (see above)</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Attenuation in Neutrons</td>
      <td style="text-align: left">$\sigma_T \approx \sigma_a + \sigma_s$</td>
      <td style="text-align: left">mostly scattering and absorption</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$I = I_0 e^{-N \sigma_T x}$</td>
      <td style="text-align: left">same equation as photon attenuation</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$I = I_0 e^{-\Sigma x} = I_0 e^{- x/\lambda}$</td>
      <td style="text-align: left">same $\Sigma = N\sigma_T$ as before</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\lambda = 1 / \Sigma$</td>
      <td style="text-align: left">mean attenuation length = <strong>mean free path</strong></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$1/\lambda = (1/\lambda_a) + (1/\lambda_s)$</td>
      <td style="text-align: left">since $\Sigma = \Sigma_a + \Sigma_s$ from the first equation</td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<h1 id="6-detectors-and-instrumentation">6. Detectors and Instrumentation</h1>

<p>Here, we consider the principle at systems for</p>

<ul>
  <li>detection radiation</li>
  <li>producing controlled beams of radiation</li>
</ul>

<p>In general, any detector gets its signal from the <strong>interaction of radiations with matter</strong>:</p>

<ul>
  <li>collect charge released by ionization of gas (cased by radiation)</li>
  <li>excitation of electrons in semi-conductors (cased by radiation)</li>
  <li>observing fluorescent photons emitted due to de-excitation (cased by radiation)</li>
  <li>making ionization trails visible in film/solid gas (cased by radiation)</li>
</ul>

<p>and in addition to detecting those radiations, we also want detectors to tell us more information such as <strong>energy of the radiation</strong>, type of the radiation, dose rate, etc.</p>

<ul>
  <li>
    <p><strong>dose rate</strong> is quantity of radiation absorbed or delivered per unit time</p>
  </li>
  <li>
    <p>Dose equivalent (or effective dose) combines the amount of radiation absorbed and the medical effects of that type of radiation.</p>
  </li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name of Concept/Equation</th>
      <th style="text-align: left">Definition/Equation</th>
      <th style="text-align: left">Notes</th>
      <th style="text-align: left">Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Observe Current by Collecting Charge</td>
      <td style="text-align: left">$Q = \int_{0}^t i(t)dt$</td>
      <td style="text-align: left">typically, radiation interact with matter and produces an electric charge (and ion)</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014155430476.png" alt="image-20221014155430476" /></td>
      <td style="text-align: left">can collect that charge using an electric field = observe a current</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">notice the <strong>pulse like shape</strong></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014155617597.png" alt="image-20221014155617597" /></td>
      <td style="text-align: left">In reality, since radiation is random, it is better described by Poisson statistics</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Poisson statistics = probability of a given number of events occurring in a fixed interval of time if the events occur with a known average rate and independently of the time since the last event</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Modes of Detector Operation</td>
      <td style="text-align: left">Pulse mode: when low radiation flux hence each radiation can be recorded as separate pulse</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Current mode: high particle flux hence average current is recorded</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Detectors Figures of Metric</td>
      <td style="text-align: left">Things to check for a detector:<br />1) Energy Resolution<br />2) Detection Efficiency<br />3) Dead Time</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Energy Resolution</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014161258795.png" alt="image-20221014161258795" /></td>
      <td style="text-align: left">$E_0$ peak is the source, the Gaussian curve is the fitted energy spectrum <em>measured</em></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">measures Full-Width at Half Maximum (FWHM)</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014161426020.png" alt="image-20221014161426020" /></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">measured in units of energy or percent of its peak energy $E_0$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">since it is usually first fitted to a Gaussian curve, then FWHM$=2.35\sigma$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014161543558.png" alt="image-20221014161543558" /></td>
      <td style="text-align: left">in reality due to all different effects <em>reaching the device</em></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Detection Efficiency</td>
      <td style="text-align: left">Measures how much radiation it can capture, and if captured, how much it can record</td>
      <td style="text-align: left">capture = radiation reaches it<br />record = radiation reached AND recorded</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">usually easy to detect charged particles $\alpha$ and $\beta$, but be careful as they have short range</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">harder to deal with $\gamma, n$ because they have deposit little energy per unit path</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014161857546.png" alt="image-20221014161857546" /></td>
      <td style="text-align: left">depends on geometry of the device</td>
      <td style="text-align: left">if device is liquid so that source submerges in it, then it is $4\pi$ full coverage</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014161905351.png" alt="image-20221014161905351" /></td>
      <td style="text-align: left">actual performance, dependent on detector material and thickness, and radiation type and energy</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Dead Time</td>
      <td style="text-align: left">due to physical/electronical problem, there will be dead-time when device becomes <strong>unresponsive</strong> between events</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">e.g. takes time for the captured electron to travel to the cathode</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">events almost overlap</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\tau$ =  dead time</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014162158239.png" alt="image-20221014162158239" /></td>
      <td style="text-align: left">so non-paralyzable can recover 4</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">paralyzable has the problem of <strong>extended dead time</strong></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Dead Time Corrections</td>
      <td style="text-align: left">Paralyzable detector: $n=me^{n\tau}$</td>
      <td style="text-align: left">$n=$ true interaction rate, $m$ = recorded interaction rate, $\tau$ = deadtime</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Nonparalyzable detector: $n= m/(1-m\tau)$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014162313018.png" alt="image-20221014162313018" /></td>
      <td style="text-align: left">when true radiation $n$ is high, paralyzable can mistake it for a low $m$!</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Principles of Gas Detectors</td>
      <td style="text-align: left">detectors by using gas to be ionized by the radiation $\to$ record those ions</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">three types of detectors on this principle<br />1) ionization chamber<br />2) proportional counter?<br />3) GM counter</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Ionization Chamber</td>
      <td style="text-align: left">works by measuring ionization (of gas molecules) produced <em>solely</em> by incident ionizing particles (e.g. $\alpha$ radiation)</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014162757533.png" alt="image-20221014162757533" /></td>
      <td style="text-align: left">ionizing particles creates ionized gas $\to$ have a high enough field to prevent recombination $\to$ those ions complete the circuit by having electron goes to anode and positive ion to cathode</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">but usually needs an amplifier as current produced could be small</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">need a certain amount of electric field applied</td>
      <td style="text-align: left">see above</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$A$ = #ions per sec produced $\times$ charge per ion</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">source disposing $1GeV\,s^{-1}$ energy per second and air in the chamber ionizes with $34$eV</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">#ions per sec produced = $10^9 / 34$</td>
    </tr>
    <tr>
      <td style="text-align: center">Pulse Amplitude v.s. Voltage Applied in Gas Detector</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014163205531.png" alt="image-20221014163205531" /></td>
      <td style="text-align: left">the fundamental reason why we have three types of gas detectors</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">pulse <strong>amplitude</strong> can give you information of the <strong>energy</strong> of ionizing particles!</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">region I: increase $V$ means less recombination of ions</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">region II: full charge collection = no recombination</td>
      <td style="text-align: left">Ionization Chamber</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">region where output is independent of applied voltage</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Gas Amplification Factor (GAF) = 1</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">region III: electrons become more energized $\to$ can cause secondary ionization during collision. Those secondary ionized electrons can further produce ionizations</td>
      <td style="text-align: left">proportional chamber</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">amplification of current = Townsend Avalanche</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">GAF up to about $10^5$, but still proportional to the original ionization</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">region V: electrons so energized that it can excite inner electrons $\to$ UV radiation from de-excitation $\to$ ionizes other irrelevant atoms in the chamber</td>
      <td style="text-align: left">Geiger-Mueller Counter</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">can’t distinguish initial input energy of those ionizing particles</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">hence can only know the presence of those radiations</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Proportional Chamber</td>
      <td style="text-align: left">electric field increased beyond region II, so that secondary ionizations occur</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">pulse amplitude still tells you energy of input ionizing particles</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221014164005297.png" alt="image-20221014164005297" /></td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Geiger-Mueller Counter</td>
      <td style="text-align: left">electric field increased so much that everything is ionized = pulse amplitude does not depend on the energy of input ionizing particles</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">hence can only measure the presence of radiation</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Scintillation Detector Mechanics</td>
      <td style="text-align: left">energy of radiation $\to$ excitation of electrons of scintillation material $\to$ de-excitation/Compton scattering which emits UV/visible light</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">those light photons are directed to the photosensitive surface $\to$ emit photo-<strong>electrons</strong> $\to$ amplified in PMT $\to$ observe pulse of current</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221021173557853.png" alt="image-20221021173557853" /></td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Scintillation Materials</td>
      <td style="text-align: left">need high effiiency of converting energy to photons</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">linear conversion: output proportional to deposited energy from radiation</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">short decay time = quick flash = short dead time</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">maximize conversion to output fluorescence</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">transparent to its own emission (which is photon, which is <em>also</em> energy)</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Scintillation Types</td>
      <td style="text-align: left">Fluorescence=emit visible radiation with emission time approx. 10 ns</td>
      <td style="text-align: left">preferred</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Delayed fluorescence=above but loner emission time</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Photofluorescence=longer wavelength and longer emission time</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Semi-Conductor Detector Mechanics</td>
      <td style="text-align: left">energy of radiation creates electron-hole pair $\to$ electron move in the direction of applied field $\to$ current</td>
      <td style="text-align: left">works only if those e-h pairs do not recombine or get trapped in regions of impurity</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Semi-Conductor Detector Properties</td>
      <td style="text-align: left">only requires 3-4 $eV$ to create e-h pair, whereas to create ion pair in gas requires 30 $eV$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">better energy resolution</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">faster charge collection = shorter dead time</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Semi-Conductor Detector Types</td>
      <td style="text-align: left">diode</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">high purity $Ge$</td>
      <td style="text-align: left">see above</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">lithium drifted $Si$ or $Ge$</td>
      <td style="text-align: left">alternatives to high purity, use $Li$ for drifting as dopant atoms</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Thermoluminscent Detector</td>
      <td style="text-align: left">operates by accumulating radiation energy and read altogether at the end</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">therefore, we want crystals to de-excite as slow as possible when absorbed radiation</td>
      <td style="text-align: left">opposite of scintillation</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">mechanism: electron and holes are elevated but below conduction band, hence “trapped”</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Neutron Detectors Properties</td>
      <td style="text-align: left">cannot detect neutrons directly, but secondary radiation, such as $(n,p)$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">depending on how fast the neutrons are, there are two types of neutron detectors</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Slow Neutron Detectors Mechanism</td>
      <td style="text-align: left">for slow, thermal neutrons, nuclear reactions such as $(n,p),(n,\alpha), (n,f)$ have large cross section $\sigma \propto 1/v$</td>
      <td style="text-align: left">basically can be triggered easily</td>
      <td style="text-align: left">$(n,p)$ means the reaction of $A+n \to B+p$</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">mechanics: neutron $\to$ nuclear reactions $\to$ charged outputs (e.g. fission fragments) cause ionization $\to$ which can be measured</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">$^{10} B(n,\alpha)^7 Li$</td>
    </tr>
    <tr>
      <td style="text-align: center">Slow Neutron Detector Types</td>
      <td style="text-align: left">Proportional Counter</td>
      <td style="text-align: left">$BF_3$ proportional counter performs $^{10} B(n,\alpha)^7 Li$ which a large cross section of 4010 b for thermal neutrons, and $Q=2.79MeV$</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">utilizes $(n,\alpha)$</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Fission Counters: coat detector with fissionable material</td>
      <td style="text-align: left">utilizes $(n,f)$</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Activation Counter: using activation foils composed of material sensitive of neutron of different energies</td>
      <td style="text-align: left">utilizes neutron capture</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Fast Neutron Detector</td>
      <td style="text-align: left">use plastic or liquid organic scintillation material instead</td>
      <td style="text-align: left">$1/v$ means slow neutron detectors become not efficient</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">in general, materials of rich hydrogen $\to$ recoiling protons produce energy for scintillation</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Particle Identification</td>
      <td style="text-align: left">since radiation = any particle with energy, we might also want to know which particle it is</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">PI: Counter Telescope</td>
      <td style="text-align: left">stack two or more detectors, and can measure $\Delta E$ between detectors and $E$ total</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\Delta E$ can tell you stopping power</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$E\times \Delta E \propto mz^2$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">PI: Time of Flight</td>
      <td style="text-align: left">measure time between detectors, hence determine $v$</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">if radiation is pulsed beam, then you can just measure arrival time at detector and actual beam pulse</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">PI: Magnetic Analysis</td>
      <td style="text-align: left">use spectrometer with magnetic field to measure the deflection of charged particles</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$r = mv/qB$, can measure mass to charge if known velocity</td>
      <td style="text-align: left">based on Lorentz Force $F=qv\times B$</td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<h1 id="midterm-concepts">Midterm Concepts</h1>

<p>Chapter 1</p>

<ul>
  <li>atomic structure
    <ul>
      <li>plum pudding model, Rutherford model and its problems, Quantum Theory and its model, Bohr Model and its energy levels</li>
      <li>Rutherford scattering experiment, result</li>
    </ul>
  </li>
  <li>equivalence of energy and momentum
    <ul>
      <li>mass-energy equation</li>
    </ul>
  </li>
  <li>uncertainty principle</li>
  <li>nuclear models
    <ul>
      <li>liquid drop, shell model, their differences</li>
    </ul>
  </li>
  <li>electron volt, alternative mass unit</li>
  <li>binding energy, mass excess, and Q calculation</li>
  <li>binding energy curve (reproduce)</li>
  <li>nuclear stability curve (reproduce)</li>
  <li>radioactivity equation and activity</li>
  <li>secular equilibrium</li>
  <li>alpha decay
    <ul>
      <li>energy is discrete, etc</li>
    </ul>
  </li>
  <li>beta decay
    <ul>
      <li>continuous energy up to a cut-off</li>
    </ul>
  </li>
  <li>auger electron</li>
  <li>number of atoms and atomic densities calculations</li>
</ul>

<p>Chapter 5</p>

<ul>
  <li>stopping power
    <ul>
      <li>two components, use Bremsstrahlung</li>
    </ul>
  </li>
  <li>Bethe-Bloch that
    <ul>
      <li>stopping power goes $z^2 / v^2$</li>
    </ul>
  </li>
  <li>stopping power v.s. energy curve
    <ul>
      <li>bragg peak curve</li>
    </ul>
  </li>
  <li>heavy charged particles
    <ul>
      <li>how it loses energies, ionizing them and/or exciting them</li>
    </ul>
  </li>
  <li>light charged particles
    <ul>
      <li>zig zag, no well-defined range</li>
    </ul>
  </li>
  <li>cross sections
    <ul>
      <li>reaction rates, linear attenuation coefficient $\mu$</li>
      <li>attenuation and its differential equation</li>
    </ul>
  </li>
  <li>photon ways of interacting
    <ul>
      <li>three ways of how they work, but not formula</li>
    </ul>
  </li>
  <li>neutrons interactions
    <ul>
      <li>three ways, elastic, inelastic, or reaction</li>
      <li>thermal neutrons</li>
    </ul>
  </li>
</ul>

<p>Chapter 6</p>

<ul>
  <li>
    <p>detector two operation mode</p>
  </li>
  <li>
    <p>detectors figure of merit</p>

    <ul>
      <li>equation of FWHM/$E_0$</li>
      <li>efficiency, especially uncharged particles</li>
      <li>definitions of absolute/intrinsic effiency</li>
    </ul>
  </li>
  <li>
    <p>dead time</p>

    <ul>
      <li>paralyzable v.s. non-paralyzable</li>
      <li>dead time correction equation</li>
      <li>dead time curves</li>
    </ul>
  </li>
  <li>
    <p>will need to draw a detector</p>
  </li>
  <li>
    <p>three types of ionization chambers</p>
  </li>
  <li>
    <p>gas-field detector v.s voltage</p>

    <ul>
      <li>its five regions and the graph itself</li>
    </ul>
  </li>
  <li>
    <p>scintillation detector mechanism</p>
  </li>
  <li>
    <p>semi-conductor detector mechanism</p>
  </li>
  <li>
    <p>TLDs</p>
  </li>
  <li>
    <p>Neutron Detectoros</p>

    <ul>
      <li>slow.v.s fast needs hydrogen = moderates</li>
      <li>fission counter</li>
    </ul>
  </li>
  <li>
    <p>particle identification</p>

    <ul>
      <li>
        <p>time-of-flight gives velocity + magnetic anlaysis</p>
      </li>
      <li>
        <p>none of the detector mechanisms except in the particle identification to tell us particle type</p>
      </li>
    </ul>
  </li>
</ul>

<h1 id="nuclear-structure">Nuclear Structure</h1>

<p>Aim:</p>

<ul>
  <li>understanding what happens <strong><em>inside</em></strong> nucleus
    <ul>
      <li>e.g. understand its properties by understanding what <strong>forces are responsible</strong></li>
    </ul>
  </li>
  <li>no complete theory today fully describes the structure and behavior of complex nuclei</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name of Concept/Equation</th>
      <th style="text-align: left">Definition/Equation</th>
      <th style="text-align: left">Notes</th>
      <th style="text-align: left">Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">liquid drop model</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">nucleus regarded as a <strong><em>collection</em></strong> of neutrons and protons forming a droplet of incompressible fluid</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">good for <strong>systematic behaviors</strong> such as nucleon binding energy</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">discrepancies in liquid drop model = there is an ORDERED STRUCTURE within the nucleus in which neutrons and protons are arraged in stable quantum states in a potential well</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Shell (Single-particle Model)</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">loosely held individual outer nucleons, which account for many of the nucleus’s properties</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">very alike the electron shell model and how electrons arrange themselves</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Nuclear Force</td>
      <td style="text-align: left">binds nucleons in nucleus, n-n, p-p, p-n</td>
      <td style="text-align: left">extremely complicated, derivation from first principle</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Nuclear Force Properties</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">short range</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221214025855146.png" alt="image-20221214025855146" style="zoom:50%;" /></td>
      <td style="text-align: left">for very small separations, nucleons begin to repel = no clump</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">nuclear density approx constant for different sized nuclei = liquid drop</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Nuclear Force Charge Dependency</td>
      <td style="text-align: left">charge symmetric: same nuclear force for  p-p as for n-n</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Nuclear Force Spin Dependency</td>
      <td style="text-align: left">Average force for p-n &gt; p-p or n-n by a factor of about 2</td>
      <td style="text-align: left">both n and p are fermions = obey Pauli Exclusion for spin</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">so for p-p and n-n, you have to have different spin, net $S=0$</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">n-p can have be either anti-parallel or paralell. <strong>Force in $S = 1$ state is stronger</strong> than force in $S = 0$ state. Therefore, avg. force for p-n is greater than that for p-p or n-n (by about factor of 2).</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Explains why can have bound n-p (deuteron), but not bound n-n or p-p (i.e., nuclear force not strong enough to bind the latter two configurations)</td>
      <td style="text-align: left">p-p repulsion;  n-n free particles + not strong enough force</td>
    </tr>
    <tr>
      <td style="text-align: center">Nuclear Force Spin-Orbit Coupling</td>
      <td style="text-align: left">$\text{Spin-orbit Force}=L \cdot S$</td>
      <td style="text-align: left">$L,S$ being angular momentum and spin, respectively</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Force is attractive if S and L are parallel, and repulsive if they are anti-parallel</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">zero on average inside an atom</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Semi-Empirical Mass Formula</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221214030640303.png" alt="image-20221214030640303" /></td>
      <td style="text-align: left">estimating <strong>binding energy</strong>, which can then be used to estimate the <strong>actual nuclear masses</strong> for unknown nuclei (but known $A$ and $N$)</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">based on liquid-drop = estimates <strong>collective properties of a nucleus</strong></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">SEMF Volume Energy</td>
      <td style="text-align: left">$a_vA$ term</td>
      <td style="text-align: left">nucleon feels the force only from its nearest neighbors and the nucleon density is approx constant = force is constant = <strong>B/A is approx constant</strong> in the interior of the nucleus.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">SEMF Surface Term</td>
      <td style="text-align: left">$A^{2/3}$ since the first $A\propto \mathrm{Volume}$</td>
      <td style="text-align: left"><strong>reduced</strong> by a factor proportional to the <strong>surface area</strong> of the nucleus</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221214110550694.png" alt="image-20221214110550694" /></td>
      <td style="text-align: left">nucleons on the surface of the nucleus experience the nuclear force from nucleons inside the nucleus, but no force from the outside. hence reduced</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">SEMF Coulomb Term</td>
      <td style="text-align: left">$\propto {Z^2}/{A^{1/3}}$</td>
      <td style="text-align: left">Coulomb repulsion would further reduce binding energy</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">protons repel each other with a long-range Coulomb force; <br />Mean radius of the nucleus is proportional to $R\propto A^{1/3}$<br />Coulomb force also $\propto Z^2$</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">SEMF Symmetry Term</td>
      <td style="text-align: left">$\propto (N-Z)^2$</td>
      <td style="text-align: left">nucleus becomes more <strong>unstable</strong> the greater the difference between <strong>Z and N</strong>. Has the most effect for <strong>light nuclei</strong></td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">shell model result. The term is zero for $Z = N$ and becomes less important for heavy nuclei (high A), where $N &gt; Z$</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">SEMF Pairing Term</td>
      <td style="text-align: left">$\Delta$</td>
      <td style="text-align: left">nucleons tend to <strong><em>couple pairwise</em></strong> into more stable configurations</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Δ &gt; 0 if N and Z are both even</td>
      <td style="text-align: left">from Pauli Exclusion Principle</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Δ &lt; 0 if N and Z are both odd</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Δ = 0 if either N or Z is odd (i.e., A odd)</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Nuclear Fission Energy Barrier</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221214111507480.png" alt="image-20221214111507480" /></td>
      <td style="text-align: left">barrier to fission is called the fission barrier or activation energy</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">for <strong>Heavy</strong> Nuclei</td>
      <td style="text-align: left">As s $A$ increases, the relative importance of the Coulomb repulsion term increases = it becomes energetically possible for the nucleus to split if it becomes <strong>deformed</strong> enough</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Odd nuclei (($U_{92}^{235}$)) have very low activation energies, <strong>since the pairing term is zero</strong>, and can fission with low energy neutrons.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Isobaric Nuclei</td>
      <td style="text-align: left">same number of total nucleons but swapped #neutrons and #protons</td>
      <td style="text-align: left">will affect the coulomb term in SEMF</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Vibrational Model</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221214112515740.png" alt="image-20221214112515740" /></td>
      <td style="text-align: left"><strong><em>SEMF assumed sphere shape,</em></strong> but in reality can deform</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">vibration can actually be modelled with liquid-drop model</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Rotational States</td>
      <td style="text-align: left">rotation doesn’t produce any change of state</td>
      <td style="text-align: left">Collective rotational states can <strong>only occur in non-spherical nuclei</strong> (otherwise how do you know it is rotating?)</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Shell (Independent Particle) Model</td>
      <td style="text-align: left">aims to model energy level of nucleons</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">neutrons and protons fill energy level in the nucleus according to the Pauli Exclusion Principle</td>
      <td style="text-align: left">similar to electron energy levels</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">those structure like properties are not predicted by SEMF, which only deals with collective states</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">“islands of stability” corresponding to “closed shells,” also called “magic numbers,”</td>
      <td style="text-align: left">2 (1s), 8 (2s, 1p), 20, 28, …</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Nuclear Potential Energy</td>
      <td style="text-align: left">predict <strong><em>energy levels</em></strong> in the nucleus, need to know $V(r)$</td>
      <td style="text-align: left">arises from interactions with other nucleons.</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">infinite well = simplest model</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Woods-Saxon Potential</td>
      <td style="text-align: left">$V(r) = -\frac{V_0}{1+e^{(r-R)/a}}$</td>
      <td style="text-align: left">quite a good approximate</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center">Spin-Orbital Potential</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221214113711983.png" alt="image-20221214113711983" /></td>
      <td style="text-align: left">more complicated but <strong>accounted for more splittings</strong> of energy level</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">splittings due to spin $s$ and angular momentum $l$. If <strong>aligned</strong>, $s\cdot l$ positive hence binding energy is increased</td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<h1 id="nuclear-instability">Nuclear Instability</h1>

<p>Aim: Predict/explain <strong><em>why</em></strong></p>

<ol>
  <li>some <em><strong>half-lives are short</strong> and others are long</em>, and</li>
  <li>why <strong><em>certain energy transitions take place</em></strong> and others don’t</li>
</ol>

<p>In general there will be a) electromagnetic force; b) weak force; c) strong force</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name of Concept/Equation</th>
      <th style="text-align: left">Definition/Equation</th>
      <th style="text-align: left">Notes</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Gamma Emission Mechanism</td>
      <td style="text-align: left">Excited nucleus may de-excite through $\gamma$-emission</td>
      <td style="text-align: left">help understand why certain gamma decay have longer half-lives than another</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">gamma is “everywhere” in the sense that many radioactive decay accompanies gamma emission (see below, due to excited daughter nucleus)</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Characteristic $\gamma$-emission</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">actually come from the transitions among the energy levels of the <strong>daughter</strong> nucleus.</td>
      <td><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218182726846.png" alt="image-20221218182726846" style="zoom:67%;" /></td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td>the above means we have two decays:<br /><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218182834669.png" alt="image-20221218182834669" style="zoom: 15%;" />and then<img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218182846700.png" alt="image-20221218182846700" style="zoom:10%;" /></td>
    </tr>
    <tr>
      <td style="text-align: center">Selection rules</td>
      <td style="text-align: left">derived from consideration of conservation of <mark>angular momentum and parity</mark>, <strong><em>specify the allowable transitions</em></strong> among energy levels</td>
      <td style="text-align: left">answers: “why are some gamma more likely to happen than others?”</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">1. Photon that carries away energy has angular momentum $L&gt;0$</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">2. Conservation of Angular Momentum: $\vert l_i - l_f\vert \le L \le \vert l_i + l_f\vert$</td>
      <td style="text-align: left">$l_i$, $l_f$ is the angular momentum of the initial and final nuclear state</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">3. Parity (wavefunction even or odd) is also conserved in EM transitions</td>
      <td style="text-align: left">whether or not a parity changed decides $\to$</td>
      <td><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218204404711.png" alt="image-20221218204404711" style="zoom:50%;" /></td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218204529542.png" alt="image-20221218204529542" style="zoom:50%;" /></td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">do <strong><em>not</em></strong> provide information on the probability of its occurrence, only if it <em>can</em> occur</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Competing Process in $\gamma$</td>
      <td style="text-align: left">as gamma usually comes from de-excitaton, other processes such as de-excite with electron is competing (also comes from de-excitation)</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">e.g. Internal Conversion</td>
      <td style="text-align: left">transfer energy to an orbital electron (K-shell or further out), ejecting it from the nucleus</td>
      <td>another way to de-excite = the parent and child would be the same <em>as if performed gamma decay</em></td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"><strong>Single energy peak</strong> for each orbital electron transition unlike continuous β spectrum.</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">$\gamma$ Transition Rates</td>
      <td style="text-align: left">Weisskopf Single Particle γ Transition Rates</td>
      <td style="text-align: left"> </td>
      <td><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218204742112.png" alt="image-20221218204742112" /></td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$E_1$ is greatly favored</td>
      <td style="text-align: left"> </td>
      <td>Selection rules allow E2, M3, E4, M5, and E6 transitions, but the E2 radiation is strongly favored.</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218214350669.png" alt="image-20221218214350669" /></td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">If transitions have <em>high multipolarity</em>, T$_{1/2}$ may be considerable</td>
      <td style="text-align: left">basically for E6, M6, etc above,  the probabiility is low = long half lives</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Mixed $\gamma$ transitions</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">can substantially <strong><em>raise the probability</em></strong> that a particular energy γ-ray will be emitted</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">can’t characterize transition probability using the single particle model</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Beta Decay Equations</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218214832570.png" alt="image-20221218214832570" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">allowed reactions = conservation of <strong><em>energy/momentum/charge/lepton number</em></strong></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">can find the end point of the continous $\beta$ spectrum</td>
      <td style="text-align: left">recall that $Q$ gives the kinetic energy difference $Q = K_f - K_i = (m_i -m_f)c^2$</td>
      <td>$T_{end} = E_0 - m_e c^2$, the end point of the β spectrum. $E_0$ = total energy of the transition.</td>
    </tr>
    <tr>
      <td style="text-align: center">Fermi’s Golden Rule</td>
      <td style="text-align: left">Probability of beta decay, determine the <em>transition rate</em> between an initial state (i) and a final state (f) for $\beta$ decay</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218220413602.png" alt="image-20221218220413602" /></td>
      <td style="text-align: left">$\lambda$ measures the transition probability</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Electron Capture</td>
      <td style="text-align: left">competes with β+-decay when both modes are possible<img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218220610791.png" alt="image-20221218220610791" style="zoom:25%;" /></td>
      <td style="text-align: left">all $\beta$ are due to <mark>weak interaction</mark></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Factor affecting EC probability/rate</td>
      <td style="text-align: left">depends on the <strong>overlap</strong> of the electron’s and the nucleus’s wave functions</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">1. electron is most likely to be captured when it is <strong><em>closer</em></strong> to the nucleus</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">2. higher Z = being attracted more = size of $K$-orbit electrons orbit is smaller = being captured</td>
      <td style="text-align: left">EC importance over β+ decay increases with Z</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Alpha Decay</td>
      <td style="text-align: left">common decay mode for <strong>heavy radionuclides</strong></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Shed four units of mass (two neutrons and two protons) in one decay.</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">QM “tunneling” in Alpha Decay</td>
      <td style="text-align: left">heavy nucleus like uranium has barrier of 20MeV, but emitted alpha particle from it can be <em>as low as 5 MeV</em>. now we know it is due to non-zero wave function</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">requires $Q&gt;0$</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218221142073.png" alt="image-20221218221142073" /></td>
      <td style="text-align: left">explanation of QM tunneling</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Preformation Probability</td>
      <td style="text-align: left">for alpha decay to happen, you need to first form the alpha particle in the nucleus</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218221306606.png" alt="image-20221218221306606" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="nuclear-reactions">Nuclear Reactions</h1>

<p>Study a bit further on <strong><em>how/when reaction happens</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name of Concept/Equation</th>
      <th style="text-align: left">Definition/Equation</th>
      <th style="text-align: left">Notes</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Types/Classification of Reactions</td>
      <td style="text-align: left"><strong>Elastic</strong> scattering: a + A $\to$ a + A</td>
      <td style="text-align: left">scattering = Incident and outgoing particles are the same</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><strong>Inelastic</strong> scattering: a + A $\to$ a + $A^*$</td>
      <td style="text-align: left">some energy goes into exciting internal levels in A, and later will go off $\gamma$ decay</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><strong>Knockout</strong>: a particle is emitted (“knocked out”) from the nucleus</td>
      <td style="text-align: left"> </td>
      <td>e.g. stripping of a proton from a carbon nucleus</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><strong>Stripping</strong> reaction if the transfer is from the projectile to the target.</td>
      <td style="text-align: left">Transfer reaction: 1 or 2 nucleons are transferred between the projectile and target.</td>
      <td>C-12 + alpha -&gt; C-8* + alpha*</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><strong>Pickup</strong> reaction if the transfer is from the target to the projectile.</td>
      <td style="text-align: left">Transfer reaction, i.e. target nucleus gained</td>
      <td>He-3 + p -&gt; He-4* + gamma</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><strong>Direct</strong> nuclear reactions: formation of a “new” nucleus typically involve the transfer of <em>just a few nucleons</em> (protons or neutrons) between the colliding nuclei.</td>
      <td style="text-align: left">without the creation of an intermediate compound nucleus.</td>
      <td>e.g. scattering</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><strong>Compound</strong> nuclear reactions: results in the formation of an intermediate compound nucleus, and can result in the emission of several particles</td>
      <td style="text-align: left">involve the transfer of <em>many nucleons</em> between the colliding nuclei</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><strong>Resonance</strong> reaction: incoming particle has right energy to excite an energy level in the target nucleus, greatly <em>increasing the cross section</em></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Discern what Reaction happened with Energy Spectrum</td>
      <td style="text-align: left">can distinguish different mechanism because they give rise to outgoing particles have different energy</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218222924675.png" alt="image-20221218222924675" /></td>
      <td style="text-align: left"><strong>Discrete</strong> energy peaks at high energies from direct reactions</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">At lower energies, peaks correspond to more closely spaced energy levels can’t be resolved</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">At still lower energies, compound nuclei are formed, where neutrons and protons <strong>share</strong> the incoming particle energy and “evaporate” from the nucleus in a continuous spectrum</td>
      <td>evaporate: formed compound nucleus $\to$ an equilibrium is reached so the compound nucleus <em>loses its energy slowly over time by emitting particles,</em> mostly protons and neutrons</td>
    </tr>
    <tr>
      <td style="text-align: center">Angular Distributions</td>
      <td style="text-align: left">angle of output particles relative to input particle</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Angular Distributions for Direct Reactions</td>
      <td style="text-align: left"><em>Direct</em> collisions (few nucleons take part) usually produce forward peaked reaction products</td>
      <td style="text-align: left">forward peak = products traveling in the <strong>same direction</strong> as input</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><em>Direct</em> collisions = exhibit <em>oscillations</em> as a function of scattering angle due to the wave nature of the particles</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Angular Distributions for Compound Reactions</td>
      <td style="text-align: left">Angular spectrum of evaporated particles from a <em>compound</em> nucleus is more <em>isotropic</em></td>
      <td style="text-align: left">since the emitted particles “<strong>have no memory</strong>” of the direction of the incoming particle</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218223426199.png" alt="image-20221218223426199" /></td>
      <td style="text-align: left">y-axis = prob of observing this</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Reaction rate</td>
      <td style="text-align: left">each reaction has its own cross-section = own reaction rate</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$R =\sigma N_A \phi=\Sigma \phi$</td>
      <td style="text-align: left">σ = reaction cross section<br />φ = particle (e.g., neutron) flux<br />$N_A$ = the number of target atoms per unit volume</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218223905002.png" alt="image-20221218223905002" /></td>
      <td>DD reaction cross section = higher E better because this is <em>fusion</em></td>
    </tr>
    <tr>
      <td style="text-align: center">Classical Estimate of Reaction Cross Section Assumptions</td>
      <td style="text-align: left">calculate cross section itself (before we were given this)</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">assumptions = reaction happens when come close enough together for the strong nuclear force to act</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Classical Estimate of Uncharged Particles</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218224237587.png" alt="image-20221218224237587" style="zoom: 33%;" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$\sigma= \pi (R_1 + R_2)^2 = \pi R^2$</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Classical Estimates of Charged Particles</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218224450325.png" alt="image-20221218224450325" style="zoom:150%;" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Impact parameter, $b$ replaces $R$.<br />$\sigma = \pi b^2 = \pi R^2 (1-B/E)$</td>
      <td style="text-align: left">means if $B&gt;E$ reaction cannot occur</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">QM Estimate</td>
      <td style="text-align: left">classical works when particles is more ‘particle-like’</td>
      <td style="text-align: left">classical approximation of reaction cross section is only decent for particles with <strong>de Broglie wavelength less than the size of the nucleus</strong></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">also kind of works if we are <em>heavy ions</em> = wavelength often smaller than nuclear dimensions</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">but if wave functions coincide, then reaction occur = can occur even if $B&gt;E$</td>
      <td style="text-align: left">in reality, high energy = looks like particle; low energy = looks like wave</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Usage of Elastic Scattering for Nuclear Structure</td>
      <td style="text-align: left">force causing scattering depends on the <em>spatial distribution of nucleus</em> =&gt; by analyzing the way particles scatterd = know about the size and distribution of <em>force field</em> = know about the <em>nucleus</em></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><strong>Electrons</strong> make good probes of the nucleus since they are not absorbed and interact via the well-know electromagnetic force with the protons</td>
      <td style="text-align: left">if we take particles such as $\alpha$, then it interacts strongly once inside the nucleus = lose its identity and not reappear in the entrance channel</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Compound Nuclear Reaction Mechanism</td>
      <td style="text-align: left">Many nuclear reactions proceed in two or more steps</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">1.  the <em>incoming</em> particle is absorbed by, and excites, the nucleus</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">2. the nucleus <em>loses</em> its excitation energy (decays) through one of several different, possible exit channels (decay branches or decay channels)</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Compound Nuclear Reaction Rate</td>
      <td style="text-align: left"><em>Each decay channel</em> is characterized by a probability and mean lifetime, $\lambda = 1/\tau$</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">for compound reaction $A+a\to C\to B+b$<br /> reaction rate is $\sigma_{\alpha, \beta} = \sigma_c (\Gamma_\beta / \Gamma)$</td>
      <td style="text-align: left">$\sigma_c$ is the cross section of forming the compound nucleus<br />$\Gamma_\beta / \Gamma$ is fractional decay width into the final channel $B+b$</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">basically, need $C$ to happen, and then also $\beta$ to happen</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Energy width of Compound Nuclear Reaction</td>
      <td style="text-align: left">due to the Uncertainty Principle, uncertainties in $\lambda$ and $\tau$ $\to$ <em>uncertainties in energies of the states</em> $\to$ energy spread</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218230238702.png" alt="image-20221218230238702" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Cross Section Thresholds</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218230654380.png" alt="image-20221218230654380" /></td>
      <td style="text-align: left">each decay mode <em>also has its own ‘excitation energy’</em> required</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Heavy ion particle accelerator’s goal</td>
      <td style="text-align: left">Heavy ion particle accelerators are used to cause reactions where the <em>target nuclei are blown apart</em> or to attempt to create <em>new heavy elements through absorption</em>.</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="fission">Fission</h1>

<p>This section will focus on <strong>induced fission from neutron absorption</strong></p>

<ul>
  <li>Some heavy “transuranic” (near uranium) nuclei can undergo induced fission if supplied with sufficient energy (7-8 MeV)</li>
  <li>about 6 MeV comes from binding of an extra <strong><em>neutron</em></strong> by the <strong><em>strong force</em></strong> and the rest from external sources</li>
  <li>an extra 1-2 MeV from pairing (depends on if your $N$ is odd or even)</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name of Concept/Equation</th>
      <th style="text-align: left">Definition/Equation</th>
      <th style="text-align: left">Notes</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Why is Fission Energetic Useful?</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221218235727825.png" alt="image-20221218235727825" style="zoom: 33%;" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Fissile nuclei can fission with <em>low energy, “thermal,” neutrons</em></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Energy during/Mechanism of Fission</td>
      <td style="text-align: left">1. normally, the SEMF surface term provides a restoration force, like disturbing surface tension on water</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">2. if sufficient energy is supplied, the shape will deform to such an extent that the Coulomb repulsion force will dominate = strong force only works locally = nucleus starts to break</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">3. repulsive force will drive the (usually) 2 fission fragments apart and potential energy is <em>converted into kinetic energy</em></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219000721638.png" alt="image-20221219000721638" style="zoom: 33%;" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Fission Activation Energy</td>
      <td style="text-align: left">The energy required to overcome the fission barrier = deform</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219000459450.png" alt="image-20221219000459450" style="zoom: 33%;" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Properties of Fission</td>
      <td style="text-align: left">Energetically preferred to have one heavy group and one light group as fission fragment</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219000902306.png" alt="image-20221219000902306" /></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">When a fissionable nucleus absorbs a neutron and forms a compound nucleus, there is a <strong>competition between fission and gamma emission</strong> to release excitation energy, which doesn’t lead to fission</td>
      <td style="text-align: left">$\sigma_a = \sigma_f + \sigma_\gamma$</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Discovery of Neutron</td>
      <td style="text-align: left">James Chadwick found that if the energetic alpha particles emitted from polonium fell on certain light elements, specifically beryllium, an <em>unusually penetrating radiation</em> was produced (not gamma ray)</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219001726268.png" alt="image-20221219001726268" style="zoom:33%;" /></td>
      <td style="text-align: left">this radiation’s range, etc. can be measured by placing paraffin a distance away to <strong>perform (n,p) reaction</strong></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">the first ‘weird’ event that happened about this was: Walther Bothe and Herbert Becker = discovered that when energetic α-particles from the decay of polonium impinged on certain light materials, they would <strong><em>eject high energy, very penetrating, neutral radiation</em></strong>; they thought they were γ-rays</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219002009283.png" alt="image-20221219002009283" /></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">‘Discovery of Fission’</td>
      <td style="text-align: left">Otto Hahn and Frederick Strassmann</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Observed presence of barium and other middle-weight elements in a uranium sample bombarded by neutrons and noted <em>large release of energy</em>.</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">12/2/1942 – Enrico Fermi – 1st controlled fission chain reaction in Chicago Pile 1</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Start of Nuclear Weapon</td>
      <td style="text-align: left">7/16/1945 – 1st nuclear weapon test: <strong><em>Trinity</em></strong> in White Sands Proving Grounds, New Mexico.</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">called “The Gadget.” 20 kT (84 TJ). Pu implosion device</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Types of Nuclear Weapons Mechanism</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219002342388.png" alt="image-20221219002342388" style="zoom: 25%;" /></td>
      <td style="text-align: left">normal <strong>plutomium</strong> okay, but densely pressed is not = can go over critical mass</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219002349437.png" alt="image-20221219002349437" style="zoom:25%;" /></td>
      <td style="text-align: left">simply have separate halfs of sphere = explosion <strong>combine</strong> them = increase density = go react<br />now it is <strong>uranium</strong></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Why no Pu+Gun Barrel? <br />1. Because plutonium is less dense than HEU, it would require a larger mass to reach criticality<br />2. even trace amounts of Pu-240 in the plutonium would release enough neutrons from <strong>spontaneous fission</strong> = wouldn’t explode but fizzle</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Nuclear Power Plant</td>
      <td style="text-align: left">12/20/1951 – <strong>EBR-1</strong>, Idaho National Lab, Idaho Falls, Idaho. First generation of electric power from nuclear power plant</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Delayed Energy and Delayed Neutrons</td>
      <td style="text-align: left">nuclear reactor core and spent fuel <em>continue to emit considerable energy</em> even after the nuclear chain reaction process has <em>stopped</em>. This happens because</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">1. fission fragments as a by-product are themselves every radio-active = release energy</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">2. delayed neutrons play a critical role in the control of nuclear fission reactions because they are emitted at a <em>slower rate than prompt neutrons</em>, which are emitted immediately following the fission event = helpful to make power change smoother = but still are neutrons</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219003325304.png" alt="image-20221219003325304" /></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Neutron Economics</td>
      <td style="text-align: left">each fission produces 2-3 neutrons of about 2MeV, but <em>prompt fission neutrons must be thermalized</em> to about 0.025 MeV</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">In the slowing down process, must avoid <br />1. absorption by other nuclei <br />2. leakage out of the system.</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">3. (uncontrollable) absorbed neutron but gave non-fission reaction</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Chain Reaction</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219003615062.png" alt="image-20221219003615062" style="zoom:33%;" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Neutron Multiplication Factor</td>
      <td style="text-align: left">measure if your chain reaction is sustaining/increasing/decreasing</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219004107957.png" alt="image-20221219004107957" style="zoom: 25%;" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219004140291.png" alt="image-20221219004140291" style="zoom:25%;" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219004201393.png" alt="image-20221219004201393" style="zoom:25%;" /></td>
      <td style="text-align: left">recall the section on neutron economics</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Thermal Fission Factor</td>
      <td style="text-align: left"><em>probability of a fission event occurring</em> when a neutron collides with a nucleus</td>
      <td style="text-align: left">Not all neutrons absorbed in fuel cause fission</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219004515942.png" alt="image-20221219004515942" /></td>
      <td style="text-align: left">basically $\sigma_f + \sigma_a = \sigma_T$</td>
      <td>if 99.3% U-238 and 0.7% U-235, then the ratio is<br />$\frac{0.7*\sigma_f(^{235}U)}{(0.7\sigma_T(^{235}U)+99.3\sigma_T(^{238}U))}$</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
      <td>because only $^{235}U$ can fission = Most nuclear reactors and all nuclear weapons <strong>require higher U-235 enrichment</strong></td>
    </tr>
    <tr>
      <td style="text-align: center">Methods for U-235 Enrichment</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219005126907.png" alt="image-20221219005126907" style="zoom: 25%;" /></td>
      <td style="text-align: left">Gaseous Diffusion Enrichment: since U238 is a <strong>little bit heavier</strong> (cannot separate them chemically as they are the same, but physicaly not). Therefore smaller would go through more readily at the top</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">and you can repeat this process over and over</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219005222054.png" alt="image-20221219005222054" style="zoom:25%;" /></td>
      <td style="text-align: left">Gas Centrifuge Enrichment: again, U238 is a little bit heavier than U235, so another approach is to spin it very fast</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Enrichment Definitions</td>
      <td style="text-align: left">LEU – Low Enrichment Uranium: &lt; 20% U-235</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">HEU – High Enrichment Uranium: &gt; 20% U-235</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Weapons Grade Uranium: &gt; 90% U-235</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Components in a Nuclear Power Plant</td>
      <td style="text-align: left"><strong>Fuel pellets</strong> – typically, sintered UO2 enriched to 3-5% in 235U.</td>
      <td style="text-align: left">Fuel pellets and fuel rods are both used to store and transport nuclear fuel in nuclear reactors.</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><strong>Fuel rods</strong> – typically, clad in Zircalloy to contain fission products and gases</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><strong>Control</strong> rods – neutron absorbers among fuel assemblies</td>
      <td style="text-align: left">to regulate the number of neutrons available to sustain the chain reaction</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Reactor core – typically, “square cylinder” shape</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Coolant/<strong>moderator</strong> – light water most common</td>
      <td style="text-align: left">to slow down neutrons to thermal</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><strong>Structural</strong> material – alloys of steel (absorber/reflector)</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">PWR and BWR</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219005748886.png" alt="image-20221219005748886" style="zoom: 33%;" /></td>
      <td style="text-align: left">pressurized, transfer of heat energy</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219005817822.png" alt="image-20221219005817822" style="zoom: 33%;" /></td>
      <td style="text-align: left">could have secondary radiation, but more efficient</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">PWR Schematic</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219005940524.png" alt="image-20221219005940524" style="zoom:50%;" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="fusion">Fusion</h1>

<p>Why could fusion be useful if we had fission already?</p>

<ul>
  <li>much less radioactive waste</li>
  <li>but the major problem is it is <strong>technically harder</strong></li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name of Concept/Equation</th>
      <th style="text-align: left">Definition/Equation</th>
      <th style="text-align: left">Notes</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Why is Fusion Energetic Useful?</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219013327992.png" alt="image-20221219013327992" style="zoom:50%;" /></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Extra Requirement for Fusion</td>
      <td style="text-align: left">since nuclei are positively charged, so must impart <strong>high kinetic energies</strong> to the to overcome the repulsive Coulomb barrier = close enough for <strong>strong force</strong> to form new nucleus</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">1. high temperature (i.e., kinetic energy)</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">2. high density (close enough)</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">3. confinement time: amount of time that the plasma must be confined in order for the reactions to occur</td>
      <td style="text-align: left">later on will see that density and confinement determines how much energy can be gained</td>
      <td><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219014048587.png" alt="image-20221219014048587" style="zoom: 50%;" /></td>
    </tr>
    <tr>
      <td style="text-align: center">Magnetic Confinement Basics</td>
      <td style="text-align: left">confine plasma using magnetic fields = quite complicated setup</td>
      <td style="text-align: left">because plasma = lot of <strong><em>charged</em></strong> particles in gaseous form</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">works based on Lorentz Force</td>
      <td style="text-align: left">but will lose them if they move in parallel of the field!</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219015741263.png" alt="image-20221219015741263" style="zoom:33%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Inertial Confinement</td>
      <td style="text-align: left">Heat and fuse ions so rapidly that they do not have time to escape.</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">typically use laser beams to compress and heat fuel pellets.</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Fusion Reaction Examples</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219014333643.png" alt="image-20221219014333643" /></td>
      <td style="text-align: left">Most uses isotopes of hydrogen to <mark>minimize repulsion</mark></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">the highlighted ones have high cross section, and non-gamma energy release = can be more easily retrained</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Helium as a product is <mark>very stable</mark>, hence releases a lot of energy!</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Properties of DT Fusion Reactions</td>
      <td style="text-align: left">high cross section</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">produces a lot of energy</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">produces an alpha particle, which can be <strong><em>re-used to heat up the plasma</em></strong></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">shield against neutrons, which are also very energetic</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">tritium (T) don’t occur naturally, so often need to be bred in the reactor factory</td>
      <td style="text-align: left">can be bred from Lithium</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Why would DT be preferred?</td>
      <td style="text-align: left">1. requires lower energy<br />2. produces more energy</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219015116694.png" alt="image-20221219015116694" /></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Reaction Rate of Fusion</td>
      <td style="text-align: left">Reaction prob per unit time = $n_2 \sigma v$</td>
      <td style="text-align: left">$v$ speed of the particles<br />$n_2$ is density of particle 2</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">considers prob of particle 1 interacting with particle 2</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">total reaction rate per unit volume: $R=n_1n_2\sigma v$</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">$R=n_1n_2 \lang \sigma v \rang$</td>
      <td style="text-align: left">since plasma = gas particles = velocity is defined by Boltzmann distribution</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Fusion Energy Output and Break-Even</td>
      <td style="text-align: left">Fusion energy output = $E_f=n_1n_2\lang \sigma v\rang Q \tau$</td>
      <td style="text-align: left">$\tau$ is <mark>confinement time</mark>!<br />$Q$ is energy released per reaction</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">also includes <mark>density $n_1,n_2$</mark></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Break-Even $n\tau &gt; \frac{12kT}{\lang v \sigma \rang Q}$</td>
      <td style="text-align: left"><strong>Lawson Criteria</strong>: need to achieve this to get more energy out than input</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219015523087.png" alt="image-20221219015523087" /></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Magnetic Bottle Confinement</td>
      <td style="text-align: left">1. Closed-field geometry (e.g., torus)</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">2. <strong>Toroidal field</strong> (TF) – Coils external and perpendicular to toroidal containment vessel generate TF</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">3. <strong>Poloidal field</strong> (PF) – pass current around axis of torus. Compensates for weakening TF with increasing $r$</td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219015910587.png" alt="image-20221219015910587" style="zoom: 25%;" /></td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><mark>Tokamak</mark> is one famous example!</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">Inertial Confinement Mechanism</td>
      <td style="text-align: left">1. the energy from the laser or particle beam pulses is absorbed by the fuel target, heating it to extremely high temperatures and causing it to undergo a rapid <strong>expansion</strong>.</td>
      <td style="text-align: left">difficulty is to generate sufficient power to achieve this</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">2. This expansion creates a shock wave that <strong>compresses</strong> the fuel target, increasing the density and temperature of the plasma and creating conditions suitable for fusion reactions.</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left">therefore, requires lasers and <strong>fuel pellets</strong></td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">National Ignition Facility</td>
      <td style="text-align: left">NIF: 192 laser beams focused onto small target, uses Indirect target</td>
      <td style="text-align: left"> </td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"><img src="/lectures/images/2022-12-20-APPH4010_Intro_to_Nuclear/image-20221219020446322.png" alt="image-20221219020446322" /></td>
      <td style="text-align: left">Laser pulse vaporizes the heavy metal case, generating intense <strong>x-rays inside the hohlraum</strong>, which compresses and heats the DT fuel</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left">Hohlraum = the metal cylinder</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="final">Final</h1>

<ul>
  <li>Nuclear sturcture
    <ul>
      <li>spin has an effect on energy</li>
      <li>know every term in SEMF, what it represents</li>
      <li>pairing term</li>
      <li>vibrational harmnoics shapes</li>
      <li>nuclear potential energy</li>
    </ul>
  </li>
  <li>Nuclear Instability
    <ul>
      <li>gamma emission comes from nucleus, actually comes fro the daughter</li>
      <li>selection rules for gamma emission, including the table</li>
      <li>transition ratess</li>
      <li>Decay schemes
        <ul>
          <li>high polarity and high half life</li>
        </ul>
      </li>
      <li>internal conversion (eject electron)</li>
      <li>beta decay three possible transitions
        <ul>
          <li>tell by excess protons or neutrons whether if it goes beta plus or beta minus</li>
        </ul>
      </li>
      <li>alpha decay
        <ul>
          <li>QM consideration that as long as Q is positive it will happen</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Nuclear Reactions
    <ul>
      <li>classification
        <ul>
          <li>scattering, inelastic scattering; knockout</li>
          <li>direct reactions and compound-nucleus decay</li>
        </ul>
      </li>
      <li>cross section and density equation and reaction rate
        <ul>
          <li>estimate the cross section such as assuming no coulomb interactions with $\pi R^2$; but with intearaction $\pi b^2$</li>
          <li>cross section calculation for charged particles</li>
          <li>no need to know partial waves</li>
          <li>compound nuclear reactions equation</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Fission
    <ul>
      <li>binding energy curve and why fission is possible</li>
      <li>high cross section with thermal neutrons</li>
      <li>fission activation energy - when you pass the poit of this yuo can fission</li>
      <li>fission history and discovery of neutron</li>
      <li>chain reaction graph of uranium
        <ul>
          <li>neutron multiplication factor</li>
          <li>reactors would want to stay at $k=1$, which is controlled by control rods</li>
          <li>why enrichment is needed</li>
        </ul>
      </li>
      <li>nuclear reactor basics
        <ul>
          <li>fuel pellets</li>
          <li>Pressurized WR and BWR designs; difference is that water doesn’t boil and goes into heat exchange</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Fusion
    <ul>
      <li>why fusion is possible in binding energy curve
        <ul>
          <li>but the hard part is to have a high temperature, etc.</li>
          <li>magnetic confinement v,s, inertial confinement: heating them so quickly</li>
        </ul>
      </li>
      <li>reaction rate for fusion equation with $R=n_1n_2 \sigma v$</li>
      <li>triple product and lawson criterion</li>
      <li>toroidal fields, know stuff like this exists
        <ul>
          <li>tokamak</li>
        </ul>
      </li>
      <li>inertial confinement
        <ul>
          <li>using lasers</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>some shared topisc shuch as alpha and beta decay</p>
  </li>
  <li>Energy calculation, very practical</li>
</ul>]]></content><author><name></name></author><category term="2022@Columbia" /><summary type="html"><![CDATA[Equations and Concepts for Intro to Nuclear]]></summary></entry><entry><title type="html">ELEN6885 Reinforcement Learning part2</title><link href="/lectures/2022@columbia/ELEN6885_Reinforcement_Learning_part2.html/" rel="alternate" type="text/html" title="ELEN6885 Reinforcement Learning part2" /><published>2022-12-20T00:00:00+00:00</published><updated>2022-12-20T00:00:00+00:00</updated><id>/lectures/2022@columbia/ELEN6885_Reinforcement_Learning_part2</id><content type="html" xml:base="/lectures/2022@columbia/ELEN6885_Reinforcement_Learning_part2.html/"><![CDATA[<h1 id="rl-packages">RL packages</h1>

<p>Now we start to discuss using DL for modeling. Some commonly used packages include</p>

<p><strong>Mainly for this course</strong></p>

<ul>
  <li>openAI <code class="language-plaintext highlighter-rouge">gym</code> mainly an online environment for bench-marking for algorithm performance</li>
</ul>

<p><strong>Other</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">stable-baselines3</code> implementations of many modern RL algorithms</li>
  <li><code class="language-plaintext highlighter-rouge">rllib</code> includes ray tuning</li>
</ul>

<blockquote>
  <p>Resources</p>

  <ul>
    <li>colab tutorial: https://colab.research.google.com/github/araffin/rl-tutorial-jnrr19/blob/sb3/1_getting_started.ipynb</li>
    <li>openai doc: https://www.gymlibrary.dev/</li>
    <li>stable-baselines3 doc: https://stable-baselines3.readthedocs.io/en/master/</li>
  </ul>
</blockquote>

<h2 id="openai-gym">OpenAI Gym</h2>

<blockquote>
  <ul>
    <li>Separate the <mark>implementation of the environment</mark> from the implementation of the learning algorithm.</li>
    <li>Make it easy to compare various RL algorithms on the same/standardized environment.</li>
  </ul>
</blockquote>

<ul>
  <li>
    <p>installation, e.g. <code class="language-plaintext highlighter-rouge">gym[mujoco]</code></p>
  </li>
  <li>
    <p>has many environments which can be treated as <strong>benchmark</strong> “datasets”</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Control</th>
          <th style="text-align: center">Atari</th>
          <th style="text-align: center">Mujoco</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221028153609045.png" alt="image-20221028153609045" style="zoom:33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221028161012225.png" alt="image-20221028161012225" style="zoom: 33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221028161048421.png" alt="image-20221028161048421" style="zoom:33%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>and many more</p>
  </li>
</ul>

<p>As basically they are interactive environments, the <code class="language-plaintext highlighter-rouge">environment</code> is what is implemented, meaning your job is to <strong>determine what action to take</strong> (i.e. your model) given your state (e.g. history of rgb pixels of the game), and <strong>environment gives you a reward and next state</strong></p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221028161310313.png" alt="image-20221028161310313" style="zoom:50%;" /></p>

<p>Specifically the <code class="language-plaintext highlighter-rouge">environment</code> will give you</p>

<ul>
  <li><strong>observation</strong>: the new state simulated by the environment</li>
  <li><strong>reward</strong>: defined and computed by the environment</li>
  <li><strong>done</strong>: A boolean indicating if episode has finished</li>
  <li><strong>info</strong>: additional info used only for debugging</li>
</ul>

<p>And the most important is the <mark>observation &amp; action space</mark> for each environment:</p>

<ul>
  <li>it will have an <code class="language-plaintext highlighter-rouge">action_space</code> specifying what are the legal actions
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Discrete</code>: A discrete space where $a(s) \in {0,1,…,n}$</li>
      <li><code class="language-plaintext highlighter-rouge">Box</code>: An n dimensional continuous space with optional bounds</li>
      <li><code class="language-plaintext highlighter-rouge">Dict</code>: A dictionary of space instances such as <code class="language-plaintext highlighter-rouge">Dict({"position": Discrete(2), "velocity": Discrete(3)})</code></li>
    </ul>
  </li>
  <li>it will have an <code class="language-plaintext highlighter-rouge">observation_space</code> specifying what will be returned
    <ul>
      <li>e.g. RGB pixel values of the screen</li>
    </ul>
  </li>
</ul>

<hr />

<p><em>Examples: Cliff Walking Environment</em></p>

<p>The board is a 4x12 matrix, with (using NumPy matrix indexing):</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">[3, 0]</code> as the start at bottom-left</li>
  <li><code class="language-plaintext highlighter-rouge">[3, 11]</code> as the goal at bottom-right</li>
  <li><code class="language-plaintext highlighter-rouge">[3, 1..10]</code> as the cliff at bottom-center</li>
</ul>

<p>If the agent steps on the cliff, it returns to the start. An episode terminates when the agent reaches the goal.</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221028161926749.png" alt="image-20221028161926749" style="zoom: 50%;" /></p>

<p><strong>Reward</strong></p>

<ul>
  <li>Each time step incurs -1 reward, and stepping into the cliff incurs -100 reward.</li>
</ul>

<p><strong>Action Space</strong>: There are 4 discrete deterministic actions:</p>

<ul>
  <li>0: move up</li>
  <li>1: move right</li>
  <li>2: move down</li>
  <li>3: move left</li>
</ul>

<p><strong>Observation Space</strong>: returned as a flattened index to represent the coordinate of the system</p>

<ul>
  <li>There are 3x12 + 1 possible states. In fact, the agent cannot be at the cliff, nor at the goal (as this results in the end of the episode). It remains all the positions of the first 3 rows plus the bottom-left cell.</li>
  <li>The observation is simply the current position encoded as flattened index. You can easily convert back to coordinate system with <code class="language-plaintext highlighter-rouge">np.unravel_index</code></li>
</ul>

<hr />

<p><em>Example: Mujoco Humanoid</em></p>

<p>The 3D bipedal robot is designed to <strong>simulate a human</strong>. It has a torso (abdomen) with a pair of legs and arms. The legs each consist of two links, and so the arms (representing the knees and elbows respectively). The goal of the environment is to walk forward as fast as possible without falling over.</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221028162424416.png" alt="image-20221028162424416" /></p>

<p><strong>Action space</strong> is a <code class="language-plaintext highlighter-rouge">Box(-1, 1, (17,), float32)</code>. An action represents the <strong>torques</strong> applied at the hinge joints.</p>

<ul>
  <li>
    <p>action is a box has 17 different joints, each controlling torque from <code class="language-plaintext highlighter-rouge">[-1.0,1.0]</code></p>
  </li>
  <li>
    <p>example joints you can control: <code class="language-plaintext highlighter-rouge">hip_1 (front_left_leg), angle_1 (front_left_leg), hip_2 (front_right_leg), right_hip_x (right_thigh), right_hip_z (right_thigh), ...</code></p>
  </li>
</ul>

<p><strong>Observation Space</strong></p>

<ul>
  <li>Observations consist of <strong>positional</strong> values of different body parts of the Humanoid, followed by the <strong>velocities</strong> of those individual parts (their derivatives) with all the positions ordered before all the velocities</li>
</ul>

<p><strong>Rewards</strong>: the reward consists of four parts:</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">healthy_reward</code>: Every timestep that the humanoid is alive</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">forward_reward</code>: A reward of walking forward</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ctrl_cost</code>: A negative reward for penalizing the humanoid if it has too large of a control force.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">contact_cost</code>: A negative reward for penalizing the humanoid if the external contact force is</p>
  </li>
</ul>

<h2 id="using-openai-gym">Using OpenAI Gym</h2>

<p>A minimal working example would be:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">gym</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="s">"CartPole-v1"</span><span class="p">)</span> 
<span class="n">state</span> <span class="o">=</span> <span class="n">env</span><span class="p">.</span><span class="n">reset</span><span class="p">()</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">env</span><span class="p">.</span><span class="n">render</span><span class="p">()</span>  <span class="c1"># show a window on your screen. In colab notebook more needs to be done
</span>    <span class="n">action</span> <span class="o">=</span> <span class="n">env</span><span class="p">.</span><span class="n">action_space</span><span class="p">.</span><span class="n">sample</span><span class="p">()</span>  <span class="c1"># random policy
</span>    <span class="n">state</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">env</span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="p">)</span> 
    <span class="k">if</span> <span class="n">done</span><span class="p">:</span>
        <span class="n">state</span> <span class="o">=</span> <span class="n">env</span><span class="p">.</span><span class="n">reset</span><span class="p">()</span> 
<span class="n">env</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="stable-baselines-3">Stable-Baselines-3</h2>

<blockquote>
  <p>Stable Baselines3 (SB3) is a set of reliable <strong>implementations of reinforcement learning algorithms</strong> in PyTorch.</p>
</blockquote>

<p>Where OpenAI gym focuses on the environment, stable-baselines-3 focuses on the learning. But of course it is easily integratable with OpenAI <code class="language-plaintext highlighter-rouge">gym</code>. Smoe additional features include</p>

<ul>
  <li>access to most popular deep reinforcement learning algorithms. Ex: DQN, PPO, A2C, DDPG</li>
  <li>allow you to implement deep reinforcement learning solutions in just a few lines</li>
  <li><mark>vectorized training in parallel</mark> (e.g. instantiate parallel copies of agents)</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">gym</span>
<span class="kn">from</span> <span class="nn">stable_baselines3</span> <span class="kn">import</span> <span class="n">PPO</span>

<span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="s">"CartPole-v1"</span><span class="p">)</span>  <span class="c1"># use mode='rgb_array' to return game image as state
</span>
<span class="c1"># training
</span><span class="n">model</span> <span class="o">=</span> <span class="n">PPO</span><span class="p">(</span><span class="s">"MlpPolicy"</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># multilayer perceptron + feedin environment
</span><span class="n">model</span><span class="p">.</span><span class="n">learn</span><span class="p">(</span><span class="n">total_timesteps</span><span class="o">=</span><span class="mi">10_000</span><span class="p">)</span>

<span class="c1"># testing
</span><span class="n">obs</span> <span class="o">=</span> <span class="n">env</span><span class="p">.</span><span class="n">reset</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">action</span><span class="p">,</span> <span class="n">_states</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">predict</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="n">deterministic</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> 
    <span class="n">obs</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">env</span><span class="p">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
    <span class="n">env</span><span class="p">.</span><span class="n">render</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">done</span><span class="p">:</span>
        <span class="n">obs</span> <span class="o">=</span> <span class="n">env</span><span class="p">.</span><span class="n">reset</span><span class="p">()</span> 
<span class="n">env</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></div>

<h1 id="function-approximation">Function Approximation</h1>

<p>Recall that all evaluation and control algorithms we discussed are <strong>tabular methods</strong> (e.g. $Q(s,a)$)</p>

<p><img src="https://miro.medium.com/max/622/1*fe1eyEAcfj6KHWFXHUNHbQ.png" style="zoom:50%;" /></p>

<ul>
  <li>Each update will only change the value of one state or one state-action pair, i.e., an entry in the lookup table</li>
  <li>The lookup table <strong>may become unmanageable</strong> when the number of “states” or “state-action” pairs goes up. For instance, what if we have a <strong>continuous action space</strong>?</li>
  <li>also needed a way to keep exploring, because we needed to estimate values of a lot of states to be accurate</li>
</ul>

<blockquote>
  <p><strong>Use function approximation</strong> to treat $V(s)$ or $Q(s,a)$ as functions, i.e. we consider instead of tables, <mark>parameters of a function</mark> such that:</p>

  <ul>
    <li>for $V$: $S\to \mathbb{R}$</li>
    <li>for $Q: S,A \to \mathbb{R}$</li>
  </ul>

  <p>so we consider $V(s,w)$ and $Q(s,a,w)$ for $w$ being the weights/parameters of the function</p>
</blockquote>

<p>Function approximation methods has <strong>advantages</strong> for cases such as</p>

<ul>
  <li>evaluate/predict $v(s)$ and $q(s, a)$ for large or high-dimension state space</li>
  <li>evaluate/predict $v(s)$ and $q(s, a)$ for continuing tasks (non-episodic)</li>
  <li>evaluate/predict $v(s)$ and $q(s, a)$ for partially observable problems
    <ul>
      <li>because we can <strong>extrapolate</strong> from the experienced samples (e.g. states)</li>
    </ul>
  </li>
</ul>

<p>and is usally trained with <mark>supervised training</mark></p>

<ul>
  <li>e.g. given a $(s,G_t(s))$ pair, ask the model to do learn it</li>
  <li>use SGD to minimize the objective function such as MSE between $\hat{V}(s,w)$ and $V(s)$</li>
</ul>

<h2 id="value-function-approximation">Value Function Approximation</h2>

<p>We would like to consider $\hat{V}(s,w)$ and $\hat{Q}(s,a,w)$ parameterized by $w$:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221104083159491.png" alt="image-20221104083159491" style="zoom:33%;" /></p>

<p>where the target $V_\pi(s)$ and $Q_\pi(s,a)$ are basically predefined by the specific algorithms we want to use and our model aims to model them.</p>
<ul>
  <li>In general we can have three types of modelling, where the last one modelling $Q$ from $V$ is not used often in practice</li>
  <li>for MC methods, bascially $V_\pi(s) = G_t$ is used as target, and it differs if you do TD(0), for instance</li>
  <li>since those are aimed to improve on tabular methods, dimensoinaltiy of $w$ is typically much smaller of states $\vert S\vert$, and highly related to how many features you want to encode in each state</li>
  <li>finally, notice that updating one weight will influence value for all states (cf. tabular methods)</li>
</ul>

<p>There are <strong>many ways</strong> to construct your function approximator, e.g.:</p>

<ul>
  <li>
    <p><strong>Linear:</strong> consider we having <em>three features</em> of a state $s=[s_1,s_2, s_3]^T$.  Then we can do:</p>

\[V(s,w) = s_1 w_w + s_2 w_2 + s_3 w_3 = [s_1, s_2,s_3]^T 
\begin{bmatrix}w_1\\
w_2\\
w_3\end{bmatrix}\]

    <p>or you can construct nonlinear features usch as $w_1*w_2$</p>
  </li>
  <li>
    <p><strong>non-linear:</strong> using neural networks</p>
  </li>
  <li><strong>decision tree</strong></li>
  <li>etc.</li>
</ul>

<blockquote>
  <p>Here we consider <mark>differentiable</mark> function approximation methods.</p>
</blockquote>

<p>For instance, let $w$ be a column vector. Then we can consider</p>

\[J(w) = \mathbb{E}[ (\hat{V}(s,w) - V_\pi(s) )^2 ]\]

<p>to minimize this loss using SGD (single sample per batch) type approach to consider</p>

\[\Delta w = - \frac{1}{2} \alpha \nabla_w J(w)\]

<p>if you perform the chain rule and take derivatives you get:</p>

\[\Delta w = \alpha \mathbb{E}_\pi [(v_\pi(s) - \hat{v}(s,w)) \nabla_w \hat{v}(s,w)]\]

<p>Finally, as we are doing SGD:</p>

\[\Delta w = \alpha  \underbrace{(v_\pi(s) - \hat{v}(s,w))}_{\text{prediction error}} \underbrace{\nabla_w \hat{v}(s,w)}_{\text{gradient}}\]

<p>note that</p>
<ul>
  <li>the above form is <mark>generic if you use MSE</mark></li>
  <li>$v_\pi(s)$ depends on what algorithm you use, e.g. MC means $v_\pi(s) = G_t$ is calculated at the end of episode.</li>
</ul>

<hr />

<p><em>Example: Simple SGD updates</em></p>

<p>Let the target be $y$, and the input features are 1-D $x$. So that you get the following dataset</p>

\[(x_1, y_1), (x_2, y_2), \dots, (x_n, y_n)\]

<p>Suppose your approximator has two parameters:</p>

\[\hat{V}(x) = w_1  + w_{2} x\]

<p>Then your MSE loss is simply:</p>

\[J(w) = \sum\limits_{i=1}^{n} (\hat{V}(x_i) - y_i)^2 = \sum\limits_{i=1}^{n} (w_1 + w_2 x_i - y_i)^2\]

<p>Therefore, in the case of SGD your per step weight update with learning rate $\eta$ is</p>

\[\begin{bmatrix} 
    w_1\\
    w_2 
\end{bmatrix} \gets
\begin{bmatrix} 
    w_1\\
    w_2
\end{bmatrix} - \eta \nabla_w J(w)
= \begin{bmatrix} 
    w_1\\
    w_2
\end{bmatrix} - \eta
\begin{bmatrix} 
    2(w_1 + w_2 x_i - y_i)\\
    2x_i(w_1 + w_2 x_i - y_i)
\end{bmatrix}\]

<h2 id="rl-prediction-with-value-approximation">RL Prediction with Value Approximation</h2>

<p>Now, we employ VFA  methods to perform RL. Recall that in general we need two things:</p>

<ul>
  <li><strong>evaluation/prediction</strong> of $v_\pi(s)$ and $q_\pi(s,a)$</li>
  <li><strong>control/planning</strong> to find optimal policy (usually by using $q_\pi(s,a)$)</li>
</ul>

<p>Here, we first discuss the problem of prediction. As essentially it becomes supervised learning</p>
<ol>
  <li>agent interact using policy $\pi$ to collect experience/dataset</li>
  <li>since the collected signals are only <strong>rewards</strong>, you usually need to then specify a <strong>target</strong> for the model to learn</li>
  <li>now you have a supervised dataset, and you can use SGD to train your model</li>
</ol>

<p><em>For instance</em>:</p>

<ul>
  <li>
    <p>if you are using MC methos, then your computed target is simply $G_t = \sum\limits_{k=t}^{T} \gamma^{k-t} r_k$ so that your weight updates become</p>

\[\nabla w = \alpha \underbrace{( \textcolor{red}{G_t} - \hat{v}(S_t,w) )}_{\text{prediction error}} \nabla_w \hat{v}(S_t,w)\]
  </li>
  <li>
    <p>if you are using TD methods, then <mark>technically your target is $R_{t+1}+\gamma V_\pi(S_{t+1})$</mark>, but since you don’t know $V_\pi$, you consider:</p>

\[\nabla w = \alpha \underbrace{( \textcolor{red}{R_{t+1}+\gamma \hat{v}(S_{t+1},w)} - \hat{v}(S_t,w) )}_{\text{prediction error}} \nabla_w \hat{v}(S_t,w)\]

    <p>note that as our target is technically also parametrized by $w$ but we did not take its gradient, it is also called <strong>semi-stochastic gradient descent</strong>. (e.g. in DQN, we would use old $\hat{v}(S_{t+1},w^-)$ as targets and update it over time)</p>
  </li>
  <li>
    <p>for TD($\lambda$), the target is $G_t^\lambda$:</p>

\[\nabla w = \alpha \underbrace{( \textcolor{red}{G^{\lambda}_t} - \hat{v}(S_t,w) )}_{\text{prediction error}} \nabla_w \hat{v}(S_t,w)\]

    <p>which is the forward-view. The <strong>backward-view</strong> update is shown in the section <a href="#TD($\lambda$)_with_Value_Function_Approximation">TD($\lambda$) with Value Function Approximation</a></p>
  </li>
</ul>

<h3 id="linear-function-approximation">Linear Function Approximation</h3>

<p>We can consider a simple case study of using linear function approximation to predict $v_\pi(s)$.</p>

<p>Your general pipeline would be:</p>

<ol>
  <li>determine your feature representation $x(s)$ for each state $s \in S$:</li>
</ol>

\[\boldsymbol{x}(S) = \begin{bmatrix} 
      x_1(S)\\
      \vdots\\
      x_n(S) 
  \end{bmatrix}\]

<ol>
  <li>
    <p>define your <strong>model</strong>. Here we consider a linear approximator, we consider:</p>

\[\hat{v}(S, w) = \boldsymbol{x}(S)^{T} \boldsymbol{w} = \sum\limits_{j=1}^{n} x_{j} (S)w_j\]
  </li>
  <li>
    <p>define your <strong>objective</strong>: consider given the true value $v_\pi(S)$:</p>

\[J(\boldsymbol{w}) = \mathbb{E}_\pi[(v_\pi(S) - \boldsymbol{x}(S)^{T} \boldsymbol{w} )^2]\]
  </li>
  <li>
    <p>perform gradient descent. Using SGD the update rule for weights become:</p>

\[\begin{align*}
 \nabla_{w} \hat{v}(S, w) &amp;= \boldsymbol{x}(S)\\
 \Delta w &amp;= \alpha \underbrace{(v_\pi(S) - \boldsymbol{x}(S)^{T} \boldsymbol{w} )}_{\text{prediction error}} \boldsymbol{x}(S)\\
\end{align*}\]
  </li>
</ol>

<p>Note that in practice:</p>
<ul>
  <li>very important to choose the right features and the representations</li>
  <li>for linear approximators, the gradient $\nabla_{w} \hat{v}(S, w) = \boldsymbol{x}(S)$ is just the feature vectors</li>
</ul>

<p><strong>Special Example: modelling table look up</strong></p>

<p>We can actually use a linear approximator and <mark>get back tabular methods</mark>.</p>
<ul>
  <li>we can make feature to be onehot of states</li>
  <li>then weights are basically the values in the table lookup</li>
</ul>

\[\boldsymbol{x}(S) = \begin{bmatrix} 
    1(S=s_1)\\
    \vdots\\
    1(S=s_n)
\end{bmatrix}\]

<p>Then a linear approximator gives</p>

\[\hat{v}(S, w) = \boldsymbol{x}(S) = \begin{bmatrix} 
    1(S=s_1)\\
    \vdots\\
    1(S=s_n)
\end{bmatrix} \cdot  \begin{bmatrix} 
    w_1\\
    \vdots\\
    w_n 
\end{bmatrix}\]

<p>so that essentially $\hat{v}(S_i) = w_i$ is like a table lookup.</p>

<h3 id="mc-with-value-function-approximation">MC with Value Function Approximation</h3>

<p>Recall that for MC methods, we consider a target of $G_t$. Therefore:</p>

<ol>
  <li>
    <p>experiences $(S_i, A_i, R_i)$ and compute $(S_i, G_i)$ pairs to get training data</p>

\[(S_1, G_1), (S_2, G_2), \dots, (S_T, G_T)\]
  </li>
  <li>
    <p>then just perform supervised learning to train your model</p>
  </li>
</ol>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221104092845712.png" alt="image-20221104092845712" style="zoom: 50%;" /></p>

<p>Note that</p>

<ul>
  <li><strong>theoretically</strong>, in order to guarantee convergence, $\alpha$ should be decreasing but needs infinite visit of all states (the usual stochastic assumption) $\sum \alpha = \infty, \sum \alpha^2 &lt; \infty$, for instance $\alpha = \frac{1}{t}$</li>
  <li>but in reality people just use constant $\alpha$ and it works fine</li>
</ul>

<h3 id="td0-with-value-function-approximation">TD(0) with Value Function Approximation</h3>

<p>Recall that the TD Target $R_{t+1} + \gamma \hat{v}(S_{t+1},w)$ is <strong>biased</strong> as we are using $\hat{v}(S_{t+1},w)$ to estimate $v\pi(S_{t+1})$.</p>

<p>But you can still regardless compute the supervised signal as $(S_i, R_{i+1} + \gamma \hat{v}(S_{i+1},w))$ hence</p>

<ol>
  <li>
    <p>collect experience hence a dataset of</p>

\[(S_1, R_2 + \gamma \hat{v}(S_2,w)), (S_2, R_3 + \gamma \hat{v}(S_3,w)), \dots, (S_{T-1}, R_T + \gamma \hat{v}(S_T,w))\]
  </li>
  <li>
    <p>then again supervised training on your $\hat{v}(S,w)$ with SGD:</p>

\[\nabla \boldsymbol{w} = \alpha \underbrace{(R_{t+1} + \gamma \hat{v}(S_{t+1},w) - \hat{v}(S_t,w))}_{\text{prediction error}} \nabla \hat{v}(S_t,w)\]

    <p>or sometimes people just write (as TD is used often)</p>

\[\nabla \boldsymbol{w} = \alpha \delta \nabla \hat{v}(S_t,w)\]
  </li>
</ol>

<p>Then the rest of the algorithm is basically the same as the MC version. Note that</p>
<ul>
  <li>again, this is not fully stochastic = semi-stochastic gradient as that target $R_{i+1} + \gamma \hat{v}(S_{i+1},w)$ is parameterized yet no gradient is taken</li>
  <li>examples of this type of algorithm is DQN, and active research is on improving this semi-gradient algorithm</li>
</ul>

<h3 id="tdlambda-with-value-function-approximation">TD($\lambda$) with Value Function Approximation</h3>

<p>The target for TD($\lambda$) is $G_t^\lambda$, which is a weighted sum of TD targets and is still biased of the true value $v_\pi(S_t)$.</p>

<p>But regardless:</p>
<ol>
  <li>
    <p>collect experience hence a dataset of</p>

\[(S_1, G_1^\lambda), (S_2, G_2^\lambda), \dots, (S_T, G_T^\lambda)\]
  </li>
  <li>
    <p>then again supervised training on your $\hat{v}(S,w)$ with SGD. First the <mark>forward view</mark> is simply:</p>

\[\nabla \boldsymbol{w} = \alpha \underbrace{(G_t^\lambda - \hat{v}(S_t,w))}_{\text{prediction error}} \nabla \hat{v}(S_t,w)\]
  </li>
  <li>
    <p>then we derive the update rule being the <mark>backward view</mark>:</p>

\[\begin{align*}
\delta_{t} &amp;= R_{t+1} + \gamma \hat{v}(S_{t+1},w) - \hat{v}(S_t,w)\\
E_{t} &amp;= \gamma \lambda E_{t+1} + \nabla \hat{v}(S_t,w) \\
\nabla \boldsymbol{w} &amp;= \alpha \delta_{t} E_{t}
\end{align*}\]
  </li>
</ol>

<p>So we get the algorithm being:
<img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221104155114.png" style="zoom:50%;" /></p>

<h3 id="convergence-of-prediction-algorithms">Convergence of Prediction Algorithms</h3>

<p>In general TD methods are fast to learn but are unstable.</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221104155252.png" style="zoom:50%;" /></p>

<h2 id="rl-control-with-function-approximation">RL Control with Function Approximation</h2>

<blockquote>
  <p>How do we find the <strong>optimal policy</strong> once we estimated the value or action-value function using VFA?</p>
</blockquote>

<p>Recall that as we are in the case of model-free control, we generally consider:</p>
<ul>
  <li>estimate <mark>action-value</mark> function $Q_\pi(S,A)$</li>
  <li>policy improvement using $\epsilon$-greedy policy of $Q_\pi(S,A)$</li>
</ul>

<p>Hence the general policy iteration (still applies) basically looks like</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221104093515112.png" alt="image-20221104093515112" style="zoom:50%;" /></p>

<blockquote>
  <p>As policy improvement is based on $Q_\pi(S,A)$, all we need to do is to <strong>estimate $Q_\pi(S,A)$ using VFA.</strong> This essentially is the same as fitting $V_\pi(S)$ but use $Q$ instead in formulas.</p>
</blockquote>

<p>Hence our model considers</p>

\[\hat{q}(S,A,w) \approx \hat{q}_\pi(S,A)\]

<p>then to fit it, we consider</p>

\[J(\boldsymbol{w}) = \mathbb{E}_{\pi}[(\hat{q}(S,A,w) - q_\pi(S,A))^2]\]

<p>and using SGD the gradient is</p>

\[\nabla w = \alpha \underbrace{(q_\pi(S,A) - \hat{q}(S,A,w))}_{\text{prediction error}} \nabla \hat{q}(S,A,w)\]

<p>and based on different algorithms you use different targets to compute $q_\pi(S,A)$</p>

<p>As it is basically the same as the value function case, we will quickly show:</p>

<ul>
  <li>
    <p>for MC methods, the target is $G_t$</p>

\[\nabla w = \alpha \underbrace{(\textcolor{red}{G_t} - \hat{q}(S_t,A_t,w))}_{\text{prediction error}} \nabla \hat{q}(S_t,A_t,w)\]
  </li>
  <li>
    <p>for TD(0), the target is the estimated TD target $R_{t+1} + \gamma \hat{q}(S_{t+1},A_{t+1},w)$</p>

\[\nabla w = \alpha \underbrace{(\textcolor{red}{R_{t+1} + \gamma \hat{q}(S_{t+1},A_{t+1},w)} - \hat{q}(S_t,A_t,w))}_{\text{prediction error}} \nabla \hat{q}(S_t,A_t,w)\]
  </li>
  <li>
    <p>for <em>forward-view</em> TD($\lambda$) the target is $G_t^\lambda$</p>

\[\nabla w = \alpha \underbrace{(\textcolor{red}{G_t^\lambda} - \hat{q}(S_t,A_t,w))}_{\text{prediction error}} \nabla \hat{q}(S_t,A_t,w)\]

    <p>and the <strong>backward view update</strong> rule is</p>

\[\begin{align*}
\delta_{t} &amp;= R_{t+1} + \gamma \hat{q}(S_{t+1},A_{t+1},w) - \hat{q}(S_t,A_t,w)\\
E_{t} &amp;= \gamma \lambda E_{t+1} + \nabla \hat{q}(S_t,A_t,w) \\
\nabla \boldsymbol{w} &amp;= \alpha \delta_{t} E_{t}
\end{align*}\]
  </li>
</ul>

<p>the algorithms are again basically the same as the value function case.</p>

<h3 id="convergence-of-control-algorithms">Convergence of Control Algorithms</h3>

<p>Problem mostly occurs when you do TD and Non-linear function approximation.</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221104160154.png" style="zoom:40%;" /></p>

<h2 id="batch-method-for-rl-applications">Batch Method for RL Applications</h2>

<p>Before, we are talking about SGD which uses a sample and throw it away after updates.</p>

<blockquote>
  <p><strong>Aim</strong>: We can be more sample efficient by sampling a batch and perform updates. Additionally, it also provides a better estimate to solve the least square problem.</p>
</blockquote>

<p>Consider a given experience dataset $D$ consisting of state-value pairs provided:</p>

\[\mathcal{D} = \{ (s_1, v_1^{\pi}), (s_2, v_2^{\pi}), ..., (s_T, v_T^{\pi}) \}\]

<p>then the best parameter that <mark>best fits $v_\pi$</mark> obviously needs to perform least square on <mark>all of them</mark></p>

\[LS(\boldsymbol{w}) = \sum_{t=1}^T (v_t^{\pi} - \hat{v}(s_t,w))^2
= T \cdot  \mathbb{E}_{\pi}[(v^{\pi} - \hat{v}(s,w))^2]\]

<p>or $T$ times the average error you make. Naive SGD for each sample would not work as recall</p>
<ul>
  <li>each piece of experience would be correlate as they will come from real experience</li>
  <li>but fitting VFA assumes that the samples are <strong>independent</strong></li>
</ul>

<p>therefore, they will be techniques such as experience replay to shuffle the order so data appears IID:</p>

<ol>
  <li>
    <p>given an experience consisting of state value pairs</p>

\[\mathcal{D} = \{ (s_1, v_1^{\pi}), (s_2, v_2^{\pi}), ..., (s_T, v_T^{\pi}) \}\]
  </li>
  <li>repeat
    <ol>
      <li>
        <p>sample state, value for experience</p>

\[(s_t, v_t^{\pi}) \sim \mathcal{D}\]
      </li>
      <li>
        <p>update the parameters using SGD</p>

\[\Delta w = \alpha (v_t^{\pi} - \hat{v}(s_t,w)) \nabla \hat{v}(s_t,w)\]
      </li>
    </ol>
  </li>
  <li>
    <p>converges to LS solution:</p>

\[\boldsymbol{w} = \arg\min_{w} LS(\boldsymbol{w})\]
  </li>
</ol>

<p>This basically is the SGD version of <strong>experience replay</strong> in DQN.</p>

<hr />

<p><em>Brief Introduction of DQN</em>:</p>

<p>Here we will deal with non-linear function approximation and the problem of <strong>correlation</strong>.</p>

<blockquote>
  <p><strong>Non-linear neural networks</strong>: needs a static training set + uncorrelated IID data during training</p>
</blockquote>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221104090857675.png" alt="image-20221104090857675" style="zoom: 33%;" /></p>

<p>DQN uses <mark>experience replay</mark> to remove correlations between consecutive samples of data and <mark>fixed Q-target</mark> to stabilize the learning process.</p>

<p>The overall algorithm consists of:</p>

<ol>
  <li>take action $a_t$ in state $s_t$ and observe reward $r_t$ and next state $s_{t+1}$</li>
  <li>store transition $(s_t, a_t, r_t, s_{t+1})$ in replay memory $D$</li>
  <li><strong>sample random minibatch</strong> of transitions $(s_j, a_j, r_j, s_{j+1})$ from $D$</li>
  <li>
    <p>compute Q-learning targets w.r.t to <strong>old network $\boldsymbol{w}^-$</strong> and optimize MSE:</p>

\[L(\boldsymbol{w}) = \mathbb{E}_{(s_j, a_j, r_j, s_{j+1}) \sim D}[(r_j + \gamma \max_{a'} Q(s_{j+1}, a', \boldsymbol{w^{-}}) - Q(s_j, a_j, \boldsymbol{w}))^2]\]
  </li>
  <li>batch gradient descent on $L(\boldsymbol{w})$ to update $\boldsymbol{w}$</li>
</ol>

<h1 id="policy-gradient">Policy Gradient</h1>

<p>Recall that our task is to find the best policy given some environment that we can interact with:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221112013422.png" style="zoom:30%;" /></p>

<p>The environment transit and returns new $s_{t+1}, r_{t+1}$ to the agent, <strong>and agent needs to spit out a $a_t$ given a state $s_t$</strong>.</p>

<p>The previous section considers first learnig an action-value function $Q_\theta(s,a)$ and then using it to find the optimal policy $\pi_\theta(a\vert s)$, e.g. doing greedy/epsilon-greedy policy, e.g. learn a $Q$ using MC, TD, SARSA, etc.</p>

<blockquote>
  <p><strong>can we perhaps directly learn a policy $\pi(a\vert s)$?</strong></p>
  <ul>
    <li>though we often still need some estimate of $Q$ to do policy improvement, but we can <mark>avoid doing $\arg\max$ over all actions to get a policy</mark></li>
  </ul>
</blockquote>

<p><strong>Advantages</strong></p>

<ul>
  <li>now action probability changes more smoothly, meaning better convergence</li>
  <li>easly for encoding exploratoin</li>
  <li>avoid the need of $\arg\max q(s,a)$ which can be costly if $\vert S\vert \times \vert A\vert$ is large</li>
</ul>

<p><strong>Disadvantages</strong></p>

<ul>
  <li>value-based could more efficient for a small number of states and actions</li>
  <li>hard to get an unbiased estimate through sampling (you will see that the gradient has an expected value term)</li>
  <li>many current approaches are still based on MC, hence many has high variance and could lower convergence speed</li>
</ul>

<h2 id="policy-objective-functions">Policy Objective Functions</h2>

<blockquote>
  <p>The first thing is to design an objective function to minimize. Note that we <strong>do not know a true policy</strong> but only an environment</p>

  <ul>
    <li>for $Q$/$V$ estimates, we can easily compute a loss from a target such as $r+\gamma Q$</li>
  </ul>
</blockquote>

<p>Approaches: we need some measure <mark>(a single score $\in \mathbb{R}$)</mark> of how good a policy then:</p>

<ul>
  <li>
    <p>in episodic environments, we can use the <strong>value function of the start state</strong></p>

\[J_1(\theta) = V^{\pi_\theta}(s_0) = \mathbb{E}_{\pi_\theta}[v_1]\]
  </li>
  <li>
    <p>in continuing environments, we can use the <strong>expected return</strong> (which is the average of all possible returns)</p>

\[J_{avV}(\theta) = \sum\limits_{s} d^{\pi_\theta} (s) V^{\pi_\theta}(s)\]

    <p>which is basically the average of all possible returns, where $d^{\pi_\theta}(s)$ is the state distribution of the states under the policy $\pi_\theta$</p>
  </li>
  <li>
    <p>in general, we can also use an average reward per time-step:</p>

\[J_{avR}(\theta) = \sum\limits_{s} d^{\pi_\theta} (s) \mathbb{E}_{\pi_\theta}[r]
 = \sum\limits_{s} d^{\pi_\theta} (s) \sum\limits_{a} \pi_\theta(a|s) \mathcal{R}_s^{a}\]
  </li>
</ul>

<p>and our aim is to <mark>maximize them</mark>. Given this, we now need to do gradient ascent:</p>

\[\Delta \theta = \alpha * \nabla_\theta J(\theta)\]

<p>and no minus sign in front. But what is this gradient?</p>

<ul>
  <li>to perform back-propagation, you need to have a derivative form of each operation = backed by math equation</li>
  <li>but considering the gradient above it is unclear what to do with the <strong>distribution of states $d^{\pi_\theta}(s)$ is also parameterized by $\theta$</strong></li>
</ul>

<h2 id="policy-gradient-theorem">Policy Gradient Theorem</h2>

<blockquote>
  <p><strong>Aim</strong>: manipulate the expression of gradient so that it does not need to do the summations</p>
</blockquote>

<p>In a single step MDP problem we can fix the distribution of states:</p>

\[\begin{align*}
   \nabla J(\theta) 
   &amp;= \nabla \sum\limits_{s} d^{\pi_\theta} (s) \sum\limits_{a} \pi_\theta(a|s) \mathcal{R}_s^{a} \\
   &amp;= \sum\limits_{s} d^{\pi_\theta} (s) \nabla \sum\limits_{a} \pi_\theta(a|s) \mathcal{R}_s^{a} \\
   &amp;= \sum\limits_{s} d^{\pi_\theta} (s) \sum\limits_{a} \nabla \pi_\theta(a|s) \mathcal{R}_s^{a} \\
   &amp;= \sum\limits_{s} d^{\pi_\theta} (s) \sum\limits_{a} \pi_\theta(a|s) \frac{\nabla \pi_\theta(a|s) }{ \pi_\theta(a|s) } \mathcal{R}_s^{a}\\
   &amp;= \sum\limits_{s} d^{\pi_\theta} (s) \sum\limits_{a} \pi_\theta(a|s) \underbrace{\nabla \ln \pi_\theta(a|s) }_{\text{score function} } \mathcal{R}_s^{a}\\
   &amp;= \sum\limits_{s} d^{\pi_\theta} (s) \mathbb{E}_{\pi_\theta}[\nabla_\theta \ln \pi_\theta(a|s) \mathcal{R}_s^{a}]
\end{align*}\]

<p>Overall (proof in the book), the theorem looks like:</p>

<blockquote>
  <p><strong>Policy Gradient Theorem</strong>: we can estimate the gradient for any differentiable policy $\pi_\theta$ and for any policy objective functions $J=J_1, J_{avR}$ or $\frac{1}{1-\gamma} J_{avV}$</p>

\[\begin{align*}
\nabla_\theta J(\theta)
&amp;= \nabla_\theta \sum\limits_{s} d^{\pi_\theta} (s) \sum\limits_{a} \pi_\theta(a|s) Q^{\pi_\theta}(s,a) \\
&amp;\propto \sum\limits_{s} d^{\pi_\theta} (s) \sum\limits_{a} Q^{\pi_\theta}(s,a) \nabla_\theta \ln \pi_\theta(a|s)
=\mathbb{E}_{s \sim \pi_\theta} \left[ \sum\limits_{a} Q^{\pi_\theta}(s,a) \nabla_\theta \ln \pi_\theta(a|s) \right]
\end{align*}\]

  <p>so that <mark>gradient does not flow through distribution $d$</mark>! note that the proportional up to a constant is fine because that can be absored into the learning rate $\alpha$</p>
</blockquote>

<hr />

<p><em>Example</em>: gradient of Softmax policy using linear function approximation</p>

<p>Consider an naive modelling of $\pi$:</p>

\[\pi_\theta(s,a) = x(s,a)^T \theta\]

<p>but recall that $\pi \in [0,1]$, yet this does not satisfy such a constraint. Hence we can consider</p>

\[\pi = \mathrm{softmax}(x(s,a)^T \theta)\]

<p>for $\theta$ is a vector here. In this specific case, the <strong>score function of this form</strong> can be further computed as</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221111085101851.png" alt="image-20221111085101851" style="zoom: 33%;" /></p>

<p>and you can use it do the policy gradient.</p>

<p>However, <strong>what if your action is continous?</strong> For a continous probability, prob is zero given a state/action. Therefore, we need to instead model a PDF:</p>

\[a \sim \mathcal{N}(\mu(s), \sigma^2), \quad \mu(s) = x(s,a)^T \theta\]

<p>essentially modelling the mean to be modelled using VFA, and variance can either be pre-defined or also parametrized.</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221112025330.png" style="zoom:40%;" /></p>

<p>where each state has its own distribution, and the x-axis is the available actions you can take. Now, we can <strong>choose which action to take given a state we are at by sampling</strong> from the distribution.</p>

<p>Finally, in this case the score function is:</p>

\[\nabla_\theta \ln \pi_\theta(a|s) = \frac{a-\mu(s)}{\sigma^2} x(s,a)\]

<h2 id="mc-policy-gradient-reinforce">MC Policy Gradient (REINFORCE)</h2>

<p>Now we have already learned:</p>
<ol>
  <li>objective function for policy</li>
  <li>gradient ascent methods</li>
  <li>can compute gradient using gradient theorem
    <ul>
      <li>also specific forms if policy being softmax or Gaussian if continous</li>
    </ul>
  </li>
</ol>

<p>Recall that by policy gradient theorem:</p>

\[\nabla J(\theta) \propto \mathbb{E}_{s \sim \pi_\theta} \left[ \sum\limits_{a} Q^{\pi_\theta}(s,a) \nabla_\theta \ln \pi_\theta(a|s) \right]\]

<blockquote>
  <p><strong>Reinforce</strong>: MC policy gradient method considers</p>
  <ul>
    <li>use return $G_t$ as an unbiased estimator of $Q^{\pi_\theta}(s,a)$</li>
    <li>use one state $S_t$ and action $A_t$ to estimate the gradient</li>
    <li>therefore stochastic gradient ascent and consider</li>
  </ul>

\[\Delta \theta_t = \alpha \nabla_\theta \ln \pi_\theta(A_t|S_t) G_t\]

</blockquote>

<p>and the algorithm looks like:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221111090125607.png" alt="image-20221111090125607" style="zoom:33%;" /></p>

<h2 id="actor-critic-methods">Actor-Critic Methods</h2>

<blockquote>
  <p><strong>Aim:</strong> as MC methods using $G_t$ have a high variance, we can perhaps directly estimate $Q^{\pi_\theta}(s,a)$ and use it to estimate the gradient</p>
  <ul>
    <li>this can also tell you how good is the new policy/improved</li>
  </ul>
</blockquote>

<p>Use a <mark>critic</mark> to estimate the action-value function:</p>

\[Q_w(s,a) \approx Q^{\pi_\theta}(s,a)\]

<p>So we can directly compute the policy gradient:</p>

\[\nabla J(\theta) \propto \mathbb{E}_{s \sim \pi_\theta} \left[ \sum\limits_{a} Q_w(s,a) \nabla_\theta \ln \pi_\theta(a|s) \right]\]

<blockquote>
  <p>Therefore <strong>Actor-Critic methods</strong> are:</p>
  <ol>
    <li>Critic: update action-value function parameters $w$ (e.g. using TD(0) or TD($\lambda$), basically our previous section on VFA)</li>
    <li>Actor: update policy parameters $\theta$ using policy gradient suggested by critic</li>
  </ol>
</blockquote>

<p>Finally we approximate the policy gradient by stochastic sampling:</p>

\[\Delta \theta = \alpha \nabla_\theta \ln \pi_\theta(A_t|S_t) Q_w(S_t,A_t)\]

<p>An example using TD(0)-based estimate of Q, the Actor-Critic Algorithm looks like</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221111091952917.png" alt="image-20221111091952917" style="zoom:40%;" /></p>

<p>where basically:</p>

<ul>
  <li>
    <p>line 5, 6 is data collection through interaction</p>
  </li>
  <li>
    <p>line 7 is TD error and with line 9 for improving the critic (derived from gradient descent of MSE objective)</p>
  </li>
  <li>
    <p>line 8 is policy gradient update</p>
  </li>
</ul>

<h3 id="compatible-function-approximation-theorem">Compatible Function Approximation Theorem</h3>

<p>A problem with actor-critic methods above is that approximating the policy gradient could <strong>introduce bias</strong>.</p>

<p>But it turns out that if we can choose VFA carefully, we can avoid introducing any bias</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221111092902627.png" alt="image-20221111092902627" style="zoom:40%;" /></p>

<p>(proof skipped)</p>

<h2 id="policy-gradient-with-advantage-function">Policy Gradient with Advantage Function</h2>

<blockquote>
  <p><strong>Aim:</strong> we can <mark>reduce the variance</mark> of this existing policy gradient:</p>

\[\nabla_\theta J(\theta) \propto \mathbb{E}_{s \sim \pi_\theta} \left[ \sum\limits_{a} Q^{\pi_\theta}(s,a) \nabla_\theta \ln \pi_\theta(a|s) \right]\]

  <p>because variance could come from how you estimate $Q^{\pi_\theta}(s,a)$, and the stochastic sampling of $S_t$ and $A_t$. This can be done by subtracting the baseline:</p>

\[Q^{\pi_\theta}(s,a) \to Q^{\pi_\theta}(s,a) - b(s)\]

  <p>so that intuitively, picking $b(s)=V(s)$ can “re-center” all the $Q^{\pi_\theta}(s,a)$ and therefore reduce the variance</p>
</blockquote>

<p>However, we could like our performance to <strong>still be unbiased</strong>, and it can be shown that this holds as long as baseline <strong>$b(s)$ a function not of $a$.</strong></p>

<p><em>Proof</em>: Consider the new gradient:</p>

\[\nabla \ln \pi_\theta (s,a) * [Q_w(s,a) - B(s)]\]

<p>we want to make sure the gradient is the same as the original one, therefore, $\mathbb{E}[\nabla \ln \pi * B(s)] = 0$ needs to be proved.</p>

<p>By definitino of expectation</p>

\[\begin{align*}
   \mathbb{E}_{s\sim \pi_\theta}[\nabla \ln \pi_\theta(s,a) * B(s)] 
   &amp;= \sum\limits_{s} d(s) \sum\limits_{a} \pi_\theta(a|s) \nabla \ln \pi_\theta(s,a) * B(s) \\ 
   &amp;= \sum\limits_{s} d(s) \sum\limits_{a} \pi_\theta(a|s) \frac{\nabla \pi_\theta(a|s)}{\pi_\theta(a|s)} B(s) \\
   &amp;= \sum\limits_{s} d(s) \sum\limits_{a} \nabla \pi_\theta(a|s) B(s) \\
   &amp;= \sum\limits_{s} d(s) B(s) \nabla \sum\limits_{a} \pi_\theta(a|s) \\
   &amp;= 0
\end{align*}\]

<p>since $\sum \pi = 1$ is constant, therefore the last $\nabla$ is zero. <mark>Notice that this worked because $B(s)$ does not depend on action</mark></p>

<p>What is a good $B(s)$ to choose? One example is to use $V(s)$, hence the advantage funtion</p>

<blockquote>
  <p><strong>Policy Gradient with Advantage Function</strong>:
the advantage function using $V(s)$ is:</p>

\[A^{\pi_\theta}(s,a) = Q^{\pi_\theta}(s,a) - V^{\pi_\theta}(s)\]

  <p>then the policy gradient is:</p>

\[\nabla J(\theta) \propto \mathbb{E}_{s \sim \pi_\theta} \left[ \sum\limits_{a} A^{\pi_\theta}(s,a) \nabla_\theta \ln \pi_\theta(a|s) \right]\]

</blockquote>

<p>So how do we estimate the advantage function?</p>

<ul>
  <li>
    <p>estimate both $V$ and $Q$ separately, need two more set of paramters</p>
  </li>
  <li>
    <p>or we can estimate only using one (i.e. the value function)</p>

    <p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221111093932628.png" alt="image-20221111093932628" style="zoom:40%;" /></p>

    <p>so you only need to estimate $V$</p>
  </li>
</ul>

<h3 id="actor-and-critic-at-different-time-scales">Actor and Critic at Different Time Scales</h3>

<p>A final nuiances is that the we can vary how <strong>far ahead we look ahead</strong> by changing the time scale of actor and critic.</p>
<ul>
  <li>critic: estimating the critic can use TD($0$) until $G_t$</li>
  <li>actor: estimating  the actor can use different estiamte based on $V$</li>
</ul>

<p>When estimating $Q$, we can also have actor at different time scales</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221111094240856.png" alt="image-20221111094240856" style="zoom:40%;" /></p>

<p>We estimating the policy gradient, if we have only a value estimate $V^{\pi_\theta}$:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221112033819.png" style="zoom:38%;" /></p>

<h2 id="summary-of-policy-gradient-algorithms">Summary of Policy Gradient Algorithms</h2>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221112033925.png" style="zoom:35%;" /></p>

<h1 id="planning-and-learning">Planning and Learning</h1>

<p>Here, we shift focus back to the problem of <strong>planning/control</strong>. We consider situations where:</p>

<ul>
  <li>
    <p>if you have access to a model, but your state/action space is enormous (DP is not a good idea), what is a <strong>good planning algorithm</strong>?</p>
  </li>
  <li>
    <p>if you have enough data and you can fit a model reasonably well, how do you use it to <strong>further improve your planning algorithms</strong> (such as SARSA)?</p>

    <ul>
      <li>
        <p>in reality the convergence of model could be faster than fitting value/action function because the later needs information to propagate</p>
      </li>
      <li>
        <p>but of course, fitting a model is not an easy task</p>
      </li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>Model-based</strong> methods rely on planning as their primary component, while <strong>model-free</strong> methods primarily rely on learning.</p>

  <ul>
    <li>Model-based: DP, and MCTS (this chapter). Also called the problem of <em>planning</em></li>
    <li>Model-free: Q-learning, SARSA, etc. Also called the problem of <em>learning</em></li>
  </ul>

  <p>Of course, there are also hybrids, so that you can use a model/learned model to improve model-free algorithms, such as Dyna (this chapter)</p>
</blockquote>

<h2 id="rollout-algorithms-and-tree-search">Rollout Algorithms and Tree Search</h2>

<p>First, we discuss the model-based planning where model of the world is given.</p>

<p>For instance, consider the rule of Go game</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118132038782.png" alt="image-20221118132038782" style="zoom:50%;" /></p>

<p>so that to <strong>plan each step, we need to think ahead</strong>. Therefore, it might make sense to consider <mark>simulation as part of planning</mark>: if I take this step here, what happens next and can I win? So rollout algorithms in general involve</p>

<ul>
  <li>try <strong>all</strong> potentially high reward possibilities/moves <strong>starting from the current position</strong></li>
  <li><strong>estimate those moves=actions</strong> by simulation=rollout, and sometimes in combination with some value function estimate</li>
  <li>pick the best move (e.g. UCB), and repeat</li>
</ul>

<blockquote>
  <p>Rollout algorithms are <mark>decision-time planning algorithms</mark> based on Monte Carlo control applied to simulated trajectories that all <mark>begin at the current environment state</mark>.</p>

  <ul>
    <li>They estimate action values for a given policy by averaging the returns of many simulated trajectories that start with each possible action and then follow the given rollout policy.</li>
    <li>When the action-value estimates are considered to be accurate enough, the action (or one of the actions) having the highest estimated value is executed, after which the process is carried out anew from the resulting next state.</li>
  </ul>
</blockquote>

<p>This is also important as we talk about the details of an rollout algorithm: MCTS, which is that</p>

<blockquote>
  <p>It can be said the aim of a rollout algorithm (e.g. MCTS) is to <mark>improve upon the rollout policy; not to find an optimal policy</mark>.</p>

  <ul>
    <li>In some applications, a rollout algorithm can produce good performance even if the rollout policy is completely random.</li>
    <li>But the performance of the improved policy depends on properties of the rollout policy and the ranking of actions (e.g. Upper Confidence Bound) produced by the Monte Carlo value estimates.</li>
    <li>Intuition suggests that the <strong>better the rollout policy and the more accurate the value estimates</strong>, the <mark>better the policy produced</mark> by a rollout algorithm (e.g. MCTS) is likely be (but see Gelly and Silver, 2007, and in AlphaGo it more human-like policy instead of better policy may be better).</li>
  </ul>
</blockquote>

<h3 id="upper-confidence-bounds">Upper Confidence Bounds</h3>

<blockquote>
  <p><strong>Upper Confidence Bound:</strong> get a <em>better</em> balance between exploration and exploitation, besides e-greedy and softmax approach we have seen before.</p>

  <ul>
    <li>e-greedy action selection forces the non-greedy actions to be tried, but indiscriminately, with no preference for those that are nearly greedy or particularly uncertain.</li>
    <li>It would be better to select among the non-greedy actions <strong>according to their potential for actually being optimal</strong>, taking into account both how close their estimates are to being maximal and the uncertainties in those estimates.</li>
  </ul>
</blockquote>

<p>The ultimate form of the simple version of UCB looks like, for a one-step MDP problem (i.e. without states)</p>

\[a_t = \arg\max_a \left[ Q_t(a) + c \sqrt{\frac{\ln n_t}{N_t(a)}} \right]\]

<p>where:</p>

<ul>
  <li>$n_t$ is the total number of actions you have taken until time $t$, and $N_t(a)$ is the total number of times an action $a$ is taken up to time $t$</li>
  <li>
    <p>$Q_t(a)$ is your current estimated return of action $a$</p>
  </li>
  <li>the $\arg\max$ is because we are doing the <em>upper confidence bound</em></li>
  <li>essentially the left term is your <strong>exploitation</strong>, and right term is <strong>exploration</strong> trying to visit less-visited states</li>
</ul>

<p>This form is derived from modeling the regret of each action you made, and <mark>minimize your regret</mark>.</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118134055442.png" alt="image-20221118134055442" style="zoom: 50%;" /></p>

<p>What does this have to do with UCB?</p>

<ul>
  <li>Lai and Robbins showed that the regret for the multi-armed bandit has to <strong>grow at least logarithmically w.r.t. the number of plays $n$</strong></li>
  <li>UCB is proved to <mark>grow the regret logarithmically in that case</mark> (by choosing actions from UCB), hence is optimal in that case</li>
</ul>

<p>We can visualize what UCB is doing to be first estimating the “confidence” of your current estimate, and then pick the ones that are most promising</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Confidence Bound</th>
      <th style="text-align: center">Upper Confidence Bound Action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118084108912.png" alt="image-20221118084108912" style="zoom:33%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118084255212.png" alt="image-20221118084255212" style="zoom:25%;" /></td>
    </tr>
  </tbody>
</table>

<p>But in reality, UCB might not be easy to work with. Consider a realistic problem where you could have a large state space:</p>

\[a_t = \arg\max_a \left[ Q_t(s,a) + c \sqrt{\frac{\ln n_t}{N_t(s,a)}} \right]\]

<p>the $N_t(s,a)$ for many combinations will be zero until explored. Hence in those cases simple e-greedy of softmax could also work as well and is much simpler.</p>

<h3 id="monte-carlo-tree-search">Monte Carlo Tree Search</h3>

<p>Now we can talk about MCTS. The objective is to do planning given a model, and specifically to improve upon a rollout policy (by significant margin, e.g. improvement in computer Go from a weak amateur level in 2005 to a grandmaster level (6 dan or more) in 2015.)</p>

<blockquote>
  <p>At its base, <strong>MCTS is a rollout algorithm</strong> as described above, but enhanced by the addition of a means for accumulating value estimates obtained from the Monte Carlo simulations in order to successively <strong>direct simulations toward more highly-rewarding trajectories</strong>.</p>
</blockquote>

<p>At its core, on high level the following is happening</p>

<ul>
  <li>MCTS is executed after encountering <strong>each new state</strong> to select the agent’s action for that state; it is <strong>executed again to select the action for the next state, and so on</strong>.</li>
  <li>MCTS incrementally extends the tree by <strong>adding nodes representing states that look promising</strong> based on the results of the simulated trajectories</li>
  <li>Outside the tree and at the leaf nodes the rollout policy is used for action selections, but at the states inside the tree something better is possible. For these states we have value estimates for at least some of the actions, so we can <strong>pick among them using an informed policy, called the tree policy, that balances exploration (e.g. using UCB)</strong>.</li>
</ul>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118135457036.png" alt="image-20221118135457036" style="zoom: 50%;" /></p>

<p>In more details and to explain what the above means, consider the overall algorithm iteratively performing</p>

<ol>
  <li>MCTS continues executing these four steps, starting each time at the tree’s root node, until no more time is left
    <ol>
      <li><strong>Selection</strong>. Starting at the root node, a <mark>tree policy (e.g. UCB) based on the action values</mark> attached to the edges of the tree traverses the tree to <mark>select a leaf node</mark></li>
      <li><strong>Expansion</strong>. The tree is expanded <strong>from the selected leaf node</strong> by <mark>adding one or more child nodes</mark> reached from the selected node via unexplored actions</li>
      <li><strong>Simulation</strong>. From the selected node, or from one of its newly-added child nodes (if any), <mark>simulation of a complete episode</mark> is run with actions selected by the <mark>rollout policy</mark>.
        <ul>
          <li>The result is a Monte Carlo trial with <strong>actions selected first by the tree policy and beyond the tree by the rollout policy</strong>.</li>
        </ul>
      </li>
      <li><strong>Backup</strong>. The <mark>return</mark> generated by the simulated episode is <mark>backed up to update, or to initialize, the action values</mark> attached to the edges of the tree traversed by the tree policy in this iteration of MCTS. <strong>No values are saved for the states and actions visited by the rollout policy</strong> beyond the tree, as shown by the little triangle branch being dotted and discarded. Simulation result is only used to <strong>backup the existing tree</strong>
        <ul>
          <li>basically update my estimates of how good each action is based on simulation (+ value estimate in AlphaGO)</li>
        </ul>
      </li>
    </ol>
  </li>
  <li>Then, finally, an <strong>action</strong> from the root node (=<strong>the current state</strong> of the environment) is <strong>selected</strong> according to some mechanism that depends on the accumulated statistics in the tree; for example, e.g. largest action value accumulated by UCB</li>
  <li>After the environment transitions to a <strong>new state, MCTS is run again from the first step</strong> (often starting with a tree containing any descendants of this node left over from the tree constructed by the previous execution of MCTS)</li>
</ol>

<blockquote>
  <p>What does the accumulated estimate $Q(s,a)$ at each action node correspond to? In rollout algorithms where $s$ is the current state and <mark>$\pi$ is the rollout policy</mark>, averaging the returns of the simulated trajectories produces <mark>estimates of $q_\pi(s,a)$</mark> for each action $a$.</p>

  <p>Then the policy that selects an action in s that maximizes these estimates and thereafter follows $\pi$ (during simulation) is a good candidate for a policy that <strong>improves over $\pi$.</strong> The result is <mark>like one step of the policy-iteration algorithm of dynamic programming</mark></p>

  <ul>
    <li>you will see in AlphaGO we can potentially do better to estimate $q_*(s,a)$ hence choose the optimal action instead of just improvement</li>
  </ul>
</blockquote>

<hr />

<p><em>For example</em>: Let us be playing a game of GO. Let us say we have some tree already, and we would like to use UCB based on action value to be our <strong>tree policy</strong> to select a node</p>

<ol>
  <li>
    <p>Selection:</p>

    <p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118145758200.png" alt="image-20221118145758200" style="zoom:33%;" /></p>

    <p>where here, we have already made 7 simulations/rollouts hence the top node stores 7.</p>

    <ul>
      <li>
        <p>the $2/3$ at black node (at second level) means it’s <strong>black’s turn to act</strong>, but after this white action <strong>white has won $2/3$ times</strong> in the simulation</p>
      </li>
      <li>
        <p>if we are computing the UCB of each node for instance at the second level:</p>

\[\mathrm{UCB}(2/3) =\frac{2}{3} + \sqrt{2} \sqrt{\frac{\ln 7}{3}}\]

        <p>for using $c=\sqrt{2}$.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Expansion: we have selected a node and we want to explore some actions by adding a child node:</p>

    <p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118150319119.png" alt="image-20221118150319119" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>Simulation: we simulate from the <strong>newly added node</strong> using a rollout policy (e.g. a <em>fast</em> agent trained supervised from online GO games)</p>

    <p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118150456863.png" alt="image-20221118150456863" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>Back-Propagation: we <strong>discard the simulation trajectory</strong> but utilize the results to update our existing tree</p>

    <p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118150603388.png" alt="image-20221118150603388" style="zoom:33%;" /></p>

    <p>notice that all we need to update is the <mark>branch</mark>. (Recall that the white $1/1$ means its white’s turn but black has won $1/1$, hence the previous black node becomes $1/2$ as there are now in total $1+1=2$ simulations done and white lost one of them)</p>
  </li>
</ol>

<p>But of course, no algorithm is yet perfect:</p>

<table>
  <thead>
    <tr>
      <th>Pros</th>
      <th>Cons</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Tree growth focuses on more promising areas</td>
      <td>Memory intensive: entire tree in memory</td>
    </tr>
    <tr>
      <td>Can stop algorithm anytime to get search results</td>
      <td>For complex problems, enhancement needed for good performance</td>
    </tr>
    <tr>
      <td>Avoid the problem of globally approximating an action-value function (as in DP)</td>
      <td> </td>
    </tr>
    <tr>
      <td>Convergence to minimax solution</td>
      <td> </td>
    </tr>
    <tr>
      <td><strong>High controllability = can insert your prior domain knowledge into tree policy, for instance</strong></td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h3 id="alphago">AlphaGO</h3>

<p>The famous AlphaGO in essence is a MCTS algorithm, but <strong>enhanced by several changes</strong>, e.g. make the GO simulation computationally fast using value functions.</p>

<p>The overall pipeline of AlphaGO involves:</p>

<ol>
  <li>
    <p>train a <strong>supervised policy $p_\sigma$</strong> cloning the plays of experts.</p>
  </li>
  <li>
    <p>use <strong>policy gradient</strong> to train another agent $p_\rho$, which can consistently beats (more than 80% of the time) $p_\sigma$</p>
  </li>
  <li>
    <p>obtain <strong>value function $V_\rho$</strong> from the strongest player $p_\rho$, hoping that $V_\rho \approx V_*$ of the optimal play</p>
  </li>
  <li>
    <p>use MCTS to play by</p>

    <ul>
      <li>
        <p>tree policy is UCB</p>
      </li>
      <li>
        <p><mark>expansion is done using the prior from $p_\sigma$</mark>, which is found to perform better than $p_\rho$ as the former is more diverse and human-like</p>
      </li>
      <li>
        <p><mark>backpropagation uses both simulation results and $V_\rho$</mark>, so that the value for each leaf node is</p>

\[V(s_L) = (1-\lambda) v_\theta (s_L) + \lambda z_L\]

        <p>and each edge/action is the mean evaluation of all simulations through that edge</p>

\[Q(s,a) = \frac{1}{N(s,a)}\sum_{i=1}^n \mathbb{1}(s,a,i)V(s_L^i)\]

        <p>so that $\mathbb{1}(s,a,i)$ indicates if the edge $(s,a)$ was traversed during the $i$-th simulation.</p>
      </li>
      <li>
        <p>at the end of simulation/MCTS, <mark>play policy</mark> is to select action with most visited state:</p>

\[a = \arg\max_{a} N(s,a)\]
      </li>
    </ul>
  </li>
</ol>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118152145169.png" alt="image-20221118152145169" style="zoom:40%;" /></p>

<p>more details see paper: https://www.nature.com/articles/nature16961</p>

<h2 id="sample-based-planning">Sample-Based Planning</h2>

<p>Now we have covered planning if given model: for small spaces DP can be gone, but more often MCTS which selectively expands search space is more tractable. However, what if we don’t know the model, i.e. model-free? Do we have to only use Q-learning/SARSA etc?</p>

<blockquote>
  <p>If model is unknown, we can <strong>first learn the model</strong> and then <strong>plan</strong>.</p>

  <ul>
    <li>once the model is fitted, we can do planning using DP, value iteration, policy iteration, MCTS, etc.</li>
    <li>or, we can use the model to <strong>generate <em>more</em> samples</strong> to fit $Q$ functions</li>
  </ul>
</blockquote>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118152715124.png" alt="image-20221118152715124" style="zoom:33%;" /></p>

<p>Recall that for a model, we need to <mark>spit out next state and reward</mark>:</p>

\[S_{t+1} \sim \mathcal{P}_\eta (S_{t+1}|S_t, A_t)\\
R_{t+1} \sim \mathcal{R}_\eta (S_{t+1}|S_t, A_t)\\\]

<p>for a model parameterized by $\eta$, and we typically can assume independence so that:</p>

\[\mathbb{P}(S_{t+1},R_{t+1}|S_t, A_t) = \mathbb{P}(S_{t+1}|S_t, A_t)\mathbb{P}(R_{t+1}|S_t, A_t)\]

<p>This then would be useful when learning a distribution model.</p>

<blockquote>
  <p>Some models produce a description of all possibilities and their probabilities; these we call <mark>distribution models</mark>. Other models produce just one of the possibilities, sampled according to the probabilities; these we call <mark>sample models</mark>.</p>

  <ul>
    <li>e.g. consider modeling the sum of a dozen dice. A distribution model would produce all possible sums and their probabilities of occurring, whereas a sample model would produce an individual sum drawn according to this probability distribution.</li>
  </ul>

  <p>For algorithms such as Q-learning and SARSA, we just need a <strong>sample model</strong>. But for DP, we would need a <strong>distribution model</strong>.</p>
</blockquote>

<p>It is typically easier to learn a sample model, which can be done using <strong>supervised learning</strong></p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118092918058.png" alt="image-20221118092918058" style="zoom: 50%;" /></p>

<hr />

<p><em>For Example</em>: Small Table Lookup Example.</p>

<p>For small state spaces, you can learn a <strong>distribution model</strong> by simply counting:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118153701401.png" alt="image-20221118153701401" style="zoom: 45%;" /></p>

<p>So in the case of the following experience/data, you can easily fit a distribution model:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Experience</th>
      <th style="text-align: center">Model Learned</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118093255770.png" alt="image-20221118093255770" style="zoom: 33%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118093308625.png" alt="image-20221118093308625" style="zoom: 33%;" /></td>
    </tr>
  </tbody>
</table>

<p>in this case we calculated the model without supervised learning but directly computing, but the idea is the same.</p>

<p>Then, once we have a model, we can <em>sample</em> from it to do MC control, for instance:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118153938347.png" alt="image-20221118153938347" style="zoom: 40%;" /></p>

<p>Or of course, we can plan given a model directly by doing DP or MCTS.</p>

<h2 id="integrating-learning-and-planning">Integrating Learning and Planning</h2>

<p>There is also an approach to try to do <strong>learning and planning</strong>:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118154633165.png" alt="image-20221118154633165" style="zoom:33%;" /></p>

<blockquote>
  <p>Within a planning agent, there are at least two roles for real experience:</p>

  <ul>
    <li><strong>model-learning:</strong> it can be used to improve the model (to make it more accurately match the real environment)</li>
    <li><strong>direct RL:</strong> it can be used to directly improve the value function and policy using the kinds of reinforcement learning methods we have discussed</li>
  </ul>

  <p>Note how experience can improve value functions and policies either directly or <strong>indirectly via the model</strong>. It is the latter, which is sometimes called <mark>indirect reinforcement learning</mark>, that is involved in planning.</p>
</blockquote>

<p>An example algorithm is Dyna-Q: which combines Q-learning and model learning as shown below</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118095038634.png" alt="image-20221118095038634" style="zoom: 45%;" /></p>

<p>notice that step a)-d) is basically Q-learning, and step e)-f) further update your Q function using the model</p>

<ul>
  <li>
    <p>the intuition is that if you can explore more from your previous $(S,A)$, you could <strong>make better decisions sooner</strong> in the future when you met similar states, whereas just doing Q-learning makes that part slower</p>
  </li>
  <li>
    <p>For instance, as you can see here the more simulated experienced you gave to Q, it makes better decisions earlier and hence converge faster. i.e. <strong>While walking around the world according to the experience</strong>, I am changing dynamically/<strong>planning at each step as well</strong></p>

    <p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118095318251.png" alt="image-20221118095318251" style="zoom: 40%;" /></p>

    <p>the idea of updating a bit sooner than until the end is like TD v.s. MC.</p>
  </li>
</ul>

<h2 id="unified-view-of-planning-and-learning">Unified View of Planning and Learning</h2>

<p>Just like how we Generalized Policy Iteration to contextualize model-free algorithms, the overall framework of planning and learning <strong>also shares high level similarity</strong>. The unified view we present in this chapter is that all state-space planning methods share a common structure</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221118155344361.png" alt="image-20221118155344361" style="zoom: 45%;" /></p>

<ol>
  <li>all state-space planning methods involve computing value functions as a key intermediate step toward improving the policy, and</li>
  <li>they compute value functions by updates or backup operations applied to simulated experience.</li>
</ol>

<h1 id="deep-reinforcement-learning">Deep Reinforcement Learning</h1>

<p>Deep L can model any components in RL such as policy, model, value function, but Deep L + RL is unstable and hard to get convergence</p>

<p>Current approaches, modeling:</p>

<ul>
  <li>value-based RL
    <ul>
      <li>approximating value function $Q^<em>$ or $V^</em>$ using a NN with weight $w$ or $\theta$</li>
      <li>e.g. Q-learning, SARSA, MC methods, TD methods, etc.</li>
    </ul>
  </li>
  <li>policy-based RL
    <ul>
      <li>search for and approximate the optimal policy function $\pi^*$</li>
      <li>stochastic policy = policy model outputs a distribution of actions (e.g. by Softmax, or Gaussian distribution), and then you sample from it</li>
      <li>deterministic policy = find a function that gives the action directly</li>
    </ul>
  </li>
  <li>model-based RL
    <ul>
      <li>build a model (transition function and reward) from samples</li>
      <li>when obtained a model, do planning</li>
    </ul>
  </li>
</ul>

<h2 id="dl-for-value-functions">DL for Value Functions</h2>

<p>Here we will discuss on algorithm that has been successful and can be used for control (by simply taking $a = \arg\max_a Q(s,a)$)</p>

<h3 id="deep-q-network-dqn">Deep Q-Network (DQN)</h3>

<p>As we have mentioned before, this aims to model the Q network</p>

\[Q(s,a,w)\approx Q^\pi (s,a)\]

<p>and your target is simply based on the Q-learning target, which gives you a loss function:</p>

\[\mathcal{L}(w) = \mathbb{E}\left[ \left( \underbrace{r+\gamma \max_{a'} Q(s',a',w)}_{\text{target}} - Q(s,a,w)  \right)^2 \right]\]

<p>notice that you need to forward pass twice for $(s,a)$ and $(s’,a’)$.</p>

<ul>
  <li>
    <p>Could there be some correlation there? Keep that in mind</p>
  </li>
  <li>
    <p>note that $a’$ will be computed by the 1) can model $Q(s,a) \to \mathbb{R}^{\vert A\vert }$ and then <em>index into the action $a$ to get the $Q$ value</em>. 2) then in this method, picking $\arg\max Q$ can be one <strong>using only one forward pass</strong></p>
  </li>
</ul>

<p>then you perform gradient descent, which would look like the same descent in Q-learning</p>

\[\frac{\partial \mathcal{L}(w)}{\partial w} = \mathbb{E}\left[ \left( r+\gamma \max_{a'}Q(s',a',w)-Q(s,a,w) \right) \frac{\partial Q(s,a,w)}{\partial w} \right]\]

<blockquote>
  <p>However, <strong>naive Q-learning oscillates or diverges with neural nets</strong></p>

  <ul>
    <li>data is sequential, hence there are correlations between successive samples</li>
    <li>policy could change rapidly with slight change in $Q$-values</li>
    <li>correlation between $Q$-value and target value during the loss computation</li>
    <li>scale of rewards and $Q$-values could vary and hence gradient might be unstable</li>
  </ul>
</blockquote>

<p>There are the core issues that DQN attempts to solve:</p>

<blockquote>
  <p>DQN provides a stable solution to deep value-based RL</p>

  <ul>
    <li><mark>experience replay</mark> to break correlation in <em>data/experience</em></li>
    <li>freeze <mark>target $Q$-network</mark> (periodically, for example update only after 10k steps) to break correlations between $Q$-network and target, and avoid policy changes too rapidly</li>
    <li><mark>clip or normalize reward</mark> so network can work adaptively to ranges of Q-values = robust gradients</li>
  </ul>
</blockquote>

<p>Therefore the algorithm below</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221202090538120.png" alt="image-20221202090538120" style="zoom:40%;" /></p>

<h2 id="dl-for-policy-functions">DL for Policy Functions</h2>

<p>Here we aim to directly learn a policy, and we will cover methods such as</p>

<ul>
  <li>Actor-critic methods: DDPG, A3C</li>
  <li>Optimization methods: TRPO, GPS</li>
</ul>

<p>In general, policy gradient based methods are quite popular today, especially when continuous action spaces.</p>

<h3 id="deterministic-policy-gradient">Deterministic Policy Gradient</h3>

<p>Recall that during stochastic policy approximation, we considered modeling the (real) policy:</p>

\[\pi_\theta(a|s) \to \mathbb{P}[a|s;\theta]\]

<p>where we could do this by taking a Softmax of the output, or modeling parameters of a Gaussian distribution for continuous action space. But here, we might consider a <mark>deterministic policy</mark>:</p>

\[\mu_\theta(s)\to a\]

<p>Why does this matter? As $\mu_\theta$ is the network, and it <strong>no longer models a probability</strong> the stochastic policy gradient theorem we had before (using probability):</p>

\[\nabla J(\theta) \propto \mathbb{E}_{s \sim \pi_\theta} \left[ \sum\limits_{a} Q^{\pi_\theta}(s,a) \nabla_\theta \ln \underbrace{\pi_\theta(a|s)}_{\text{prob.}} \right]\]

<p><strong>no longer makes sense</strong> as using $\ln \mu_\theta(s)$ does not make sense any more. Therefore, people proved that there is a policy gradient for deterministic case:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221202110405667.png" alt="image-20221202110405667" style="zoom:50%;" /></p>

<p>where the objective function in this case would be:</p>

\[J(\theta) = \mathbb{E}[r_1 + \gamma r_2 + \gamma^2 r_3 + ....] = \mathbb{E}_{\mu_\theta}[G]\]

<p>basically the expected return if we follow policy $\mu_\theta$</p>

<blockquote>
  <p>But why use/prefer deterministic policy? Difference in practice?</p>

  <ul>
    <li>
      <p>when the variance in stochastic tends to zero, it <strong>became the deterministic case</strong></p>
    </li>
    <li>stochastic needs gradient descent in $\mathbb{E} [\nabla \pi_\theta(s,a)*G_t ]$, meaning we for a single state we need action spaces combined for a good estimate v.s. deterministic case in practice <strong>needs only to scan over a much smaller actions</strong>
      <ul>
        <li>therefore can outperform significantly <strong>when action space is high dimensional</strong></li>
      </ul>
    </li>
    <li>
      <p>stochastic encourages more exploration as in the end you are sampling from the distribution v.s. deterministic policy <strong>might not explore other possibilities</strong>. For instance</p>

\[a = \mu_\theta(s) + \text{Noise}\]

      <p>so then all your exploration is the noise term</p>
    </li>
  </ul>
</blockquote>

<h3 id="deep-deterministic-policy-gradient">Deep Deterministic Policy Gradient</h3>

<p>The overall idea is basically <strong>combining DL + DPG + Actor Critic Method</strong> by:</p>

<ul>
  <li>use actor-critic method to compute DPG gradient</li>
  <li>model your actor and critic using deep learning</li>
  <li>(solve instability issues with soft updates)</li>
</ul>

<p>Therefore, first we consider modeling a policy/actor with DL:</p>

\[a = \pi(s,u)\]

<p>with weights $u$, and a critic network $Q(s,a,w)$ with weights $w$. Then the gradient updates are simply:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221202093643427.png" alt="image-20221202093643427" style="zoom: 40%;" /></p>

<p>so in total here we have two networks, where the critic update is basically no $\max$ version of DQN updates, then use that to calculate gradient for actor</p>

<blockquote>
  <p>Again, naive actor-critic method oscillates or diverges with neural network</p>
</blockquote>

<p>Then in DDPG, we use</p>

<ul>
  <li>
    <p><strong>experience replay</strong> as in DQN for <strong>both actor and critic</strong></p>
  </li>
  <li>
    <p>four networks where <strong>soft target update</strong> is used instead of freezing</p>
  </li>
</ul>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221202093702826.png" alt="image-20221202093702826" style="zoom:60%;" /></p>

<h3 id="asynchronous-advantage-actor-critic-a3c">Asynchronous Advantage Actor-Critic (A3C)</h3>

<p>Again, building on top of actor-critic method but being</p>

<ul>
  <li><strong>Asynchronous</strong>: initiate multiple agents, each interact with the environment independently, and report update back to global network</li>
  <li><strong>Advantage</strong>: using advantage function instead of $Q$ to update policy</li>
</ul>

<p>Therefore overall it looks like:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221202093940740.png" alt="image-20221202093940740" style="zoom: 40%;" /></p>

<p>So in a sense data correlation is removed automatically because <strong>each agent has independent interactions</strong> = no need to maintain an experience buffer.</p>

<p>The overall algorithm then looks like:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221202094115629.png" alt="image-20221202094115629" style="zoom: 60%;" /></p>

<p><strong>Why A3C over other actor-critic methods?</strong></p>

<ul>
  <li>naturally has <strong>decoupled</strong> correlation, v.s. in DQN and DDPG an experience buffer is used</li>
  <li>runs many agents in parallel to collect samples for updates, hence <strong>fast</strong> in computing/updates as well</li>
  <li>each agent can use <strong>different exploration policy</strong>, which can maximize diversity and further decorrelate</li>
  <li>can run on multi-core CPU threads on a single machine to reduce communication overhead</li>
</ul>

<h3 id="trust-region-policy-optimization-trpo">Trust Region Policy Optimization (TRPO)</h3>

<p>Basically a new form of loss function/objective, other than the simple ones such as $J(\theta)=\mathbb{E}<em>{\mu</em>\theta}[G]$</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221202102143093.png" alt="image-20221202102143093" style="zoom: 50%;" /></p>

<h2 id="dl-for-model-functions">DL for Model Functions</h2>

<p>Now, we can also use a model to learn the world model, i.e. the transition functions</p>

\[p(r,s'|s,a)\]

<p>so that after this, we can:</p>

<ul>
  <li>use it to collect more data and improve value function estimates</li>
  <li>do planning directly, such as MCTS</li>
</ul>

<h3 id="alphago-zero">AlphaGo Zero</h3>

<blockquote>
  <p>Recall that the first version <a href="#AlphaGO">AlphaGO</a>, we used</p>

  <ul>
    <li>
      <p>one network for roll-out policy, another for SL policy, both from <strong>human data</strong></p>
    </li>
    <li><strong>self-play to improve policy network</strong>: learn a RL policy network <em>and a value network</em> as well</li>
    <li><strong>MCTS</strong> based on the tree policy (RL network) and UCB
      <ul>
        <li>expand using rollout policy and combine with value function</li>
        <li>pick action based on UCB</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>For AlphaGo Zero, the emphasis is to learn <mark>without human knowledge entirely</mark>. The core idea is that it is solely based on reinforcement learning and MCTS to improve.</p>

<ol>
  <li>
    <p>start with a <strong>single model</strong> producing both the move probability/policy and the value function</p>

\[f_\theta(s) = (p_\theta(a|s), V_\theta(s))\]
  </li>
  <li>
    <p>since the model does not care which player you are, it can self-play. But additionally, here we consider self-play using MCTS instead of just the policy $f_\theta$ because MCTS can usually result in selecting a much stronger move, hence an be treated as a <strong>policy improvement operator</strong></p>
  </li>
  <li>
    <p>Then, we have effectively gathered $(\pi,z)$, where $\pi$ is the MCTS probability and $z$ is the game winner. This game winner $z$ can be seen as a <strong>policy evaluation operator</strong>, which we can use to improve $V_\theta(s)$ estimate as well.</p>

    <p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221207111925758.png" alt="image-20221207111925758" style="zoom: 40%;" /></p>
  </li>
  <li>
    <p>but how exactly do we model $\pi$ probabilities in the MCTS? AlphaGo Zero models this to be:</p>

\[\pi_a \propto N(s,a)^{1/ \tau}\]

    <p>so that the more popular a move is the higher the probability. Then how does it select those moves?</p>

    <p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221207112607316.png" alt="image-20221207112607316" style="zoom: 40%;" /></p>

    <p>essentially it uses $f_\theta$ to help expand the tree so that each edge stores the $P(s,a),N(s,a),Q(s,a)$ where</p>

    <ol>
      <li>each simulation step <mark>selects</mark> a move that maximizes upper confidence bound $Q(s,a)+U(s,a)$, where $U(s,a)\propto P(s,a)/(1+N(s,a))$ until a leaf node is encountered. This basic form is also used in Alpha Go</li>
      <li>the leaf node is then evaluated and <mark>expanded</mark> only once using the prior probability and value $(P(s’,\cdot), V(s’) = f_\theta(s’))$. Notice no rollout here!</li>
      <li>each edge $(s,a)$ traversed is then <mark>updated</mark> to increment its visit count $N(s,a)$ and its action value to be the mean evaluation $Q(s,a)=\sum V(s’)/N(s,a)$.</li>
      <li>once done, a winner $z={+1,-1}$ is stored, and the MCTS probability $\pi_a$ is computed</li>
    </ol>
  </li>
  <li>
    <p>Finally, you have basically had a improved policy and value $(\pi,z)$, you <strong>update your network</strong> to match those parameters to achieve policy improvement and policy evaluation</p>

\[\mathcal{L}=(z-v_\theta)^2 - \pi^T \log p_\theta + c||\theta||^2\]

    <p>where the last term is simply a regularization.</p>
  </li>
  <li>
    <p><mark>Note</mark> that at the end of training/during actually play, you <mark>also perform the same MCTS procedure above</mark> and select move based on the play policy $\pi$</p>
  </li>
</ol>

<blockquote>
  <p><strong>Note that</strong> some key difference with Alpha Go include</p>

  <ul>
    <li>
      <p>learn RL network + value network during <strong>self-play from scratch</strong> without human knowledge</p>
    </li>
    <li>
      <p>modified MCTS to</p>

      <ul>
        <li>
          <p>use value network <strong>without roll-out</strong></p>
        </li>
        <li>
          <p>modified UCB $\mathrm{UCB}(s,a)=Q(s,a)+U(s,a)$, where $U(s,a)\propto P(s,a)/[1+N(s,a)]$</p>
        </li>
        <li>
          <p>final play policy $\pi$ becomes <strong>stochastic</strong> (is <em>not</em> the tree policy which is UCB)</p>

\[\pi(a|s) = \frac{N(s,a)^{1/\tau}}{\sum_b N(s,b)^{1/\tau}}\]

          <p>which is then used to instruct the model $p_\theta$ to achieve policy improvement.</p>
        </li>
      </ul>
    </li>
  </ul>

</blockquote>

<p>And just to re-iterate the key aspects in the paper (borrowing the author’s words)</p>

<blockquote>
  <p>The AlphaGo Zero self­play algorithm can similarly be understood as an <strong>approximate policy iteration</strong> scheme in which MCTS is used for both policy improvement and policy evaluation.</p>

  <ul>
    <li>Policy improvement starts with a neural network policy, executes an MCTS based on that policy’s recommendations, and then projects the (much stronger) search policy back into the function space of the neural network.</li>
    <li>Policy evaluation is applied to the (much stronger) search policy: the outcomes of self­play games are also projected back into the function space of the neural network. These projection steps are achieved by training the neural network parameters to match the search probabilities and self­play game outcome respectively.</li>
  </ul>
</blockquote>

<h1 id="other-rl-topics">Other RL Topics</h1>

<p>There are many other topics of RL we haven’t discussed, including:</p>

<ul>
  <li>various other methods for <strong>balancing exploration and exploitation</strong></li>
  <li>
    <p><strong>Federated Reinforcement Learning</strong>, e.g. using edge devices</p>
  </li>
  <li><strong>Multi-agent Reinforcement Learning</strong>.
    <ul>
      <li>Recent breakthrough achieving human level performance in Stratego, “solving” incomplete information problem</li>
    </ul>
  </li>
</ul>

<h2 id="more-on-exploration-and-exploitation">More on Exploration and Exploitation</h2>

<p>Online decision has a fundamental trade-off between exploration and exploitation. Here we want to discuss various <strong>different schemes</strong> that you can use to balance such as trade-off</p>

<ul>
  <li>e.g. MCTS contains search using tree policy = exploitation, but expands using <strong>UCB</strong>, which helps exploration</li>
</ul>

<p>Some design principles for exploration include</p>

<ul>
  <li><strong>Naive Exploration</strong>. e.g. DDPG adding <strong>noise</strong> to a policy for exploration</li>
  <li><strong>Optimistic Initialization:</strong> initialize $\hat{Q}$ to be larger than expected reward in the beginning</li>
  <li><strong>Optimistic in the face of uncertainty</strong>: UCB as an example
    <ul>
      <li>compute uncertainty over time, and prefer actions with uncertain values for exploration</li>
    </ul>
  </li>
  <li><strong>Probability Matching</strong>: choose action according to some “model” you have about the reward distribution</li>
  <li><strong>Information state search</strong>: lookahead search</li>
</ul>

<blockquote>
  <p>For many examples below, we will <mark>assume a Multi-arm Bandit</mark> problem, meaning there will be no state for simplicity</p>
</blockquote>

<h3 id="optimistic-initialization">Optimistic Initialization</h3>

<p>One very simple and practical idea to guarantee exploration is to <strong>initialize $Q(a)$ to be high</strong>(er than expected reward). So that:</p>

<ul>
  <li>for actions that perform lower than that, we <strong>automatically explore</strong> other actions</li>
</ul>

<p>In practice, we can do this by:</p>

<ol>
  <li>
    <p>initialize high $Q$</p>
  </li>
  <li>
    <p>Update action value by incremental MC evaluation</p>

\[\hat{Q}_t(a_t) = \hat{Q}_{t-1} + \frac{1}{N_t(a_t)}(r_t - \hat{Q}_{t-1})\]
  </li>
</ol>

<p>However, this can <strong>still lock onto sub-optimal actions over time</strong>, as you will see later that both greedy/$\epsilon$-greedy + optimistic initialization will have <mark>linear</mark> total regret.</p>

<h3 id="regret">Regret</h3>

<blockquote>
  <p>Recall that regret aims to measure the <strong>opportunity loss</strong>, which can be measured by the difference between the optimal and your chosen action.</p>

\[l_t = \mathbb [ V^* - Q(a_t)]\]

  <p>then the total regret over time is</p>

\[L_t = \mathbb{E} \left[ \sum_{\tau=1}^t V^* - Q(a_\tau) \right]\]

  <p>so minimizing regret = maximize cumulative reward</p>
</blockquote>

<p>But regret can then be reformulated using the gap $\Delta_a = V^*-Q(a)$ for every action:</p>

\[\begin{align*}
L_t 
&amp;= \mathbb{E} \left[ \sum_{\tau=1}^t V^* - Q(a_\tau) \right]\\
&amp;= \sum_{a \in \mathcal{A}} \mathbb{E}[N_t(a)] (V^* - Q(a)) \\
&amp;= \sum_{a \in \mathcal{A}} \mathbb{E}[N_t(a)] \Delta_a
\end{align*}\]

<p>So for a good algorithm, we want to</p>

<ul>
  <li><strong>have large $N$ for small $\Delta_a$, and vice versa</strong> to minimize this (of course you need to get an accurate measure of $\Delta_a$ first)</li>
  <li>idea is so that you would want to choose that small $\Delta_a$ action over and over.</li>
</ul>

<p>How does some simple approach perform in this metric? For multi-arm bandit:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209083335260.png" alt="image-20221209083335260" style="zoom:50%;" /></p>

<p>so that we would like to look for a way to get <strong>sub-linear total regret</strong>.</p>

<ul>
  <li>
    <p>if you never explore, your regret will increase lienearly.</p>
  </li>
  <li>
    <p>for epsilon greedy, similar but slightly better</p>
  </li>
  <li>
    <p>sub-linear: We graduating decrease $\epsilon$ over time, having more exploitation over time.</p>

    <ul>
      <li>
        <p>decaying needs some decaying schedule. An example would be</p>

        <p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209083723566.png" alt="image-20221209083723566" style="zoom:33%;" /></p>

        <p>the longer time/steps we have sampled, the less exploration. Also if $d$ is big, meaning currently making <strong>big mistakes</strong>, we want to reduce exploration</p>
      </li>
    </ul>
  </li>
</ul>

<p>But remember that $d$ or $\Delta_a$ is still hard to calculate in practice as we don’t know $V^*$</p>

<h3 id="upper-confidence-bound">Upper Confidence Bound</h3>

<blockquote>
  <p>What is the lower bound on Multi-arm bandit in terms of regret? Maybe we can get an algorithm <strong>if we know the lower bound?</strong></p>
</blockquote>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209084140380.png" alt="image-20221209084140380" style="zoom: 40%;" /></p>

<p>For instance, let us say we have three actions, and let us model $\hat{Q}(a)$ and we are <strong>unsure of our estimate</strong>:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209084355759.png" alt="image-20221209084355759" style="zoom:50%;" /></p>

<p>so that uncertainty for each action would be this breadth. The idea is <mark>the more uncertain we are about an action, the more important it is to explore it</mark></p>

<ul>
  <li>
    <p>action $a_1$ has the highest breadth/uncertainty, hence pick this first</p>
  </li>
  <li>
    <p>after picking blue, we would be less uncertain as this <strong>distribution shifts</strong>, and more likely to pick other actions</p>

    <p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209084614203.png" alt="image-20221209084614203" style="zoom:33%;" /></p>
  </li>
</ul>

<blockquote>
  <p>Therefore, we are <mark>optimistic in the face of uncertainty</mark> by hoping those highly uncertain actions to be potentially very beneficial</p>
</blockquote>

<p>An example algorithm to do this is UCB</p>

<ul>
  <li>$U_t(a)$, if you never tried an action $a$, then this will be very high/high uncertainty</li>
  <li>combine with current estimate $Q$ to combine exploration and exploitation $\hat{Q}_t(a) + \hat{U}_t(a)$</li>
</ul>

<p>so we select action maximizing UCB</p>

\[a_t = \arg\max_{a \in \mathcal{A}} \hat{Q}_t(a) + \hat{U}_t(a)\]

<p>But what is $\hat{U}_t$? It is motivated by the Hoeffding’s Inequality</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209085118183.png" alt="image-20221209085118183" style="zoom:40%;" /></p>

<p>which makes sense in the context of MAB because if we have large uncertainty, then this probability is small. Then we can use this to solve for a form of $U$:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209114450959.png" alt="image-20221209114450959" style="zoom:40%;" /></p>

<p>and we knw that this UCB1 achieves sublinear regret on on Multi-arm bandit</p>

<h3 id="baysesian-bandits">Baysesian Bandits</h3>

<p>So far made no assumptions about the reward distribution, and this methods basically <strong>exploit prior knowledge of rewards</strong> by specifying a prior distribution</p>

<blockquote>
  <p>Have a prior to shape the reward distribution, and use <strong>posterior</strong> to guide exploration</p>
</blockquote>

<p>So that we essentially estimate the posterior based on the (prior probability and the sample) you get:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209090030872.png" alt="image-20221209090030872" style="zoom:50%;" /></p>

<p>where $\alpha$ is number of times the arm gives you success, $\beta$ number of times if failed. Consider $\theta$ modeling reward we will get form this action. Consider a “success” being a reward $+1$ is given, failure gives $0$ reward</p>

<ul>
  <li>in the begnning, no idea so $\alpha=\beta=1$ meaning the machine can give you any reward</li>
  <li>if we lost, then the average value drifts to the left</li>
  <li>in the end, you see the average reward is about $0.7$</li>
</ul>

<p>Once done, now we have a distribution an action. We can repeat this to get a <strong>distribution for each action</strong>.</p>

<p>Then, how do we decide which action to pick? Since we are doing <strong>probability matching</strong>, we want take actions respecting those probability. For instance, say you have got three distribution with mean $0.1,0.7,1.0$</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209115006625.png" alt="image-20221209115006625" style="zoom: 25%;" /></p>

<ol>
  <li><strong>sample</strong> a reward from each curve, say $r_1=0.1,r_2=0.9,r_3=0.7$</li>
  <li>choose an action according to the <strong>biggest reward in the sample</strong>. Hence action $a_2$</li>
</ol>

<p>Other more well-fleshed idea is <strong>Thompson Sampling</strong>:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209115340909.png" alt="image-20221209115340909" style="zoom: 33%;" /></p>

<p>which also achieves the lower bound!</p>

<p>Intuitively, this way you can <strong>naturally achieve exploration</strong>.</p>

<blockquote>
  <p>This is also <mark>optimistic in the face of uncertainty</mark>, because those uncertain actions could have higher probability being $\max$ during sampling</p>
</blockquote>

<h2 id="federated-reinforcement-learning">Federated Reinforcement Learning</h2>

<blockquote>
  <p>Federated reinforcement learning is a type of reinforcement learning in which multiple agents or agents <strong>across multiple devices</strong> learn to solve a common problem while maintaining the privacy and autonomy of their local data.</p>
</blockquote>

<p>This can be useful in situations where the data that is used to train the learning algorithm is distributed across multiple devices or agents, and where it is not feasible or desirable to centralize the data. (somewhat similar to A3C idea)</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209092706109.png" alt="image-20221209092706109" style="zoom: 60%;" /></p>

<ul>
  <li><strong>Advantages</strong>: No need for centralized training data collection and centralized, data privacy, edge intelligence, learning quality</li>
  <li><strong>Disadvantages</strong>: New threats and attacks to distributed participants (e.g., <strong>backdoor attack</strong>), <strong>communications overhead</strong>, varying data quality, selection of FL participant</li>
  <li>to some extent this is similar to A3C</li>
</ul>

<p>Another approach is learning on the edge:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209093137300.png" alt="image-20221209093137300" style="zoom: 33%;" /></p>

<p>Or you could also have a fully distributed workflow</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209115720811.png" alt="image-20221209115720811" style="zoom:33%;" /></p>

<h2 id="multi-agent-reinforcement-learning">Multi-Agent Reinforcement Learning</h2>

<p>Categories in MARL:</p>

<ul>
  <li>agents are <strong>cooperative</strong></li>
  <li>agents are <strong>competitive</strong></li>
  <li><strong>hybrid</strong>, intra-group cooperation but inter-group competitive</li>
</ul>

<p>Architectures can look like:</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209115820150.png" alt="image-20221209115820150" style="zoom:50%;" /></p>

<p>An example success if DeepNash, where the there is <strong>incomplete information</strong> in the game as well</p>

<p><img src="/lectures/images/2022-12-20-ELEN6885_Reinforcement_Learning_part2/image-20221209093550846.png" alt="image-20221209093550846" style="zoom: 33%;" /></p>

<blockquote>
  <p>From the paper abstract:</p>

  <ul>
    <li>We introduce DeepNash, an autonomous agent that plays the imperfect information game Stratego at a human expert level.</li>
    <li>Stratego requires long- term strategic thinking as in chess, but it also requires dealing with <strong>imperfect information</strong> as in poker.</li>
    <li>The technique underpinning DeepNash uses a game-theoretic, model-free deep reinforcement learning method, <strong>without search</strong>, that learns to master Stratego through <strong>self-play from scratch</strong>.</li>
  </ul>
</blockquote>

<h1 id="rl-part-2-review">RL Part 2 Review</h1>

<ul>
  <li>VFA: estimate $Q \gets \hat{Q}$
    <ul>
      <li>linear approach doing $\hat{Q}=x(s,a)W$</li>
      <li>define loss function using MSE</li>
      <li>gradient has the form $\mathbb{E}[2(\cdot ) \nabla x]$
        <ul>
          <li>if using Q-learning, then the omitted part will be $r+\max_a Q(s’,a’)-Q(s,a)$, etc</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Policy Gradient: score function that the gradient of the loss for improving policy is $Q\cdot\nabla \ln \pi / \mu$
    <ul>
      <li>probably a question on calculating this</li>
    </ul>
  </li>
  <li>Planning and Learning: planning and learning loop, MCTS</li>
  <li>DRL: differences between DPG and PG, the latter being stochastic policy. More efficient since the action space don’t need to integrated over</li>
  <li>This chapter: trade off between exploration and exploitation, and different methods</li>
</ul>]]></content><author><name></name></author><category term="2022@Columbia" /><summary type="html"><![CDATA[RL packages]]></summary></entry><entry><title type="html">ASCE1359 Intro to China</title><link href="/lectures/2022@columbia/ASCE1359_Intro_to_China.html/" rel="alternate" type="text/html" title="ASCE1359 Intro to China" /><published>2022-12-19T00:00:00+00:00</published><updated>2022-12-19T00:00:00+00:00</updated><id>/lectures/2022@columbia/ASCE1359_Intro_to_China</id><content type="html" xml:base="/lectures/2022@columbia/ASCE1359_Intro_to_China.html/"><![CDATA[<p>Intro to East Asia: China</p>

<p>My timeline: https://time.graphics/line/691984</p>

<h1 id="introduction">Introduction</h1>

<p>Order of Major Dynasty you should now:</p>

<ul>
  <li>商，周，秦，汉；隋，唐，宋；元，明，清，Republic of China</li>
</ul>

<p>And that China has evidences of many pre-history humans living:</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908161314858.png" alt="image-20220908161314858" style="zoom: 33%;" /></p>

<h1 id="neolithic-age-ca-8000-2000-bce">Neolithic Age (ca. 8000-2000 B.C.E)</h1>

<p>Neolithic Age, 新石器时代, is discovered mostly because of the <strong>distinct style of jar</strong> unearthed (Neolithic Period (3300 - 2050BC):</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908161504480.png" alt="image-20220908161504480" style="zoom: 25%;" /></p>

<p>Additionally, features of Neolithic age except for jars include its</p>

<ul>
  <li>
    <p><strong>Agriculture</strong>: the most important factor for what to plant is <mark>weather + water</mark></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908161923132.png" alt="image-20220908161923132" style="zoom: 50%;" /></p>

    <p>note that already in the Neolithic age:</p>

    <ul>
      <li><strong>rice</strong> (水稻) grows in sunny + area with lots of irrigation. Hence near river</li>
      <li><strong>wheat/millet</strong> (to make noodles) grows in area that prefers a moderate level of irrigation. Hence more near the north
        <ul>
          <li>note that in the past (i.e. Neolithic age), the north of China has <em>not</em> been arid like now: its reasonably wet</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Domestication of Animals</strong> (e.g. dogs)</p>
  </li>
  <li>
    <p><strong>Fixed Human Settlements</strong> (see next section)</p>
  </li>
</ul>

<h2 id="major-neolithic-cultures">Major Neolithic Cultures</h2>

<p>Around 5000 B.C.E, we have a brief map of major cultures:</p>

<p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908163052642.png" alt="image-20220908163052642" style="zoom: 33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908163117632.png" alt="image-20220908163117632" style="zoom: 33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>

<p>where our focus would be the 仰韶 and 龙山 culture, how they are related and different.</p>

<hr />

<p><strong>Yangshao Culture</strong> (5000-3000 BCE), who lives many on agriculture with meat supplies from hunting</p>

<ul>
  <li>
    <p><mark>colorful</mark>, painted pots</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908163446439.png" alt="image-20220908163446439" style="zoom: 25%;" /></th>
          <th style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908163450866.png" alt="image-20220908163450866" style="zoom: 25%;" /></th>
          <th style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908163454693.png" alt="image-20220908163454693" style="zoom: 25%;" /></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">3500-3000 B.C.E</td>
          <td style="text-align: center"> </td>
          <td style="text-align: center"> </td>
        </tr>
      </tbody>
    </table>

    <p>with many emphasis on fish/animals and interesting shapes such as spirals.</p>
  </li>
  <li>
    <p>human settlement: <mark>Banpo</mark></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Banpo Model (c.a. 4000 B.C.E)</th>
          <th style="text-align: center">Second Bury</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908163705259.png" alt="image-20220908163705259" style="zoom: 25%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908163711564.png" alt="image-20220908163711564" style="zoom: 50%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>where we notice that:</p>

    <ul>
      <li>its various size and placement indicates a <strong>lineage/kinship</strong> relationship</li>
      <li>there are no walls for the Banpo model. This could be indicative of them being <strong>non-violent</strong> and friendly people, no protection is needed from outsiders</li>
      <li>already practices of <strong>burial</strong>: bury once to wait until decomposition, and bury again with others</li>
    </ul>
  </li>
</ul>

<hr />

<p><strong>Longshan Culture</strong> (3000 - 2000 B.C.E)</p>

<ul>
  <li>
    <p><mark>black</mark> potteries, distinct from Yangshuo (hence indication of a separate culture)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908164202703.png" alt="image-20220908164202703" style="zoom: 33%;" /></p>

    <p>created from rustic material, but has very sophisticated patterns while being extremely thin (0.2mm).</p>

    <ul>
      <li>production of which surely requires high effort, hence indication of <mark>social stratification</mark>/concentration of wealth</li>
      <li>but it could also be a practice of certain religion, yet the previous would be more supported by other evidences</li>
    </ul>
  </li>
  <li>
    <p><mark>Shimao</mark> site, Longshan Settlement:</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908164516923.png" alt="image-20220908164516923" style="zoom: 33%;" /></p>

    <p>note that we begin to see</p>

    <ul>
      <li>
        <p>a structure of inner city and outer/taller city</p>
      </li>
      <li>presence of walls</li>
      <li>has a lot of spear heads and other weapons</li>
    </ul>

    <p>indicating <strong>social stratification</strong> (as compared to Yangshuo) and <strong>foreshadowing the bronze age</strong></p>
  </li>
</ul>

<hr />

<p>Finally, note that it appears Longshan culture immediately proceeds Yangshuo culture, cultural interactions is always a non-linear process:</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908165024512.png" alt="image-20220908165024512" style="zoom: 33%;" /></p>

<p>where there are many other cultures being present, and theories explaining those in relation to the two major culture include:</p>

<ul>
  <li><strong>nuclear area theory:</strong> all starts from Yangshuo, and other cultural development radiated outwards</li>
  <li><strong>interactive sphere theory:</strong> each culture has its own sphere, but they trade and interact, and eventually, converge.</li>
  <li>etc.</li>
</ul>

<p>Without decisive evidences, it is hard to say what IS really the origin of all.</p>

<h1 id="xia-dynasty-ca-2100---1600-bce">Xia Dynasty (ca. 2100 - 1600 B.C.E)</h1>

<blockquote>
  <p>The Xia dynasty was the first of many ancient Chinese ruling houses, thought to exist from around 2070 B.C.E. until 1600 B.C.E. Yet <strong>the actual existence of this dynasty and culture has been debated</strong>.</p>

  <ul>
    <li>in China, a lot of government funding has been provided to prove the existence of Xia dynasty.</li>
    <li>however, one should be careful as those evidences could be biased as well.</li>
  </ul>
</blockquote>

<p>One major culture that are hypothesized to be related to Xia Dynasty and anyway preceeds to the Shang Dynasty is the <mark>Erlitou Culture</mark> (c.a. 1750-1520 BCE), located in 河南洛阳, 二里头遗址</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908165557551.png" alt="image-20220908165557551" style="zoom: 33%;" /></p>

<p>Some interesting aspect of the Erlitou Culture include:</p>

<ul>
  <li>
    <p>Erlitou’s <mark>settlement</mark> layout:</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Erlitou Layout</th>
          <th style="text-align: center">Central Palace Reconstruction</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908165818245.png" alt="image-20220908165818245" style="zoom: 33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908165842753.png" alt="image-20220908165842753" style="zoom: 33%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>where many scholars hypothesize that the central palace could be the <strong>capital of Xia</strong></p>
  </li>
  <li>
    <p>Start of <mark>Bronze</mark> vessels (proceeds Bronze Age) and some made of <strong>Jade</strong></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Turquoise-inlaid Bronze Plaques (板)</th>
          <th style="text-align: center">Turquoise Dragon and Bronze Bell</th>
          <th style="text-align: center">Clay Vessels</th>
          <th style="text-align: center">Bronze ding Vessel</th>
          <th style="text-align: center">Yue Jade</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908170113582.png" alt="image-20220908170113582" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908170118996.png" alt="image-20220908170118996" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908170123643.png" alt="image-20220908170123643" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908170129141.png" alt="image-20220908170129141" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908170135071.png" alt="image-20220908170135071" /></td>
        </tr>
      </tbody>
    </table>

    <p>all of which are highly likely to be produced by the workshop near the palace, found in large quantity in Erlitou. This could indicate that:</p>

    <ul>
      <li>Erlingtou must be a central and powerful place, perhaps like that of a government</li>
      <li>however, without much written records those are still speculations</li>
    </ul>
  </li>
  <li>
    <p><strong>Lack of written records</strong></p>

    <p>the possibility of Xia dynasty comes from 史记 (司马迁), where he mentioned annals of Xia:</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Shiji (91BC)</th>
          <th style="text-align: center">Symbols Excavated from Near Erlitou</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908170705110.png" alt="image-20220908170705110" style="zoom: 33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220908170725577.png" alt="image-20220908170725577" style="zoom: 25%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>where we see some lack of written records for Xia, only left with some symbols on potteries, hence no way of confirming whether if Xia really existed.</p>
  </li>
</ul>

<blockquote>
  <p><em>According to tradition</em>, the Xia dynasty was established by the legendary <strong>Yu the Great (禹)</strong>, after Shun (舜), the last of the Five Emperors (三皇五帝), gave the throne to him. In traditional historiography, the Xia was later succeeded by the Shang dynasty.</p>

  <ul>
    <li>三皇五帝is regarded as the demi-gods/emperors who significantly improved peoples lives by teaching them how to use fire and etc.</li>
  </ul>
</blockquote>

<h1 id="shang-dynasty-ca-17661600---1045-bce">Shang Dynasty (ca. 1766/1600 - 1045 B.C.E)</h1>

<p>Between Shang and Xia (if it existed), there is a piece of text from the Shiji 史记 that is worth to know. Basically:</p>

<ul>
  <li>Xie (偰) of Yin (殷) was the son of Jiandi (简狄), who (Jiandi) is a women of the Song nomad tribe</li>
  <li>Xie was born because Jiandi became the second consort of the Emperor Ku. This happened because “Once, when Jiandi was bathing with two other women, a <strong>dark bird (玄鸟) flew past and dropped an egg down to them</strong>. Jiandi retrieved it and swallowed it whole. Accordingly, she became pregnant”</li>
  <li>When Xie grew up, he <strong>assisted Yu</strong> (considered the founding father of <mark>Xia</mark>) in taming the great flood. Thereupon, Emperor Shun charged Xie with the following orders: “The hundred clans do not cleave to one another and the five ranks are not in accord. Assume the office of Governor of Conduct and attentively spread the five teachings, whose essential lesson is broad tolerance. Then Shun bestowed upon Xie <strong>a patrician estate in <mark>Shang</mark> and the surname Zi</strong>.</li>
</ul>

<p>Note that 殷 is often refered to as 安阳, which is the captial of the last period of Shang. Hence, 殷 can often be referred to as <mark>Shang</mark> as well.</p>

<blockquote>
  <p><mark>Note</mark>: Most of the content below show be viewed together with summaries of the book chapter  <a href="#Ch.1 Beginnigns of the Written Record">Ch.1 Beginnigns of the Written Record</a>.</p>
</blockquote>

<blockquote>
  <p>Even though Shang is universally considered as actually existed today, it was not in the past, until recent excavations at Anyang and Sanxingdui.</p>

  <ul>
    <li>basically Shang’s existence was establiashed by the large quantity of text found on <strong>oracle bones</strong>.</li>
    <li>a lot of doubts were there for Shang because it is portrayed during the Zhou that times before were “barbaric” and “uncultured”</li>
  </ul>
</blockquote>

<p><strong>Discovery of Oracle Bones:</strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Location of Yin</th>
      <th style="text-align: center">Oracle Bone Pit, Anyang</th>
      <th style="text-align: center">Shang Ox Scapula</th>
      <th style="text-align: center">Shang Plastron</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220913215118561.png" alt="image-20220913215118561" style="zoom: 25%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220913215121937.png" alt="image-20220913215121937" style="zoom: 25%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220913215241025.png" alt="image-20220913215241025" style="zoom:25%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220913215314497.png" alt="image-20220913215314497" style="zoom:25%;" /></td>
    </tr>
  </tbody>
</table>

<p>where the scripts on the oracle bones are largely reflective of the <strong>elite life at Shang</strong>, since using them requires the Emperor</p>

<ul>
  <li>
    <p>the word 卜 comes from this, because its sound “Puk!” mimics that of the cracking of oracle bones. Hence 卜 has the meaning of divination now.</p>
  </li>
  <li>
    <p>an example of text from the oracle bone:</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220911155732457.png" alt="image-20220911155732457" style="zoom: 67%;" /></p>

    <p>however, we are not to conclude that women are having less more than men, as there are cases where giving birth to daughters are considered auspicious according to records.</p>
  </li>
</ul>

<p><strong>Warefare and Polity</strong>: consider from the extracted text:</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220913220045932.png" alt="image-20220913220045932" style="zoom: 33%;" /></p>

<p>where Di refers to 帝, a Shang deity; suffix of “fang” means enemies. From here we also see the role of oracle bones to warfare. But what about polity?</p>

<ul>
  <li>Qiang people were being slaves and used for sacrifise. In many Shang’s work large labor is needed. Qiang people might be the man power.</li>
  <li>Concentration of power and wealth was greatly at the elite. And even artisan (e.g. making potteries) are much better off than peasants.</li>
</ul>

<p><strong>The role of Women: the case of Lady Hao:</strong></p>

<ul>
  <li>it is unclear what normal women’s life are like at Shang due to lack of records (all oracle bones with scripts are used by/for the Emperor)</li>
  <li>but what is known is that elite women (e.g. Lady Hao) and elite dead ancestors (e.g. Emperor’s Grandmother) had influence and power
    <ul>
      <li>e.g. Lady Hao’s tomb had great amount of lavish goods</li>
      <li>Lady Hao during her time was “<strong>hard as the bronze, soft as the jade</strong>” as she was great both at war/fighting to extend Shang’s border, but also raising the kids. She was also being well respected by the people.</li>
    </ul>
  </li>
</ul>

<p><strong>Shang’s Piece-mold Technique</strong>: for more details check out the book chapter  <a href="#Ch.1 Beginnigns of the Written Record">Ch.1 Beginnigns of the Written Record</a>.</p>

<ul>
  <li>very pottery based, hence explains why artisans could have a better life</li>
  <li>bronze casting required much material and technique. Hence it is <strong>mostly restricted to elites’ use</strong>. Most people use stone vessels as alternatives.</li>
</ul>

<p><strong>Shang’s Bronze: Ritual Purposes</strong></p>

<ul>
  <li>
    <p>the bronze used at Shang typically had intricate patterns featuring animals such as fish, snakes, dragons, etc. This is because they believed animals to be related to Shaman, and hence are an intermediary for connecting <strong>human and the spirits</strong></p>
  </li>
  <li>
    <p>among the animal motifs, one dominates: tao-tie 饕餮 (a beast with insatiable greed)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220913221801597.png" alt="image-20220913221801597" style="zoom: 25%;" /></p>

    <p>until today we are not entirely sure why this is preferred/appear so often on the bronze vessels. Religious purposes? Artistic purpose?</p>
  </li>
</ul>

<p><strong>Masks of Sanxingdui</strong>: made of bronze but appears completely different from that of Shang. It seems to require less technical intricacy, but also very different in look.</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220913222138172.png" alt="image-20220913222138172" style="zoom: 25%;" /></p>

<ul>
  <li>what could this be used for? We don’t know either.</li>
  <li>it is found to the south west of China (四川), where people at the center (中原) sees as uncultured.</li>
  <li>after examination, it appears to be techniques mixed from many different regions.</li>
</ul>

<p><strong>Chinese Texts</strong>: its feature of being pictographic and having a 1) radical and 2) phonetic component is discussed in the book chapter summary  <a href="#Ch.1 Beginnigns of the Written Record">Ch.1 Beginnigns of the Written Record</a>.</p>

<ul>
  <li>
    <p>but it is interesting to see the evolution from past texts to today</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220913222715903.png" alt="image-20220913222715903" style="zoom:33%;" /></p>
  </li>
</ul>

<p><strong>Summary</strong>:</p>

<ul>
  <li>Oracle bones: disc. by accident, tortoise plastrons and ox scapula used in ritual divination, contain archaic form of Chinese writing and corroborate later written historical accounts, tells the Shang political and religious system</li>
  <li>Ritual bronzes: primarily for ritual purposes, funerary/ancestral sacrifice, taotie</li>
  <li>Lady Hao’s tomb</li>
  <li>Sanxingdui: another Bronze civilization in China</li>
  <li>Bronze age: development of city-states that control territory; <strong>Erlitou and Yin are dense urban centers</strong> and centers of a regional economy, ruled by ‘royal houses’ (connecting Xia and Shang)</li>
</ul>

<h1 id="western-zhou-ca-1046---771-bce">Western Zhou (c.a. 1046 - 771 B.C.E)</h1>

<p>On a broader picture, this is the rough timeline of how Shang relates to Western Zhou.</p>

<ul>
  <li>Zhou Kingdom, once tributary state to the Shang, deposes the Shang in 1045 BCE</li>
</ul>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220915195207991.png" alt="image-20220915195207991" style="zoom:50%;" /></p>

<p>But before diving into evidences and stories of Zhou, we need to take a note of the difference between how Western Historians see Chinese histories and how Chinese scholars investigates it:</p>

<ul>
  <li><strong>Western</strong>: “wie es eigentlich gewesen ist (“how it really was”). They are interested in knowing what <strong>exactly</strong> has happened</li>
  <li><strong>Chinese</strong>: moralistical interpretation of the past, want to use history as a moralistic lesson to descendants (in fact many histories ARE written that way)</li>
</ul>

<p><strong>Records related to Zhou</strong>: in general there are texts that are recorded by the Zhou people/people alive near the Zhou period, and the ones written much later</p>

<ul>
  <li>Confucian Classics
    <ul>
      <li>Shangshu 尚書 – contains alleged speeches of the early W. Zhou kings</li>
      <li>Shijing 詩經 – Liturgical hymns (W. Zhou) and folk songs (Spring &amp; Autumn)</li>
      <li>Zhouyi 周易 – Divination manual</li>
    </ul>
  </li>
  <li>Later Histories
    <ul>
      <li>Shiji 史記 by Sima Qian 司馬遷 (145 – c. 86 BCE) – synthetic Chinese history of first century BCE</li>
      <li>Bamboo Annals (zhushu jinian 竹書紀年) – annalistic history of bamboo slips composed in 298 BCE and rediscovered in 279 C</li>
    </ul>
  </li>
</ul>

<p><strong>Bronze Vessel = Power</strong>: though often used for ritual purposes (still), making exquisite vessels still takes time and money</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220915200737872.png" alt="image-20220915200737872" style="zoom:33%;" /></p>

<ul>
  <li>therefore, bronze vessels is still an <strong>embodiment of power</strong>, making them suitable for gifts when Kings awarded to lords</li>
  <li>mostly concentrated and controlled by the elites. This can also be inferred from the high uniformity of style across vessels = is regulated/controlled</li>
  <li>many inscribed text on the bronze vessels, which can be used to study Zhou’s culture (but <strong>whether if this is a faithful</strong> representation of the history is debatable, as those vessels are used for ritual purposes)</li>
</ul>

<p><strong>From Shang to Zhou</strong>:</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220915201853489.png" alt="image-20220915201853489" style="zoom:50%;" /></p>

<ul>
  <li><strong>Battle of Muye</strong> was a battle fought between the rebel Zhou state (King Wu of Zhou 周) and the defending army King Zhou (纣) of Shang, captured their capital Yin and ended the Shang dynasty.</li>
  <li>Zhou then settled their captical in Xi’an, near wastern side of the Wei river.</li>
</ul>

<p><strong>Settlements of Western Zhou</strong>:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Settlements</th>
      <th style="text-align: center">Overall “Border”</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220915202742768.png" alt="image-20220915202742768" style="zoom: 33%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220915202924427.png" alt="image-20220915202924427" style="zoom: 33%;" /></td>
    </tr>
  </tbody>
</table>

<ul>
  <li>as you can see, most settlements are to the west/north of the Wei river.</li>
  <li><mark>Chengzhou</mark> (modern-day Luoyang) constructed soon after the Zhou conquest and served as the administrative center of the Western Zhou state on the eastern plain
    <ul>
      <li>later when Western Zhou got defeated and had to move to the east, they went to Chengzhou, captial of <mark>Eastern Zhou</mark></li>
    </ul>
  </li>
</ul>

<p><strong>Western Zhou Kings and Shiqiang pan 史墙盘</strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Western Zhou Kings</th>
      <th style="text-align: center">Shiqiang Pan</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220915203525367.png" alt="image-20220915203525367" style="zoom:50%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220915203534257.png" alt="image-20220915203534257" style="zoom:50%;" /></td>
    </tr>
  </tbody>
</table>

<ul>
  <li>
    <p>Shiqiang Pan contains two pages of texts, seemed as the “first concious attempt in China to write history”</p>
  </li>
  <li>
    <p>on the Shiqiang pan, it contained, in order: a) extol of former kings b) extols of former ancestors c) dedication of the vessel</p>

    <ul>
      <li>but there are attemps found that recorded texts are too “good”</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220915203753379.png" alt="image-20220915203753379" style="zoom:25%;" /></p>
  </li>
</ul>

<p><strong>Reducing Power in Late Westerm Zhou</strong>:</p>

<ul>
  <li>in Lai Pan, the structure became to extol ancestors first, but not the Kings</li>
</ul>

<p><strong>Invasion of the Rong</strong> (non-chinese people)</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220915204207788.png" alt="image-20220915204207788" style="zoom:33%;" /></p>

<ul>
  <li>along with Zhou, Zhou’s territory including Qin state (秦, which later took over and start <mark>Qin Dynasty</mark>) relocated towards their other captial Chengzhou (today Luoyang)</li>
</ul>

<h1 id="eastern-zhou-770---256-bce">Eastern Zhou (770 - 256 B.C.E)</h1>

<p>Again, a brief outline of the periods:</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920131742743.png" alt="image-20220920131742743" style="zoom:50%;" /></p>

<p>even though Zhou dynasty is the longest in history, <mark>Zhou</mark> Kings has <strong>declining power starting/becomes a figure head</strong> from 771 B.C.E.</p>

<ul>
  <li>Qin King called him self Qin Emperor, hence imperial period</li>
</ul>

<p>Geograohically, the two period looks like:</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920132124104.png" alt="image-20220920132124104" style="zoom:50%;" /></p>

<ul>
  <li>Western Zhou: capital in area of modern day <strong>Xi’an</strong></li>
  <li>Eastern Zhou: capital in west sacked, moved east to <strong>Luoyang</strong></li>
</ul>

<p>And then Easter Zhou is (long hence) divided into two halves: 春秋 and 战国</p>

<h2 id="spring-and-autumn-period-722---481-bce">Spring and Autumn Period (722 - 481 B.C.E)</h2>

<p>At the Start of 春秋, the distribution of polities (resulting from declining Zhou King influence):</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920132300350.png" alt="image-20220920132300350" style="zoom:50%;" /></p>

<ul>
  <li>decline of Zhou power, rise of vassal states</li>
  <li>early china composed of a large collection of different polities</li>
</ul>

<p>Among the several vassal states, the major ones include 晋,齐,秦,楚:</p>

<p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920132542198.png" alt="image-20220920132542198" style="zoom: 40%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920133003347.png" alt="image-20220920133003347" style="zoom: 33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>

<ul>
  <li>these polities are also the hegemons
    <ul>
      <li>hegemon: something (such as a political state) having dominant influence or authority over others</li>
      <li>this means that those states can interefere with sucecesion, hold meeting inter-states, etc.</li>
    </ul>
  </li>
  <li>one important hegemon is the <mark>晋文公</mark>, who was in “exile” for 19 years in Di, but came back and become the Duke for Jin, and reformed Jin’s military power to become one of the hegemons</li>
  <li>another important hegemon is the <mark>Qin</mark>, who were initially non-chinese/considered by people at the central plain as less cilivilized. They were adopted as “chinese” by donaintg troops to Zhou King
    <ul>
      <li>the Qin state <strong>absorbed cultures from two of the Four Barbarians from the west and north</strong>, which made the other warring states see their culture in low esteem</li>
    </ul>
  </li>
  <li>overall, this period is very violent, due to inceases in tension between states, insecurity, and betrayal. Yet there are some courtesy for battles and benevolence (e.g. not wipe out the entire lineage)</li>
</ul>

<p>Besides the central states 中国, the <strong>four important non-chinese neighbors</strong> are important to mention:</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920133632653.png" alt="image-20220920133632653" style="zoom: 33%;" /></p>

<p>where mostly the boundaries are made for geographical terms, meaning their is still culture diversity/similarity between them</p>

<ul>
  <li>e.g. Duke Wen of Jin born by a woman in <em>Rong</em>, went to <em>Di</em> during exile</li>
  <li>The Master said, “The Yi and Di tribes, even with their rulers, are still inferior to the Chinese states without their rulers.” ––Analects, 3.5</li>
</ul>

<p>453 BC Jin fell apart, partition of <mark>Jin</mark> between rival families into the three states of <mark>Han</mark>, <mark>Zhao</mark> and <mark>Wei</mark></p>

<ul>
  <li>this event is also the <strong>watershed between the Spring and Autumn and Warring States periods</strong>, refers to the division of the State of Jin between</li>
</ul>

<p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920134035087.png" alt="image-20220920134035087" style="zoom:33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920134420548.png" alt="image-20220920134420548" style="zoom:50%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920134431303.png" alt="image-20220920134431303" style="zoom: 33%;" /> |
| ———————————————————— | :———————————————————-: | :———————————————————-: |</p>

<p>Under this turmultous condition gives birth of thinkers: Confucious (ca.551–479BCE), Kong zi, Master Kong</p>

<ul>
  <li>
    <p>born in <em>Lu</em>, full of internal division within. <em>Lu</em> later becomes very weak and is absorbed by Qi</p>
  </li>
  <li>Confucious is perhaps the author of <em>The Spring and Autumn Period</em> and <em>the Odes</em>.</li>
  <li>wanted to be advisor, but never succeeded, hence became a private tutor and <strong>earn a living teaching</strong> (a lot are aristocrates learning some courtesy)</li>
  <li>want students to be actively learning</li>
  <li>always think about “why did China become like this? How can we restore the order?”
    <ul>
      <li>believe that this is because the Zhou’s ritual and order is not properly practiced by people, hence this mess</li>
      <li>hence also aspires one of the first rulers in Zhou, leading the people with benevolent and virtue</li>
      <li>gives rise to the <mark>ru儒 class</mark>, being people who are specialized in practicing rituals</li>
    </ul>
  </li>
</ul>

<p><strong>Analects 论语</strong>: collection of conversations assembled after Confucious death</p>

<ul>
  <li>
    <p>“analects” means fragments—requires reader to connect fragments.  The Chinese title, Lun Yu, means “assorted conversations.”</p>
  </li>
  <li>
    <p>it is <em>not</em> an essay that follows an argument structure, but structured around some key terms (e.g. <em>li</em> 礼)</p>
  </li>
  <li>
    <p>some <strong>most important concepts</strong> involve</p>

    <ul>
      <li>
        <p><em>li</em> (ritual), some aspects of which this key concept is about includes:</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920135228733.png" alt="image-20220920135228733" style="zoom:33%;" /></p>

        <ul>
          <li>worship: how to make offertings to gods</li>
          <li>rites: how to marry; how to mourn the dead, etc.</li>
          <li>daily decorum: how to interact with one’s lord, parents, partners, etc.</li>
          <li>morally appropriate, proper, right.</li>
        </ul>
      </li>
      <li>
        <p><em>ren</em> (benevolence, humane, etc)</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920135607372.png" alt="image-20220920135607372" style="zoom: 33%;" /></p>
      </li>
      <li>
        <p><em>junzi</em>: the gentleman/noble person is not a vessel</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920135724904.png" alt="image-20220920135724904" style="zoom:33%;" /></p>

        <p>he believes a gentlemen is not a person of a specific capacity— not limited to one capability. Instead, the gentleman attends to the entirety and integrity of his person—he tends to his de (moral force; magnitude of character)</p>

        <ul>
          <li>redefined that nobility does not come with birth, but through learning</li>
        </ul>
      </li>
      <li>
        <p><em>social roles</em>:</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920135955877.png" alt="image-20220920135955877" style="zoom:33%;" /></p>

        <p>against social flux, even though his teaching could be a proponent for it.</p>

        <ul>
          <li>not the first time there is “some” contradiction within him</li>
          <li>another one mentioned in the book is his claim of 述而不作</li>
        </ul>
      </li>
      <li>
        <p><em>morality and legality</em></p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920140105597.png" alt="image-20220920140105597" style="zoom: 33%;" /></p>
      </li>
    </ul>
  </li>
</ul>

<p><strong>How did tradition</strong>, transmitted by classicists such as Confucius, <strong>view the first Zhou kings</strong>?</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220920140523978.png" alt="image-20220920140523978" style="zoom:33%;" /></p>

<ul>
  <li>Duke of Zhou consolidating the foundation Western Zhou, being a very capable leader</li>
  <li>seems him as a very <strong>upright</strong> person: succeeded power from young cousin (normally father-to-son succession) and promised to gave away when he is older. In the end he made his promise.</li>
  <li>Confucius is inspired by Duke of Zhou (paragon of <em>de</em> (virtue) and human excellence) to define his Dao/way of teaching</li>
  <li>Confucius thinks we should <strong>return</strong> to the period of order/patrician society. But rulers at this time rejected this idea as it is too dangerous to their own establishments power. Therefore, unfortunately during his period, his teaching remain a <strong>minority</strong> view</li>
</ul>

<p><strong>Servicemen (shi 士) class during the Zhou period</strong></p>

<ul>
  <li>constant warefare in Spring and Autumn experience a <mark>decline in aristorcracy</mark>, with infantry + crossbows being effective army = transformed the <em>shi</em> class
    <ul>
      <li><em>shi</em> started as the nobility/aristocrats for warriors in Western Zhou</li>
      <li>early Zhou (feudal order): mounted knights; special retainers. late Zhou (Warring States): need specialists, technicians in all kinds of fields (e.g. defense)</li>
      <li>Therefore, there are many social fluxes, including warriors to advisors, ministers, etc, and enables man of humble origin to climb = <em>**shi</em> class ** becomes a mix of people from non-noble classes specialized at different things (using education)</li>
      <li>after <mark>Qin</mark> dynasty (imperial era), especially in the <mark>Song</mark>, <em>shi</em> beame officials; scholars</li>
    </ul>
  </li>
  <li>the changing definition of <em>Shi</em> shows a <mark>decline of nobility</mark> (and is later critical for the emergence of 科举), that throughout periods it is <strong>talent and knowledge people are seeking</strong>.</li>
</ul>

<h2 id="warring-states-453221-bce">Warring States (453–221 B.C.E.)</h2>

<p><strong>Previously in 春秋</strong></p>

<ul>
  <li>If Western Zhou was “golden age” portrayed by <mark>Confucian</mark> (who wants to go back to those glory Zhou period) school, Eastern Zhou is a time of <strong>political fragmentation, incessant warfare, and moral decline</strong></li>
  <li>Confucius’ portrays himself as a restorer of tradition, but could be viewed as reformer; his legacy is continually contested, reinterpreted by followers
    <ul>
      <li>yet remember that his school of thought remain a minority view during his period</li>
    </ul>
  </li>
  <li>key Confucian ideas captured in fragments through the Analects, compiled by disciples (bamboo strips 3rd c./books 2nd c.); emphasizing ideas of ritual (<em>li</em>), benevolence (<em>ren</em>), filial piety (<em>xiao</em>), and the virtues of the gentleman <em>junzi</em>.</li>
</ul>

<p><strong>Overall situation in Warring States</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220922131924653.png" alt="image-20220922131924653" style="zoom: 33%;" /></p>

<ul>
  <li>disintegration of <mark>Zhou</mark> order and inter-state competition &amp; warfare</li>
  <li>states such as Chu and <mark>Qin</mark> became very powerful (most smaller, weak states are already conquered)
    <ul>
      <li>“ally your self with distant enemies, and conquer near enemies”</li>
    </ul>
  </li>
  <li>at the end of the period, we know that Qin conquered all other states</li>
</ul>

<p><strong>Major changes in the Warring States</strong></p>

<ul>
  <li>
    <p>during 春秋, battles involve using chariots and training few elite warriors; but during 战国, concentrates on <strong>training large infantry</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220922132256947.png" alt="image-20220922132256947" style="zoom:33%;" /></p>

    <p>and the importance of <strong>strategies</strong> (e.g. induce the enemy to destroy themselves). In <em>The Art of War</em>, a lot of idea is about how to “outsmart” your competitor without physically engaging, hence useful in many modern situations as well</p>
  </li>
  <li>
    <p><strong>usage of iron</strong> both for agriculture and weapons</p>
  </li>
  <li>
    <p>need money to maintain large army</p>

    <ul>
      <li>increase in the practice of <strong>taxation</strong></li>
      <li>argiculture and commercial development: the use of <strong>money</strong></li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220922132826183.png" alt="image-20220922132826183" style="zoom:33%;" /></p>

    <p>note that Qin used the round coin. Later we found different coins scatter everywhere, meaning existance of wide trading.</p>
  </li>
  <li>
    <p>dynamic market for <strong>specializations</strong></p>

    <ul>
      <li>lots of trading, city grows in size, population grows</li>
      <li>noble class no longer hold monopoly on intelligence, much change in social hierarchy (e.g. advisor, the <em>shi</em> class)</li>
    </ul>
  </li>
</ul>

<p><strong>Features of <em>Shi</em></strong> 士</p>

<ul>
  <li>these specialists were itinerant, traveling from state to state for employment.
    <ul>
      <li>most attractive were methods of state-strengthening and governance.</li>
      <li>emphasis on governance is a common feature of Chinese thought.</li>
    </ul>
  </li>
  <li><strong>famous specialists</strong> with pupils were referred to with the “<em>zi</em>” suffix after their surname, which means the “Master” of a teaching</li>
</ul>

<p><strong>Different “schools” (jia 家) of thought</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220922133324153.png" alt="image-20220922133324153" style="zoom:50%;" /></p>

<ul>
  <li>not necessarily an actual institutional school—instead, think of a school as a taxonomic “family” whose members exhibit family <strong>resemblance</strong>.</li>
  <li>many ideas are shared across groups:
    <ul>
      <li><mark>filial piety</mark> not exclusive to “Classicists” or followers of Confucius.</li>
      <li>“Daoists” teach about the “Way” (<mark>dao 道</mark>)—the principles of the world and how to live in it—but all masters use this term, but in different ways.</li>
    </ul>
  </li>
  <li>most concern with how to <mark>govern</mark></li>
</ul>

<p><strong>Mozi: <em>兼爱</em></strong></p>

<ul>
  <li>most followeres are commoners/artisans</li>
  <li>very influential during the period (perhaps because they are specialists in artisan = defense), but died out durint Qin</li>
  <li>兼爱: love for all, no special regard for parents, etc. <strong>Against confucious</strong>, who believe that family relationship is the most importatnt.
    <ul>
      <li>hence rejection of offensive wars; military engineering and technology</li>
    </ul>
  </li>
  <li>additionally, ritual and music is for ruling class, and is fundementally <em>selfish</em> since you are mourning your own lineage. Hence Mozi is against it.</li>
  <li>Developed systematic rules of <mark>logic</mark> to persuade people
    <ul>
      <li>deep commitment to reason: argue in a rational fashion</li>
      <li>Why obsession of logic: let people of different origin understand and accept their ideas</li>
    </ul>
  </li>
</ul>

<p><strong>Mencius: <em>Human Nature is Good</em></strong></p>

<ul>
  <li>namd the second sage after Confucious
    <ul>
      <li>regarded himself as a follower of Confucious</li>
      <li>his book <em>Mencius</em> is later used for 科举</li>
      <li>occupied high political power in Qi</li>
    </ul>
  </li>
  <li>believes that “<strong>Human Nature is Good</strong>”
    <ul>
      <li>everyone has the potential to become a sage (developed their moral throgh long and hard study and reflection)</li>
      <li>human are born with <em>benevolence, rightenousness, ritual, wisdom</em>. But you need to cultivate them through learning.</li>
      <li><strong>believes in every man’s potential to become a sage</strong></li>
    </ul>
  </li>
  <li>against Mozi, as Mencius believes it is impossible to show same love to others, because human beings are inclined to love their own families more</li>
</ul>

<p><strong>Laozi: <em>Dao道</em></strong> (and Daodejing)</p>

<ul>
  <li>
    <p>Dao today refers to idea from <em>Daodejing</em>, and the book <em>Zhuangzi</em></p>
  </li>
  <li>
    <p>many messages in Daodejing is debatable and mysterious</p>

    <ul>
      <li>
        <p>Dao cannot be described</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220922135121167.png" alt="image-20220922135121167" style="zoom: 33%;" /></p>
      </li>
      <li>
        <p>but Dao is the way of nature</p>
      </li>
    </ul>
  </li>
  <li>
    <p><em>Confucious</em> Dao: the way for <strong>human beings to behave</strong> ethically and moral. <em>Laozi</em> and <em>Zhuangzi’s</em> Dao: <strong>the way how universe/nature works.</strong></p>

    <ul>
      <li>Laozi/Zhuangzi believes that Confucious exaggerated the importance of human being. Others ranging from the useful and the useless in nature should also be considered as well</li>
      <li>“human is a small part of the nature”, and in the end achievement of certain goals cannot be done without nature</li>
    </ul>
  </li>
  <li>
    <p>therefore, emphasis on <em>wuwei</em> <mark>无为</mark></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220922135532501.png" alt="image-20220922135532501" style="zoom:33%;" /></p>

    <ul>
      <li>non-interference, and have no excessive desires</li>
      <li>believes that persuing non-intereference will have positive impacts on the society</li>
    </ul>

    <p>for example, for government you should also not interfere with people too much</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220922135712574.png" alt="image-20220922135712574" style="zoom:33%;" /></p>

    <p>so the ruler should stop acting when the system is inplace.</p>
  </li>
  <li>
    <p><em>relativity of value</em></p>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220922135857820.png" alt="image-20220922135857820" style="zoom:33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220922140019729.png" alt="image-20220922140019729" style="zoom: 33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>

    <ul>
      <li>advantage of the weak, strong and weak can become each other</li>
    </ul>
  </li>
</ul>

<p><strong>Zhuangzi: 自然</strong> (another Daoist)</p>

<ul>
  <li>dreamt himself of butterfly, <mark>questions knowledge and beliefs</mark> we taken as granted</li>
  <li>the narrative style of Zhuangzi is different from other philosophers. Other philosophers teach in an opaque way, but he does it with playfulness and examples</li>
  <li>Confucious portrayed as a proper learner, but Zhuangzi appears eccentric and unpredictable</li>
  <li>both Laozi and Zhuangzi see <em>Dao</em> as the nature they must accord with, but there are differences
    <ul>
      <li>Laozi discusses about governness, and protecting the weak</li>
      <li>Zhuangzi is not interested in politics (recluse), celebrated ritual freedom. Searching for conception of life</li>
    </ul>
  </li>
</ul>

<p><strong>Different thoughts of Masters</strong>: “when your parents die, how should they be mourned?”</p>

<ul>
  <li>
    <p><strong>Confucious</strong>: three year mourning period</p>
  </li>
  <li>
    <p><strong>Mencius</strong>: just do what <em>your heart believes</em> is correct.</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220922141619545.png" alt="image-20220922141619545" style="zoom:33%;" /></p>
  </li>
  <li>
    <p><strong>Mozi</strong>: a limited resource should be used to the right places/<mark>frugality</mark></p>
  </li>
  <li>
    <p><strong>Zhuangzi</strong>: life and death is part of the natural process, it just part of the natural changes. So it would be foolish to attach yourself to changing things.</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220922141924289.png" alt="image-20220922141924289" style="zoom:33%;" /></p>

    <p>i.e. you should not try too hard to change things.</p>
  </li>
</ul>

<p><strong>Legalist: 法</strong> (very <mark>pragmatic</mark>)</p>

<ul>
  <li>
    <p>Han Feizi as an example of Legalist, a student of <em>Xunzi (Xunzi thinks human nature is evil, and coersion, strict teaching is needed</em></p>

    <ul>
      <li>has a high noble origin</li>
      <li>the only ruler took his teaching is Qin, which also become the emperor and united China</li>
      <li>but note that “the <strong>Legalist teachings</strong> 法家 in Qin was so repelled, by Xunzi, but they proposed a radically new way of organizing the state and its subject that allows its adherets to <mark>unite the realm for the first time</mark>”. So while Xunzi believes in the important of education to make the society behave, later legalist believed in coersion/law/punishmnets.</li>
    </ul>
  </li>
  <li>
    <p>believes that people are naturally anti-social (e.g. killed girls to favor boys at birth)</p>

    <ul>
      <li>evilness of human nature the root of trouble = political unrest</li>
      <li>so <strong>ruler must be always on guard</strong> even for his advisors, officials, etc</li>
    </ul>
  </li>
  <li>
    <p>disagree that Confucious notion that government should be based on moral and ritual, and <mark>emphasized laws and praticality</mark></p>

    <ul>
      <li>must be easy to follow</li>
      <li>must be consistent</li>
      <li>must be backed by substantial reward and heavy punishment</li>
    </ul>

    <p>people should be controlled by punishments and rewards</p>
  </li>
  <li>
    <p>different interpretation of <em>wuwei</em></p>

    <ul>
      <li>The ruler should <strong>conceal</strong> his motives and desires, for then the true characters of the ministers will be plain; otherwise the ministers will “polish themselves accordingly”</li>
      <li>Let the ministers do the work: the ruler take the credit; ministers take the blame</li>
      <li>in a sense defend the position of power. note that Han Feizi is noble.</li>
    </ul>

    <p>essentially for a ruler, <strong>law applied to everybody except the ruler</strong></p>
  </li>
  <li>
    <p>but note that the aim is <mark>not to punish people</mark>, but to <mark>improve/correct people via laws/controls</mark></p>
  </li>
</ul>

<h1 id="qin-dynasty-221---207-bce">Qin Dynasty (221 - 207 B.C.E.)</h1>

<p><strong>Previously on the Warring States</strong></p>

<ul>
  <li>
    <p>political disunity, lots of wars $\to$ disversity of political thought</p>
  </li>
  <li>
    <p>many thinkers (Daoist, Han Feizi, etc.) have <em>different idea as compared to Confucious</em></p>

    <ul>
      <li>Followers of Confucius: <em>Mencius</em> (Meng Zi) and <em>Xun Zi</em> systematize Confucian framework, elaborate on theories of governance and human nature (good/bad)</li>
      <li><em>Mozi</em> (the Mohists) known for doctrine of universal compassion</li>
      <li><em>Laozi</em> and <em>Zhuangzi</em>—contemplative recluse, philosophical relativist—presents counterpoint to classic Confucian ideas</li>
      <li><em>Han Feizi</em> —the rule of law, all men treated equally except the ruler
        <ul>
          <li>Diversity of philosophical approaches during Warring States is unsurpassed in Ch. hist; some schools–Legalism, Daoism–peak later; others (<em>Mohists</em>) disappear</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Repeated <strong>cycle of union and division</strong>, which is a basic paradigm in chinese history</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927132049739.png" alt="image-20220927132049739" style="zoom:33%;" /></p>
  </li>
</ul>

<p><strong>The rise of the Qin state</strong></p>

<ul>
  <li>
    <p>Qin became the main power during the Warring period, but were seen as a barbaric state by other states</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927132433325.png" alt="image-20220927132433325" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>however, because this is a place easy to defend as it is on the <em>outskirt</em>, and it is easy to launch attacks</p>

    <ul>
      <li>can weaken power of nobility, later on realized by Lord Shangyang $\to$ perform <strong>talent recruitment</strong></li>
      <li>western troops interaction/contact made Qin advanced in <strong>military technology and capability</strong>
        <ul>
          <li>later on Qin developed a system of non-hereditary ranks, where one can rise in rank purely from achievement during war</li>
          <li>Qin king maintained a centralized control over all people, especially the troops</li>
        </ul>
      </li>
    </ul>

    <p>all of which is only possible because the power of nobility is weak/no hereditary hierarchy, and contributed to the rise of Qin</p>
  </li>
  <li>
    <p>the entire conquest of Qin on other states happened during 230 - 221 BC, which is <strong>very quick</strong>!</p>
  </li>
</ul>

<p><strong>Qin’s foreigner minister: Lord Shang (Shang Yang)</strong></p>

<ul>
  <li>in 361BC he become the <strong>chief minister of Qin</strong>, and wanted to make Qin a more powerful state $\to$ <strong>Legalist State</strong></li>
  <li>changes he introduced include
    <ul>
      <li>suppressed the hereditary nobility; ranks achieved by military merit; established bureaucracy</li>
      <li>country divided into county + officials, state penetration into the villages
        <ul>
          <li>i.e. local farmers no longer controlled the local nobility, but by the government</li>
        </ul>
      </li>
      <li>supervision between each other in a family unit</li>
      <li>distribution of land by offering to farmers, but <strong>land still belongs to the country</strong> = lending ownership temporarily</li>
      <li>direct taxation from people ot the state, instead of given to local nobility</li>
      <li>shrunk the family into atomic family units $\to$ can tax more people; $\to$ prevent large group which could start rebellion</li>
      <li>laws applied equally except for the emperor</li>
    </ul>
  </li>
  <li>overall employed harsh rules, which effectively made <strong>Qin a legalist state and laid a foundation of Qin’s sucess</strong>. But had a tragic death due to harsh rules as well.</li>
</ul>

<p><strong>King Zheng (247-221BC)</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927134150999.png" alt="image-20220927134150999" style="zoom:33%;" /></p>

<ul>
  <li>
    <p>First <mark>Emperor</mark> of Unified China, King Yin Zheng. Named himself Emperor instead of King signifies his power presiding over the entire China</p>

    <ul>
      <li>
        <p>some viewed him as a passive beneficiary of smart officials and weak other states, hence sucess of reunification</p>
      </li>
      <li>
        <p>but it could also be that King Yin Zheng is a controlling figure: failure of assassination prior to the unifcation of China</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927134402347.png" alt="image-20220927134402347" style="zoom:33%;" /></p>

        <p>where in the figure, the person on the left that has a dagger is the assassin. The assassin Jin Ke in from the <strong>Yan state</strong> to <mark>fake for a peace treaty</mark> hence surrender, but he failed and King Zheng became infuriated and speeded up the conquer later on. This might reflect King Zheng of being a powerful figure/driving force of the country as:</p>

        <ul>
          <li>usually if ministers are the smart/driving forces, then the simples way is to bribe ministers/assassinate ministers</li>
          <li>but assassinating King Zheng means he is the driving force, hence he could be powerful</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>rised into power when he is age of 13</p>
  </li>
</ul>

<p><strong>Qin Dynasty</strong>: lasted for only 14 years but impact is long-lasting</p>

<ul>
  <li>
    <p>established the political and law structure until the end of imperial era in 1911</p>
  </li>
  <li>
    <p>notice the difference betweem <mark>Fengjian and Central</mark> system</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927135211385.png" alt="image-20220927135211385" style="zoom:33%;" /></p>

    <p>notice that now the Emperor almost had a direct control over the people.</p>

    <ul>
      <li>the Fengjian has the structure of dispersing sons/relatives with lands $\to$ let them control diverse pieces</li>
      <li>While this was designed to maintain Zhou authority as it expanded its rule over a larger amount of territory, many of these became major states when the dynasty weakened.</li>
      <li>Li Si opposed it, and believed the Central Bureaucracy by Shang Yang is better, as it could <strong>prevent the dispersion of power/rebels</strong></li>
    </ul>
  </li>
  <li>
    <p>Later Li Si’s plan is favored, and the following organization of the territory is used</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927135459829.png" alt="image-20220927135459829" style="zoom:33%;" /></p>

    <p>now the emperor has the peak power and <strong>everybody in this hierarchy has to listen to him</strong></p>

    <ul>
      <li>
        <p>the entire bureucracy is funded by the universal agricultural taxation system</p>
      </li>
      <li>at the same time, weaken wealthy clans/party, so no one can influence King’s power. e.g. sometimes taken extreme measures such as <em>reallocated all powerful clans/local nobility to captical</em></li>
      <li>all walls for military defense is abolished, and melt down all weapons (so no more civil war)</li>
    </ul>
  </li>
</ul>

<p><strong>Economic Standardization in Qin</strong></p>

<ul>
  <li>
    <p>erased diversity by <strong>unifying weights and measures</strong></p>

    <ul>
      <li>produce in markets can be compared and priced equivalently</li>
      <li>weights measured by weigh</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927140044752.png" alt="image-20220927140044752" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>another important standardization is <strong>currency</strong>: faciliates trading</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Other Curreny to Qin</th>
          <th style="text-align: center">Qin’s Currency</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927140136547.png" alt="image-20220927140136547" style="zoom:33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927140220842.png" alt="image-20220927140220842" style="zoom:33%;" /></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>unification of <strong>script</strong>. For instance the word for “horse”</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927140308102.png" alt="image-20220927140308102" style="zoom:33%;" /></p>

    <p>which is advantageous for <strong>communications</strong> between each other/different states</p>

    <ul>
      <li>done by Li Si, by rationalizing the Zhou script</li>
      <li>symbolizes the <mark>cultural unity</mark> that Qin intended</li>
    </ul>
  </li>
  <li>
    <p>more than standardization: <mark>knowledge control</mark></p>

    <ul>
      <li>burying of scholars alive (uncertain): Confusious preferred Zhou’s structure, but Li Si is the chancelor and is totally against it
        <ul>
          <li>Confucious hated Qin, hence people afterwards, e.g. in Han dynasty, who are followers of Confucious could be biased</li>
        </ul>
      </li>
      <li>buring of books (confirmed, 213BC): burned all Confucian classics, and whoever buys it will be executed (view this as an enemy of Qin’s progress).</li>
    </ul>

    <p>happens because Qin wants people to forget about Zhou/past, and corroberates current policies. But it does not mean to abandon all values from the past as well, e.g. lack of filiaty is still punished</p>
  </li>
  <li>
    <p><strong>legal standardization</strong>: standarized rules for all (except ruler)</p>

    <ul>
      <li>
        <p>later Han dynasty described Qin rules being very harsh</p>
      </li>
      <li>
        <p>but the truth is complicated: low ranking offical Xi’s tomb in 睡虎地 found</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927141158609.png" alt="image-20220927141158609" style="zoom:33%;" /></p>

        <p>Qin books on laws, which is <strong>not that harsh but rather detailed and meticulous</strong></p>

        <table>
          <thead>
            <tr>
              <th style="text-align: center">Logics on Punishment</th>
              <th style="text-align: center">Women v.s. Men</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927141404034.png" alt="image-20220927141404034" style="zoom:33%;" /></td>
              <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927141535014.png" alt="image-20220927141535014" style="zoom:33%;" /></td>
            </tr>
          </tbody>
        </table>

        <p>additionally, we also see some <strong>much more power of man than wives</strong></p>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Qin Transportation System:</strong> e.g. road network (4000+ miles)</p>

<ul>
  <li>
    <p>strength economic ties between regions</p>
  </li>
  <li>
    <p>wall built during Ming Dynasty, but some foundation was laid out during Qin</p>

    <ul>
      <li>as expression for shielding off enemies, like in Longshan period</li>
      <li>wanted to <strong>wall out non-chinese tribes to north (Xiongnu)</strong> and wests</li>
      <li>Qin recognizes its limits of power, by delineating is boundary <em>clearly</em> for the first time</li>
    </ul>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Existing Walls during Qin</th>
          <th style="text-align: center">Great Wall we see today</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927141911239.png" alt="image-20220927141911239" style="zoom:33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927141955179.png" alt="image-20220927141955179" style="zoom:33%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>where essentially Qin is linking the existing walls together. Note that during this period, Qin assigned a <strong>military official</strong> because</p>

    <ul>
      <li>those walls are on the outskirts, hence skirmishes would happen a lot</li>
      <li>need to managed a large group of people, which is a skill more common within military</li>
    </ul>
  </li>
</ul>

<p><strong>Qin’s Death: Terra-Cotta Army</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220927142246854.png" alt="image-20220927142246854" style="zoom:33%;" /></p>

<ul>
  <li>
    <p>used for Qin emperor to fight during the underworld (belief in afterlife, that military he defeated will prusue him in afterlife)</p>
  </li>
  <li>
    <p>soldiers were originally colorful</p>
  </li>
</ul>

<h1 id="han-dynasty-202bc---220ad">Han Dynasty (202BC - 220AD)</h1>

<p><strong>Previous on Qin Dynasty</strong></p>

<ul>
  <li>230-221 BCE: <mark>Qin</mark> conquest ends the <mark>Warring States period</mark>, results in unification</li>
  <li>221-210 BCE: King Ying Zheng of <mark>Qin</mark> proclaims himself ‘emperor’ Huangdi, reigns as first emperor (Qin Shihuang)
    <ul>
      <li><strong>Liu Bang</strong> (Emperor Gaozu): the founder of the Han</li>
      <li>Qin state began as a politically and culturally marginal power, which is strengthened by <strong>Shang Yang’s reform</strong></li>
      <li>then Han is corroberates by <strong>Emperor Wu (Wudi)</strong></li>
      <li>Shang Yang’s reforms majorly included bureaucratic government, merit-based appointment, and administrative and tax reforms—direct relation to ruled</li>
      <li><strong>Li Si,</strong> after the conquest, builds upon Shang Yang’s model, extends bureaucratic framework to standardization of weights and measures, currency, script, thought control</li>
    </ul>
  </li>
  <li><strong>Laws of Qin</strong> exresses legalist principles, but seen as were harsh by later people
    <ul>
      <li>portrayed as repressive and tyrannical, but recent scholars are rejecting prejudices and acknowledges its centralizing measures and its legal codes far from arbitrary</li>
    </ul>
  </li>
</ul>

<p><strong>The Collapse of the Qin Empire</strong></p>

<ul>
  <li>
    <p>In brief: 221BC Qin unification. 210BC Shi Huangdi died; his unpopular son, Huhai, succeeded the throne. 209BC Rebellions broke out. 207BC Qin ended by Liu Bang and Xiang Yu, both from <mark>Chu state</mark> (Liu Bang won at the very end).</p>
  </li>
  <li>
    <p>Qin suffered from strong resistance on the conquered people (tax, lots of construction work), because the <strong>restructure/unification of China within a short period</strong> is bound to invoke dissent</p>

    <ul>
      <li>Especially <mark>Chu</mark> state had grudges, since Qin once broke alliance with Chu and masaacre a lot of people in Chu</li>
    </ul>
  </li>
  <li>
    <p>Rebellions broke out. Some key rebellion leaders (both from Chu) include:</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Xiang Yu’s Military Capabilty</th>
          <th style="text-align: center">Liu Bang’s Social Capability</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220929132146778.png" alt="image-20220929132146778" style="zoom:33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220929132155103.png" alt="image-20220929132155103" style="zoom:33%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>and the interesting is they have exactly different personalities and abilities</p>
  </li>
  <li>
    <p>Liu Bang won at the very end, and started <mark>Han dynasty</mark>, named himself <strong>Han Gaozu</strong>汉高祖</p>
  </li>
  <li>
    <p>Han is also divided into <strong>two periods</strong>, almost identical to the shift for Western Zhou and Easter Zhou</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220929132518552.png" alt="image-20220929132518552" style="zoom:33%;" /></p>

    <p>essentially almost identical to Zhou, and we <strong>start with Western Han</strong>, but later moved captial to Luoyang, hence <strong>Eastern Han</strong></p>
  </li>
</ul>

<p><strong>Liu Bang’s New Empire</strong></p>

<ul>
  <li>
    <p>Liu Bang’s first decision was whether to keep the bureaucray of Qin or start a new one (most people associated centralization of power with tyrannay at this point, due to Qin dynasty)</p>
  </li>
  <li>
    <p>in the end, he retained most of the structure, central bureucracy, still uses commanderies, counties, appointed officials by talent, but on <strong>had a benign implementation</strong> (rules are more flexible)</p>
  </li>
  <li>
    <p>decided to share power with his relatives, starting vassal states.</p>

    <ul>
      <li>hence only western portion, about 1/3 of the entire territory is under direct control</li>
      <li>easter ones are controlled by his relatives (so when he died, family still has control)</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220929132736301.png" alt="image-20220929132736301" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>also didn’t like Confucious, so prohibitted Confucious didactic books</p>
  </li>
  <li>
    <p>so in general, most policties are aligned with Lord Shang, with few changes:</p>

    <ul>
      <li>relaxed the laws of Qin a bit, by relaxing the implemenation. e.g. you can plead to the judge</li>
      <li>Liu Bang hated Confucious but judges of crime valued filial piety. This is no direct contraversy because the idea of filial piety is in fact common on lots of idealities, including legalism (e.g. violating filial piety will be punished)</li>
      <li>but thinks Confucious scholar is useful</li>
    </ul>
  </li>
</ul>

<p><strong>Emperor Wudi</strong> (Liu Che刘徹)</p>

<ul>
  <li><mark>strongest of all Han emperoros</mark>: lots of achievements during his reign, especially his expansion of China</li>
  <li>Wudi is a <strong>posthumouns title</strong> due to his achievements in military, and china’s territoy expansion</li>
  <li>had much control over vassal states</li>
  <li>made Confucianism state ideoligy</li>
</ul>

<p><strong>Emperor Wudi: reshaping economy and politics</strong></p>

<ul>
  <li>centralizing the government
    <ul>
      <li>instead of forcibly remove the large estate landowners, decreed lord’s land shared with heirs (so that in the long run Emperor wins)</li>
      <li>hence smaller control, and Wudi have more power</li>
      <li>periodically, rich and influential family relocated to the captial to be under supervision (similar to Qin)</li>
    </ul>
  </li>
  <li>significant revenues come from <strong>state monopolies</strong>
    <ul>
      <li>intent was to not overburden farmers</li>
      <li>hence increased <strong>taxes on private businesses</strong></li>
      <li>monopolies on salt and iron, and later coinages as well
        <ul>
          <li>later debated if salt and iron monopoly is a good idea as they are critical for the people, but very profitable for the Emperor</li>
          <li>in the long run, such monopoly disrupted the private sector of economy, and a political controversy: debate v.s. <strong>Confucianism scholars</strong> at that time on what is proper government</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Fight Against Xiongnu</strong></p>

<ul>
  <li>
    <p>Wudi puhsed out <strong>Xiongnu</strong> (problem since Shang, exacerbated by Zhou, e.g. making peace through gifts and “peace marriage”)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220929134528429.png" alt="image-20220929134528429" style="zoom:33%;" /></p>

    <p>but at the same time, Xiongnu tribes fromed the first confederation</p>

    <ul>
      <li>Xiongnu might have been ancestors of European Turkish</li>
    </ul>
  </li>
  <li>
    <p>also had campaigns and subdugate the various kingdoms, defeated Ferghana, got a lot of horses</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220929134933688.png" alt="image-20220929134933688" style="zoom:33%;" /></p>

    <p>and this campaigm <strong>secured trade routes later to central asia</strong></p>
  </li>
  <li>
    <p>other campaigns aimed to make <strong>more tribute states</strong> hence allies to fight against Xiongnu</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220929135055258.png" alt="image-20220929135055258" style="zoom:33%;" /></p>

    <p>some famours campaign leaders:</p>

    <ul>
      <li><strong>Huo Qubing:</strong> defeated 5 Xiongnu tribes in 6 days, killed over 70000 Xiongnu. (but we didn’t find Xiongnu’s records to confirm this)</li>
      <li><strong>Zhang Qian:</strong> his route established later <mark>silk road</mark>, and later where <mark>buddism</mark> came in</li>
    </ul>
  </li>
  <li>
    <p>Consequences of Wudi’s expansions</p>
    <ul>
      <li>Positive:
        <ul>
          <li>military security</li>
          <li>established contact with the larger world - later on the silk road</li>
          <li>ambassators of many tribute states $\to$ send princesses to China and returns with periodic gift to vassal states</li>
        </ul>
      </li>
      <li>Problem:
        <ul>
          <li>nearly 10% of state revenue spent on gifts</li>
          <li>Stretched China’s resources; economic well-being weakened</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Han Confucianism as State Orthodoxy</strong></p>

<ul>
  <li>
    <p><strong>Dong Zhongshu</strong> developed Confucious that matched the mood of the time</p>

    <ul>
      <li><strong>synthesizes</strong> different ideas to Confucian metaphysics, e.g. adapted <em>yin-yang</em> and the <em>five forces</em> (fire, water, earth, metal, and wood) into Confucian metaphysics. Note that Confucious origianlly did not address supernatural</li>
      <li>harmonize the contrasting idea of Mencius and Xunzi, so human’s nature is good but man needs to be guided by the ruler (personification of heaven)</li>
      <li>remade emperor-cnetered, hence Wudi liked it</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220929140431707.png" alt="image-20220929140431707" style="zoom:33%;" /></p>

    <ul>
      <li>essentially, Confucianism became <mark>more eclectic and emperor-centered</mark></li>
    </ul>
  </li>
  <li>
    <p>he then made the proposal to Wudi, who liked his idea and adopted it</p>

    <ul>
      <li>even though Wudi’s established rule is in a way very similar to Qin’s legalist principle on military and laws,</li>
      <li><strong>ruled by legalist, but decorated/surfaced by Confucianism idea</strong></li>
      <li>so practically, every state claimed that they follow confucianism even though rules by legalist ideality (due to Qin)</li>
    </ul>
  </li>
  <li>
    <p>another important change include that the government officials needed Confucianism classics as required knowledge</p>

    <ul>
      <li>invenstion of paper in Easter Han helped expanded Confucianism</li>
      <li>but the overall Confucianism has diverged some significant ways</li>
    </ul>
  </li>
</ul>

<p><strong>Emperor Lv</strong>吕后 and <strong>Ban 班Family</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220929140951519.png" alt="image-20220929140951519" style="zoom:33%;" /></p>

<ul>
  <li><mark>first woman ruler</mark> (dowager) in imperial china, wife of Liu Bang</li>
  <li>power of empresses family threatened the power of emperor family, hence seen as dangerous
    <ul>
      <li>so historians such as Sima Qian cover her achievments up</li>
    </ul>
  </li>
  <li>Another first woman historican: <mark>Ban Zhao</mark>
    <ul>
      <li>completed the history of Western Han</li>
      <li>wrote book on <em>Lessons for Women</em>, which is very popular
        <ul>
          <li>emphasized women obligations to husband, cultivation of virtues appropriate to women.</li>
          <li>women and men have different status, hence can be seen as Confucious idea to stick to their role</li>
          <li>but also advocated for equal education for women</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Sima Qian, the “historian”</strong></p>

<ul>
  <li>
    <p>our vision of ancient china is being shaped a lot from his view of it</p>
  </li>
  <li>
    <p>at that time, historian were more known as Archivist, Astrologer, and/or Scribe</p>

    <ul>
      <li>duties may have included recording events, or keeping “minutes.”</li>
      <li>could access palace archives, such as chronologies, confidential documents.</li>
    </ul>
  </li>
  <li>
    <p><em>Shiji</em> started by his father, finished <mark>privately</mark> by him (hence less biased v.s. Ban’s version, which is state sponcered)</p>
  </li>
  <li>
    <p><em>Shiji</em> narrates history from beginning to time to Sima Qian’s time</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220929141604353.png" alt="image-20220929141604353" style="zoom:33%;" /></p>

    <p>where all the history was unearthed by him, checking archives, going to places physically, etc.</p>
  </li>
  <li>
    <p>however, there could still be biases:</p>

    <ul>
      <li>during ruling of Han Wudi, he had a castration due to political mistake, hence could have grudge to Han</li>
      <li>dislikes Emperess Lv</li>
      <li>student of Dong ZHongshu, had Confucious influences</li>
    </ul>

    <p>but today seen as he tried his best to be impartial</p>
  </li>
</ul>

<p><strong>Wang Mang Interloper</strong>:</p>

<ul>
  <li>recall that Liu Bang, Empress Lv, and Empreor Wu are all classfied as early Han</li>
  <li>Wang Mang started a rebellion and separated out of the royal clan to start his <mark>Xin dynasty</mark> (which lasted very shortly) besides <mark>Han</mark>.
    <ul>
      <li>however, due to the flooding of yellow river at the time and other reasons, Wang Mang’s plan is shortlived</li>
    </ul>
  </li>
  <li>due to rebellion, Han people relocated to Luoyang, <strong>restored the power</strong>, had the <mark>Eastern Han</mark>
    <ul>
      <li>Eastern Han formally began on 5 August AD 25, when Liu Xiu became Emperor Guangwu of Han, with <strong>capital moved eastward to Luoyang</strong></li>
      <li>still the <strong>Liu</strong> clan being the royalty, but the eunuchs has rose up in power</li>
    </ul>
  </li>
</ul>

<p><strong>End of Han</strong></p>

<ul>
  <li>The end of the Han dynasty refers to the period of Chinese history from 189 to 220 CE, which roughly coincides with the tumultuous reign of the Han dynasty’s last ruler, Emperor Xian.</li>
  <li>During this period, the country was thrown into turmoil by the Yellow Turban Rebellion (184–205). Meanwhile, the Han Empire’s institutions were destroyed by the <mark>warlord Dong Zhuo</mark> and <mark>fractured into regional regimes ruled by various warlords</mark>, some of whom were <strong>nobles and officials of the Han imperial court</strong>.</li>
  <li>One of those warlords, Cao Cao, was gradually reunifying the empire, ostensibly under Emperor Xian’s rule</li>
</ul>

<h1 id="six-dynasties-220---589">Six Dynasties (220 - 589)</h1>

<p><strong>Previously on Han Dynasty</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004131407632.png" alt="image-20221004131407632" style="zoom: 50%;" /></p>

<ul>
  <li>
    <p><strong>Liu Bang</strong>, or Han Gaozu, founded the Han dynasty</p>
  </li>
  <li><mark>Han</mark> Dynasty is split into two halves, distinguished by their capitals:
    <ul>
      <li>206BC - 9 CE: Western/Former Han (Chang’an). Then problem incurred by <mark>Wang Mang</mark> and forced the move of the royal family</li>
      <li>25-220 CE: Eastern Han/Later Han (Luoyang)</li>
    </ul>
  </li>
  <li>under the reign of <strong>Emperor Wu</strong>: we had great territorial expansion, but weakened the economy of empire. Several milestones include:
    <ul>
      <li><strong>Han-Xiongnu War</strong>: Han expansion creates a multilingual, multiethnic empire, enduring political and cultural ties to inner Asia; foundation of silk road and exchange of goods/ideas; but weaken the local economy due to warefare
        <ul>
          <li>note that silk road in reality are a series of <em>short trades</em>, and that it is important to know that many tradings existed <em>before silk road</em> as well. It is just that Wudi made <em>silk road even more trade intensive</em>.</li>
        </ul>
      </li>
      <li><strong>Dong Zhongshu</strong> works to install Confucianism as official state ideology, but draws upon Daoist cosmology; this syncretic Confucianism legitimizes Han order</li>
      <li><strong>Sima Qian</strong>, court astrologer to E. Wu, writes monumental Records of the Grand Historian in the Confucian mold, considered founder of Chinese historiography</li>
      <li><strong>Salt &amp; Iron</strong> monopoly debates (held 81BC) on Emperor Wu’s economic policies</li>
    </ul>
  </li>
  <li>
    <p><mark>Han</mark> governance marks continuation of Qin law and institutions, <mark>legalist foundation with new syncretic Confucianist state ideology laid over it</mark>. =&gt; Called the “Han Synthesis,” but the Han is essentially a Legalist state.</p>
  </li>
  <li>
    <p>also recall that in the song, this missing period is essentially the topic of this section: the <mark>Six Dynasties</mark></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004131733439.png" alt="image-20221004131733439" style="zoom: 33%;" /></p>
  </li>
</ul>

<p><strong>Timeline After Han</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004131810873.png" alt="image-20221004131810873" style="zoom:50%;" /></p>

<ul>
  <li>first split into Wu吴国, Wei魏国, Shu蜀国, the three kingdom period</li>
  <li>then north have been controlled by alien rulers, e.g. Northern Wei. The southern are controlled by aristocrats migrated from north (e.g. to <mark>seek refuge</mark>)
    <ul>
      <li>recall that south had high humidity = lots of malaria</li>
      <li><strong>oldest form of spoken Chinese in the South</strong>, such as Fujian, because south had been “stale” while north was changing, e.g. interaction with steppe people.</li>
    </ul>
  </li>
  <li>the name “Six dynasties” come from the six dynasty that had capitals in <mark>Nanjing</mark> (Eastern Wu, Eastern Jin, Song, Qi, Liang, Chen)
    <ul>
      <li>it also overlapped the <mark>Sixteen Kingdoms</mark> period = warring in Northern China after fall of Western Jin</li>
      <li>the period of Northern Wei + Southern Song to before Sui is also called the <mark>Northern and Southern period</mark> 南北朝</li>
    </ul>
  </li>
  <li>Sui dynasty reunified china</li>
</ul>

<p><strong>The Three Kingdoms</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004132335086.png" alt="image-20221004132335086" style="zoom:33%;" /></p>

<ul>
  <li>the three rulers slowly rose to power at the end of Han, by being warlords</li>
  <li>by 205, Cao Cao had made themselves dictator of North China. Since there are so many Wei, we added the surname of the leader to give Cao Wei</li>
  <li>later on <strong>Cao Cao</strong> also defated <strong>Xiongnu</strong>, but never able to reunite the other empires, which ended with the <strong>Battle of the Red Cliff 赤壁之战</strong>
    <ul>
      <li>defeated by alliance between Shu and Sun, and the tiredness of his troops due to long distance marching</li>
      <li>he didn’t die there, but just failed to reunite</li>
    </ul>
  </li>
  <li>but <strong>eventually his Wei prevailed</strong> as it has twice the population, and won over the other state</li>
  <li>near the last of Wei’s heirs, Cao Shuang was executed and royal power weakened = rise and eclipsed by the <strong>Sima family</strong>.
    <ul>
      <li>They eventually took over change the dynasty to <mark>Jin 晋</mark></li>
      <li>first time a small reunion of China, but fell apart quickly by the <strong>War of Eight Princes</strong> (i.e. family member seeking power)</li>
      <li>subsequently, in 304, civil war within and northern invasion of the <mark>non-Chinese tribes</mark> collapsed</li>
      <li>Therefore, the north became the <mark>Sixteen Kingdoms period</mark> and the south is the <mark>Eastern Jin dynasty</mark></li>
    </ul>
  </li>
</ul>

<p><strong>Sixteen Kingdoms and Eastern Jin</strong></p>

<ul>
  <li>
    <p>Non-chinese joined the conflicts and made north a battle ground.</p>
  </li>
  <li>
    <p>life in the north was dangerous hence many people, especially Jin, packed up and fled south = <mark>Eastern Jin</mark></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004133417147.png" alt="image-20221004133417147" style="zoom:50%;" /></p>

    <p>but since there are aboriginal people there:</p>

    <ul>
      <li>the local populartion either pushed away or absorbed</li>
      <li>essentially Eastern Jin is still under the Sima Family</li>
    </ul>
  </li>
  <li>
    <p>one reason why Jin so shorted lived is because its choice of Government officials. The rise of aristocracy from Han through Tang</p>

    <ul>
      <li><mark>Warring States</mark>: on the basis of merit (<em>shi</em> class)</li>
      <li><mark>Qin</mark>: merit, as a firm principle</li>
      <li><mark>Han</mark>: by recommendation (rule of avoidance, so officials there are non-local) + exams
        <ul>
          <li>in reality, since officals are non-local, they basically asked people of importance <strong>at that local area</strong> for recommendation</li>
          <li>but later this became a problem, that it still became local recommendation by locals themselves</li>
        </ul>
      </li>
      <li><mark>Wei</mark> (under Cao Cao): and the whole era of disunity: the <strong>Nine-Grade</strong> system
        <ul>
          <li>every family will be assigned a rank = position in government, hence hereditary in nature</li>
          <li>this rank assignment depends in virtue, reputation, talent</li>
          <li><strong>long survival of elite status</strong>, and many of those clans persisted to the Tang dynasty
            <ul>
              <li>to preserve this, aristocrat should only marry aristocrat</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><mark>Sui</mark>: exams
        <ul>
          <li>realize that the exam is the fairest way</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Elite Aesthetics</strong>:</p>

<ul>
  <li>
    <p>in South China, the educated and the well-off <strong>competed in extravagence</strong>, instead of the virtue Confucious wanted</p>
  </li>
  <li>
    <p>these people are interested in mythical things, divination and supernatural (“Seven Sages of the Bamboo Grove” below)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004134535212.png" alt="image-20221004134535212" style="zoom:33%;" /></p>

    <p>for example, they loved drinking, and some also took drug.  Hence those elite people always try to be naked</p>

    <ul>
      <li>challenged public moral at the time, of what is virtuely right</li>
      <li>e.g. one was crying when an unmarried man died, but was eating and drinkg wine at his mother funeral = violated Confucious values</li>
    </ul>
  </li>
  <li>
    <p>but also a burst of self-expression in art and poetry</p>
  </li>
</ul>

<p><strong>Northwen Wei Dynasty</strong></p>

<ul>
  <li>
    <p><mark>Tuoba</mark>, which included tribes who spoke turkish, mongolish, etc. They invaded and controlled he nothern China after the Western Jin</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004135051914.png" alt="image-20221004135051914" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>however, Tuoba interested in the process of <mark>Sinicization</mark> (to Sinify: to make Chinese. Latin “Sinai”=Qin=Chinese)</p>

    <ul>
      <li>how can a minority population of Tuoba ($\approx$ 1 million) contorl the vast population of Chinese $\approx$ 20 million?</li>
      <li>one approach is Sinicization, which is wierd but largely because <strong>Emperor Xiaowen himself is admiring Chinese since childhood</strong></li>
      <li>proposed a new system of Equi-field, which is reminiscent of Han to tax individual cultivators
        <ul>
          <li>individual family assigned land depending on how many people they have</li>
          <li>this is to ensure that no-land is neglected, and that <strong>no people wander off</strong> (e.g. don’t want merchant and nomads)</li>
          <li>hence is useful for building a fiscal base</li>
        </ul>
      </li>
      <li><strong>Emperor Xiaowen:</strong> new captial in Luoyang and wanted to <mark>transform Xianbei鲜卑 into Chinese</mark>
        <ul>
          <li>used chinese surnames</li>
          <li>ordered Chinese clothings in court</li>
          <li>preferred Sinicized Chinese = elites of mixed ethnic backgrounds increasingly became the norm
            <ul>
              <li>Luoyang became popular, many Xianbei nobilities became versed in Chinese</li>
              <li>The cultural and ethnic integration <mark>laid the foundation for later reunification of the North and South by the Sui</mark></li>
            </ul>
          </li>
          <li>however, this eventually lead to the problem that military who are mostly Xianbei are being <mark>treated unfairly</mark> compared to mixed court officials. This can be said to tbe the root cause of the throw off for Emperor Xiaowen</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>the <strong>Ballad of Mulan</strong>, when the Northern Wei (where Mulan is born) was in war with ruan-ruan</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004135710984.png" alt="image-20221004135710984" style="zoom:33%;" /></p>

    <ul>
      <li>in the Ode the concept of <strong>Khan</strong> is equivalented to the concept of <strong>Son of Heaven</strong></li>
      <li>indicates the sinicization of north</li>
    </ul>
  </li>
  <li>
    <p>Resistance of Sinicization,</p>

    <ul>
      <li>this acceptance of Chinese culture would lead of loss of identities, and Xianbei in military did not enjoy status that sincized Xianbei in the court had</li>
      <li>since those unequal treatment made militaries unhappy, and lead to rebellion in 524</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004135907298.png" alt="image-20221004135907298" style="zoom: 67%;" /></p>
  </li>
  <li>
    <p>but later they all suffered from sinified Chinese, that a mix of culture differences induced alot of conflict</p>
  </li>
</ul>

<p><strong>Buddhism</strong>:</p>

<ul>
  <li>
    <p>provided a different way of conceving life, death, and cosmos</p>
  </li>
  <li>
    <p>Buddhism originated in India, a lot went to China from the trade routes</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004140127938.png" alt="image-20221004140127938" style="zoom: 33%;" /></p>
  </li>
  <li>
    <p>instead of a single creed, chinese Buddhism foundd a lot of ideas and practices</p>

    <ul>
      <li>met both <mark>Theravada</mark> (early buddihism, lesser vehicle) and <mark>Mahayana</mark> (later buddism, greater vehicle ‘that can carry more people to salvation’)</li>
      <li>problem of translation then was critical</li>
    </ul>
  </li>
  <li>
    <p>since Buddhism is in sanskrit, early translators used Daosim concepts to explain Buddhism</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004140458180.png" alt="image-20221004140458180" style="zoom: 33%;" /></p>

    <ul>
      <li>in the beginning, had lots of problems such as Nirvana $\to$ Wuwei</li>
      <li>then with <mark>Kumarajiva</mark> and his translation project coining new terms in Chinese (e.g. Niepan, to preserve the foreign phoenic), it became much more accurate</li>
    </ul>
  </li>
  <li>
    <p>how did <strong>Buddhism change Chinese culture at large</strong>?</p>

    <ul>
      <li>the idea of rebith, and people cycling through life is new to the Chinese</li>
      <li>added the idea of <strong>death is also suffering</strong>, hence Nirvana is important</li>
      <li>reshaped the <mark>relationship between the living and the ancestors</mark>
        <ul>
          <li>ancestors become “weak” beings needing to be saved (v.s. before, ancestors are made offerings and then gave help in return)</li>
          <li>how do you save them? Death can be lifted by merit, and <mark>merit can be transferred</mark>, e.g. by <mark>Buddhist clergy</mark></li>
          <li>remade the relationship between living and dead. Idea of ancestor are powerful has diminished</li>
        </ul>
      </li>
      <li>From the above, induced the rise of the <strong>importance of Buddhist clergy</strong></li>
    </ul>
  </li>
  <li>
    <p>how did <strong>China change Buddhism</strong>?</p>

    <ul>
      <li>
        <p>Mahayna buddhism became the famous one, China magnifies Mahayana. e.g. extending the influence to Japan as well</p>

        <ul>
          <li>e.g. Chan, or Zen in Japanese, all purely Chinese inventions</li>
        </ul>
      </li>
      <li>
        <p>developed specific Buddhist schools, all Mayhayana sects</p>

        <ul>
          <li><strong>Pure Land</strong>: preach by faith, hence very easy to pratice. Only need to recite the name of Amitabha. Hence welcomed by commoners</li>
          <li><strong>Zen buddism</strong>: needs meditation, more attractive to literate elite</li>
        </ul>
      </li>
      <li>
        <p>an example of locaization of Buddhism deity, Guan Yin of mercy and compassion.</p>

        <table>
          <thead>
            <tr>
              <th style="text-align: center">Original</th>
              <th style="text-align: center">In China</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004170004118.png" alt="image-20221004170004118" style="zoom:33%;" /></td>
              <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004141817604.png" alt="image-20221004141817604" style="zoom:25%;" /></td>
            </tr>
          </tbody>
        </table>

        <ul>
          <li>initially Guan Yin is a male in India, but in China, became female</li>
          <li>promoted the idea of <strong>equal gender</strong>: “presentation of gender is provisional, situational, audience-oriented”</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Rise of Daoism</strong>:</p>

<ul>
  <li>Though Han dynasty with popular with Confucious, there are still believers of Daoism and the notion of <strong>immortality</strong> (e.g. Lady Dai)</li>
  <li>during the Religious Daoism, those sporadic believers (e.g. farmers) suffered from taxations and wars. They <mark>wish for peaceful lives</mark> (near the end of Han), hence grouped up and <strong>formed a more powerful sect</strong> and started to gain governence in their own regions = the Yellow Turban, etc.</li>
</ul>

<p><strong>Religious Daoism</strong></p>

<ul>
  <li>
    <p>gained insights from Cihinese superstitions, and is for pursuing immortality (e.g. Qin and Emperor Wudi)</p>
  </li>
  <li>
    <p>but in 2nd century, there ermges religous Daoism: organized commual religous due to conflicts/dissent <mark>near end of Han</mark> (notice that <strong>something new happens near the end of a dynasty is pretty common by now</strong>)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004142119564.png" alt="image-20221004142119564" style="zoom:50%;" /></p>

    <ul>
      <li>Laozi is now made into a deity</li>
      <li>had two sects, by Zhang Daoling (五斗米道), and by Zhang Jiao (Yellow Turbans)</li>
      <li>those leaders claim they obtained new revelations and gained a lot believers</li>
    </ul>
  </li>
  <li>
    <p>eventually the growth of Daosim and the incoming Buddhistm lead to strong competition</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221004170739423.png" alt="image-20221004170739423" style="zoom: 33%;" /></p>

    <ul>
      <li>Daoist built temples v.s. Buddhist monasteris</li>
      <li>Daoist claim that they have better spells, soceries for protection and ailness, etc.</li>
    </ul>
  </li>
  <li>
    <p>There have been much efforts of one religion try to use the emperor to <strong>expel religion</strong>: but never had a single religion to dominate</p>

    <ul>
      <li>many western misconception therefore though Chinese religion had high tolerance, e.g. the exclusiveness of Islam and Christian</li>
      <li>but that is not true, the reality is that are also trying to exclude but just never works out</li>
    </ul>
  </li>
</ul>

<h1 id="sui-and-tang-581907">Sui and Tang (581–907)</h1>

<p><strong>Previously on the Age of Division</strong></p>

<ul>
  <li><mark>Eastern Han</mark>: falls from socioeconomic and environmental strain, and religious (e.g. Yellow Turf), peasant movements. Fractures into short-lived, celebrated Three Kingdoms period.</li>
  <li><mark>North-South</mark> division remains significant;
    <ul>
      <li>South underdeveloped, only has 1/6 of N.’s population;</li>
      <li>North: had mostly <strong>proto-Mongol or Turkic nomadic people</strong> including 1. Xiongnu, 2. Xianbei, 3. Tuoba establish series of “kingdoms” which are usually brief; Northern kingdoms see a degree of <mark>Sinicization</mark>, but reverse also occurs; ethnicity and culture are <mark>fluid</mark></li>
      <li>Differences in geography, climate, trade routes; the rise of aristocracy</li>
      <li>One of the legacies of the <mark>Northern Wei</mark> (Tuoba branch of Xianbei) is patronage of Buddhism, which was translated ‘through’ Daoism, (i.e. wuwei and nirvana)</li>
      <li><mark>Sui</mark> had a series of measures trying to unite and resolve the difference:
        <ul>
          <li>a law code equally applied to all</li>
          <li>the <strong>Grand Canal</strong>, which linked the Huang He and the Ch’ang Rivers and encouraged north-south trade within China</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><mark>Buddhism</mark> transforms culture; <mark>Chinese</mark> culture transforms Buddhism
    <ul>
      <li>Religious Daoism: in competion with Buddhism, wanted to get exclusive patronage by the emperors but never work out</li>
    </ul>
  </li>
</ul>

<p><strong>Reunification of Sui</strong></p>

<ul>
  <li>
    <p>some key milestones of Sui and later</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006132308299.png" alt="image-20221006132308299" style="zoom: 50%;" /></p>

    <ul>
      <li>Reunification under the Sui (581-618) <strong>Yang Jian 杨坚</strong></li>
      <li>Yang Guang杨广, the first emperor’s son when successed build the <strong>Grand Canal</strong> (try to keep China together) but also had extravagant rebuilding of capital at Luotang (critisized)</li>
      <li>Yang Guang’s campaign to Korea later was failed, and rebelliions broke out in China = emperor killed = <mark>Li Yuan founded Tang</mark></li>
      <li>Early Tang: mainly <mark>Emperor Taizong (Li Shimin)</mark> &amp; empire-building+conquering – Tang Cosmopolitanism: Chang’an and material culture</li>
      <li><mark>Empress Wu (Zetian)</mark>, who reigned for a long time, and the role of women</li>
      <li><strong>An Lushan Rebellion</strong> forced center to cede much power</li>
    </ul>
  </li>
  <li>
    <p><strong>rescined the ban</strong> on Buddhism and Daoism passed by the previous Northern Zhou dynasty in 574</p>

    <ul>
      <li>
        <p>monks were already working on Buddhist text protection in Zhou: digging caves and putting Buddhist texts incised in stone</p>
      </li>
      <li>
        <p>but Sui founder was himself a <mark>grand donor to Buddhism</mark>, built a lot of monasteries</p>
      </li>
    </ul>
  </li>
  <li>
    <p>mixed nordic and Chinese, a reunification of Chinese northern and southern states</p>

    <ul>
      <li>north and southern could have became a permanent separation</li>
      <li>new centralized bureucracy even stronger than in Han, and enforced it in a short periof of time (like Qin)</li>
    </ul>
  </li>
  <li>
    <p>later in Tang, the division seemed a much undesired situation</p>

    <ul>
      <li>as shown by Tang, unification = longer dynasty e.g. <strong>Han and Tang became an aim of every later ruler</strong></li>
    </ul>
  </li>
  <li>
    <p>since again, <mark>Sui</mark> are doing a lot but too soon (alike Qin)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006132844907.png" alt="image-20221006132844907" style="zoom:33%;" /></p>

    <p>where</p>

    <ul>
      <li>dig a canal to connect north and south, and to ship south resources to north</li>
      <li>faciliated and <strong>symbolizes the political reunification</strong> of south and north</li>
    </ul>
  </li>
  <li>
    <p>new system by exam in <mark>Sui</mark> = <strong>intended to deprive high aristocracy of power</strong></p>

    <ul>
      <li>opened to a somewhat larger population to serve in government</li>
      <li>but many successful candidates <strong>still correlates to power of rich families</strong></li>
    </ul>
  </li>
  <li>
    <p>second emperor wanted to rebuild the great wall, and build a road (much different from the first emperor of Sui, and very alike Qin)</p>
    <ul>
      <li>he also conmissioned lots of army to vietnam, turko-mongol in the north, and korea</li>
      <li>he did too much, <strong>distrupt dometic ecnomony, and with the failure of Korea, and became overthrown</strong></li>
    </ul>
  </li>
</ul>

<p><strong>Tang Founders</strong>: cosmopolitanism about elite culture</p>

<ul>
  <li>with the disintegration of the Sui dynasty in July 617, <mark>Li Yuan</mark> – urged on by his second son Li Shimin (李世民, the eventual Emperor Taizong) – rose in rebellion.
    <ul>
      <li>Using the title of “Great Chancellor” (大丞相), Li Yuan installed a puppet child emperor, Yang You, but eventually removed him altogether and established the Tang Dynasty in 618 as Emperor.</li>
      <li>His son and successor <mark>Li Shimin honoured him as Gaozu ("high founder")高祖</mark> after his death.</li>
      <li>and later <mark>Li Shiming become Tang Taizong</mark>, achieved by killing his brother and forced his father to step down
        <ul>
          <li>unethical as it violated Confucian norms, and hence a “legend” arose that emperor was summoned before the King of the dead</li>
          <li>the king of the dead asked why did you do it</li>
          <li>the emperor was terrified, and in the end sacrificied his family for the good of the empire</li>
          <li>shows the belief in afterlife and <mark>juristication of the courts of the dead</mark>, which is a norm of justice at that time</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>ruling in the north become multi-ethnic
    <ul>
      <li>lots of Tuoba intermariage, different families made different choices</li>
      <li>already in Sui: e.g. wife of the founder of Sui was Turkish, and the crazed son of Emperor Taizong (because his father killed his homosexual lover with a palane entertainer) insist on only speaking <strong>Turkish</strong>. Eventually his wife Wu Zhao took over and became <strong>Empress Wu</strong></li>
      <li>in general, very <strong>mixed identity in the north</strong></li>
    </ul>
  </li>
  <li>Tang followed a lot of Sui policies
    <ul>
      <li>both had a modified form of the <mark>equal-field system</mark>, which originated from Northern Wei by Dowager Empress Feng</li>
      <li>both retrained militia system of nothern dynasties (very ingrained into the population)</li>
    </ul>
  </li>
  <li>Tang’s founder is the <strong>Li family</strong>
    <ul>
      <li>also mixed ethnic background, spoke both Turkish and Chinese</li>
      <li>hence with <strong>a heavy Tuoba element and steppe culture</strong>, e.g. liked horse riding and hunting
        <ul>
          <li>steppe nomads learned to ride from a young age and were expert horsemen</li>
        </ul>
      </li>
      <li>after An Lushan rebellion, people wanted to draw a more clear ethnic lines</li>
    </ul>
  </li>
  <li>The tang was an age not just for cultural openenss but of <strong>political strength</strong>, and had much control over its citizens
    <ul>
      <li>official supervised markets carefully (e.g. periodically monitored prices), and also kept a close watch on rural residents</li>
    </ul>
  </li>
</ul>

<p><strong>Tang’s military culture: part of the elite identity</strong></p>

<ul>
  <li>
    <p>e.g. from Han, Wudi was a emperor of strong military</p>
  </li>
  <li>
    <p>in case of Tang, it is different from Han because</p>

    <ul>
      <li>
        <p>it is a militarized society, mixed of military <strong>and civilist cultures</strong></p>
      </li>
      <li>
        <p>the <strong>militia system 服兵</strong> made almost every person had some kind of military knowledge</p>

        <ul>
          <li><mark>Sui and Tang</mark> developed this system, which a way to privde a national army from a local level</li>
          <li>based off from equal-field system, so that given land = tax and <strong>to supply one soldier,</strong> but that soldier is exempt from taxes</li>
        </ul>
      </li>
      <li>
        <p>soldiers are serving by <mark>rotations</mark> (hence no permanent soldier = less concentrated regional power)</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006134140581.png" alt="image-20221006134140581" style="zoom:33%;" /></p>

        <ul>
          <li>when off duty = training</li>
          <li>when on duty = go to war if there are wars, otherwise patrols in captials, etc.</li>
          <li>don’t receive salaries, and so need to prepare their own equipmenet, horse, etc, but will have rewards from <strong>won battles</strong>
            <ul>
              <li>e.g. recall Mulan, who had to buy her own horse</li>
            </ul>
          </li>
          <li>won battles for rewards in land, cash, ranks, hence can be a way some family desires</li>
        </ul>
      </li>
      <li>
        <p>using the above system, the cost of launching wars is minimized. Hence lead to a high degree of military knowledge penetrating throughout the population</p>
      </li>
    </ul>
  </li>
  <li>
    <p>using this militia system, Tang got a lot of <strong>expansion success</strong></p>

    <ul>
      <li>
        <p>in 630, conquered Mongols in <strong>Mongolian</strong>. This victory gave Taizong a title “Heavenly Khan”<mark>天可汗</mark></p>
      </li>
      <li>
        <p>also campaigned western states</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006134530315.png" alt="image-20221006134530315" style="zoom:33%;" /></p>

        <p>which become mordern day Xinjiang</p>
      </li>
      <li>
        <p>but since a large part of Turkish soldier who were sent from tang’s army settled there, hence they people in Xinjiang speak turkish a lot</p>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Established Six Protectorates</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006134820782.png" alt="image-20221006134820782" style="zoom:33%;" /></p>

<ul>
  <li>a protectorates has a local ruler and autonomy</li>
  <li>the protectorate submits to the Tang emperor as the highest sovereign.</li>
  <li>a Tang was to pacified te region</li>
  <li>the protectorates also paied tributes ot the Tang, in return, emperor gave them licenses for trade = trade relationship</li>
</ul>

<p><strong>State-building at home</strong></p>

<ul>
  <li><mark>Tang Code</mark> of 653 was the earliest code to survive directly, read and copied (before other code was dug up + bamboo)
    <ul>
      <li>principles of crimilal laws, etc.</li>
      <li>many other countries (e.g. Japanase, Korea) adopted a lot of Tang code not for its content, but for the symbol of prosper</li>
      <li>but punishment depends on social status: priviledged, commoners, and inferior people (e.g. slaves)</li>
      <li>the code was also calibrated based on sex, age, and disabilities</li>
      <li><strong>reflected Legalist on appropriate treatment, but also espoused Confucianism values</strong> (e.g. killing own father much worse than killing a stranger)</li>
    </ul>
  </li>
  <li>promoted <mark>Confusion education</mark>, and expanded the <mark>civil exam</mark>
    <ul>
      <li>but still Tang’s offcials is only at the early state of change, most still come from wealthy family</li>
      <li>only 20-30 men passes the exam per year, hence bureaucracy still mostly domoinated by aristocrates</li>
      <li>the change is <strong>most intensified during Song</strong></li>
      <li>at the start of the Song, those great families started to fade away, perhaps rebellion targeted at aristocracy at the end of Tang = genocide.</li>
    </ul>
  </li>
</ul>

<p><strong>Tang’s openness</strong>: Changan长安 = eternal peace</p>

<ul>
  <li>recall that <strong>Chengzhou成周=Luoyang, Changan长安= Xi’an</strong></li>
  <li>Chang’an was rebuilt by Sui as a political statement, and was rebuilt by the Tang for the same reason = symbol of power</li>
</ul>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006135233371.png" alt="image-20221006135233371" style="zoom:33%;" /></p>

<ul>
  <li>
    <p>the city layout is highly planned, had 1 million living inside and approx another million just outside.</p>
  </li>
  <li>
    <p>a lot of walls for security purposes (had curfews, patrols, etc.)</p>
  </li>
  <li>
    <p>today none of the Tang outer walls remain, but only the Ming wall survived, which is approximate only around the palace city area</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006135408226.png" alt="image-20221006135408226" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>emperor palace in the north, and people lived in the rectangular units = a unit. Rich people lives closer ot the palace, and there are also two <strong>notable markets</strong>, where</p>

    <ul>
      <li>west markets are for foreign trades = most foreign merchant come form west</li>
      <li>east markets are for trading local goods</li>
    </ul>
  </li>
  <li>
    <p>the southern gate also had a <strong>very wide avenue: wide enough for much traffic</strong> (gone today. but below is reconstruction)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006135627741.png" alt="image-20221006135627741" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>Emperor Taizong is very interested by Xuanzang玄奘, a Buddhist in search of Buddhist scripture and came back</p>

    <ul>
      <li>He is known for the epoch-making contributions to Chinese Buddhism, the travelogue of his journey to India in 629–645 CE, his efforts to bring over 657 Indian texts to China, and his translations of some of these texts</li>
      <li>inspired the modern novel: <strong>The journey to the West (西天取经)</strong>, to depict Xuanzang’s journey in search of the Buddhist script</li>
    </ul>
  </li>
  <li>
    <p>knowledge of outside world largely <strong>influenced by those exotic goods, central asian musicians, magician</strong>, etc.</p>

    <ul>
      <li>attest the love of Tang elite for cosmopolitan cultures and especially those of the central asia</li>
      <li>but they had a hard time diferentiate those foreign people, <strong>so called them “Hu”</strong></li>
    </ul>
  </li>
</ul>

<p><strong>Who are the Hu 胡?</strong></p>

<ul>
  <li>
    <p>general term for foreigners from the north or west. The origin might be related to homophone “beard.”</p>
  </li>
  <li>
    <p>North influences: steppe peoples, Xiongnu, Xianbei, Mongols.</p>
  </li>
  <li>
    <p>West influences: Sogdians, Parthians, Persians, Turkic.</p>

    <ul>
      <li><strong>Sodigans</strong> was an ancient <strong>Iranian</strong> civilization between the Amu Darya and the Syr Darya, and in present-day Uzbekistan, Turkmenistan, Tajikistan, Kazakhstan, and Kyrgyzstan.</li>
      <li>sodigans were quite useful - important <strong>middle-men of Tang and Byzantine empires.</strong></li>
      <li>Sodigans are also <strong>promininet among military</strong> (e.g. soldiers) and merchants in Tang</li>
      <li>hence have a lot of Sogdian figurines: stablemen, soldiers, musicians.</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006140016892.png" alt="image-20221006140016892" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>those <mark>Sogdian people also brought a major changes to Chinese music</mark> (and dance)</p>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006140105446.png" alt="image-20221006140105446" style="zoom:33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006140445166.png" alt="image-20221006140445166" style="zoom:33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>

    <ul>
      <li>pipa was from western asia, but now is a major musical instrument in China</li>
    </ul>
  </li>
  <li>
    <p>before Tang, all chinese sit on the ground with the formal sitting position, but then in Tang people begins to <strong>sit in the chair</strong> (slowly shifts away to a new pose)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006140624154.png" alt="image-20221006140624154" style="zoom:33%;" /></p>
  </li>
</ul>

<p><strong>Tang Trade</strong></p>

<ul>
  <li>
    <p>some people say it is buddhist monks <strong>brought chairs in for trade</strong></p>
  </li>
  <li>
    <p>Samarkand-based Sogdiana and Ferghana supplied fine <strong>horses</strong></p>
  </li>
  <li>
    <p>many exotic foods</p>

    <ul>
      <li>from Central Asia: peas, spinach, garlic.</li>
      <li>from Persia: sesame, pistachios.</li>
      <li>from India: black pepper, cane sugar (native sweetener: malt sugar &amp; honey) • from Mediterranean: coriander.</li>
      <li>grape wine available in Chang’an.</li>
      <li>lychee delivered daily from warm southlands for Consort Yang.</li>
    </ul>
  </li>
  <li>
    <p>Tea became a national drink and a major trade item.</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006141031697.png" alt="image-20221006141031697" style="zoom:33%;" /></p>

    <ul>
      <li>throught the history people had their own “culture” during their time. In Tang, a specialized tea set above</li>
      <li>added ingredients such as salt, citric peel, etc.</li>
    </ul>
  </li>
</ul>

<p><strong>Life of Commoners and Merchants</strong></p>

<ul>
  <li>merchants much well off than commoners, who need to to menial jobs such as maintaingin gardens</li>
  <li>with the “Tale of Li Wa”, which talked about a <strong>high officials family background</strong> young man came for examination $\to$ attracted to Li Wa, a prostitute $\to$ used up all his money and was abandoned $\to$ became a begger, almost died, saved by employees at funeral shop $\to$ became a famous professional mourner $\to$ father found out and beated him almost to death (assuming the status of polluted, inferior person) $\to$ saved by Li Wa $\to$ studied hard and <strong>became a official</strong></li>
  <li>shows that <mark>flux of social class is not that encouraged</mark></li>
</ul>

<p><strong>Examinations in Tang</strong></p>

<ul>
  <li>exams are used to recruit men of good character</li>
  <li>therefore, taking examinations = regularly <mark>visiting examiners and giving them samples of your writing</mark></li>
  <li>but the good writings = poetry = only those brought up in a good family could be expected to know</li>
  <li>importance of poetry also lead to <strong>explosion in poetry writing</strong></li>
  <li>but it ended still with majority of the court composing people from families of high social status</li>
</ul>

<p><strong>Religion in Tang</strong></p>

<ul>
  <li>
    <p><strong>Buddhist</strong> and <strong>Daosit</strong> are the major players, and <strong>Confucian</strong> central to states, but more patronized Daoism</p>

    <ul>
      <li>Confucianism thought more like “framework”/structure for organizing the governments, e.g. <mark>train candidates in Confucian classics</mark>.</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006141208343.png" alt="image-20221006141208343" style="zoom:33%;" /></p>

    <ul>
      <li>more support for Daoism, because imperial famly claimed their origin can be traced back to Laozi</li>
      <li>influnce of Buddism is still everywhere, a lot of monarsteries</li>
    </ul>
  </li>
</ul>

<p><strong>Tang “soft power” and Japan</strong></p>

<ul>
  <li>
    <p>properous of China attracted much foreign countries who also seek to build an empire (e.g. many <strong>Korean and Japanese</strong> in Chang’an)</p>
  </li>
  <li>
    <p>Japanese connection also became much deeper</p>
    <ul>
      <li>Japan rulers were also tring to establish empire, since Tang had been so powerful</li>
      <li>based their policy on Japanese pepole who travelled to China study stuff and taking back to Japan with them, and relied on a lot of Buddhists</li>
      <li>the capital of Nara built in 618, and then <strong>Kyoto built in 794 are smaller versions of Chang’an</strong>: square in shape, geometrically aligned on a north-south axis; grid structure.</li>
      <li>Kimono is from China, and lots of <strong>Tang scriptures are importanted to Japanese</strong> (who has spoken laguage but not written)</li>
    </ul>
  </li>
</ul>

<p><strong>Dynasty Names Adopted as Ethnic Term for Chinese</strong></p>

<ul>
  <li><mark>Han</mark> mainly used in mainland China
    <ul>
      <li>in 20th century mainland, China’s national ethnicity is constructed and called “Han”</li>
      <li>national language also called “Han language”</li>
    </ul>
  </li>
  <li><mark>Tang</mark>, more popular used for the Western, e.g. Tangren Jie=China Town
    <ul>
      <li>because first migration was Cantonese speaking diaspora (control of them was solidified during Tang)</li>
      <li>Tang also had a much broader contact with the <strong>rest of the world</strong></li>
    </ul>
  </li>
</ul>

<p><strong>Empress Wu: only woman emperor in China</strong></p>

<ul>
  <li>previous empres are mostly regent, dowager</li>
  <li>personal name <mark>Wu Zetian</mark>
    <ul>
      <li>regent, 660-690; as the Emperor of Zhou, 690-705</li>
      <li>ruled very capably, but there exists evidence her approach are sometimes ruthless</li>
    </ul>
  </li>
  <li>her real look must be beutiful (praised by emperor), was borned into a wealth family
    <ul>
      <li>encouraged to read and write in family</li>
      <li>married to emperor family</li>
      <li>interesting story of how she came to power, e.g. was concubine of Taizong, but when Taizong died, bore the first child of Gaozong (from whom she took power from), which indicates incest</li>
    </ul>
  </li>
  <li>
    <p>She successfully succeeded the throne largely because lots of officials also supported her, and <mark>justified by using Buddism</mark></p>

    <ul>
      <li>a monk wrote a commentary that told of a female goddess (hint at Empress Wu) who would be reborn as a princess in a small kingdom, etc.</li>
    </ul>
  </li>
  <li>later <strong>Xuanzong</strong> made China the most properperous time, but was built by Empress Wu</li>
  <li>but still since Empress = <strong>upset a balance of nature, hence some scholars are still concerned</strong>
    <ul>
      <li>Confucious idea that natural diasters = emperor problem (Dong Zhongshu, a ruler who did not fullfill = nature diaster)</li>
      <li>earth quake happened, and ministers took it as a problem</li>
      <li>hence, some portray her as a ruthless ruler (e.g. because scribes are mane)</li>
    </ul>
  </li>
  <li>
    <p>avent sponsor of Buddhistm, but to user religion in her favor (e.g. justify her throne)</p>
  </li>
  <li>
    <p>in general Tang people had freeodm and under her, <strong>women (tried) to have better freedom</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221006142234989.png" alt="image-20221006142234989" style="zoom:33%;" /></p>

    <ul>
      <li>e.g. shifts in beauty standards: women on horse also appealing.</li>
    </ul>
  </li>
  <li>
    <p>The importance to history of Wu Zetian’s period of <strong>political and military leadership includes the major expansion of the Chinese empire</strong>, extending it far beyond its previous territorial limits, deep into Central Asia, and engaging in a series of wars on the Korean Peninsula, first allying with Silla against Goguryeo, and then against Silla over the occupation of former Goguryeo territory.</p>
  </li>
  <li>
    <p>other notable changes in value include:</p>

    <ul>
      <li>as <strong>wife</strong>
        <ul>
          <li>main wife but not cocubine</li>
          <li>men have shorter lifespans than women, so the wife often becomes the only head of the household.</li>
        </ul>
      </li>
      <li>as <strong>mother</strong>
        <ul>
          <li>should continue have influence even when sons become adults</li>
          <li>cocubine is lower in status, hence concubine’s son should regard main wife as mother</li>
        </ul>
      </li>
      <li>as <strong>clan advodate</strong>:
        <ul>
          <li>encouraged women’s position in government, but still install family males to most positions especially to military</li>
          <li>this is anyway too big of a change for a complete equality of gender here</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>Interesting Note</strong> from primary sources:</p>

  <ul>
    <li>Emperor Taizong’s advice on effective government: land is large, need cooperation = give relatives land. Zhou is a successful model lasted several centuries
      <ul>
        <li>Qin had zero relatives to rely on (Li Si’s plan) hence failed</li>
        <li>Han enfeoffed the land too generously: the Six Kingds harbored ambitions of overthrowing throne</li>
        <li>so the best way is to enfeoff many relatives to even up their power and to have them regulate one another and share responsibilities</li>
        <li>and for government officials: 适才所用</li>
        <li>military cannot be eliminated nor used all the time</li>
        <li>emphasis of literary arts and military arts</li>
      </ul>
    </li>
  </ul>
</blockquote>

<h2 id="the-decline-of-tang">The Decline of Tang</h2>

<p><strong>Previously on Sui and Tang</strong></p>

<ul>
  <li>
    <p>Sui-Tang continuity: Tang was a successor to the Sui and Northern Dynasties</p>
  </li>
  <li>
    <p>Three features of Tang culture (mostly elite)</p>

    <ul>
      <li>
        <p>cosmopolitanism: ethnic diversity, Tang ruling family (Li) as a classic example</p>
      </li>
      <li>
        <p>importance of military pursuits and military cultures to elite identity; a more militarized society than later period</p>
      </li>
      <li>
        <p>aristocracy remained dominant in government (the system of examination is only fully utilized for social flux at Song Dynasty)</p>
      </li>
    </ul>
  </li>
  <li>Tang Empire (618-907) marks <strong>culmination of the turn toward Central Asia</strong> that began in the Han Dynasty, and continued through age of disunity. Tang military institutions, urban culture, silk road trade and religious life look westward
    <ul>
      <li>however, in Late Tang due to much political disunity they withdrawn their troops and lost most of the control in Central Asia</li>
    </ul>
  </li>
  <li>Emperor Wu Zetian is the only woman to rule under her own name; powerful and competent (some ruthless approaches), expanded empire, but disparaged by later generations because she is a woman</li>
</ul>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011132556798.png" alt="image-20221011132556798" style="zoom: 50%;" /></p>

<p><strong>Emperor Xuanzong: the peak of the Tang</strong></p>

<ul>
  <li>
    <p><strong>Emperor Xuanzong:</strong> early half of his reign: astute ruler, the empire expanded to the high point; patronage of the arts (especially poets)</p>

    <ul>
      <li>Empress Wu had his daughter tried to poison her, trying to become the next empress. So there were some instability, but Emperor Xuanzong made it</li>
      <li>recall that Empress Wu had a lot of her family relatives in government posts, and sponsored a lot of Buddhism, e.g. claimed that she is the incarnation of Bodhisattva. Emperor Xuanzong tried to <strong>redress/reform</strong> those
        <ul>
          <li>he also reformed Equal-Field system due tax problems encountered during their time</li>
        </ul>
      </li>
      <li>there were also threats from the Turks, Tibetans, so he restructured military system and give commanders great authority (among them he particularly gave <strong>An Lushan much power</strong>)</li>
    </ul>
  </li>
  <li>
    <p>change of women’s clothing, don’t reveal shoulders or backs</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011132658550.png" alt="image-20221011132658550" style="zoom:33%;" /></p>

    <p>yet this type of dress (rightest) is not for commoners, and it is more popular for them to wear men’s clothing = meaning more physical mobility. An example below are all women:</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011132739433.png" alt="image-20221011132739433" style="zoom:33%;" /></p>

    <p>hence this tells something about the change of attitudes towards women</p>

    <ul>
      <li>
        <p><mark>freedom of women wearing riding trousers with faces uncovered</mark>, where as in later centuries women of equivalent status would always be veiled, ear robes, and <mark>be restricted to sedan chairs (Song dynasty)</mark></p>
      </li>
      <li>
        <p>but unfortunately due to decline of Tang later, it reverted to conversative clothing</p>
      </li>
    </ul>
  </li>
  <li>
    <p>however, at late ages had some problem. He fell in love with Prized-Consort Yang杨贵妃, and gave too much power to her</p>

    <ul>
      <li>falling in love with 杨贵妃, who lacked political sense, even when he is 60</li>
      <li>gave too much power to Yang and her relatives, so they almost monolpolized the government</li>
      <li>basically becomes a femme fatale</li>
      <li>
        <p>An Lushan liked by Emperor, but relative from Yang’s family disliked his power, so <mark>arrested and executed An Lushan's supporters in court</mark></p>
      </li>
      <li>this oral history and gossip recorded in Bai Juyi’s “A Song of Unending Sorrow”</li>
    </ul>
  </li>
  <li>
    <p>however, Yang did show us the standard of beauty at that time is to be a little bit chubby</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011134021391.png" alt="image-20221011134021391" style="zoom: 33%;" /></p>
  </li>
</ul>

<p><strong>Battle at Talas</strong>: in modern Khazakhstan</p>

<ul>
  <li>suprised by the sudden defection of China’s tribal allies, the Chinese <strong>lost the battle to the Islamic Abbasid caliphate</strong></li>
  <li>marked the beginning when <mark>region of Central Asia turned away from China towards the Islamic world</mark></li>
</ul>

<p><strong>General An Lushan’s rebellion (755)</strong></p>

<ul>
  <li>
    <p>recall that Yang Guozhong (cousin of Prized-Consort Yang, chief minister) began to purge members of General An Lushan’s faction due to Yang’s relative’s dominance in court</p>
  </li>
  <li>
    <p>also at that time, due to malfunctioning of equal-field system, <mark>state relies on soldiers from alien tribes instead of collected from each field</mark></p>

    <ul>
      <li>problem 1), they <strong>don’t pledge alliance to Tang</strong></li>
      <li>problem 2), they become <strong>long-lasting</strong>, whereas equal-field collected soldiers will go back home</li>
      <li>problem 3), An Lushan was also particularly powerful due to prior likings of Emperor Xuanzong</li>
    </ul>
  </li>
  <li>
    <p>General An Lushan:</p>

    <ul>
      <li>commanded two large frontier armies in the northeast, in modern-day Beijing.</li>
      <li>father was Turkish; mother was Sogdian.</li>
      <li>alarmed that his supporters at court were being arrested and executed.</li>
      <li><mark>in 755, leads an army of 150K troops towards the capital cities</mark>.</li>
      <li>he first captures Luoyang, the ‘eastern capital’ on the edge of the plains.</li>
      <li>from Luoyang, the fortified Tong Pass blocked westward passage to Chang’an.</li>
      <li>but Yang Guozhong pressed imperial forces to leave the Pass and do battle—and were destroyed by An Lushan. - <strong>frontier troops were professional, war veterans</strong>; capital troops, unseasoned.</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011134349910.png" alt="image-20221011134349910" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>as a result, Emperor Xuanzong flees from Chang’an to Chengdu (modern-day Sichuan), and eventually abdicates the thrown to his son.</p>

    <ul>
      <li>note that Chengdu is also the capital of Shu, and hence “The road to Shu is steep” from Li Bai is relevant</li>
    </ul>
  </li>
</ul>

<p><strong>Consequences of this rebellion</strong>? A major turning point for Tang: decline of Tang stability</p>

<ul>
  <li>Tang’s forces in central asia has to be recalled for rescue. <mark>Tibetan Empire and Muslim Caliphate</mark> are also encroaching those areas, so a retreat made Tang a lost of control there, which eventually caused the lost of control of the Silk Road
    <ul>
      <li>Xinjiang ceded to Tibetan empire and Muslim Caliphate</li>
      <li>central asia then changed from Buddhism to Islam</li>
      <li>cut-off from horse supplies due to lost of Silk Road</li>
      <li>became less cosmopolitan in western eyes</li>
      <li>without this buffer zone frontier, capial Changan is more exposed to incursion</li>
    </ul>
  </li>
  <li>rise of regional warlordism: to quell the rebellion, Xuanzong <strong>gave a lot of power for regional governors</strong>.
    <ul>
      <li>then those regional governments <strong>later</strong> made themselves <strong>autonomous</strong>, hence results in political chaos</li>
      <li>but also caused an even further increase in local military knowledge</li>
    </ul>
  </li>
  <li>rebellion resulted from, caused, or simply coincided with
    <ul>
      <li><strong>collapse of the equal-field system</strong> (for collecting tax revenue)
        <ul>
          <li>during quenching rebellions, system of household registration collapsed = does not know how many residents are there = cannot collect tax</li>
          <li>because there is a shortage of land (due to population increase, aristocrats gathered too much land). Government cannot raise enough revenue.</li>
          <li>lost hold of household registrar = <mark>lost direct control of the people</mark>! Then then had to rely on regional governments to report those numbers, which never works out.</li>
        </ul>
      </li>
      <li><strong>collapse of the militia system</strong>, since no money, hence has to relie on <mark>foreign solders</mark> who pledged alligence to comamnder bu tnot dynasty</li>
    </ul>
  </li>
  <li>all of those contributed to the collapse of the down fall of Tang</li>
  <li>this is also a period of time hard for ordinary people to survive, e.g. as deadly as first world war
    <ul>
      <li>as the battle happed in the capital, Du Fu and his family fled. This also becomes a major turning point in Du Fu’s life</li>
    </ul>
  </li>
</ul>

<p><strong>Poetry: Li Bai and Du Fu</strong></p>

<ul>
  <li>
    <p>they are friends but differ greatly in work. Li Bai write about nature, especially wine, but <mark>Du Fu is more for his social consciousness</mark> (e.g. events happening at Tang)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011135256440.png" alt="image-20221011135256440" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>the rebellion was also a turning point of Du Fu</p>

    <ul>
      <li>no longer a confident scholar, but become an ordinary person, hence his <strong>writing style becomes much heavier and realistic</strong></li>
      <li>became a helpless pawn, and wanted to write the things he wanted to say (<em>春望</em>: 国破山河在, …)</li>
    </ul>
  </li>
</ul>

<p><strong>Change of Territory</strong></p>

<ul>
  <li>
    <p>Tang is the first dynasty where knowledge of the outside world is really accessible for China commoners lives (e.g. in west markets, and pilgrim, merchants, caravans have been traveling back and forth). Before in Zhou dynasties, and even in Tang, those knowledges are mostly exclusive to the court</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011140358147.png" alt="image-20221011140358147" style="zoom:33%;" /></p>

    <p>but now, China can no longer see himself as the only civilized nation (e.g. Zhou King once said the others are barbarians). Several other great civilizations exist, for the control of Central Asia trade routes</p>
  </li>
  <li>
    <p>Muhhamad preaches <mark>Islam</mark></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011140615505.png" alt="image-20221011140615505" style="zoom:33%;" /></p>
  </li>
  <li>
    <p><mark>Arab Caliphate</mark> v.s. Tang, wanted Tang’s submission</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011140727895.png" alt="image-20221011140727895" style="zoom:33%;" /></p>

    <p>which was before An Lushan, where Tang had some initial success but suffered a decisive defeat shortly before An Lushan Rebellion.</p>

    <ul>
      <li>
        <p>Defeat = those Chinese painters, craftsmen are taken as prisoners in Caliphate  = introduction of paper making and gave technology away</p>
      </li>
      <li>people argue that this also marks the end of Tang’s west expansion</li>
      <li>sooner or later Islam also spread in thos area</li>
    </ul>
  </li>
  <li>
    <p>another force was <mark>Tibetan Empire</mark> in the mid-7th century</p>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011141035756.png" alt="image-20221011141035756" style="zoom:33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011141316127.png" alt="image-20221011141316127" style="zoom: 33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>

    <p>the birth of this Empire comes from Songtsen Gampo, lead to organized state and powers</p>

    <ul>
      <li>Tang wanted a peaceful relation, hence had consort sent to Tibetan King, and made alliance with Tibet</li>
      <li>this princess is said to bring agricultural technologies, and to introduce Buddhism</li>
      <li>later, Songtsen Gampo also married a Nepal princess, who had their own version of Buddhism</li>
      <li>after Songtsen Gampo, (esoteric) Buddhism became Tibet’s religion, but very differnt from Buddhism in China</li>
    </ul>

    <p>even though there are some peaceful times, it eventually deteriorated. So after An Lushan, <strong>Tibetan Empire recaptured the land and tried to press on deeper in China</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011141657620.png" alt="image-20221011141657620" style="zoom: 50%;" /></p>

    <p>this also caused the direct routes for Silk Road is no longer at Chinese hands</p>
  </li>
</ul>

<p><strong>Examination System In Late Tang</strong>: Bai Juyi</p>

<ul>
  <li>even after all those territorial changes, the system of examination stayed basically the same as in Early Tang</li>
  <li>exams tested on
    <ul>
      <li>classics and literary ability/merit: write essays on a given topic</li>
      <li><mark>social ability: establish good relations with examiners</mark>
        <ul>
          <li>sons of powerful official families often given high scores, hence still mostly elite families in offices</li>
          <li><strong>In 800, for once the exam is just based on merit, and Bai Juyi passed</strong></li>
          <li>a different structure in Song</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>The Rise of Eunuchs</strong></p>

<ul>
  <li>usually eunuchs are for serving women’s quarters (guard the women’s living areas), and some for messengers and some for spies on military commanders</li>
  <li>but after An Lushan’s rebellion, they began to
    <ul>
      <li>gain control of the emperor’s personal army</li>
      <li>placing adopted sons into different offices, and forming factions with each other</li>
      <li><mark>hence eventually obtained high positions and controls</mark></li>
    </ul>
  </li>
  <li>over the ninth century, there are eight more changes of emperor where each accession was <strong>engineered by eunuchs</strong> working in concert with political factions
    <ul>
      <li>hence, life at court such as Bai Juyi depended a lot on <strong>which faction is in current power</strong></li>
    </ul>
  </li>
</ul>

<p><strong>Mogao Caves and Dunhuang Library</strong></p>

<ul>
  <li>The ‘Caves of the Thousand Buddhas’ (Qianfodong), also known as <mark>Mogao</mark>, are a <mark>magnificent treasure trove of Buddhist art</mark>. They are located in the desert, about 15 miles south-east of the town of Dunhuang
    <ul>
      <li>By the late fourth century, the area had become a busy desert crossroads on the caravan routes of the Silk Road linking China and the West. Traders, pilgrims, and other travelers <strong>stopped at the oasis town to secure provisions, pray</strong> for the journey ahead or give thanks for their survival.</li>
    </ul>
  </li>
  <li>
    <p>adjacent to one of the caves was the <strong>hidden Dunhuang Library</strong> discovered by Daoist Wang: a secret library of 40,000 documents was discovered inside cave #16 by Wang Yuanlu. The library is referred to as cave #17</p>

    <ul>
      <li>almost half of the text where Buddhist text in Chinese or Tibetan</li>
      <li>first time purely <mark>original documents not for public use</mark> (compared to books written after the fact) to reveal the real life - religious and civil in Tang.</li>
      <li>but because papers are <mark>recycled, the margins and backs display all kinds of documents</mark>, including literacy work, contracts, government documents, etc.</li>
    </ul>
  </li>
  <li>
    <p>some civil and religious life revealed include</p>

    <ul>
      <li>
        <p>During the thousand years of artistic activity at Dunhuang, the <strong>style of the wall paintings</strong> and sculptures changed. The early caves show greater Indian and Western influence, while during the Tang dynasty (618–906 C.E.) the influence of the Chinese painting styles of the imperial court is apparent.</p>
      </li>
      <li>
        <p>donor portraits with <strong>Xianbei ethnic feature</strong></p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013215226656.png" alt="image-20221013215226656" style="zoom:33%;" /></p>
      </li>
      <li>
        <p><strong>monasteries at Dunhuang</strong> also ran a variety of money-making enterprises, including oil presses</p>
      </li>
      <li>
        <p>Sodigan letters, Irq Bitig (8th-9th c), the only Old Turkic manuscript partially overwritten with Buddhist verses in Chinese</p>
      </li>
    </ul>
  </li>
</ul>

<p><strong>The Beginning of Printing</strong></p>

<ul>
  <li>
    <p>the first printed book found in Dunhang library cave.</p>
  </li>
  <li>
    <p>during Tang there were a high demand for texts (e.g. religions), hence lead to invention of woodblock printing, and later in Song 活体印刷</p>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011142335264.png" alt="image-20221011142335264" style="zoom: 33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011142345272.png" alt="image-20221011142345272" style="zoom: 33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>

    <p>where the problem with the old technique is that if you made a mistake, the whole mold is useless</p>
  </li>
</ul>

<p><strong>Persecution of Buddhism</strong> (840 - 846)</p>

<ul>
  <li>many aristocrats were using land as Buddhism temples to <strong>evade tax</strong></li>
  <li>but also a lot of conflict between Buddhism v.s. Daoism and Confucianism</li>
  <li>at the end of Tang <strong>persecution of Buddhism provoked by Daoist</strong>, but also <strong>rationalized by Confucians</strong>
    <ul>
      <li>sees those temples asked commoners to buy weird goods and donate money while <strong>undermining tax revenues</strong></li>
      <li>see Buddhism to undermine family ties, give up your own responsibility and become a monk, hence violates Confucians ideal</li>
      <li>during (840-846), also as emperor favored Daoist, Buddhism was persecuted =  lots of monks and nuns have to be returned to their normal social status</li>
      <li>while Buddhism did not diminish, <strong>their impact in China never rose again to the peak in early times</strong></li>
    </ul>
  </li>
</ul>

<p><strong>Huang Chao Rebellion</strong></p>

<ul>
  <li>
    <p>ruined Chang’an, never again as China’s capital</p>
  </li>
  <li>
    <p>put an end to high aristocracy in court by <mark>targeting the aristocrats of Tang</mark></p>
  </li>
  <li>
    <p>contributed to the fall of Tang in 907, and the distribution of power in China after the rebellion becomes</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221011165258535.png" alt="image-20221011165258535" style="zoom: 50%;" /></p>
  </li>
</ul>

<h1 id="song-960-1276">Song (960-1276)</h1>

<p><strong>Previous only the downfall of Tang</strong></p>

<ul>
  <li>Tang critically weakened by the An Lushan rebellion (755-63), allegedly caused by intrigue surrounding the Precious Consort Yang, Tang dynasty enters decline
    <ul>
      <li>retreat of forces in Central Asia lost control of it</li>
    </ul>
  </li>
  <li>Eurasian Empires in the 8th century: Tang, Tibetans, Muslims, Uyghur-Turks
    <ul>
      <li><strong>Tibetan Empire</strong>: Songtsen Gampo, Princess Wencheng. Eventually took over the Hexi corridor which is critical for Tang’s access to Central Asia</li>
      <li><strong>Abbasid Empire (Muslims)</strong>: the Battle of Talas (751) between the Tang and Abbasids, signals <mark>Tang loss of control over silk road and central Asia</mark></li>
    </ul>
  </li>
  <li>The <strong>Mogao Caves</strong> in Dunhuang: provide an abundance of vivid materials depicting Buddhist arts, religion, culture (4th-14th c), the largest body of Buddhist art in China; the <strong>library</strong> found there includes many secular texts that tell about politics, economics, ethnic relations of the local society in western China.</li>
  <li>Persecution of Buddhism: an example of conflicts between religion and state
    <ul>
      <li>Buddhist monasteries before operated oils, loans, banking services, and hold a large land being tax-exempted</li>
      <li>hence the central government became annoyed especially when they don’t have enough tax revenue</li>
      <li>Buddhism survived the persecution, but never reached its peak status as in Tang until today</li>
    </ul>
  </li>
  <li>Regional <mark>rise of warlords in late Tang</mark> (just like the final breakup in the Han dynasty)
    <ul>
      <li>government became decentralized during rebellion, and many elites fleed and clustered in Chang’an and Luoyang.</li>
      <li>then those elites are obliterated/almost compteletly wiped out during <strong>Huang Chao Rebellion</strong></li>
      <li>hence a period of disunion in 907 - 960, and the Wei river valley, <mark>Chang'an + Luoyang never again reach their prosper in the past</mark></li>
      <li>therefore, this removal of stale upper-class aristocrats also <strong>contributed to the success of the civil service exam</strong> in Song = really based on merit = based on your ability to read, understanding Confucian classics</li>
    </ul>
  </li>
</ul>

<h2 id="an-early-modernity-in-song">An Early Modernity in Song</h2>

<p><strong>China’s Population throughout History</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013132228281.png" alt="image-20221013132228281" style="zoom: 33%;" /></p>

<ul>
  <li>
    <p>inability of government in Tang might not mean bad economy. In fact, late Tang stimulated economy: rise of population, almost doubled even during Tang decline</p>
  </li>
  <li>
    <p>also a significant <strong>shift of population from north to south</strong>.</p>

    <ul>
      <li>Before North:South population is 2:1 in Early Tang</li>
      <li>After An Lushan Rebellion 1:1</li>
      <li>In Southern Song 1:2, when their capital in Kaifeng is sacked</li>
    </ul>
  </li>
  <li>
    <p>late Tang also have lots of <strong>technological developments, such as paddle-wheel Ship and Woodblock Printing</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013132427835.png" alt="image-20221013132427835" style="zoom:50%;" /></p>
  </li>
</ul>

<p><strong>Song Territory</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013132547104.png" alt="image-20221013132547104" style="zoom: 50%;" /></p>

<ul>
  <li>Song’s territory is the smallest among all of Tang, Song, Yuan, Ming, Qing</li>
  <li>also divided in two periods.
    <ul>
      <li>Early/Northern Song rules both north and south, including Kaifeng</li>
      <li>Late/Southern Song rules only capital at Hangzhou (Kaifeng is sacked by the northern enemies, i.e. the <strong>Jurchen forces</strong>)</li>
    </ul>
  </li>
  <li>but Song in general have a <mark>modern economy</mark> being industrialized and monetized</li>
</ul>

<p><strong>Agricultural Leap in Song</strong>: factors contributing to rise/improvement in agriculture</p>

<ul>
  <li>
    <p>new strains of rice from Champa/Vietnam = more rice yield as it can harvest twice a year</p>
  </li>
  <li>
    <p>mass iron production for plows and farm tools</p>
  </li>
  <li>
    <p>mobilization of bio-power (human and animal labor inputs).</p>
  </li>
  <li>
    <p>improved, intensive farming techniques of rice plots.</p>

    <ul>
      <li>wider application of fertilizers</li>
    </ul>
  </li>
  <li>
    <p>dikes, canals to convert wetlands to farmland.</p>
  </li>
  <li>
    <p><mark>advances in water/irrigation control</mark>, including pump and water mills</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Pump</th>
          <th style="text-align: center">Mill</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013133119636.png" alt="image-20221013133119636" style="zoom:33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013133217766.png" alt="image-20221013133217766" style="zoom:33%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>hence families can get more rice then needed = can sell the rest and exchange goods</p>
  </li>
  <li>
    <p>as a result, population doubles to 120 million, from 60-65 million in Tang</p>
  </li>
</ul>

<p><strong>Commericial Modernization in Song</strong></p>

<ul>
  <li>
    <p>new/more agriculture techniques + invention means more <strong>specialization</strong></p>

    <ul>
      <li>
        <p>peasants can just <mark>exchange</mark> for other goods instead of trying to produce it themselves</p>
      </li>
      <li>
        <p>in late Song cottons=cash crop</p>
      </li>
    </ul>
  </li>
  <li>
    <p>as compared to regulated trades in Chang’an in Tang, in early Song, <strong>merchants and shops are spread out in town to intermix with residence</strong></p>

    <ul>
      <li>some even had the stock system = manager+owner of business</li>
      <li><strong>credit systems</strong> adopted by traders</li>
      <li>an increase of <mark>people in middle class</mark></li>
    </ul>
  </li>
  <li>
    <p><mark>encouraged maritime trade</mark> (as compared to Tang), due to cut off of silk road</p>

    <ul>
      <li>
        <p>encourage foreign traders to come to China as well</p>
      </li>
      <li>
        <p>to achieve maritime trade, needs improved ship technologies</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013133731794.png" alt="image-20221013133731794" style="zoom:33%;" /></p>

        <p>as well as the <mark>invention of compass</mark></p>
      </li>
    </ul>
  </li>
  <li>
    <p>as trade increase, <strong>demands of money increased</strong>. In addition, silk was also used as currency</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013134014492.png" alt="image-20221013134014492" style="zoom:33%;" /></p>

    <p>the largest output in Tang was 320 million coins a year. But in late Song, government maintains <strong>more than 6 billion coins</strong>. But there was still not enough, as there is still no inflation.</p>

    <ul>
      <li>government requires more money in circulation</li>
      <li>demand has been so great and hence <strong>issued the first paper money</strong>, which can be created out of nothing</li>
    </ul>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Paper Money</th>
          <th style="text-align: center">Government Logistics</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013134255718.png" alt="image-20221013134255718" style="zoom:50%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013134353502.png" alt="image-20221013134353502" style="zoom:50%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>hence <strong>Song’s economic change to China is almost revolutionary</strong></p>
  </li>
</ul>

<p><strong>Wang Anshi vs. Sima Guang</strong></p>

<ul>
  <li>
    <p>despite overall economic boom, <strong>some farmers still suffer</strong> from interest rates and tax</p>
  </li>
  <li>
    <p>The Emperor Shenzong of Song faced <strong>declining taxes and an increasingly heavy burden of taxation on commoners</strong> due to the development of large estates, whose owners managed to evade paying their share of taxes.</p>

    <ul>
      <li>Therefore, he sought for advices, and comes Wang Anshi</li>
    </ul>
  </li>
  <li>
    <p>Wang’s primary objectives of New Policies (<em>xinfa</em>) were</p>

    <ul>
      <li>cut government expenditure and <mark>strengthen the military in the north</mark> (which requires funds)</li>
      <li>To do this, Wang advocated for policies intended to <mark>alleviate suffering among the peasantry</mark> and to <mark>prevent the consolidation of large land estates</mark> which would deprive small peasants of their livelihood = aimed to help improve the wealth gap</li>
      <li>in reality, his policies is <strong>effectively the last effort by Song government to control the economy</strong> = last strand</li>
      <li>but this <mark>failed</mark> because the local officials implemented this policy were rewarded for how much loans they gave out $\to$ local officials benefited more than the farmers</li>
    </ul>
  </li>
  <li>
    <p>Specifically, his policies include:</p>

    <ul>
      <li>fixing fiscal policy: <strong>Green Sprout reform</strong>, which give peasants money in the beginning and ask for repay with 40% interest at harvest time (so they don’t need to rent from landlords)</li>
      <li>schemes of transporting money</li>
      <li>pumped more currency into the economy</li>
    </ul>

    <p>recevied initial success but failed in the end</p>
  </li>
  <li>
    <p>Sima Guang (not related to Sima Qian) is one guy opposing Wang’s policy: wanted incremental reform instead of all processes done at once = too fast</p>

    <ul>
      <li>Wang Anshi almost like Legalist, as he is <strong>making state intervening deeply to people</strong>, hence denounced as un-Confucian</li>
      <li>Wang Anshi therefore needed more support in court = reformed civil exam system to teach his thoughts</li>
      <li>further exacerbated the problem</li>
    </ul>
  </li>
</ul>

<p><strong>Organization in Song</strong>: Idealized urban life</p>

<ul>
  <li>
    <p>Qingming scroll, idealized urban life in Kaifeng (debatable), but anyway <strong>exemplifies Song’s rigor and commerce</strong></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Full Scroll</th>
          <th style="text-align: center">Center Piece</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013135132538.png" alt="image-20221013135132538" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013135141379.png" alt="image-20221013135141379" /></td>
        </tr>
      </tbody>
    </table>

    <p>notice the overall city structure is very different than Tang: symmetrical + structure, but Song = more organic. This hints at the difference between Tang and Song: Song is moving away from society full of aristocracy to <strong>more middle class based</strong> society, hence different city layout, etc.</p>
  </li>
  <li>
    <p>transportation in Song: important people on horse backs and in caravan</p>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013140017927.png" alt="image-20221013140017927" style="zoom:50%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013140025275.png" alt="image-20221013140025275" style="zoom:50%;" /> |
| :———————————————————-: | :———————————————————-: |</p>
  </li>
  <li>
    <p>but notice the lack of female figures in the scroll: if this were Tang’s time, women on streets with beautiful dresses, <mark>why such changes</mark>?</p>

    <ul>
      <li>recall that Empress Wu tried to improve women’s status, and during Emperor Xuanzong women can come out homes and wear men clothes</li>
      <li>but in Song, there is
        <ul>
          <li>commercialization=market economy, so that with coinage + paper money $\to$ women <strong>became commodified again</strong> (e.g. prostitutes, sold daughters, etc)</li>
          <li><strong>foot binding in Song</strong>, women having small feet = standard of beauty = object of sexual desire, because this means it feet becomes a <mark>private part of body</mark> only seen by herself and husband
            <ul>
              <li>correlates with the growth of Song’s commercialization, and that families sell daughters + people kidnap women</li>
              <li>women transformed into commodities who were bought and sold on the basis of appearance</li>
              <li>women of good families compete with women with bound feet, hence 卷起来了</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>however, in general women do exert greater autonomy at home by handling the household estate as men die earlier</li>
    </ul>
  </li>
  <li>
    <p>some unrealistic aspects of the scroll is</p>

    <ul>
      <li>notice that there is no trash on street</li>
      <li>no fire stations, weird because lots of houses should be made of wood</li>
      <li>another modern visualization from some text include</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013140223138.png" alt="image-20221013140223138" style="zoom:50%;" /></p>

    <p>notice a fire station and soldiers repairing canal</p>
  </li>
</ul>

<p><strong>Capital at Hangzhou</strong>: south already contained a lot of population but then with capital shifted to Hangzhou in late Song, living in south becomes popular</p>

<ul>
  <li>recall that in Late Song, Kaifeng is sacked, so people moved to Hanzhou</li>
  <li>since Late Tang people are migrating, but recall that
    <ul>
      <li>south was hard to irrigate = solved by building canals</li>
      <li>north much exposed to steppe culture, and to the northern enemies, hence much more chaos = less preferred eventually</li>
    </ul>
  </li>
</ul>

<p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013140442737.png" alt="image-20221013140442737" style="zoom:33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013140431572.png" alt="image-20221013140431572" style="zoom: 33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>

<p><strong>Urbanization in Song</strong></p>

<ul>
  <li>
    <p>as advancement in agriculture = food surplus = people can have other occupations</p>
  </li>
  <li>movement of both people and good into cities
    <ul>
      <li>both Kaifeng and Hangzhou were linked by the Grand Canal (built in Sui)</li>
      <li>both Kaifeng and Hangzhou had population reaching at least 1 million</li>
    </ul>
  </li>
  <li>
    <p>in mid Song, 5% population already urban</p>
  </li>
  <li>
    <p>however, this raid commercialization can have <mark>adverse effect on government</mark></p>

    <ul>
      <li>technology advancement so fast that government cannot keep up with it</li>
      <li>e.g. in Tang, a small elite group in government is easy to control. But now in Song there is an emerging elite class/middle class with new found wealth = push <strong>against the centralized control Tang had</strong></li>
      <li>this diffusion of “resources” also relates to the <strong>“laicization” of Song religion</strong>. Practicing religion becomes shifted away from institution but more towards individual activities any lay people can do, e.g. building their own shrines
        <ul>
          <li>very similar diffusion of governmental control, so it now the religious institutions</li>
        </ul>
      </li>
    </ul>

    <p>therefore, the general theme of rising middle class and a <mark>"anti-centralization" of resources as compared to Tang is also a distinct factor in Song</mark></p>
  </li>
</ul>

<p><strong>New Elite: Scholar-Officials</strong> (<em>shi</em>士, or <em>shidafu</em>士大夫)</p>

<ul>
  <li>
    <p>recall that <em>shi</em> was in Zhou as mlitary people</p>

    <ul>
      <li>In the first half of the Chunqiu period, the feudal system was a stratified society, divided into ranks as follows: the ruler of a state; the feudal lords who served at the ruler’s court as ministers; the <strong>shi (roughly translated as “gentlemen”)</strong> who served at the households of the feudal lords as <strong>stewards, sheriffs, or simply warriors</strong>; and, finally, the commoners and slaves.</li>
      <li>In Warring States period, they become more specialized forces (e.g. in defense) that includes people of humble origin (climbed up by education)</li>
      <li><em>shi</em> in Han = Confucian scholars, but <em>shi</em> still dominated by aristocrats since Han officials are appointed by local recommendations. However, there is a shift towards <strong>more literal skills</strong>/non-military such as poetry.</li>
    </ul>
  </li>
  <li>
    <p>in Song, <em>shi</em> are <strong>scholar-officials certified through the civil service exams</strong></p>

    <ul>
      <li>this new civil service exam <mark>aims to guarantee that elite families cannot simply occupy government</mark></li>
      <li>success in exam = prestige in family. If passed the highest level become <em>jinshi</em></li>
      <li>without passing exam, you will just be officials of low rank</li>
      <li>therefore became very competitive, 400,000 people taking but government post is very limited</li>
      <li>firs time in China history that <strong>ended large dominance of northerners in the officialdom</strong> (e.g. since Sui and Tang, a lot of prestigious family members have mixture of northern roots and are in the government)
        <ul>
          <li>recall that Sui and Tang has a lot officials still from north + exam system are initial and social status are very fixed</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>the exam curricululm includes (ultimiate aim is for governing)</p>

    <ul>
      <li>elementary education: Analects, Classics of Filia Devotion</li>
      <li>ancillary exams, such as math and legal codes</li>
      <li><strong>core content: classics and history</strong>
        <ul>
          <li>write eesays on policy (chief examiners can take people who side with their positions)</li>
        </ul>
      </li>
      <li>poetry composition
        <ul>
          <li>ability to allude to historical events and personages</li>
          <li>easily gradable as it is standarized/ryhmed, etc.</li>
        </ul>
      </li>
      <li>hence a candidate needs to memorize a lot of classics: (word count)</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013141330999.png" alt="image-20221013141330999" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>recall that Tang candidates know their examiners, but <mark>Song insist on the anonymity of candidates</mark></p>

    <ul>
      <li>candidates writing will be re-copied by clerks to remove hand-writings styles</li>
      <li>no consideration of personality of candidate, e.g. as in Tang, and hence a very restricted version of merit</li>
    </ul>
  </li>
  <li>
    <p>more state and local academies are built in Song, and increased literacy made this exam popular and hence work</p>
  </li>
  <li>
    <p>the <mark>scholar-official (*shi*) class came to be defined by classical education and scholarly activities</mark></p>
  </li>
  <li>
    <p>supported also a <strong>thriving market for books, art, and connoisseur cultures</strong>. Therefore the invention of movable printing enable this remarkable demand</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221013141800645.png" alt="image-20221013141800645" style="zoom:33%;" /></p>
  </li>
</ul>

<h2 id="cultural-and-intellectual-changes-in-the-song">Cultural and Intellectual Changes in the Song</h2>

<p><strong>Previously on the Song</strong></p>

<ul>
  <li>
    <p>The Tang-Song transition sees a major shift of China’s population centers and economic activity southward. Population doubles, rapid <strong>urbanization</strong>, more trade (emphasis on the maritime)</p>
  </li>
  <li>
    <p>Social change ushers the Song <strong>commercial revolution</strong>. Trade facilitated by <strong>paper currency</strong> (technology of printing) and technological innovations in agriculture, water transport, and metallurgy.</p>

    <ul>
      <li>
        <p>key innovations: paper money and woodblock printing</p>
      </li>
      <li>
        <p>increased agriculture output = farmers produce more than they need = can specialize and trade</p>
      </li>
    </ul>
  </li>
  <li>Wang Anshi’s <strong>new policies</strong>: set of interventionist political-economic reforms designed to improve rural welfare, solidify tax base, etc. But meets Confucian opposition because implementations are legalists
    <ul>
      <li>Qingming scroll aims to depict idealized life at Kaifeng, but we know that benefits did not apply to everyone.</li>
    </ul>
  </li>
  <li><strong>Civil service exams</strong> create a new bureaucracy and a new scholar-elite <em>shi</em> class as compared to before</li>
</ul>

<p><strong>Crisis on the frontier: Tanguts, Khitans, Jurchens</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018132234600.png" alt="image-20221018132234600" style="zoom: 50%;" /></p>

<ul>
  <li>the policies from Wang was also to cover the spending to military
    <ul>
      <li>recall that Tuoba clan of the Xianbei during Six dynasties had a large army</li>
      <li>Tang recruited soldiers to push out China’s border, but in Song times, progressively more northern land is conquered. Specifically the Khitan, Liao, and Jurjan Jin, and Tanguts (Xi Xia).</li>
      <li>Eventually <mark>Yuan</mark> ruled over: Yuan was a <strong>Mongol-led</strong> imperial dynasty of China</li>
    </ul>
  </li>
</ul>

<p><strong>Tanguts and China</strong></p>

<ul>
  <li>
    <p>Tanguts (people of Tibetan origin) after Tibetan fell apart, took Hexi corridor which is critical for the path to Central Asia</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Tanguts v.s. China</th>
          <th style="text-align: center">Horse Farm, Hexi Corridor</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018132606077.png" alt="image-20221018132606077" style="zoom: 33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018153346036.png" alt="image-20221018153346036" style="zoom:33%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>however</p>

    <ul>
      <li>has no official history because Mongol attempted to genocide the Tanguts in 1227, hence most of their text and architectures are gone</li>
      <li>Tanguts had a lot of heavy calvary</li>
    </ul>
  </li>
  <li>
    <p>Xi Xia (Tanguts) people look lie</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Costumes</th>
          <th style="text-align: center">Scripts</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018133021480.png" alt="image-20221018133021480" style="zoom:33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018133140857.png" alt="image-20221018133140857" style="zoom: 33%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>notice that</p>

    <ul>
      <li>Xi Xia aristocrat looks very alike China, because they adopted much Chinese policies and had <strong>Sinicization</strong></li>
      <li>but later their Emperor mandate their specific form of hair style to keep their culture</li>
      <li>
        <p>their scripts are also modelled from Chinese, but much more complicated</p>
      </li>
      <li>
        <p>Tanguts people made beautiful Buddhist artifacts in the Mongol caves as well</p>

        <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018133404190.png" alt="image-20221018133404190" style="zoom: 25%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018153627755.png" alt="image-20221018153627755" style="zoom:33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Tangut as Xi Xia</strong> (1038 - 1227)</p>

<ul>
  <li>
    <p>In 881 they helped Tang to suppress Huang Chao rebellion</p>
  </li>
  <li>
    <p>religion fusion: Chinese + Tibetan Buddhism</p>
  </li>
  <li>
    <p>in early Song, lots of trade between Tanguts and Song, and many silk road goods went through them. But their relations with Song is volatile: in later Song they asked for equal status with Song Emperor:</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018133734437.png" alt="image-20221018133734437" style="zoom:50%;" /></p>

    <p>notice that</p>

    <ul>
      <li>before 1038, Tangut was polite and referred to itself being a vassal state. But after 1038, no justification is needed</li>
      <li>before, mentioned much culture/music as justification = imply that <strong>Confucianism is a standard for civilization</strong> = acceptance of Chinese’ idea of civilization</li>
    </ul>
  </li>
</ul>

<p><strong>Khitans (Liao)</strong>, 907 - 1125</p>

<ul>
  <li>Abaoji established the <mark>tribal federation</mark> = connecting many tribes together = the Liao Dynasty</li>
</ul>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018153958544.png" alt="image-20221018153958544" style="zoom:33%;" /></p>

<ul>
  <li>
    <p>Khitans are not friendly to Tanguts either, but they posed more <strong>threat to Song</strong></p>
  </li>
  <li>
    <p>they conquered and occupied the Sixteen Prefectures, <mark>which also included Beijing</mark>, hence a lot of sentiment in Song</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018134323478.png" alt="image-20221018134323478" style="zoom:33%;" /></p>

    <ul>
      <li>many Song emperor tried to recover this land from Khitans, but failed</li>
      <li>this strip had strategic North- South chokepoints between central plains and northern steppes, Manchuria.</li>
      <li>was not re-captured until Yuan</li>
    </ul>
  </li>
  <li>
    <p>Song was defeated by Khitan, hence signed a <mark>Peace Treaty of Chanyuan</mark></p>

    <ul>
      <li>clear boundaries, sixteen prefecture that Song wanted is kept by Liao</li>
      <li>Song paid indemnity for peace, which is a <strong>reasonably cheap price</strong> hence gives little incentive for them to fight back</li>
      <li>Song was also forced to recognize Liao as peers (etc. Khitan would address Song emperor as elder brother)
        <ul>
          <li>this is rejected by Chinese people = now you have <strong>two sons of Heaven</strong></li>
          <li>sense of humiliation, major source of <mark>strong sentiment in Song</mark></li>
        </ul>
      </li>
      <li>but at least this avoided wars between them. Maintained until 1125 until Song invited Jurchens to attack Liao</li>
    </ul>
  </li>
  <li>
    <p>government in North is a mobile civilization = nomadic culure. In the southern = 16 prefecture, so <strong>people kept the Chinese style</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018135019332.png" alt="image-20221018135019332" style="zoom:33%;" /></p>

    <p>so essentially Chinese lived under Khitan rules</p>
  </li>
  <li>
    <p>Khitan also, used by Jurchens who conquered Khitan and later adopted their own scripts based on Chinese</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018135138990.png" alt="image-20221018135138990" style="zoom:33%;" /></p>
  </li>
</ul>

<p><strong>Jurchen Jin</strong></p>

<ul>
  <li>
    <p>further east of the Khitans, being half nomad utilizing both hunting and farming</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018135207765.png" alt="image-20221018135207765" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>Originally they were subjects of Khitan, but later Aguda formed a <mark>confederation of tribes</mark> and rebelled = Jurchan</p>

    <ul>
      <li>nomad usually do not pose threats until formed confederation. But this also means that in them people are <strong>not from the same tribe</strong></li>
      <li>they named themselves <mark>Jin金</mark> dynasty</li>
    </ul>
  </li>
  <li>
    <p>Jurchen was also the reason Song became Southern Song in later periods. Since every Song wanted to <strong>retake 16 prefectures</strong> from Khitan but non worked, Emperor Huizong decided to be <strong>allied with Jurchan</strong>. In 1123, Juchen defeated Khitan, but in 1127, they turned on their Song ally, and <mark>Kaifeng is lost</mark>. After that, Huizong abdicated and Song had to <mark>move south to Hangzhou</mark>.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center"> </th>
          <th style="text-align: center"> </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018135528141.png" alt="image-20221018135528141" style="zoom: 33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018135611298.png" alt="image-20221018135611298" style="zoom: 33%;" /></td>
        </tr>
      </tbody>
    </table>

    <ul>
      <li>is a great painter (e.g. <strong>three perfections, painting, poetry and calligraphy</strong>)</li>
      <li>Emperor Huizong wished to retake the “Chinese” territory of the Sixteen Prefectures (area including Beijing) from the Khitan Liao, but is responsible for losing the North and hence criticized by later historians for his <strong>indulgence in aesthetic pursuits</strong></li>
    </ul>
  </li>
  <li>
    <p>hence, Jurchan moved their capital to Kaifeng. But unlike Khitan who kept a duo system, <mark>Jurchan went Sinicization</mark></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018135811632.png" alt="image-20221018135811632" style="zoom:50%;" /></p>

    <p>so a lot Jurchan spoke Chinese, dress Chinese, like <mark>Northern Wei</mark></p>
  </li>
  <li>
    <p>in total, Song at this point had to sign treaties including:</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018135943098.png" alt="image-20221018135943098" style="zoom:33%;" /></p>

    <p>but was actually not a big burden, as they did not exceed 2% of state avenue, because Song’s modernization and is rich. However, most went to pay for military, which took up $3/4$ of the revenue for just maintaining the army.</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018140053433.png" alt="image-20221018140053433" style="zoom: 33%;" /></p>
  </li>
</ul>

<p><strong>Essentials of Military Classics (<em>Wujing Zongyao</em> 武經總要)</strong></p>

<ul>
  <li>
    <p>commissioned by Song emperor and had instructions for a broad range of weapons</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Siege Ladders</th>
          <th style="text-align: center">Triple Crossbow</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018140220582.png" alt="image-20221018140220582" style="zoom:33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018140230536.png" alt="image-20221018140230536" style="zoom:33%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>even though Song had advancements in military and spent a lot on its army, it did not conquer their lost territories back:</p>

    <ul>
      <li>Jurchan are sinicized anyway, and payment for peace was cheap</li>
      <li>however, you still need to keep a strong army in case of future infringement</li>
    </ul>
  </li>
  <li>
    <p>this book also recorded the invention/production of <strong>gunpowder</strong>, which was found from Daoist alchemy accidentally</p>
  </li>
  <li>
    <p>but even with those, it didn’t give much advantages because artisans are captured by enemies. e.g. those siege machines are also employed by Jurchen</p>
  </li>
</ul>

<p><strong>Neo-Confucianism</strong>: in response to Chinese cultural identity crisis at borders</p>

<ul>
  <li>“It was perverse for Chinese to forget their ancestors and abandon sacrifices to them, serving instead barbarian ghosts.” —Shi Jie ⽯介</li>
</ul>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018140623628.png" alt="image-20221018140623628" style="zoom:33%;" /></p>

<ul>
  <li>
    <p>Buddhism was already in 1000 years, but now they start to <strong>reject the religion as it is not indigenous and practiced by their enemies</strong></p>

    <ul>
      <li>
        <p>recall in Tang times Buddhism was wide spread. But in Song, due to changes of international politics, such as the Khitan Liao and Tanguts are buddhists, Song scholars thought of <mark>Buddhism as religion of enemy</mark></p>
      </li>
      <li>
        <p>story about Cai Wenji who lived in Han but abducted by Xiongnu, to show the barbarian culture of the northern people as compared ot Chinese architectures</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018140826760.png" alt="image-20221018140826760" style="zoom:33%;" /></p>

        <p>however, notice that here they are dressing in Khitan = used as a symbol of foreignness = barbarianism of their northern enemies</p>
      </li>
    </ul>
  </li>
  <li>
    <p>late Song had a lots of <strong>problem</strong>: big armies taking much expenditures, officials not selected properly, and taxes not collected properly $\to$ scholars believe that everything <mark>needs reform</mark></p>

    <ul>
      <li>
        <p>but unlike Wang Anshi’s new policy, Song scholars aims to <strong>revitalize in Confucianism $\to$ Neo-Confucianism</strong></p>

        <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018141134032.png" alt="image-20221018141134032" style="zoom:33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018141216014.png" alt="image-20221018141216014" style="zoom:33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>

        <ul>
          <li>
            <p>even during Age of Division and Tang when there are a lot of Buddhist, Confucianism technically is still used as texts for exams</p>
          </li>
          <li>
            <p>but those scholars dismissed them and said Confucianism is lost since after Zhou, that it was all about Buddhism and Taoism. Hence they considered themselves as revivalists = <strong>reinterpret the traditional Confucianism core = becomes a dominant idea among Song intellectual</strong></p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Zhu Xi</strong> (as a representative and consolidator) for Neo-Confucianism</p>

    <ul>
      <li>
        <p>Buddhism had life cycles, and hence Confucian also had Metaphysics about <em>li</em> 理 (principle) and <em>qi</em> (vital energy)</p>

        <ul>
          <li>believes that nothing can exist without <em>li</em></li>
        </ul>
      </li>
      <li>
        <p>used the two concepts to explain human’s good nature. Humans born with good <em>li</em> but <em>qi</em> is impure = hence people do bad things</p>

        <ul>
          <li>sages had perfect <em>qi</em>, so people needs to work on this</li>
        </ul>
      </li>
      <li>
        <p>Zhu Xi’s take is that <em>li</em> is more important $\to$ how do you <strong>investigate things</strong></p>

        <ul>
          <li>rigorous study to probe <em>li</em> in things</li>
          <li>your methods of study should include nurture reverence + pursue knowledge</li>
        </ul>
      </li>
      <li>
        <p>the ultimate goal is <strong>self-cultivation</strong>, which is believed to lead to harmonious society (if everyone does it). But how to cultivate it?</p>

        <ul>
          <li>Zhu Xi’s idea is to investigate things, hence his school = <mark>*Li Xue* = a mainstream Neo-Classical school</mark></li>
        </ul>
      </li>
      <li>
        <p>since Zhu Xi believed one needs to study, he helped establish private academies = rise of private schooling for transmitting new ideas</p>

        <ul>
          <li>also wrote <em>Commentaries on Analects</em>, which is later made an official text in 1241 until 1905</li>
        </ul>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221018142312659.png" alt="image-20221018142312659" style="zoom:33%;" /></p>
      </li>
      <li>
        <p>since Zhu Xi wanted to revive, he called himself <em>Daoxue</em> or <em>Lixue</em>, they don’t called themselves Neo-Confucianism</p>
      </li>
    </ul>
  </li>
  <li>
    <p>even though those new thoughts is a response of the time of crisis to attack Buddhism or Taoism, but they are <strong>not immune to their influence</strong>,</p>

    <ul>
      <li>e.g. still use Buddhist practices such as medication and adopted Buddhist terms in Neo-Confucianism</li>
      <li>i.e. has a lot of elements drawn from them</li>
    </ul>
  </li>
</ul>

<p><strong>Song Women’s Status</strong></p>

<ul>
  <li>pretty complicated
    <ul>
      <li>commodification of women, selling daughters gives farmers a ton of money, to be prostitutes</li>
      <li>foot-binding, which started in the sing-song class, but eventually expanded throughout = small foot had sexual allure for men</li>
      <li>but women can also use that to their advantages, and some had autonomy, such as in the reading that some women had words that judges listen to</li>
    </ul>
  </li>
  <li>foot binding in Song. women having small feet-only seen by herself and husband (264)
    <ul>
      <li>correlates with the growth of Song’s commercialization, and that families sell daughters + people kidnap women</li>
      <li>women transformed into commodities who were bought and sold on the basis of appearance</li>
      <li>women of good families compete with women with bound feet, hence 卷起来了</li>
    </ul>
  </li>
</ul>

<h1 id="midterm">Midterm</h1>

<ul>
  <li>three main parts</li>
  <li>Identifications of people, places, key concepts
    <ul>
      <li>e.g. equal field system</li>
      <li>a list will be given out, also explain the historical importance of this key term</li>
    </ul>
  </li>
  <li>short answer questions
    <ul>
      <li>explain the deeper meaning/significance of a passage</li>
      <li>e.g. a paragraph long</li>
    </ul>
  </li>
  <li>one long essay
    <ul>
      <li>e.g. half of the test</li>
      <li>e.g. interaction with steppe normadic culture, e.g. explain <em>shi</em> class in warring states and implications in later dynasties</li>
      <li>e.g. bidirectional influences between stuff</li>
      <li>like three to fourth paragraphs, and you need to provide a structured, argument-based response</li>
    </ul>
  </li>
</ul>

<h1 id="yuan-dynasty-1271---1368">Yuan Dynasty (1271 - 1368)</h1>

<blockquote>
  <p>Yuan was a <strong>Mongol-led imperial dynasty of China</strong> and a successor state to the Mongol Empire after its division. It was established by <mark>Kublai</mark> (Emperor Shizu), leader of the Borjigin clan, and lasted from 1271 to 1368.</p>

  <ul>
    <li>Although <mark>Genghis Khan</mark> had been enthroned with the Han-style title of Emperor in 1206 and the Mongol Empire had ruled territories including modern-day northern China for decades, it was not until 1271 that <mark>Kublai Khan</mark> officially proclaimed the dynasty in the traditional Han style
      <ul>
        <li>Genghis Khan = Chinggis Khan later in text</li>
      </ul>
    </li>
    <li>Kublai’s conquest was not complete until <strong>1279 when the Southern Song dynasty</strong> was defeated in the Battle of Yamen. His realm was, by this point, isolated from the other Mongol-led khanates and controlled most of modern-day China and its surrounding areas, including modern-day Mongolia.</li>
    <li>Mongol rule was <mark>cosmopolitan under Kublai Khan</mark>. He welcomed foreign visitors to his court, such as the Venetian merchant Marco Polo, who wrote the most influential European account of Yuan China</li>
    <li>In 1368, following the <strong>defeat of the Yuan forces by the Ming dynasty</strong>, the Genghisid rulers retreated to the Mongolian Plateau and continued to rule until 1635 when they surrendered to the Later Jin dynasty (which later evolved into the Qing dynasty).</li>
  </ul>
</blockquote>

<p>How did the <mark>Mongols</mark> managed to conquer all China during <mark>Yuan</mark>?</p>

<ul>
  <li>they didn’t have literati, didn’t have language, didn’t have permanent houses</li>
</ul>

<p><strong>Raising Warriors</strong>: especially women warriors</p>

<ul>
  <li>can reveal Mongols political, cultural and social priorities</li>
  <li>Eurasian steppe: resource scare, nature is volatile, human is small compared to nature
    <ul>
      <li>generating only a minimal surplus, and internal disputes arises due to resource scarcity</li>
    </ul>
  </li>
  <li>therefore perpetual uncertainty, <strong>hard on both women and man, little time on inequality</strong>
    <ul>
      <li>nomad = <mark>group is prized more</mark> important than individual survival = young children were taught a universal skill set</li>
      <li>has highly non-gendered training, e.g. horsemanship, women and men equal competence</li>
      <li>herd and hunt typically taught by mothers, e.g. Chinggis Khan’s mother</li>
    </ul>
  </li>
  <li>learned bravery during hunt = <strong>bravery in battle</strong>
    <ul>
      <li>horsemanship, bravery, shooting skills for all</li>
      <li>e.g. Alaqa Beki, a <strong>women leader of large army</strong></li>
    </ul>
  </li>
</ul>

<p><strong>Groups Win Wars</strong>: prizing group advantages</p>

<ul>
  <li>
    <p>military tactics through surprise, ambush. Hence also requires soldiers strong in acrobatic skills</p>
  </li>
  <li>
    <p><strong>caracole</strong> tactic:</p>

    <p><img src="https://qph.cf2.quoracdn.net/main-qimg-9a7d2ad9f1f7cd2e072ed4f3f53e32c4-lq" style="zoom:33%;" /></p>

    <ul>
      <li>horses are faster in group</li>
      <li>shoot at 40-50m = general kill zone, so every warrior can contribute to the arrows</li>
    </ul>
  </li>
  <li>
    <p><strong>feigned</strong> retreat</p>

    <p><img src="https://rud.is/khan/uploads/4/6/9/3/46935069/876421879_orig.jpg" style="zoom:33%;" /></p>

    <ul>
      <li>appear to be overwhelmed and flee, to <strong>lure</strong> enemies to ambush location</li>
    </ul>
  </li>
</ul>

<p><strong>Climatic Changes</strong></p>

<ul>
  <li>15 year <strong>Pluvials (increased rainfall=wet) climatic</strong> favored Mongol
    <ul>
      <li>to being able to support a <strong>record-holding amount of animals</strong> (e.g. horses) due to biomass flourishing. So many perhaps more than the rest of the horse in the world combined</li>
      <li>zero foot-soldiers, or supply chain, but each horseman have <strong>4-5 well-trained horses</strong></li>
      <li>those horses would respond to the unique whistle of the owner</li>
    </ul>
  </li>
  <li>soldiers can sleep on their horses
    <ul>
      <li>place their meat underneath saddle</li>
      <li>can also train blood from horses as calorie intake if needed</li>
    </ul>
  </li>
</ul>

<p><strong>Semi-private/public Ger</strong></p>

<p><img src="https://www.youngpioneertours.com/wp-content/uploads/2020/01/Ger-construction.jpg" style="zoom:33%;" /></p>

<ul>
  <li>Ger is a single room structure (tent)
    <ul>
      <li>often entire family lives in a single Ger. This means sometimes many people all into 100 sqrft space, for both women, men, and kids</li>
      <li>hence also little <em>room</em> for inequality</li>
    </ul>
  </li>
  <li>Ger is Mongol’s only structure shielding from nature
    <ul>
      <li>place for everything, all resources</li>
      <li>technically <strong>owned by the female</strong></li>
    </ul>
  </li>
</ul>

<p><strong>Buying Loyalty</strong></p>

<ul>
  <li>Chinggis dissolved conquered population to create a structure for him as head of power
    <ul>
      <li>then perform military integration = some of them become part of the army</li>
      <li>each person loyal to <strong>their direct superior</strong>, and is recursive until the top, which is Chinggis</li>
    </ul>
  </li>
  <li>so ultimately each gifted population (along with their stuff) is still owned by Chinggis
    <ul>
      <li>those owners then need to populate the armies</li>
    </ul>
  </li>
  <li>so source of income is plunder or tribute</li>
</ul>

<p><strong>Women in Mongols’ Political Sphere</strong></p>

<ul>
  <li>chiggis wealth transfer to the youngest child</li>
  <li>not only were women are entitled to power, men also believed in their power
    <ul>
      <li>women power has nothing to do with proximal relationship with men, as in early China (e.g. Zhou dynasty)</li>
    </ul>
  </li>
  <li>women in general (including Chinese) enjoyed a more fairer status:
    <ul>
      <li>mongol named a women <strong>Yang Miaozhen</strong> (successful and fearful leader of army) to the position of provincial governor - probably the highest power ever to be held by a civilian women in imperial China</li>
      <li>women has power in conducting family affairs (334-336). e.g. Zhao’s wife, <strong>Guan Daosheng</strong>, has a commanding role in household management</li>
    </ul>
  </li>
</ul>

<p><strong>Extreme Violence Saves Lives</strong></p>

<ul>
  <li>e.g. Persia killed Mongol’s envoys, so Mongol went on to decimate them</li>
  <li>believed violence during warfare is a necessity, so they wanted to <strong>spread their image of violence</strong></li>
  <li>so a town under their attack can
    <ul>
      <li>surrender and pay tribute (survive)</li>
      <li>not useful become slaughtered (decimated)</li>
      <li>the useful, such as artisans were saved to improve techniques. Or a few terrified were allowed to flee and spread this terror (survive)</li>
    </ul>
  </li>
  <li>mongol invasion in south is slow
    <ul>
      <li>instead of plunder/kill farmers, tax them was proposed</li>
    </ul>
  </li>
</ul>

<p><strong>Mongol Ruling China</strong></p>

<ul>
  <li>
    <p>The Yuan dynasty created a <mark>"Han Army"</mark> (漢軍) out of defected Jin troops and an army of <strong>defected Song troops</strong> called the “<mark>Newly Submitted Army</mark>” (新附軍).</p>
  </li>
  <li>as many women (still physically strong) start to shift more to political poewr
    <ul>
      <li>initially 30% are Mongol women in army, but now forces are not even many Mongols</li>
    </ul>
  </li>
  <li>Kublai wanted to also focus on governing in China
    <ul>
      <li>eventually adopting alternating policies favoring their own steppe culture and sedentary culture of the vast population of Chinese</li>
    </ul>
  </li>
  <li>no evidence that Kublai converted to Buddhism, nor Confucianism
    <ul>
      <li>only a rudimentary knowledge of Chinese, hence certainly not Confucianism</li>
      <li>sensitive not to rely on Chinese, but military ones in western/central asia</li>
      <li><strong>suspended the examination system</strong> = no group can challenge Mongols</li>
      <li>only later <mark>emperor Ayurbarwada</mark> <strong>restored</strong> the civil exam system due to his tutor teaching Confucius and he liked it</li>
    </ul>
  </li>
  <li>Kublai considered <strong>South Chinese</strong> the least trust worthy group, hence at the bottom of four divisions
    <ul>
      <li>Specifically, the <mark>four classes</mark> of people by the descending order were Mongolian people, Semu people, Han people (in the northern areas of China) and Southern Chinese (people of the former Northern Song Dynasty)</li>
      <li>perhaps because Southern Chinese are the latest to be conquered</li>
      <li>prioritize economic growth, some</li>
    </ul>
  </li>
  <li>Kublai nevertheless <strong>sought to keep good relation to both Chinese and Mongols</strong>
    <ul>
      <li>as ruler for Mongol sought to preserve martial values, and having mongol women as concubines</li>
      <li>as ruler for Chinese, established capital in China and subsidized Chinese art</li>
      <li>in reality, even only for 100 years it is still <strong>hard</strong> to both rule sedentary China and steppe Mongol.</li>
    </ul>
  </li>
</ul>

<p><strong>Fall of Yuan</strong></p>

<ul>
  <li>However, eventually depopulation in China and increasing stress on people caused <strong>rebellion</strong>
    <ul>
      <li>Kublai launched huge campaign using sedentary Chinese are army = many <strong>died</strong></li>
      <li>increasing amount of burden + natural disasters (drought) + ineffective government policies inflicted <strong>struggle, famine in people</strong></li>
    </ul>
  </li>
</ul>

<h1 id="ming-dynasty-1368---1644">Ming Dynasty (1368 - 1644)</h1>

<p><strong>Previously on the Mongols and the Yuan</strong> (from Chinese perspective)</p>

<ul>
  <li>Tribal confederations became a major threat
    <ul>
      <li>Throughout the period of the Southern Song (1127-1279) Mongol confederation under Genghis Khan gaining strength in the north.</li>
      <li>Mongols being effective in warfare, e.g. brutality</li>
      <li>embrace new war technologies from captured artisans</li>
    </ul>
  </li>
  <li>migration possibly encouraged by climate changes
    <ul>
      <li>high productivity of horses, on average each mongol solider has 3-5 horses</li>
      <li>Eurasian steppe nature, hence a small population = lose control when large territory</li>
      <li>i.e. problem of <strong>minority rule</strong>: assimilation v.s. their elite identity also needed to be balanced</li>
    </ul>
  </li>
  <li>Mongol’s nomadic culture + small population = both women and men trained equally
    <ul>
      <li>no need a supply chain, just plunder and adopt technology</li>
      <li>but also had succession crises</li>
    </ul>
  </li>
  <li>Kublai Khan defeats Southern Song and established Yuan dynasty
    <ul>
      <li>first non-Chinese who rule the entire China both north and south</li>
      <li><strong>divided people into 4 ethnic group and favored non-Chinese</strong> = arise Chinese ethnic consciousness and desire to regain China = eventually lead to Chinese rebellions = <mark>downfall of Yuan</mark>
        <ul>
          <li>recall that they were military strong in horseback but as the creation Han Army and Newly Submitted Army made many mongols become sedentary + a much smaller population, it becomes hard for them to hold the vast population of Chinese</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Yuan was overall political unstable but flourishing time for culture
    <ul>
      <li>e.g. Yuan drama, literature, blue and white porcelain</li>
    </ul>
  </li>
</ul>

<h2 id="ming-autocracy">Ming Autocracy</h2>

<p><strong>The strangeness of Early Ming</strong>: despotism and an agrarian vision of economy and society</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027132235822.png" alt="image-20221027132235822" style="zoom: 33%;" /></p>

<ul>
  <li>
    <p>smaller than Yuan as Mongolia is not in Ming’s control, and captial at <mark>Nanjing</mark> (capital during Six dynasties)</p>

    <ul>
      <li>rule both north and south from a southern city for the first time</li>
    </ul>
  </li>
  <li>
    <p>Founder <mark>Zhu Yuanzhang</mark>朱元璋, with reign title <mark>Hongwu</mark> (1368-1398)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027132453072.png" alt="image-20221027132453072" style="zoom: 33%;" /></p>

    <ul>
      <li>Hongwu reign year 1 to represent 1368</li>
      <li>reign title chosen by himself, because of his <strong>military achievement: Ming has expanded</strong> and included corridor area in north and sixteen prefectures (later Beijing become capital under YongLe)</li>
    </ul>
  </li>
  <li>
    <p>An extraordinary life experience of <strong>Zhu Yuanzhang</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027132703443.png" alt="image-20221027132703443" style="zoom:33%;" /></p>

    <ul>
      <li>parents were poor, and was a wondering monk for several years</li>
      <li>Mongols burnt down the monasteries, and he joined rebels</li>
      <li><strong>commoner to become an emperor since Liu Bang</strong></li>
    </ul>
  </li>
  <li>
    <p>part of his experience in his own words (explains why he shaped a <mark>conservative</mark> vision as government/<mark>weird early Ming</mark>)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027132909702.png" alt="image-20221027132909702" style="zoom:33%;" /></p>

    <p>he claimed to “restore S. Song style”, but <strong>kept many Yuan policies</strong> (conservatives)</p>

    <ul>
      <li>
        <p>emperor to bureaucracy below him is much more hierarchical/autocratic, and strong personal subordination to emperor</p>

        <ul>
          <li>did not hesitate to have officials beaten openly = very despotic</li>
          <li>became a regular mean to <strong>punish officials</strong>: rarely used in Tang, but <strong>Mongol did use it frequently</strong></li>
        </ul>
      </li>
      <li>
        <p>paranoid for treason: frequent execution of officials</p>

        <ul>
          <li><strong>great purges:</strong> zero toleration of corruption and disloyalty. Executed over 30,000 victims</li>
          <li><strong>didn’t trust prime ministers</strong>, made himself the chief director for large and small matters and <strong>removed “Great Chancellor” as a rank</strong></li>
        </ul>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027133324396.png" alt="image-20221027133324396" style="zoom: 33%;" /></p>

        <p>for example, the first and fourth is due to (he believes is) disloyalty, and the 2nd and 3rd for corruption.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>emperors are now complete autocrat. related to Mongol’s style,</p>

    <ul>
      <li>comparison of the past: officials were somewhat confident and powerful in decision making</li>
      <li>In Tang they sat in chairs, in Song not required to kneel (also vowed not to execute officials even bad news/disagreement). But in <strong>Ming, a lot more <mark>autocratic</mark></strong></li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027133538707.png" alt="image-20221027133538707" style="zoom:33%;" /></p>
  </li>
</ul>

<p><strong>Despotism</strong>: new government structure</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027175108011.png" alt="image-20221027175108011" style="zoom:33%;" /></p>

<ul>
  <li>
    <p>this despotism in emperor dominating over bureaucracy is highly related/<mark>originated</mark> by</p>

    <ul>
      <li>decline of hereditary aristocracy since Huang Chao rebellion = recruit based on merit/little family influence = earlier those <strong>aristocrat families are well venerated</strong> and hence easily <strong>exerts strong influence even in court</strong></li>
      <li>the rise of civil service exam and the above = aristocrat “class” are flexible, can <strong>hardly create equal influence</strong></li>
      <li>the only <strong>special case is during Song</strong>, when emperor explicitly said not to execute scholars if bad news/disagreements hence those recruited by merit base can have influence</li>
      <li>
        <p>his peasant background also made him have dislikes of anti-intellectuals</p>
      </li>
      <li>though Emperor Zhu Yuanzhang did not have civil system for a decade but eventually needed help = depended on them, so a <strong>power balance is subtle</strong></li>
    </ul>
  </li>
  <li>
    <p>since Tang to Yuan, government structure were somewhat similar. But in Ming</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Tang and Song</th>
          <th style="text-align: center">Ming</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027134122694.png" alt="image-20221027134122694" style="zoom: 50%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027134246693.png" alt="image-20221027134246693" style="zoom:50%;" /></td>
        </tr>
      </tbody>
    </table>

    <ul>
      <li>before, <strong>grand chancellor</strong> (developed in Song, e.g. Wang Anshi) have a high degree of influence in decision making, but now is removed</li>
      <li>strong centralization of authority in the throne
        <ul>
          <li>abolished Grand Chancellor = Prime Minister</li>
          <li>military bureau divided into 5, and censorate into 12. In total 23 ministries <strong>directly reported to Emperor</strong></li>
          <li><strong>grand secretariat</strong> = mid level officials = good at writings as helpers
            <ul>
              <li>after Zhu Yuanzhang, they gain power and even reject emperor’s decisions in the long run = basically functioning as prime minister</li>
            </ul>
          </li>
          <li>this induced a <strong>large workload</strong> for emperor, and seem only possible with Zhu Yuanzhang</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Social reorganization at the local level</strong></p>

<ul>
  <li>
    <p>Zhu Yuanzhang liked rural areas as being less corrupt and simple + close community of farmers</p>

    <ul>
      <li>very different in Song time’s commercialized farmers</li>
    </ul>
  </li>
  <li>
    <p>therefore, developed an <strong>ideal economical life being “rural”</strong></p>

    <ul>
      <li>aimed for rural self-sufficiency</li>
      <li>developed the <strong>Lijia 里甲 system</strong> (+ registration system for direct control of people, like Qin period)</li>
      <li>developed the “<strong>Sacred Edict of Six Maxims</strong>” (for spreading Confucius teachings)</li>
    </ul>
  </li>
  <li>
    <p><mark>Lijia (hundred-and-tithing): village registration system</mark></p>

    <ul>
      <li>assign people with land and get taxes as well. so that
        <ul>
          <li>10 households = 1 <em>jia</em>, and 10 <em>jia</em> = 1 <em>li</em>. Hence 100 households per <em>li</em></li>
          <li>additional 10 wealthy ones in charge of managing hence 110 households</li>
        </ul>
      </li>
      <li>the idea of <strong>self-supervision + direct report</strong> to emperor was raised by Shangyang in Qin</li>
      <li>registering households as done similarly by Mongol, which
        <ul>
          <li>origins as early as Qin (which was for recruiting <strong>military</strong>).</li>
          <li>In Song, Wang Anshi also employed a a similar policy for governmental interference in <strong>economy</strong></li>
          <li>but Zhu Yuanzhang wanted this more for <mark>control</mark> <strong>of people</strong> (the book yellow registers)</li>
        </ul>
      </li>
      <li>effectively transfer govern responsibility to local community. Emphasized community self-management including tax-collecting, transportation, judicial, police services, etc.
        <ul>
          <li>intent is a small government as peasants manage themselves = no need for high tax as well</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>he also uses Lijia to teach people about the laws and Confucianism</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027135538558.png" alt="image-20221027135538558" style="zoom:33%;" /></p>

    <ul>
      <li>“sacred edict” read aloud regularly, people urged to behave with <strong>Confucian values such as Filial Piety</strong></li>
      <li>very effective mean of imbuing people (including illiterate) with Confucius values</li>
    </ul>
  </li>
</ul>

<p><strong>Four Categories of People</strong></p>

<ul>
  <li>
    <p>Mongol had this division: 1) Mongol; 2) Semu = colored-eye people, from west/central Asia; 3) Northern Chinese; 4) Southern. Reveals how <em>much</em> Mongol confederation trusted each group</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027135758073.png" alt="image-20221027135758073" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>in Ming, he also <strong>categorized peopled base on occupation SPAM</strong></p>

    <ul>
      <li>but later this <mark>doesn't work for economy</mark>, and broke down with high commericialization later</li>
      <li>attempted to demarcate social boundaries, e.g. merchants, farmers, must do different things. But since Song, <strong>people are highly dynamic</strong>, as in commercialization, many specialization and trading/work across occupations. So that was a failure of his policies</li>
    </ul>
  </li>
  <li>
    <p>recall that exams during Yuan was hard, so a lot of scholars changed direction and went to medicine</p>

    <ul>
      <li>of course, getting a degree is still valuable, but as more and more people receive education and exam even more intense, a lot of <strong>novel occupations/diversified future of scholars</strong></li>
      <li>but still, Southern literati elites regardless held immense influence in local society = <strong>localist turn</strong> (started in Southern Song). e.g. story of cruel family getting hold of the entire <em>local</em> community
        <ul>
          <li>before, passing the exam = route for wealth, status and fame. But now they realize this is not the only route and can <strong>exert influence on a local level</strong>. (which is very related to neo-Confucianism - build society from local level) = establishment of <mark>local roots</mark></li>
          <li>for them, civil exam is now just among the many exams, but just sitting for the exam still gives status.</li>
          <li>so south weathered the Mongol invasion much better than the north thanks to their established local roots = as they anyway didn’t rely on the civil exam to get wealth = your life stays hereditary</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>again, even as merchants at the bottom category, they are often the wealthiest, e.g. Shen Wansan (a merchant)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027140231319.png" alt="image-20221027140231319" style="zoom:33%;" /></p>

    <p>since education requires money, they are at an advantage: merchant can infiltrate by marriage into gentry (shidafu) family, or just adopt their sons</p>
  </li>
</ul>

<p><strong>Zhu Yuanzhang’s successors</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027140532108.png" alt="image-20221027140532108" style="zoom:33%;" /></p>

<ul>
  <li>
    <p>succession crisis after death. The correct line of succession should be Zhu Yunwen, but Zhu Di = <strong>his uncle got it</strong> (hence seen as “illegitimate”)</p>
  </li>
  <li>
    <p><mark>Zhu Di</mark> gives himself the reign title <mark>Yongle</mark>, and did several important things</p>
  </li>
  <li>
    <p>one major change is Nanjing being demoted to secondary captial and <mark>Beijing becomes capital</mark></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027140744214.png" alt="image-20221027140744214" style="zoom:33%;" /></p>

    <ul>
      <li>he felt insecure in the south (as he is an illegitimate ruler), and his generals are all from northern areas</li>
      <li>demographically it is <strong>strategically important to protect central plain from north but not safe</strong></li>
      <li>it is also not very developed yet, so resources needed to shift from Nanjing/the south</li>
      <li>but Beijing became the capital for the rest of the 7 centuries until today</li>
    </ul>
  </li>
  <li>
    <p>Yong Le’s achievements</p>

    <ul>
      <li>
        <p>be ready for the Mongol: rebuilt sections of <mark>great wall</mark>, and <strong>grand canal</strong> for transportation, expanded <strong>military</strong></p>

        <ul>
          <li>successive dynasties built and maintained multiple stretches of border walls. The best-known sections of the wall were built by the Ming dynasty</li>
        </ul>
      </li>
      <li>
        <p>his palace at Beijing = the <mark>Purple Forbidden City</mark></p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027183224061.png" alt="image-20221027183224061" style="zoom:33%;" /></p>
      </li>
      <li>
        <p>also extensive <strong>maritime voyages: Zheng He</strong></p>
      </li>
      <li>
        <p>sponcered a lot of <strong>Buddhism</strong>, but unclear if he is loyal to Buddhism as sometimes he pursues as Daoist. Perhaps as a tool to establish trust in his subjects</p>

        <ul>
          <li>but did forge a strong relationship with Tibet</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Yong Le’s sponser of Zheng He’s voyage</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027141241577.png" alt="image-20221027141241577" style="zoom:33%;" /></p>

    <ul>
      <li>the aim was to mask his illegitimacy of ruling (as an uncle took power from the direct grandson of emperor), by <strong>announcing to the maritime world that he is emperor</strong></li>
      <li>therefore, voyage was for diplomatic reasons</li>
    </ul>
  </li>
</ul>

<p><strong>Admiral Zheng He</strong></p>

<ul>
  <li>
    <p>the mission was diplomatic: to all tributary states that Yong Le is now the emperor. Hence Zheng He also had military force brought along</p>
  </li>
  <li>
    <p>as a by product of the voyage</p>

    <ul>
      <li><strong>enlarged trading routes</strong></li>
      <li><strong>furthered Ming’s tribute system</strong> (see next subsection)</li>
    </ul>
  </li>
  <li>
    <p>brought back some exotic info/products, e.g. giraffe is named as 麒麟</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027141918382.png" alt="image-20221027141918382" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>some of Zheng He’s fleets routes</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221027141319992.png" alt="image-20221027141319992" style="zoom:33%;" /></p>
  </li>
</ul>

<p><strong>The Tribute System</strong></p>

<ul>
  <li>was a old system. Two mechanisms of Chinese regimes’ <strong>relationships with foreign states: tribute and trade</strong>.</li>
  <li>the system:
    <ul>
      <li>foreign rulers to send embassies to China bearing tribute in the form of local exotica</li>
      <li>emperor in turn gives gifts of equal or greater value; bestowed titles on tributary rulers; and permitted a controlled volume of <strong>trade</strong></li>
    </ul>
  </li>
  <li>as it is mutually beneficial:
    <ul>
      <li>a device for <strong>mutual recognition</strong>, and to establish <strong>political and cultural prestige of China internationally</strong></li>
      <li>more <strong>trade</strong> opportunities</li>
      <li>in most times both parties are happy</li>
    </ul>
  </li>
</ul>

<p><strong>End of Yongle Fleets</strong>: only YongLe emperor promoted maritime trade/voyage</p>

<ul>
  <li>expeditions cost a lot of money: in 1424, Yongle died, and new court considered the expeditions as <strong>wasteful expenditures</strong> that did not benefit the people’s welfare.</li>
  <li>eventually people switched focus to their northern land: shifted policy to <mark>focus on northern steppe enemies</mark>
    <ul>
      <li>1449 Tumu disaster: Mongol Oirats capture the boy emperor and threaten Beijing—this marks permanent shift in foreign policy away from the sea and towards the steppe.</li>
    </ul>
  </li>
  <li>hence this end also signals the <strong>ended the state-sponsored sea voyages and foreign contacts/trade overseas</strong>. Instead of maritime trade, a lot became used for defending</li>
</ul>

<h2 id="ming-and-the-global-economy">Ming and the Global Economy</h2>

<p><strong>Previously on early Ming</strong></p>

<ul>
  <li><strong>Hongwu (1368-98):</strong> <strong>autocracy</strong> and inheritance of Mongol polices + social reorganization (agrarian view)
    <ul>
      <li>autocracy of emperor in court is supported by the decline of aristocracy + rise of civil exam in Song</li>
      <li>social reorganization involves demarcation of people into four classes $\to$ did not work at the end as society often have boundary crossings</li>
    </ul>
  </li>
  <li><strong>Yongle</strong> (1402-24): usurper = deeply concerned of his ruling = moved capital from Nanjing to Beijing
    <ul>
      <li>build the forbidden city in Beijing</li>
      <li>eager to pursue <strong>tributary relations</strong> with new states = recognize his legitimacy of ruling</li>
      <li>for a similar reason above, sponsored Zheng He’s voyage</li>
    </ul>
  </li>
  <li><strong>Zheng He</strong>’s voyage: massive expedition primarily as a diplomatic tool
    <ul>
      <li>a by-product is to encouraged <strong>private maritime trade</strong> (commercialization later)</li>
      <li>but costly + enemies in the north made China shift focus</li>
    </ul>
  </li>
</ul>

<p><strong>Monetization in mid-Ming</strong>: second wave of commercialization after Song dynasty</p>

<ul>
  <li>
    <p>e.g. description of the prosperity and commercialized economy in south</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101131958629.png" alt="image-20221101131958629" style="zoom: 33%;" /></p>

    <p>material property + commercialization = non-agrarian society starts to come back again</p>

    <ul>
      <li>Hangzhou was also reasonably prosperous, as previous Song capital</li>
      <li><mark>Jiang'nan</mark> = south of Yangzi river = <strong>most prosperous region</strong> in mid-Ming = lots of records come from this area</li>
    </ul>
  </li>
  <li>
    <p>recall that <em>Lijia</em> 里甲 (hundred-and-tithing): village registration and self- management system + <strong>tax system in kind (e.g. rice if produced rice)</strong></p>

    <ul>
      <li>assumption that people stays in the land, and had loopholes = corruptions = less tax collected from wealthy people who try to evade</li>
    </ul>
  </li>
  <li>
    <p>more effective policy to <strong>collect tax all in “cash”</strong> = <mark>Single Whip Reform</mark> (1570)</p>

    <ul>
      <li>pushed forward by Grand Secretary Zhang (recall that grand secretary is very powerful in court)</li>
      <li>complete resurvey of all cultivated land (1580) = updated information = can ask <mark>all taxes to be paid in copper/silver</mark></li>
      <li>aims to simplify taxation and increase efficiency = very effective later
        <ul>
          <li>1568-73 Imperial Treasury’s annual deficit: 2-3 million taels of silver</li>
          <li>1582 The treasury has 4 million taels of silver surplus and grain reserve for a couple of years</li>
          <li>critical to <strong>help Ming dynasty to reach its peak</strong></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Currency of the Hongwu Reign</strong></p>

<ul>
  <li>
    <p>paper money is issued by the government, but they are printed/produced without backup hence people lost faith in it:</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101133338779.png" alt="image-20221101133338779" style="zoom:33%;" /></p>

    <ul>
      <li>
        <p>for tax: payment needs to be in copper coin/silver</p>
      </li>
      <li>
        <p>people lost faith in paper currency because <mark>Zhu Yuanzhang</mark> issued paper money <strong>without backup</strong> $\to$ can use silver to exchange paper money but when asked to <em>exchange from paper money to silver, government cannot issue</em></p>
      </li>
      <li>
        <p>regardless, government encouraged paper money = wanted to restrict digging silver. But they never succeeded in controlling its currency = <strong>ends up relying entirely on copper coin and silver ingot</strong></p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101133404657.png" alt="image-20221101133404657" style="zoom: 25%;" /></p>

        <p>(note that silver ingots are trusted more as copper can regularly debase)</p>
      </li>
    </ul>
  </li>
  <li>
    <p>thirst for silver ingot = encouraged for <mark>global trade</mark> (foreign countries using silver to trade for valuable Chinese goods)</p>

    <ul>
      <li>
        <p>lots of <strong>foreign private trade</strong> activities from European</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101133810017.png" alt="image-20221101133810017" style="zoom:33%;" /></p>

        <p>recall that:</p>

        <ul>
          <li>
            <p>Ming government did not sponsor maritime trade (<strong>opposite in Song’s altitude = took large revenue from maritime commerce</strong>)</p>
          </li>
          <li>
            <p>this is perhaps because a) gov charged light tax in commerce b) agrarian view c) private maritime trade tied with piracy = political problems. Hence very suspcious with private trade outside diplomatic reasons</p>
          </li>
        </ul>
      </li>
      <li>
        <p>trade with <mark>Portuguese</mark>: arrived and found a vigorous trade network in China</p>

        <ul>
          <li>
            <p>some maritime traders treat Chinese ships as competitors = kill them and take over their business</p>

            <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101134216818.png" alt="image-20221101134216818" style="zoom: 25%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101134237483.png" alt="image-20221101134237483" style="zoom: 25%;" /> |
| :———————————————————-: | :———————————————————-: |</p>

            <p>this caused some problem: where China official did not support trading with Japan due to piracy and suspicions, those Europeans don’t care hence those Chinese goods are illegally leaked to Japan</p>
          </li>
          <li>
            <p>but eventually, local Chinese officials sees trade benefits and defied government decisions = Portuguese conspired with local officials to <strong>establish a port in Macao</strong> (a backwater at the time) to trade with Canton and Nagasaki</p>

            <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101134506378.png" alt="image-20221101134506378" style="zoom: 25%;" /></p>

            <p>Macao = first and last European colony in China ruled by Portuguese</p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>what goods did European liked from China? some trades included porcelain = Chinese artisans mass produce porcelain specifically for foreign trades:</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101134612595.png" alt="image-20221101134612595" style="zoom: 25%;" /></p>

    <p>most of exported ones are not best quality, and best ones often reserved for China’s home market</p>
  </li>
</ul>

<p><strong>Trading with Spanish and Dutch</strong></p>

<ul>
  <li>
    <p>results of private maritime trades = period when porcelain appearing <strong>popular in countries such as Dutch</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101154259734.png" alt="image-20221101154259734" style="zoom: 25%;" /></p>
  </li>
  <li>
    <p>both Spanish and Dutch also had high trade interest with China</p>

    <ul>
      <li>early 1570s, the <mark>Spanish</mark> established a trade port in Manila (Philippines), still far from China.</li>
      <li>in 1623-62, the <mark>Dutch</mark> East India Company (VOC) occupies fort in northern <strong>Taiwan</strong>
        <ul>
          <li>note that at that time Taiwan was not under Ming’s control.</li>
          <li>Once colonization by Dutch took place, Chinese went and Taiwan become incorporated into the Qing</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Spanish</strong> found China was silver hungry = traded/provided <strong>a lot of silver</strong> as they had extraordinary level of silver from mines in its colonies</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101135157936.png" alt="image-20221101135157936" style="zoom:25%;" /></p>

    <p>Spanish ship silvers to China = established a stronghold in trading = on average more than 2,300 tons of silver arrived in China from abroad</p>

    <ul>
      <li>note that: <mark>since 1493 - 1898 the Americas were invaded and incorporated into the Spanish Empire</mark>, with the exception of Brazil, British America, and some small regions of South America and the Caribbean</li>
    </ul>
  </li>
  <li>
    <p>in 16th – 17th c., the trade imbalance with China was filled with silver from Spain’s New World colonies, and from Japanese mines</p>
  </li>
  <li>gold flow out, silver flow in = as silver seen more important in China</li>
  <li>
    <p>gives many bad consequences (as well as few good ones)</p>
  </li>
  <li>
    <p><strong>Consequence of the influx of silver</strong>:</p>

    <ul>
      <li>
        <p>depreciation of silver = inflation;  market speculation; .. all contributed to <strong>Ming’s collapse</strong> in the long run</p>
      </li>
      <li>
        <p>immediate effects = <mark>rise of merchant</mark> = wealth can surpass the gentry family = destabilize the social order</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101135859684.png" alt="image-20221101135859684" style="zoom:25%;" /></p>

        <p>e.g. the above is a book written for gentry/scholar class to instruct them how one <em>spend silver in a way to not look poor</em> = anxiety of Confucian gentleman facing the threat of status change from merchant class</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Consequence of foreign trade</strong>:</p>

    <ul>
      <li>
        <p>increase in <mark>population</mark></p>

        <ul>
          <li>
            <p>recall that Song population grew due to new tech for agriculture + new crop from Vietnam</p>
          </li>
          <li>
            <p>similarly, in Qing: <strong>new crop from Amiercan by spanish colonizers</strong>. Maize, Sweet potatoes, etc, grows in places unsuitable for millet and rice and have high yield:</p>

            <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101140025257.png" alt="image-20221101140025257" style="zoom:33%;" /></p>

            <p>hence also helped the life of poorer people</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Ming fascinated by <strong>Europeans’s ballistic technology</strong>, e.g. cannon</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101140323059.png" alt="image-20221101140323059" style="zoom:33%;" /></p>

        <p>many Chinese officials realized they are lagging behind in technology, and hence some advisers: should hire European governments to help defend northern enemies</p>
      </li>
      <li>
        <p>famous <strong>Jesuits</strong> in China:</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101140717697.png" alt="image-20221101140717697" style="zoom:25%;" /></p>

        <ul>
          <li>
            <p>impersonate as Confucian scholar to blend into Chinese society at first</p>
          </li>
          <li>
            <p>aimed to convert Ming gentry to <mark>Christianity</mark>, by reconciling Christian beliefs with Chinese beliefs</p>
          </li>
          <li>
            <p>managed to <strong>convert some but very small numbers to Christian</strong>, as many Chinese gentries are more interested in European tech than religion</p>
          </li>
          <li>
            <p>contribution to the world map = <strong>remembered as a person introducing western info + tech</strong> much more than as a preacher</p>

            <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101140916588.png" alt="image-20221101140916588" style="zoom:25%;" /></p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>A new cultural form: novel</strong></p>

<ul>
  <li>
    <p>recall that good economy usually results in prosperity of culture</p>
  </li>
  <li>
    <p>Ming poetry becomes less important hence less poets from Ming (and Qing), <strong>but more into (fictitious) novels: 3 out of the 4 classics of Chinese literature produced</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101141147687.png" alt="image-20221101141147687" style="zoom:33%;" /></p>

    <ul>
      <li>Journey to the west: Xuanzang’s trip to see Buddhist scripts during Tang, but a fantasied novel</li>
      <li>Three Kingdoms: is history</li>
      <li>The water margin: set in the northern Song period = how a group of 108 outlaws trying to rebel the government</li>
      <li>The Plum in the Golden Vase: 16th century work focusing on the corrupt noble in China = known for erotic reasons</li>
    </ul>
  </li>
  <li>
    <p>educated gentleman writes prose and fiction = those are more likely survive. The lack of novels in early time means novel might be there as well</p>

    <ul>
      <li>however, many novels are fictitious yet poems were real. Why are people suddenly interested in unreal things? Don’t know</li>
      <li>some say that it is due to Wang Yangming; others believe using easier language catered to a wider audience</li>
    </ul>
  </li>
</ul>

<p><strong>Changes in gender relations</strong></p>

<ul>
  <li>
    <p>overall, women facing <mark>increasingly intense subjugation</mark></p>

    <ul>
      <li><strong>female infanticide</strong>: wanted to keep small family size, hence kills girls rather than boys who can labor and continue family line</li>
      <li>revised inheritance and property laws = intended to help but reverse effect for women</li>
      <li>female seclusion = find themselves <strong>confined</strong> and even not allowed to visit temples a lot</li>
      <li>chastity cult = encouraged widow to be a widow. However, this was an ideal and in reality widow remarriage is common (as they lose properties from husband, due to Ming laws)</li>
      <li>foot-binding. started in Song, but in Ming becomes more extreme. Accepted by women as a way to ensure good marriage</li>
    </ul>
  </li>
  <li>
    <p>confined inside hence they are socializing within themselves.</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221101142217363.png" alt="image-20221101142217363" style="zoom: 25%;" /></p>
  </li>
  <li>
    <p>but there are also some <mark>benefits</mark></p>

    <ul>
      <li><strong>rising level of female education</strong> + <strong>men sponsored female readers &amp; writers</strong>. Perhaps because men are exerting so much control that they think nothing can go wrong by allowing these</li>
      <li><strong>compassionate marriage</strong>
        <ul>
          <li>perhaps better education means men can more easily communicate with women</li>
          <li>worship of personal feeling and sentiments = influence of Wang Yangming</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h1 id="qing-imperialism">Qing Imperialism</h1>

<p><strong>Previously in Ming and the World</strong></p>

<ul>
  <li>Ming Dynasty: large-scale trends in population growth, <strong>commercialization (again since Song)</strong>, and <strong>global trade (private maritime trades)</strong>
    <ul>
      <li>much global influence from private maritime trade. Discouraged by government due to piracy + political reasons + their northern enemies</li>
    </ul>
  </li>
  <li><mark>Single-Whip tax reform</mark>: simplify taxation procedure, so that almost all are paid in cash (mostly <mark>silver</mark>)
    <ul>
      <li>so that tax evasion becomes harder = increased government revenue</li>
      <li>but <strong>increased demand of silver</strong></li>
    </ul>
  </li>
  <li>large demand of silver faciliated global trade
    <ul>
      <li>export Chinese manufactured goods such as porcelain, imported silver from abroad</li>
      <li>also funded the rise of Atlantic (e.g. Spanish) empires</li>
    </ul>
  </li>
  <li>along with silver, <strong>Jesuit commissionaires</strong> also came to China aiming to convert Chinese to Roman Catholicism
    <ul>
      <li>reconciling Christian with Confucian pratices,</li>
      <li>but Chinese are more interested in European science and technology rather than religion, hence not very effective</li>
      <li>introduction of <strong>western science into China</strong></li>
    </ul>
  </li>
  <li><strong>Novel as a new literary genre</strong>: vernacular language and a wide readership</li>
  <li><strong>Women more subjugated but increased education</strong>
    <ul>
      <li>also more women publisher</li>
    </ul>
  </li>
</ul>

<h2 id="manchu-conquest">Manchu Conquest</h2>

<p><strong>Decline of Ming</strong>: several factors (importance is unranked)</p>

<ul>
  <li>early period we had aristocratic emperor, but later also <strong>inattentive emperor</strong>
    <ul>
      <li>Emperor Wanli reigned for a long time but stopped attending to court affairs for 30 years</li>
      <li>ruling often needs regulation and interventions; promotion needed his approval; But he simply did not care</li>
    </ul>
  </li>
  <li>climate changes and <mark>natural disasters</mark>, such as <strong>famine</strong>, <strong>droughts</strong>, epidemics, <strong>cold spell,</strong> etc. in the 1630-1640s.
    <ul>
      <li>was also the coldest decade in Russian history = poor agriculture due to the cold as well = famine</li>
      <li>Beijing had frequent epidemic and grand canal become highways to spread</li>
    </ul>
  </li>
  <li><strong>collapse of fiscal system</strong> due to eventual shortage of silver
    <ul>
      <li>commoners do not have much silver to pay tax; govern cannot pay soldiers defending their borders</li>
      <li>80% of counties stopped forward taxation to central government</li>
      <li>Europeans became reluctant shipping silver to China as time goes on = also contributed to silver shortage</li>
    </ul>
  </li>
  <li>threats from <strong>Mongol and Jurchens</strong>
    <ul>
      <li>Ming also needed money to supply military = attempted to increase taxes, etc. all of which are non-popular approaches for the people</li>
    </ul>
  </li>
  <li>all of those combined gave <strong>revolts</strong>
    <ul>
      <li>the two most prominent groups led by former soldiers Li Zicheng (1606-1645) and Zhang Xianzhong (1606- 1647) eventually captured the capital Beijing</li>
    </ul>
  </li>
</ul>

<p><strong>Rise of Jurchens/Manchus</strong></p>

<ul>
  <li>recall that Jurchan were powerful <strong>during the Song</strong>: they established <mark>Jin金</mark> dynasty, helped Song to defeat Khitans but turned to sack Kaifeng later
    <ul>
      <li>Jurchans established the Jin dynasty but also become much sinicized in the past and their</li>
      <li>Jin dynasty 1127 - 1200s, when later Mongols sacked and took control of northern China = Yuan dynasty</li>
      <li>in 1600s, they see themselves as Later Jin hence a <strong>political legitimacy</strong> for restoration of power</li>
    </ul>
  </li>
</ul>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103132855563.png" alt="image-20221103132855563" style="zoom:25%;" /></p>

<ul>
  <li>brief overview: The Jurchens are chiefly known for producing the Jin (1115–1234) and Qing (1616/1636-1912) conquest dynasties on the Chinese territory. The latter dynasty, originally calling itself the Later Jin, was founded by a Jianzhou commander, <strong>Nurhaci (r. 1616–26), who unified most Jurchen tribes</strong>, incorporated their entire population into <strong>hereditary military regiments known as the Eight Banners</strong>, and patronized the creation of an alphabet for their language based on the Mongolian script.</li>
  <li>
    <p>they live in China’s north plain, had long engagement with Chinese in terms of trade, tribute, ally/enemy</p>
  </li>
  <li>Jurchans where <strong>half-sendantry</strong> = different from Mongols
    <ul>
      <li>had settlements, but also a lot of raids, enslaved captives, hunting and fishing, etc</li>
      <li>profited a lot from trade with Ming: Chinese liked <strong>ginseng</strong>. 25% silver went to Jurchen because of the ginseng trade = they now have money to fund military</li>
    </ul>
  </li>
  <li>rise of Jurchan as <strong>Nurhaci brought up a strong tribal confederacy</strong></li>
</ul>

<p><strong>Nurhaci: leader of Jurchen Confederacy</strong></p>

<ul>
  <li>
    <p>From the lineage of <strong>Aisin Gioro愛新覺羅</strong></p>
  </li>
  <li>
    <p>Ming’s divide and conquer strategy actually made his own tribe stronger</p>

    <ul>
      <li>first subjugated to Ming and used it to <strong>defeat other tribes</strong> to make his tribe strong</li>
      <li>in 1595 Ming awarded him the title of Dragon-Tier General</li>
      <li>eventually his tribe became the strongest, so <strong>Ming turned against him</strong>, and <mark>Nurhaci allied with Mongol tribes</mark></li>
    </ul>
  </li>
  <li>
    <p>in 1616 he declared himself the <mark>khan of the Great Jin</mark> (restoration of Jin dynasty as descendents)</p>

    <ul>
      <li>captial at Mukden, modern Shenyang</li>
      <li>adapt Mongolian alphabet to the Jurchen speech</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103133520903.png" alt="image-20221103133520903" style="zoom:33%;" /></p>

    <p>so Shenyang was the center of their political power</p>
  </li>
  <li>
    <p>another decisive step is the <strong>Eight Banner system</strong>: reconstituting social structure</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103133613612.png" alt="image-20221103133613612" style="zoom: 25%;" /></p>

    <ul>
      <li>
        <p>each banner is a permanent group also a <strong>fighting unit + unit of residence</strong></p>

        <ul>
          <li>included dependants of fighting mens includeing women children and servants</li>
        </ul>
      </li>
      <li>
        <p>hence <strong>shared identity and shared clothing within a group</strong></p>
      </li>
      <li>
        <p>over time, each banner becomes somewhat ethnic groups = close relationship within the group, but not purely one ethnic within a group</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103133752655.png" alt="image-20221103133752655" style="zoom:25%;" /></p>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Hong Taiji’s creation of Manchu Qing</strong></p>

<ul>
  <li>succeeded Nurhaci, second Khan of later Jin</li>
  <li>declares himself emperor of the <mark>Great Qing</mark>
    <ul>
      <li>Qing because Qing = clear, hence water related &gt; Ming = fire (and moon)</li>
      <li>this new dynasty name is a clear announcement of his intention to conquer Ming</li>
    </ul>
  </li>
  <li>some measures he took to rule include
    <ul>
      <li>ordered translations of Chinese culture to Jurchen so he could study them</li>
      <li>moved towards Chinese-style burearcarcy centralization</li>
      <li>in 1636 he creates a new identity for his people called <mark>Manchu</mark></li>
    </ul>
  </li>
  <li>one key thing to realize is that <mark>Manchus are also not one ethnicity</mark> = rather amalgamation of steppe nomadic people + sedentary Chinese + etc. Therefore, Manchu as an “ethnicity” more like a <strong>political construct</strong></li>
</ul>

<p><strong>Manchu Identity</strong></p>

<ul>
  <li>
    <p>Manchu identity is <strong>not determined by birth</strong>, but by just being a member of the Banner</p>

    <ul>
      <li><strong>a tool for integration</strong>: shared identity overcame linguistic-ethnic differences of banner families that included Jurchen, Mongols, Korean, Chinese</li>
      <li><strong>a tool for segregation</strong>: emphasized unique claim of Manchus to rule China.</li>
    </ul>
  </li>
  <li>
    <p>They also emphasized identity markers such as hair styles and clothing, to be <strong>different from that of Han people</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103134331632.png" alt="image-20221103134331632" style="zoom:25%;" /></p>

    <p>so men hair style become political tool as well: shows who you are submissive to.</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103134354376.png" alt="image-20221103134354376" style="zoom:25%;" /></p>

    <p>examples of Manchu clothing is more diverse. e.g. soldiers uses a lot of bows</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Soldiers</th>
          <th style="text-align: center">Qing Officials</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103134659635.png" alt="image-20221103134659635" style="zoom: 25%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103134730021.png" alt="image-20221103134730021" style="zoom:25%;" /></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>Manchu also <em>tried</em> to forbid <mark>women</mark> to foot-binding</p>

    <ul>
      <li>but that ban didn’t work: foot-binding practices are already very entrenched in Han Chinese minds, and it was seen as attractiveness/object of sexual desire</li>
      <li>so most Manchu women don’t bind their feet, but Han people still continue the practice</li>
      <li>why no enforcing this change like with mens’ hairstyle? perhaps because men already submitted, no need to change women</li>
      <li>but the general trend in Ming and Qing can also be viewed as <strong>tightening controls of its people = also of women</strong>
        <ul>
          <li>Ming being active in domestic affairs with its Lijia policy, and using morality manuals (Sacred Edict of Six Maxims)</li>
          <li>prior to Ming, pre-martial sex was not proscribed. But in Ming and Qing there are a lot of much focus on chastity = <strong>interference</strong> from government</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Qing conquest of Korea and Japan</strong></p>

<ul>
  <li>wanted to at least prevent Korea to join Ming to fight against them, so basically <strong>conquered Korea</strong> (but left little cultural footprint)
    <ul>
      <li>initially, Korea see Jurchens as barbarians = many had Confucius thoughts</li>
      <li>Korea also wanted to help Ming because, before when Japan tried to invade Korea, Ming helped.</li>
      <li>but eventually Korea surrendered to Manchu due to their military strength and became <strong>vassal state of Qing</strong>
        <ul>
          <li>so no choice but to join conquest to Ming</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>sees themselves as <strong>repository Confucian hence named themselves soHwa</strong>
    <ul>
      <li>as in fact it is true: Ming is the <em>last dynasty ruled by Han Chinese</em></li>
    </ul>
  </li>
  <li>Qing conquest of Ming also shocked Japanese
    <ul>
      <li>the Japanese sees this as Ka-i Hental華夷變態 = transformation of China from civilized to barbarian</li>
      <li>(recall that during Tang, they see Chinese as a model for culture and civilization)</li>
      <li>so after this, Japanese also think that East Asian culture superiority is no longer in China, but in Japan</li>
    </ul>
  </li>
</ul>

<p><strong>Last Years of Ming empire</strong>: there player. Ming, the Rebels, Hong Taiji’s successor</p>

<ul>
  <li>Ming asked Manchu to help quell the rebel, but eventually they had a bigger plan and conquered the whole China</li>
</ul>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103135745712.png" alt="image-20221103135745712" style="zoom:25%;" /></p>

<ul>
  <li>
    <p>Qing took several yeas to conquer China proper, and expanded territories</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103135823958.png" alt="image-20221103135823958" style="zoom:25%;" /></p>
  </li>
  <li>
    <p>Qing had <strong>remarkably capable</strong> emperors = <mark>High Qing</mark>: <strong>Kangxi</strong> Emperor (r. 1654-1722) <strong>Yongzheng</strong> Emperor (r. 1722-1735) <strong>Qianlong</strong> Emperor (r. 1735-1796)</p>
    <ul>
      <li>set most of the boundaries of today’s China: Xingjiang, Tibet, etc</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>Kangxi</strong></p>

  <ul>
    <li>The Kangxi Emperor is considered one of China’s greatest emperors.</li>
    <li>He suppressed the Revolt of the Three Feudatories, forced the Kingdom of Tungning in Taiwan and assorted Mongol rebels in the North and Northwest to submit to Qing rule, and blocked Tsarist Russia on the Amur River, retaining Outer Manchuria and Outer Northwest China.</li>
    <li>The Kangxi Emperor’s reign <strong>brought about long-term stability and relative wealth</strong> after years of war and chaos. He initiated the period known as the “Prosperous Era of Kangxi and Qianlong” or <strong>“High Qing”</strong>, which lasted for several generations after his death.</li>
  </ul>

  <p><strong>Yongzheng</strong></p>

  <ul>
    <li>A hard-working ruler, the Yongzheng Emperor’s main goal was to create an <mark>effective government at minimal expense</mark>. Like his father, the Kangxi Emperor, the Yongzheng Emperor used military force to preserve the dynasty’s position.</li>
    <li>Although Yongzheng’s reign was much shorter than that of both his father (the Kangxi Emperor) and his son (the Qianlong Emperor), the Yongzheng era was a <strong>period of peace and prosperity</strong>.</li>
    <li>Yongzheng Emperor cracked down on corruption and reformed the personnel and financial administration</li>
  </ul>

  <p><strong>Qianlong</strong>:</p>

  <ul>
    <li>As a capable and cultured ruler inheriting a thriving empire, during his long reign, the Qing Empire reached its most splendid and prosperous era, boasting a large population and economy.</li>
    <li>As a military leader, he led military campaigns <mark>expanding the dynastic territory to the largest extent by conquering and sometimes destroying Central Asian kingdoms</mark>.</li>
    <li>This turned around in his late years: the Qing empire began to decline with corruption and wastefulness in his court and a stagnating civil society.</li>
  </ul>
</blockquote>

<p><strong>Qing Conquest of Taiwan in 1683</strong></p>

<ul>
  <li>
    <p>recall that Dutch conquered in 1623 and established their colony in Taiwan</p>
  </li>
  <li>
    <p>brief history of Taiwan</p>

    <ul>
      <li>
        <p>Fall of Ming 1640-1650: people from Fujian started settling there, and <strong>Ming loyalists retreated</strong> to Taiwan</p>
      </li>
      <li>
        <p><strong>Zheng Chengong</strong> 1662: drove out the dutch and more=100k Chinese emigrated there</p>
      </li>
      <li>
        <p><mark>Qing defeated the Zheng regime 1683</mark>: but allow it to exist autonomously and made it a <strong>prefecture</strong> (district under the government of a prefect) of <strong>Fujian</strong></p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103140256769.png" alt="image-20221103140256769" style="zoom: 33%;" /></p>
      </li>
      <li>
        <p>in 1870s, Taiwan became its own province as it is a key port for martime trade</p>
      </li>
      <li>
        <p>1894-1895 after Sino-Japanese war and WWII: <strong>became part of Japan</strong>. A lot of buildings today still have Japanese style</p>
      </li>
      <li>
        <p>at the end of 1945-1949: 孙中山 being the first leader of the Kuomintang (Nationalist Party of China), lost and followers immigrated to Taiwan.</p>

        <ul>
          <li>Thinking they can go back and recover, but obviously never happened. These are also considered as <em>Waisheng</em> and don’t speak Taiwanese (now the “ethnic” gap is much smaller)</li>
          <li>since many Waisheng are governments, so they are also kind of upperclass in Taiwan</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>therefore, Taiwanese very much takes over from <em>Mingnan</em> dialect from Fujian</p>
  </li>
  <li>
    <p>but again, Qing in general had loose control over newly conquered regions</p>
  </li>
</ul>

<p><strong>Qing conquest of Dzungar Mongols</strong></p>

<ul>
  <li>western Dzungar dmoinated the west euroasia in 1630</li>
  <li>long batter with Dzungar Mongol, and <strong>subdued Dzungar Mongol in 1696</strong></li>
  <li>but a lot of revolt by Dzungar Mongols = Qing launched genocide in 1750s
    <ul>
      <li>effectively <strong>ended the northen Mongol problem</strong></li>
    </ul>
  </li>
</ul>

<p><strong>Qing conquest in Tibet</strong></p>

<ul>
  <li>Dzungar mongols tried to expand into Tibet = hence they invaded in 1717</li>
  <li>so Qing invaded Tibet and <mark>installed a pro-Qing Dalai Lama</mark>; Tibet became a protectorate</li>
  <li>but again little interference in Tibetan local governance: hence maintained Tibetan culture</li>
</ul>

<p><strong>Qing creation of Xinjiang</strong></p>

<ul>
  <li>
    <p>in the Han dynasty, some chinese troops stationed there, but not in Tang and Song as Chinese had lost control</p>
  </li>
  <li>
    <p>finally re-acquired by the Qing = again Qianlong’s troops basically <strong>massacred Dzungar troops and completed subjudation</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103140836249.png" alt="image-20221103140836249" style="zoom: 25%;" /></p>
  </li>
  <li>
    <p>after this conquest, in 1768 announced the formal annexation = <strong>Xingjing, meaning new dominion</strong></p>

    <ul>
      <li>but again, territory under control of Manchus, but <strong>local poeple also allowed to contine their practice</strong></li>
      <li>no restrictions as with Han chinesemen</li>
    </ul>
  </li>
  <li>
    <p>however, maintenance of far territory is also a <strong>financial burden</strong>, e.g. military spending. Therefore, perhaps most effective use of Xinjing in Qing is as a <strong>penal colony = 10% officials in Xingjinag as punitive banishment</strong></p>
  </li>
</ul>

<p><strong>Managing large territory and diverse people</strong></p>

<ul>
  <li>
    <p><mark>Qianlong</mark> assumed different persona to different audiences = portray him in many different costumes</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">as Manjusri</th>
          <th style="text-align: center">as Confucian</th>
          <th style="text-align: center">as European-style Warrior</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103141308857.png" alt="image-20221103141308857" style="zoom:33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103141345240.png" alt="image-20221103141345240" style="zoom:25%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103141428175.png" alt="image-20221103141428175" style="zoom: 33%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>e.g. as Manjusri = appeal to Laima in Tibet, or as Confucian scholar when speaking to Han Chinese</p>

    <ul>
      <li><strong>acknowledges culture differences</strong> and ethnic distinctions, also especially wanted to <strong>preserve his Manchu ethnicity</strong></li>
    </ul>
  </li>
  <li>
    <p>so in general, Qing are interested in conquering <em>new</em> lands but <strong>not governing those <em>new</em> land</strong></p>

    <ul>
      <li>global history: Russian expanded east-ward: time of imperial land grabbing = have as much land as possible = control over resources</li>
      <li>but remember those from Qing are not peaceful conquest = e.g. Xinjiang lots of people massacred due to dissent. So still insisting on their <strong>political dominance but not really in establishing culture statues</strong></li>
    </ul>
  </li>
</ul>

<p><strong>Euroiserie in China</strong>: Yuanming Yuan built near a lake outside Beijing</p>

<ul>
  <li>
    <p>imperial palace began construction in 1707, added a number of <strong>western</strong> style building with the aid of <strong>Jesuit architects</strong></p>
  </li>
  <li>
    <p>unfortunately destroyed by British and French in 1860. Historical drawings shown below, and attempts of restoration in progress</p>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103141816162.png" alt="image-20221103141816162" style="zoom: 33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221103141923398.png" alt="image-20221103141923398" style="zoom:33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>
  </li>
</ul>

<h2 id="the-qing-in-crisis-opium--western-imperialism">The Qing in Crisis: Opium &amp; Western Imperialism</h2>

<p><strong>Previously on the Qing Conquest</strong></p>

<ul>
  <li>Decline of Ming and rise of Manchu Qing
    <ul>
      <li>Ming facing adverse climate, peasant rebellion, etc</li>
      <li>Peasant rebellions give opportunity to Manchus from NE China, descendants of Jin金</li>
    </ul>
  </li>
  <li>Qing did <strong>really well</strong> and controlled China for almost 3 centuries</li>
  <li>Qing used the <strong>Banner System</strong> which constructed a “political” ethnicity
    <ul>
      <li>a banner group represents a unit of a military organization/ unit of residence</li>
      <li>joining to be a Bannerman = being a Manchu = an “invented” ethnic group</li>
    </ul>
  </li>
  <li>Manchu Qing emphasizes that Manchus were <mark>not just Sinicized, but regarded Qing as a multiethnic empire</mark>;
    <ul>
      <li>e.g. Qianlong with multiple faces, different policies, etc.</li>
    </ul>
  </li>
  <li><mark>High Qing:</mark> <strong>territory</strong> reached the greatest extent
    <ul>
      <li>18 century: unrivaled standard of living and invention flow more from east to west</li>
      <li>19 century: outmatched by western countries</li>
    </ul>
  </li>
</ul>

<p><strong>The Canton System</strong>: Qing’s international trade</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110132343392.png" alt="image-20221110132343392" style="zoom:33%;" /></p>

<ul>
  <li>
    <p>Qing <strong>legalized private maritime commerce</strong>, though restricted to Canton</p>

    <ul>
      <li>there were many prosperous trade ports, but all abandoned by people and finally went with <strong>Canton = most dominate place in sino-western trade</strong></li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110132453325.png" alt="image-20221110132453325" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>wanted to control western influence</p>

    <ul>
      <li>control with inflow of western foreigners: fear illegal infiltration of western missionaries</li>
      <li>therefore, in 1757: Canton the sole port open for Western trade</li>
      <li>1760 court imposed <strong>regulations on foreigners</strong> (e.g. their mobility) in order to keep them from disturbing Chinese
        <ul>
          <li>even when trading, they need to deal with designated Qing merchants (hong行)</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>13 Hongs of Canton</strong>: 十三行</p>

<ul>
  <li>
    <p>Chinese merchants controlled business and <strong>monitored European trades</strong></p>

    <ul>
      <li>Hong = A hong 行 originally designates both a type of building and a type of Chinese merchant intermediary in Guangzhou (formerly known as Canton), Guangdong, China, in the 18–19th century, specifically during the Canton System period.</li>
      <li>foreigners can only spend a few weeks in the Hong, then return to Macao, which was still a Portuguese colony</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110132833326.png" alt="image-20221110132833326" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>Wu Bingjian 伍秉鑑 (1769–1843), known as “Howqua”浩官: <mark>most powerful merchant at the time</mark></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110133615919.png" alt="image-20221110133615919" style="zoom:33%;" /></p>

    <ul>
      <li>all Chinese home merchants belong to a guild: Cohong 公行 =  responsible for policing the trade with westerners</li>
      <li>granted right to monopolize import and export trade, but in turn <strong>guarantee to government all duties and proper behavior of western</strong></li>
      <li>he also involved in the opium trade = people in China today therefore have a fixed feeling towards him</li>
    </ul>
  </li>
  <li>
    <p>during 18th century, <strong>industrial revolution in Britain made it became leading commercial nation</strong> with colonies (e.g. in India)</p>

    <ul>
      <li>English trade with China monopolized by British East India Company = allowed by Queen Victoria</li>
      <li>but this powerful company is still restricted by Chinese Hong in Canton</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>The <strong>Industrial Revolution</strong> was the transition to <mark>new manufacturing processes in Great Britain, continental Europe, and the United States</mark>, that occurred during the period from around 1760 to about 1820–1840.</p>

  <ul>
    <li>This transition included going from <strong>hand production methods to machines</strong>, new chemical manufacturing and iron production processes, the increasing use of steam power and water power, the development of machine tools and the rise of the mechanized factory system.</li>
    <li>Output greatly increased, and a result was an <strong>unprecedented rise in population and in the rate of population growth</strong>.</li>
  </ul>
</blockquote>

<p><strong>Macartney Mission of 1793</strong>:</p>

<ul>
  <li>
    <p>British <strong>wanted to improve profits/trade footholds in China</strong>, e.g. get tea cheaper and establish footholds to store goods</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110134153766.png" alt="image-20221110134153766" style="zoom:33%;" /></p>

    <ul>
      <li>
        <p>hence wanted China to abandon tribute system = towards more in how European deal with each other</p>
      </li>
      <li>
        <p>a more direct trade. Free trade + <strong>Adam Smith = Wealth of Nation</strong> = justify British idea to ask China abandon Canton system</p>
      </li>
    </ul>
  </li>
  <li>
    <p>requests include</p>

    <ul>
      <li>
        <p>open commercial warehouse in Beijing</p>
      </li>
      <li>
        <p>sought extra territoriality:British nationals exempt from the Qing legal jurisdiction</p>
      </li>
    </ul>

    <p>i.e. wanted to revise the canton system to <strong>trade more freely in China</strong></p>
  </li>
  <li>
    <p>Therefore, missionaries sent to China brought some interesting European goods but Qianlong is not interested in</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110195847636.png" alt="image-20221110195847636" style="zoom:33%;" /></p>

    <p>notice that in this painting westerner <strong>tried to portray Chinese as despotic and un-understanding</strong>, because Qianlong (in his 80s) decisively <strong>refused all British request</strong> in a very condescending/arrogant tone:</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110134503496.png" alt="image-20221110134503496" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>Why did Qianlong reject those requests?</p>

    <ul>
      <li>fundamentally, those requests themselves are somewhat went overboard.</li>
      <li>perhaps Qianlong is not interested in western goods? Note that they <strong>did collected a lot of western gifts from other countries</strong>, so it is what presented was not new = China didn’t really need British manufactures
        <ul>
          <li>however, later on the major problem is his <mark>slight on western (military) tech</mark></li>
        </ul>
      </li>
      <li>perhaps because the missionaries did not kowtow? Recent research shows that obsession of the ritual does not come from Qianlong, but the missionaries</li>
    </ul>
  </li>
  <li>
    <p>Why was Qianlong so arrogant?</p>

    <ul>
      <li>
        <p>indeed, China was powerful as there is a huge trade imbalance: silk and porcelain, and tea became drink of choice in Britain</p>
      </li>
      <li>
        <p><strong>large amount of silver flow into China</strong>,</p>

        <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110135252789.png" alt="image-20221110135252789" style="zoom:33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110135349779.png" alt="image-20221110135349779" style="zoom:33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>
      </li>
      <li>
        <p>so British had to have plans of <strong>coming up alternatives commodity to trade</strong>:</p>

        <ul>
          <li>cotton + silver from new world</li>
          <li>tried to re-sell tea to the US to get profit: <strong>Boston Tea Party</strong>. The target was the Tea Act of May 10, 1773, which allowed the British East India Company to sell tea from China in American colonies <strong>without paying taxes</strong> apart from those imposed by the Townshend Acts. Hence is unfair and Americans dumped/destroyed entire shipment of tea</li>
          <li>Finally, British turned to opium</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Opium trade with China</p>

    <ul>
      <li>opium was not new, but only used for medical purposes before</li>
      <li>17th century: smoking opium and tabacco caught on in China, just like how British took tea.</li>
      <li>The <strong>great demand of opium</strong> then solved the trade deficit with Britain</li>
      <li>19th century: net outflow of silver from China due to opium trade</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110135724678.png" alt="image-20221110135724678" style="zoom:33%;" /></p>
  </li>
</ul>

<p><strong>Opium Imports from India to China</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110140059672.png" alt="image-20221110140059672" style="zoom:33%;" /></p>

<ul>
  <li>opium became major product in China over time
    <ul>
      <li>EIC monopoly ended and private trade (e.g. Russel &amp; Company) begins, even more opium (like freedom of trade)</li>
      <li>e.g. lots of American gained most fortune from China trade</li>
    </ul>
  </li>
  <li>then obviously this caused a lot of <strong>problems</strong>
    <ul>
      <li><strong>2 million addicts in China</strong></li>
      <li>difficult for Chinese to enforce ban
        <ul>
          <li>attempted 1729 first opium ban; 1800, banned importation and domestic production</li>
          <li>however, this <strong>did not work</strong> (even open trading disappeared) because there are lots of European <strong>smuggling + corruption</strong> from local officials and <strong>underground networks</strong></li>
        </ul>
      </li>
      <li>since opium was illegal, Qing made no tax revenue from it</li>
      <li>net silver flow out = silver shortage soon caused problem in money supply
        <ul>
          <li>2 million taels deficit in 1820s and 9 million in early 1830s</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>The Opium War and its Aftermath</strong></p>

<ul>
  <li>opium war fundamentally changed the relationship between China and the Western
    <ul>
      <li>before, China shows <strong>dominance</strong> over western power, like how most civilization in centered in China and how Mongol/northern tribes conquered lots of territories, and establishing <strong>tributary/vassal states</strong></li>
      <li>now, difference in technology made <strong>China lag much behind western in power</strong></li>
    </ul>
  </li>
  <li>
    <p>Emeperor appointed <mark>Lin Zexu</mark> to destroy opium at Humen</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110140939345.png" alt="image-20221110140939345" style="zoom:33%;" /></p>

    <ul>
      <li>Charles Elliot (Chief Superintendent of British Trade in China) promised to <strong>compensate the merchants after confiscation, but did not happen</strong> after Lin confiscated them</li>
      <li>hence English commercial interest <strong>pushing war</strong> with China, so Lin’s confiscation of opium became a justification for war</li>
    </ul>
  </li>
  <li>
    <p>Qing navy was <mark>ill prepared against British navy forces</mark></p>

    <ul>
      <li>China had no significant government input in maritime tech after Zhenghe’s voyage</li>
      <li>in general, low tax imposed = low research fund for strong navy power</li>
      <li>ended up having fully iron warship from British v.s. wood ship in China</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110141548241.png" alt="image-20221110141548241" style="zoom:33%;" /></p>
  </li>
</ul>

<p><strong>Treaty of Nanjing</strong>: defeat and humiliation</p>

<ul>
  <li>
    <p>China lost easily and is forced to <strong>sign unequal treaties</strong></p>
  </li>
  <li>
    <p>those treaties include:</p>

    <ul>
      <li>
        <p>21 million silver paid to England as punitive indemnity</p>
      </li>
      <li>
        <p>“opening” of treaty ports, such as Shanghai (later, “concessions”)</p>
      </li>
      <li>
        <p>gave England Hong Kong ‘in perpetuity’ (later, returned in 1997)</p>
      </li>
      <li>
        <p>pressured more opium trades</p>
      </li>
      <li>
        <p>low tariff set for the English</p>
      </li>
      <li>
        <p>in 1843: extra-territoriality: Qing laws did not apply to the English in Qing territory. (e.g., Englishmen could kill</p>

        <p>Chinese and not be subject to Qing law. )</p>
      </li>
    </ul>
  </li>
  <li>
    <p>all of those <mark>undermined Qing's autonomy</mark></p>

    <ul>
      <li>other treaties are also signed after Treaty of Nanjing</li>
      <li>China gradually had to rely on European, <strong>opium trade continued</strong>, even more unequal treaties</li>
      <li>Christian missionaries are allowed to preach</li>
    </ul>
  </li>
</ul>

<p><strong>“Century of Humiliation”: the PRC’s narrative of national history</strong></p>

<ul>
  <li>
    <p>this period refers to when China lost control of territories to Westerners, and starts with the Opium War (approximately 1839 - 1949)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221110142249123.png" alt="image-20221110142249123" style="zoom:33%;" /></p>

    <p>emphasize national rejuvenation by the community party</p>
  </li>
  <li>
    <p>lots of <strong>current policy is driven by the fear of China losing to western power</strong></p>

    <ul>
      <li>China’s modern-day policies are driven by this “never again” mentality.</li>
    </ul>
  </li>
</ul>

<h2 id="from-taiping-to-sino-japanese-war">From Taiping to Sino-Japanese War</h2>

<p><strong>Previously on the Qing Opium Crisis</strong></p>

<ul>
  <li><strong>Canton System</strong> (1757-1839/42): regulated Qing’s trade with the West through Chinese hong merchants; restrictive yet worked well before the abolition of the EIC’s monopoly in 1834</li>
  <li>
    <p>Mccartney Embassy (1793) is Britain’s attempt to revise the Canton System, it features two expansionist empires, bringing competing notions of world order; taken as a misinformed example of <strong>British flexibility vs. Chinese rigidity and xenophobia</strong></p>
  </li>
  <li>British E. India Company ships opium to Qing, in exchange for silver and goods; Qing court orders opium confiscated from British and destroyed, triggering Opium War (1839-42), <strong>Treaty of Nanjing</strong> is first of many <strong>‘unequal treaties’</strong></li>
</ul>

<p><strong>Domestic Problems under Qing</strong>: towards later rebellion</p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115131925018.png" alt="image-20221115131925018" style="zoom:33%;" /></p>

<ul>
  <li>
    <p>recall that Qing at its best time (High Qing) had large territory and high standard of living</p>

    <ul>
      <li>around the turn 19 century, government failures and international relations caused trouble</li>
    </ul>
  </li>
  <li>
    <p>now, <strong>silver became scarce</strong> after 1800—especially due to silver outflows from China in order to purchase British EIC opium.</p>

    <ul>
      <li>silver scarcity meant more copper cash required to <strong>pay same taxes (in silver)</strong>.
        <ul>
          <li>in 1750: one tael of silver needed 780 copper cash</li>
          <li>in 1838: one tael of silver needed 1,650 copper cash.</li>
          <li>in effect, silver scarcity meant tax burden more than doubled</li>
        </ul>
      </li>
      <li>people can’t pay → taxes more burden on taxpayers → tax evasion → less governments revenue → weaker government</li>
    </ul>
  </li>
  <li>
    <p>source of internal unrest: <strong>limited resource and population pressure</strong></p>

    <ul>
      <li>recall end of Ming had climate change and wars, where starting from Qing 1640 increases</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115132218907.png" alt="image-20221115132218907" style="zoom:33%;" /></p>

    <ul>
      <li>however, as more population <strong>amount of arable land is still fixed</strong></li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115132322946.png" alt="image-20221115132322946" style="zoom:33%;" /></p>

    <p>hence this lead to environment degradation and competition for resources</p>

    <ul>
      <li>unstable water ecosystems due to intense land reclamation</li>
      <li>deforestation = erosion, flooding, and desertification = 30,000 died in Kaifeng due to flooding. From 1645 to 1855, a flood almost every 1.89</li>
    </ul>
  </li>
  <li>
    <p><strong>talent glut</strong> = talent grows faster than the number of jobs available = students being jobless</p>

    <ul>
      <li>lower degree holders: 40k in 1400; 600k in 1700; over 1 million in 1800 (but gov only fixed 20k official posts)</li>
      <li>a social problem, hence <strong>causing those unemployed/underpaid people indignant</strong>, who later contributes to rebellion (combined with factors above)</li>
    </ul>
  </li>
  <li>
    <p>two of the largest (many) <strong>civil wars</strong> that occurred in Qing in 19th century</p>

    <ul>
      <li><strong>Taiping</strong> rebellion (1850-64)</li>
      <li><strong>Nian</strong> rebellion (1851-68)</li>
    </ul>
  </li>
</ul>

<p><strong>Outbreaks of Many Rebellions</strong></p>

<ul>
  <li>
    <p><strong>White lotus rebellion</strong> (1796-1804)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115133127394.png" alt="image-20221115133127394" style="zoom:25%;" /></p>

    <ul>
      <li>White Lotus Society: a millenarian Buddhist secret society that first appeared in the Yuan dynasty</li>
      <li>help poor people, women played leadership roles</li>
      <li>political movement of grass roots society in the area shown above, and organized them into rebel movement
        <ul>
          <li>again a <strong>result of economic strain, overpopulation, government corruption, etc</strong></li>
          <li>impoverished peasants feeling indignant</li>
        </ul>
      </li>
      <li>took 8 year to take them out and spent 5 years of government = further stress in government</li>
    </ul>
  </li>
  <li>
    <p><strong>Eight Trigram</strong>: another secret society</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115133335829.png" alt="image-20221115133335829" style="zoom:25%;" /></p>

    <ul>
      <li>in 1813, off-shoot of white lotus, again became a rebellion and many people died</li>
    </ul>
  </li>
  <li>
    <p><strong>Triads</strong></p>

    <ul>
      <li>impoverished, hence people formed fraternity group = anti-Manchu and pro-Han</li>
      <li>smuggling activity and armed quarrels = quite militant group of people</li>
    </ul>
  </li>
  <li>
    <p><strong>Taiping Rebellion</strong> (more detail next)</p>
  </li>
  <li>
    <p>other rebellions such as</p>

    <ul>
      <li><strong>Nian Rebellion</strong>
        <ul>
          <li>crushed by Generals <strong>Zuo Zongtang 左宗棠</strong> and Li Hongzhang 李鸿章</li>
          <li>chef invented that General Zuo’s Chicken 左宗棠鸡 is from the same Hunan province, has nothing to do with Zuo Zongtang as person</li>
        </ul>
      </li>
      <li><strong>Panthay Rebellion</strong>: ethnic tension between Muslim and Manchu</li>
      <li><strong>Ya’qub Beg Khante</strong>: turkey had Muslim establish autonomous regime, then suppressed by Zuo Zongtang</li>
    </ul>
  </li>
</ul>

<p><strong>Structural Difficulties of Managing Crisis</strong></p>

<ul>
  <li>country too large and too populous
    <ul>
      <li>many ethnic groups, and population <strong>outpaced administrative control</strong></li>
      <li>limitations of bureaucratic efficiency before telegraph and rail (e.g. wrong info from local)</li>
    </ul>
  </li>
  <li>competing national and <strong>local</strong> interests
    <ul>
      <li>e.g., local officials overreported rebel threats to siphon funds.</li>
    </ul>
  </li>
</ul>

<p><strong>Taiping Heavenly Kingdom</strong></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115134718029.png" alt="image-20221115134718029" style="zoom:33%;" /></p>

<ul>
  <li>
    <p>greatest revolution the world has yet seen</p>

    <ul>
      <li>people are positive about the revolution as being confident in the portrayal</li>
      <li>involves both peasants and failed exam takers, being indignant of the stresses</li>
    </ul>
  </li>
  <li>
    <p>starts from the South: where may conflicts are from locals and <strong>Hakka</strong> (guest, ethnically Han who fled from north to South to evade from Xiongnu during the Han dynasty)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115134952213.png" alt="image-20221115134952213" style="zoom:33%;" /></p>

    <p>as newcomers, Hakkas are seen to compete resources and not welcomed by locals</p>

    <ul>
      <li>architecture themsleves with a hole is for defensive purpose = tension with the locals</li>
      <li>can be found in Guandong, Guangxi, and Fujian</li>
    </ul>
  </li>
  <li>
    <p><strong>Hong Xiuquan = a Hakka who organized the rebellion</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115170953866.png" alt="image-20221115170953866" style="zoom:33%;" /></p>

    <ul>
      <li>from a poor family,  failed examination four times.
        <ul>
          <li>after failed the 3 time = had dream vision who when he was the second son of God, and brother of Jesus.</li>
        </ul>
      </li>
      <li>then he
        <ul>
          <li>smashed shrines dedicated to <strong>Buddhist and Confucian</strong> worship.</li>
          <li>added <strong>anti-Manchu strain to his preaching</strong></li>
          <li>calling people to rise up and defeat the Manchu rulers</li>
        </ul>
      </li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115135542705.png" alt="image-20221115135542705" style="zoom:33%;" /></p>

    <p>eventually they expanded and included people outside of Hakka and went all the way to Nanjing, and made it a capital. There, he urges for</p>

    <ul>
      <li><mark>equalization</mark> of land holdings, <mark>equality</mark> of men and women</li>
      <li><mark>equal</mark> exam but test on stuff such as translation of bibles instead Confucian classics</li>
      <li><mark>Utopian</mark> view of the society</li>
    </ul>
  </li>
  <li>
    <p><strong>Western reactions to Taiping</strong>: Taiping armies known for their puritanical zeal</p>

    <ul>
      <li>western (both english and american) missionaries hoped Taiping will succeed
        <ul>
          <li>Hong Xiuquan claims to be related to Jesus = hope it will succeed and convert Chinese to Christian</li>
        </ul>
      </li>
      <li>European liked to because it is radial and revolutionary (devotion of equality)</li>
      <li>English government: was neutral and they wanted just trade. So they took advantage of it help Chinese to quell the rebellion and in turn <strong>take more privileges in trade</strong> (heavily dependent in trading in China and US)
        <ul>
          <li>note that US civil war is also during 1681 = less supply/trade from US; and similarly Taiping broke out in China</li>
          <li>English fear that their trade econ will collpase as they are major traders</li>
          <li>so they need to interfere somewhere = decided to intervene in China</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>but the largest credit of quelling Taiping still goes to <mark>Han Chinese officials</mark></p>

    <ul>
      <li>note those Han Chinese <mark>gentry</mark> (not people who failed, who usually join rebels) <mark>have not much anti-Manchu thougths</mark></li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115140518034.png" alt="image-20221115140518034" style="zoom: 25%;" /></p>

    <ul>
      <li>he built an army from his home province = Hunan, hence Xiang Army</li>
      <li><strong>financed through local gentry</strong> instead of Manchu lead government</li>
      <li>indicates a <mark>shifting (military) power to locals</mark> from the center/government (e.g. rise of Han)</li>
    </ul>
  </li>
  <li>
    <p>the Taiping rebellion caused</p>

    <ul>
      <li>nation-wide: affected 16 out of 18 provinces</li>
      <li>unprecedented death toll: <strong>at least 20 million, up to 40 million</strong>. (by comparison, 620,000 died in the American Civil War)</li>
      <li>devastated the economically important lands south of Yangzi.</li>
      <li>so close to bring down the Qing dynasty, but didn’t.
        <ul>
          <li>Recall that the pattern of rebellion replacing dynasty was: warlords rise in power to quell the rebellion, but after they compete and winner takes a new Dynasty</li>
          <li>Now, the army still remains to be part of the imperial army. But after this local provincial army became so strong = replacing Manchu garrisons as major power = <mark>shift of balance of power from government to the locals</mark></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>this rebellion in total lasted 15 years, because Qing was also busy doing something else: fighting the Europeans</p>
  </li>
</ul>

<p><strong>The Second Opium War</strong> (1856-1860). Also called Arrow War</p>

<ul>
  <li>
    <p>right in the middle of Taiping Rebellion, <strong>China was also engaging with great Britain and France</strong> in addition to Taiping rebels</p>
  </li>
  <li>
    <p>called Arrow War as it is named by the Ship in suspicion of piracy, how ever it is layer registered with English.</p>

    <ul>
      <li>British use this incident as <strong>pretext to start war</strong>, to add more unequal terms to treaty</li>
      <li>at the same time, a French was to be executed, hence French joined as well</li>
    </ul>
  </li>
  <li>
    <p>ended with (second) defeat of Qing government to the English</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115141216430.png" alt="image-20221115141216430" style="zoom:33%;" /></p>

    <p>resulted in</p>

    <ul>
      <li>burn down of Summer Palance (built for Qianlong and his successors and had European style architectures)</li>
      <li>more unequal treaty signed (<strong>1860 Convention of Peking</strong>), more ports opened, and huge indemnity. Some Chinese being taken as slaves to the Americas (indentured)
        <ul>
          <li>Indentured servitude is a form of labor where an individual is under contract to work without a salary to repay an indenture or loan</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Self-Strengthening Movement</strong> 1861-95</p>

<ul>
  <li>
    <p>Qing fear that dynasty is going to collapse soon. Most urgently they wanted to <strong>reform the military and modernize with western tech</strong></p>
  </li>
  <li>
    <p>Li Hongzhang as an example:</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115141726795.png" alt="image-20221115141726795" style="zoom:33%;" /></p>

    <ul>
      <li>equipped his army with <strong>imported weapons</strong> and developed <strong>modern</strong> provincial armies to defeat Taiping rebels.</li>
    </ul>
  </li>
  <li>
    <p>this promoted Qing to</p>

    <ul>
      <li>set up <strong>factories</strong> to build western style weapons and warships</li>
      <li><strong>education</strong> infrastructure to study western inventions/thoughts
        <ul>
          <li>e.g. schools of science and technology in the Fuzhou shipyard and Jiangnan arsenal.</li>
          <li>school of foreign languages.</li>
          <li>study abroad programs in America, England, and France</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>knowledge about the west gradually improved</p>

    <ul>
      <li>e.g. chinese kids sent to educational mission to the US, including going to Yale and Columbia</li>
      <li>China then also added structures such as railways</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115142103609.png" alt="image-20221115142103609" style="zoom:33%;" /></p>
  </li>
</ul>

<p><strong>First Sino-Japanese War</strong> (1894-95)</p>

<ul>
  <li>
    <p>though the self-improvement movement is doing well, until Japan defeated China</p>

    <ul>
      <li>before, China thought Japan is a little brother</li>
      <li>now, there is this humiliating defeat</li>
    </ul>
  </li>
  <li>
    <p>Meiji emperor during the time: <strong>conflicted with Qing influence of Korea, and engaged into war</strong></p>

    <ul>
      <li>Korea had long been China’s most important client state, but its strategic location opposite the Japanese islands and its natural resources of coal and iron attracted Japan’s interest.</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115142336795.png" alt="image-20221115142336795" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>war broke out mostly at sea, and Japan had China sign a treaty after China’s defeat</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221115142436096.png" alt="image-20221115142436096" style="zoom:33%;" /></p>

    <ul>
      <li>term includes ceding Taiwan to Japan, and recognition of Korean Independence (short-lived, for it was colonized by Japan in 1910)</li>
    </ul>
  </li>
  <li>
    <p>Qing realized that its nation is weak, but why even after self-improvement movement?</p>

    <ul>
      <li>some people see self-improvement movement as useless</li>
      <li>others attribute to problems such as corruption + lack of training and organization/literacy of Chinese troops despite advance in technology</li>
    </ul>

    <p>regardless, the failure of the Qing in its late decades also contribute</p>
  </li>
</ul>

<h1 id="from-empire-to-republic">From Empire to Republic</h1>

<p><strong>Previously on the late Qing crisis</strong></p>

<ul>
  <li>
    <p>Just prior to the start of the Opium War, silver shortage, ecological stress, have pushed <strong>Qing China into general economic crisis</strong>; peasant unrest and tax revolts proliferate</p>
  </li>
  <li>Taiping Rebellion (1850-64): failed scholars espousing heterodox Christianity (Hong Xiuquan)
    <ul>
      <li>had motivation for equality, but also the most destructive rebellion</li>
      <li>long lasting rebellions = resulting in Qing dynasty power is severely undermined</li>
    </ul>
  </li>
  <li>Han <strong>provincial gentry</strong> come to aid of the dynasty, raised local armies to defeat Taipings
    <ul>
      <li>also came to initiate <strong>self-strengthening movement to learn western technologies</strong></li>
      <li>e.g. Li Hongzhang, builds western arsenals, weapons, and translate western texts.</li>
    </ul>
  </li>
  <li><strong>Arrow War</strong> (1856-60) at the same time, also tension with western especially the English and French
    <ul>
      <li>Qing lost again to the Anglo-French force, and have <strong>summer palace burnt and more unequal treaties signed</strong></li>
    </ul>
  </li>
  <li><strong>Sino-Japanese War</strong> (1894-1895): Chinese defeat again, still due to technology diff or lack of military organization/coordination? Don’t know.
    <ul>
      <li>defeat has deep consequence = realizes how astonishing weak the empire was = Chinese <strong>loss of faith in Manchus</strong></li>
    </ul>
  </li>
</ul>

<p><strong>Hundred Day’s Reform</strong>: and later a serious of rebellions/reformed until 1911 <mark>Xinhai Rebellion 辛亥革命</mark> ended Qing in 1912</p>

<ul>
  <li>
    <p>when China lost Sino-Japan War, western realized Chinese weakness and were competing for territory.</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117132336654.png" alt="image-20221117132336654" style="zoom: 25%;" /></p>

    <p>previously they were mostly occupying parts of South-East Asia. But seeing how easily China is defeated by Japan, <strong>westerns are also lurking and China is “cut up”</strong> during 1902-1903:</p>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117132534877.png" alt="image-20221117132534877" style="zoom: 25%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117132748517.png" alt="image-20221117132748517" style="zoom:25%;" /> |
| :———————————————————-: | :———————————————————-: |</p>
  </li>
  <li>
    <p>How to save China? First attempt by <strong>Hundred Day’s Reform</strong> 戊戌(Wu Xu)變法</p>

    <ul>
      <li>was a failed 103-day national, <strong>cultural, political, and educational reform movement</strong> that occurred from 11 June to 22 September 1898 during the late Qing dynasty</li>
      <li>they heard the humiliating signing of Sino-Japanese defeat treaty, and became indignant</li>
      <li>in 1898, they launched a reform funded by Guangxu Emperor (but <mark>Cixi</mark> is power behind the throne = most powerful since Wudi)
        <ul>
          <li>Cixi’s aim is to maintain her role and power, rather than help people. e.g. reform policies approved usually for self-serving purposes</li>
          <li>but in 1898 she allowed Guangxu to rule on his own, and K and L are asked to help with the reform</li>
        </ul>
      </li>
    </ul>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117133001371.png" alt="image-20221117133001371" style="zoom: 25%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117133109537.png" alt="image-20221117133109537" style="zoom:25%;" /> |
| :———————————————————-: | :———————————————————-: |</p>

    <ul>
      <li>she then was afraid that Guangxu’s reform would undermine she power and Manchu, so locked up Guangxu and the reform proponents fled to Japan = hence only 103 days of reform</li>
      <li>Cixi = <mark>ended last chance of China to change peacefully</mark></li>
    </ul>
  </li>
</ul>

<p><strong>The Boxer Uprising</strong> (1900): purge foreigners and Christians. It was an anti-foreign, anti-colonial, and anti-Christian uprising in China between 1899 and 1901, towards the end of the Qing dynasty</p>

<ul>
  <li>
    <p>Chinese blamed failing/natural disasters to be caused by foreigners: e.g. wrongly influenced Chinese culture and practices</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117133822915.png" alt="image-20221117133822915" style="zoom:25%;" /></p>

    <p>note that mostly peasants, and called “Boxer” because they mostly fight with martial arts</p>
  </li>
  <li>
    <p>emerged also in 1898 after 100 days reform, and hates foreigners and converts (to follow foreign religions such as Christianity)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117134110487.png" alt="image-20221117134110487" style="zoom:25%;" /></p>

    <p>as you see it is technically “not a religion problem”, but the <strong>socio-economic problem</strong> that whoever converted to Christian had this unfair protection and foreign backing.</p>
  </li>
  <li>
    <p>The events came to a head in June 1900 when Boxer fighters, convinced they were invulnerable to foreign weapons, <strong>converged on Beijing with the slogan “Support the Qing government and exterminate the foreigners.”</strong></p>
  </li>
  <li>
    <p>To counter this rebellion against foreigners, an <mark>Eight Nation Alliance</mark> of American, Austro-Hungarian, British, French, German, Italian, Japanese and Russian troops moved into China to lift the siege, and afterwards <strong>took over the palace in Beijing</strong></p>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117134700506.png" alt="image-20221117134700506" style="zoom:25%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117134737638.png" alt="image-20221117134737638" style="zoom:25%;" /> |
| :———————————————————-: | :———————————————————-: |</p>

    <p>and again Chinese’ loss lead to the Boxer Protocol in 1901 = total indemnity of 450 million</p>
  </li>
  <li>
    <p><em>again</em> spurred national debate of how China can still move forward</p>
  </li>
</ul>

<p><strong>Third and Last Attempt to Save China</strong>: 1911-1912 辛亥革命</p>

<ul>
  <li>
    <p>so far we see efforts starting from self-strengthening, 100 days reform, boxer uprising, all failed</p>
  </li>
  <li>
    <p><strong>people needed <em>will</em> reformation</strong> = Zou Rong, an anti-Manchu nationalist and published the <em>Revolutionary Army</em> journal</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117135352207.png" alt="image-20221117135352207" style="zoom: 33%;" /></p>

    <ul>
      <li>convinced that wipe out Manchus is necessary, and called out in the <em>Revolutionary Army</em> journal for comrades</li>
      <li>advocated to establish the Chinese republic</li>
    </ul>
  </li>
  <li>
    <p><strong>Sun Yat-sen</strong>: the most prominent anti-Manchu revolutionary and a founding member of anti-Machu</p>

    <ul>
      <li>believes the best way to overthrow is to <strong><em>ally with the secrete society</em></strong> (e.g. the triad, etc)</li>
      <li>he spent most of the time traveling to many foreign grounds = to gain financial support to fund uprisings in China</li>
      <li>in 1905-12 he formed the Revolutionary Alliance = people with many different ideals such as socialist and republican, but all allied to <mark>overthrow the Manchu rulers and revive China</mark>. Later this alliance is transformed into <strong>Guomingdang (KMT)</strong></li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117135747597.png" alt="image-20221117135747597" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>his <mark>three main principles</mark> are</p>

    <ul>
      <li><strong>nationalism</strong> 民族主义 = members of the country to pay highest loyalty to the nation, rather than to family, etc.</li>
      <li><strong>democracy</strong> 民权主义 = to him it means western constitutional government</li>
      <li><strong>livelihood of the people</strong> 民生主义 = social welfare such as food, housing, transportation, and etc.</li>
    </ul>
  </li>
  <li>
    <p>revolutionary broke out in 1911 (Xinhai Revolution), many provinces declared independence, and <mark>ended Qing in 1912</mark></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117140318311.png" alt="image-20221117140318311" style="zoom:25%;" /></p>

    <ul>
      <li>Qing gave up in only 4 month</li>
      <li>“founding father” at that time was at Colorado, so some people say this title of “founding father” is overestimated</li>
      <li>On 1 January 1912, the National Assembly declared the establishment of the <strong>Republic of China,</strong> with Sun Yat-sen, leader of the Tongmenghui (United League), as President of the Republic.</li>
    </ul>
  </li>
  <li>
    <p>But Sun quickly gave away the power to <mark>Yuan Shikai</mark> = no longer the Chinese coin of hole in the middle = western style coin</p>

    <ul>
      <li>because there was this promise that: Sun would resign in favor of Yuan Shikai, who would become President of the new national government, <em>if Yuan could secure the abdication of the Qing emperor</em></li>
      <li>Even Sun had gather fund, had ideals, but he didn’t have much military power. Hence Yuan Shikai, who was appointed as the leader of the powerful Beiyang Army by Qing</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117140804031.png" alt="image-20221117140804031" style="zoom: 25%;" /></p>
  </li>
  <li>
    <p>however, Yuan Shikai died early before he could consolidate a legitimate central government before his death in 1916, led to decades of political division and <mark>warlordism</mark>, including an attempt at imperial restoration = China entered <mark>again the unrestful warlord period (1916 - 1927)</mark></p>
  </li>
</ul>

<p><strong>Change of Beliefs and Practices in China</strong> during 1915-1926</p>

<ul>
  <li>
    <p>a new periodical serving as a source of new ideology and heavily influenced the New Culture Movement and May 4th protests later</p>

    <ul>
      <li><strong>The May Fourth Movement</strong> was a Chinese anti-imperialist, cultural, and political movement which grew out of student protests in Beijing on May 4, 1919. Students came to protest the Chinese government’s weak response to the Treaty of Versailles decision to allow Japan to retain territories in Shandong that had been surrendered to Germany after the Siege of Tsingtao in 1914.</li>
      <li>The New Culture Movement (Chinese: 新文化運動) was a movement in China in the 1910s and 1920s that <strong>criticized classical Chinese ideas</strong> and promoted a new Chinese culture based upon progressive, <mark>modern and western ideals like democracy and science</mark>.</li>
    </ul>
  </li>
  <li>
    <p>the new periodical: <em>New Youth</em> was a Chinese literary magazine founded by <mark>Chen Duxiu</mark> and published between 1915 and 1926</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117141302470.png" alt="image-20221117141302470" style="zoom:25%;" /></p>

    <ul>
      <li>
        <p>founded by Chen Duxiu, advocate for individual freedom, and some major ideologies including rejecting Confucianism and <strong>crave the energy of youth</strong> (hence challenge the Confucius idea of young obey elders), promoting the young to think by themselves</p>
      </li>
      <li>
        <p>advocated serious ideas in vernacular language v.s. in the past those serious writings tend to use classical styles</p>
      </li>
      <li>
        <p>also had works from both <mark>Lu Xun</mark> and <mark>Mao Zedong</mark></p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117171901925.png" alt="image-20221117171901925" style="zoom:25%;" /></p>

        <p>note that even though Japan is disliked due to its invasion, <strong>Japan was still the first choice of over sea study</strong> because it is a) close b) had modernized tech, and c) similar language</p>
      </li>
      <li>
        <p>the journal also focused the <mark>adoption of Western ideals</mark> of <strong>“Mr. Science”</strong> (賽先生) and <strong>“Mr. Democracy”</strong> (德先生) in place of “Mr. Confucius” in order to strengthen the new nation (though science was better received)</p>
      </li>
    </ul>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117141125330.png" alt="image-20221117141125330" style="zoom: 33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117141129267.png" alt="image-20221117141129267" style="zoom: 33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>
  </li>
  <li>
    <p>during this period, many male also came out to speak for women’s rights (e.g. Lu Xun, a male and He Zhen, a female)</p>
  </li>
</ul>

<p><strong>May 4th Protests</strong>, 1919</p>

<ul>
  <li>
    <p>recall that China joined allies, so when German defeated territories in China should be handed back to China, but the result was disappointing that German concessions will be handed over to Japan due to the Treaty of Versailles decision</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117141804283.png" alt="image-20221117141804283" style="zoom:25%;" /></p>
  </li>
  <li>
    <p>students were very angry = government arrested student leaders = general consensus is reached among the students such as <strong>nationalism, patriotism, science, and democracy</strong>, and enemies are imperialism, warlordism, etc.</p>
  </li>
</ul>

<p><strong>Founding Chinese Communist Party (CCP)</strong> in 1921</p>

<ul>
  <li>
    <p>at the same time WWI finished, where <mark>Marxism and Leninism is successful</mark> as seen in soviet union</p>

    <ul>
      <li>
        <p>also had anti-western, so liked soviet union a lot</p>
      </li>
      <li>
        <p>Marxism and Leninism shows capable of revolution = exactly what China need</p>
      </li>
    </ul>
  </li>
  <li>
    <p>again founded by Li Daozhao and Chen Duxiu, for Maxism (Mao Zedong also influenced by Li Daozhao)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221117142227411.png" alt="image-20221117142227411" style="zoom:25%;" /></p>
  </li>
  <li>
    <p>as we know later, under the leadership of Mao Zedong, the <strong>CCP emerged victorious in the Chinese Civil War against the Kuomintang</strong>, and in <mark>1949 October 1st Mao proclaimed the establishment of the People's Republic of China</mark>.</p>
  </li>
</ul>

<hr />

<p><strong>Into the Modern China</strong>: a short review and preview of major events until 1949. In general, this is the period with <strong>much more foreign influence</strong> compared to past China/Dynasty changes. Another difference is that before: rebellion = restoration of past glory. But now modern = completely new motivation/ideology</p>

<ul>
  <li>1841 - first opium war</li>
  <li>1860s - second opium war: imperial incursions and increasing christian missionaries, English, etc in China
    <ul>
      <li>christian autonomy in local society here is central to the cause of the later boxer up-rising</li>
    </ul>
  </li>
  <li>1861-95 self-strengthening movement</li>
  <li>1895 - Sino-Japanese war: watershed moment that losing to Japan (long seen as vassal state) made Chinese realizes its weakness + anti-Manchu</li>
  <li>1898 - Hundred Days reform</li>
  <li>1900 - Boxer rebellion. Can think of as “thugs” trying to bring back Chinese ruling. Quelled by the eight-nation alliance</li>
  <li>1911 - <mark>Xinhai Revolution</mark>. Starting in Wushang - we’ve rebelled, who will join us - lots of provinces joined quickly
    <ul>
      <li>in Feb 1912 Qing abdicated the throne, and <strong>Republic of China found 1912 Jan 1</strong> (recognized in Taiwan), and Sun Yat-sen was the head</li>
      <li>however, Sun didn’t have military power but the ideals, hence collabed with Yuan Shikai = will be the new president if his military can help</li>
    </ul>
  </li>
  <li>1916 - 1927 warlord period of decentrailized china = time of disunity
    <ul>
      <li>Yuan Shikai died in 1916 - very short reign before the government is coalesced</li>
    </ul>
  </li>
  <li>1921-24: KMT allied with CCP to march north and subdue the warlords and reunified the coountry
    <ul>
      <li>In 1921, Chen Duxiu and Li Dazhao led the founding of the CCP with the help of the Far Eastern Bureau of the Communist Party of the Soviet Union and Far Eastern Secretariat of the Communist International.</li>
      <li>For the first six years of its history, the CCP aligned itself with the Kuomintang (KMT) as the organized left-wing of the larger nationalist movement.</li>
    </ul>
  </li>
  <li>1919 <strong>May 4th movement</strong>: territory not given back to China - highly literary movement of intellectuals such as Lu Xun and Cheng Duxiu trying to <strong>incorporate western ideas into China governing</strong></li>
  <li>1925: Sun Yat-sen died, who is a key figure making the alliance of CCP and KMT together, things goes wrong between CCP and KMT
    <ul>
      <li>General Chiang Kai-shek, who became the Chairman of the Kuomintang after Sun’s death and subsequent power struggle in 1925, began the Northern Expedition in 1926 to overthrow the Beiyang government.</li>
      <li>In 1927, Chiang moved the nationalist government to Nanking and <strong>purged the CCP, beginning with the <mark>Shanghai massacre</mark></strong>. The latter event forced the CCP and KMT’s left-wing into armed rebellion, marking the beginning of the <mark>Chinese Civil War</mark></li>
      <li>basically KMT turned against CCP. Bear in mind that former had strongholds in cities, whereas latter whose ideal is communist only yet had supports by peasants in countrysides</li>
    </ul>
  </li>
  <li>1927 - 1949: a lot of upheaval and disunity
    <ul>
      <li>CCP fighting with KMT, and Japan is also attacking</li>
      <li>The <mark>Second Sino-Japanese War (1937–1945, WWII)</mark> or War of Resistance (Chinese term) was a military conflict that was primarily waged between the Republic of China and the Empire of Japan.</li>
    </ul>
  </li>
  <li>1949 - <strong>CCP won</strong> and start of People Republic of China
    <ul>
      <li>The Communists gained control of mainland China and established the People’s Republic of China in 1949, forcing the leadership of the Republic of China to retreat to the island of Taiwan.</li>
    </ul>
  </li>
</ul>

<h2 id="the-nanjing-decade-1927---1937">The Nanjing Decade (1927 - 1937)</h2>

<blockquote>
  <p>Some key terms in this period</p>

  <ul>
    <li><strong>Fascism</strong> is a authoritarian and ultra-nationalist political ideology, characterized by a dictatorial leader, centralized autocracy, militarism, forcible suppression of opposition, belief in a natural social hierarchy, subordination of  individual interest for the perceived good of the nation and race, and strong regimentation of society and the economy</li>
    <li><strong>Imperialism</strong> is the state policy, practice, or advocacy of extending power and dominion, especially by direct territorial acquisition or by gaining political and economic control of other areas, often through employing hard power, but also soft power.</li>
    <li><strong>Warlord Era</strong>
      <ul>
        <li>The <strong>Warlord Era</strong> was a period in the history of the <strong>Republic of China</strong> (not PRC) when control of the <strong>country was divided among former military cliques of the Beiyang Army</strong> and other regional factions from 1916 to 1928.</li>
        <li>In historiography, the Warlord Era began in 1916 upon the <strong>death of Yuan Shikai,</strong> the de facto dictator of China after the Xinhai Revolution overthrew the Qing dynasty and established the Republic of China in 1912. <strong>Yuan’s sudden death created a power vacuum</strong> that spread across the country hence the warlord area.</li>
      </ul>
    </li>
    <li>The <strong>Nanjing Decade</strong>:
      <ul>
        <li>The Nanjing decade (also 南京十年; 黃金十年) is an informal name for the decade from 1927 (or 1928) to 1937 in the People’s Republic of China. It began when Nationalist, or even “Confucian Fascist” Generalissimo <strong>Chiang Kai-shek took Nanjing</strong> from warlord Sun Chuanfang halfway through the Northern Expedition in 1927. Chiang declared it <strong>to be the national capital</strong> despite the existence of a left-wing Nationalist government in Wuhan.</li>
        <li>The Nanjing decade was marked by both progress and frustration.
          <ul>
            <li>The period was far more stable than the preceding Warlord Era. There was <strong>enough stability</strong> to allow economic growth and the start of ambitious government projects. Entrepreneurs, educators, lawyers, doctors, and other professionals were more free to create modern institutions than at any earlier time.</li>
            <li>However, the Nationalist government also suppressed dissent, corruption and nepotism were rampant and <strong>revolts</strong> broke out in several provinces; internal conflicts also perpetuated within the government. The <mark>Nationalists</mark> were never able to fully pacify the <mark>Chinese Communist Party</mark>, and struggled to address the widespread unrest and protests over their failure to check Japanese aggression</li>
          </ul>
        </li>
        <li>The decade ended with the outbreak of the <strong>Second Sino-Japanese War</strong> in 1937 and the retreat of the Nationalist government to Wuhan.</li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>There will be a lot on student protests, resistance, etc.</p>

<ul>
  <li>Racism in Shanghai, Chinese tormented by powerful imperial forces.</li>
  <li>On going struggle between <strong>KMT</strong>, <strong>CCP</strong>, and the encroaching <strong>Japanese</strong> Imperialism</li>
</ul>

<p><strong>The Warlord Era</strong></p>

<ul>
  <li>
    <p>In 1915 <mark>Yuan Shicai with his Beiyang army</mark> has declared himself a new emperor, with the intention of finding new dynasty = Republic of China (the one with Sun Yatsen). But he died soon in 1916 so China is divided into regions ruled by separate generals and hence a <strong>warlord era</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129132107080.png" alt="image-20221129132107080" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>KMT revival with Sun Yat-sen’s return in 1917, and Communist continued their activities</p>

    <ul>
      <li>intense ideology struggle on both sides, nationalist v.s. communist</li>
      <li>on KMT, some were believing in fascist, but also some sympathizes with communist. Same on CCP’s side</li>
    </ul>
  </li>
  <li>
    <p>but both KMT and CCP agreed on bourgeosis revolution (as with Marxism–Leninism in Soviet), hence they cooperate to create <mark>United Front</mark></p>

    <ul>
      <li>
        <p>launch northern expedition against warlords in the north</p>
      </li>
      <li>
        <p>before the beginning of expedition, some tension: nationist turn on CCP because of its popularity</p>
      </li>
      <li>
        <p>e.g. May 30, KMT police opened fire, leading to strikes in many cities</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129132539074.png" alt="image-20221129132539074" style="zoom:50%;" /></p>

        <p>which made CCP grow even more in power/popularity.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>In general, many KMT encouraged CCP to cooperate, while some right-wing from KMT do not trust CCP = cannot co-exist</p>

    <ul>
      <li>
        <p>hence KMT into two major wings: <strong>left wing sides with CCP, while right wing believes in militarism</strong></p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129222115881.png" alt="image-20221129222115881" style="zoom:33%;" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>then in 1927 = White Terror = surprise attacks KMT arrested hundreds of CCP people and executed them = end of KMT support from people</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129133109511.png" alt="image-20221129133109511" style="zoom:50%;" /></p>

    <ul>
      <li>many of these purges were executed by the more extreme factions in KMT</li>
    </ul>
  </li>
</ul>

<p><strong>Shift towards an Agrarian Communism</strong></p>

<ul>
  <li>
    <p>believes that factory workers would be the ones for Communist revolution in China</p>

    <ul>
      <li>Mao’s emphasis of investigation = historical materialism from Marxist</li>
      <li>Firmly situated <mark>peasants as revolutionary subjects</mark> - and moved Chinese communism towards an agrarian focus.</li>
      <li>Saw ritualistic and <mark>violent struggle against class enemies as critical to revolution</mark>. This is a key difference from KMT socialists, who believed in “cooperatives to support “people’s livelihood”</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129133412885.png" alt="image-20221129133412885" style="zoom:50%;" /></p>
  </li>
</ul>

<p><strong>End of the First United Front</strong></p>

<ul>
  <li>
    <p>CCP and KMT civil war, and CCP establish bases/soviets between 1927 to 1933 (the main one being Mao’s base)</p>
  </li>
  <li>
    <p>worried by CCP’s growing support even in urban areas, Chiang Kai-shek <strong>launched four massive military campaigns</strong> to encircle and annihilate the Jiangxi Soviet, all of which were repulsed by the communists with their <strong>guerrilla tactics</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129133928967.png" alt="image-20221129133928967" style="zoom:33%;" /></p>

    <ul>
      <li>however eventually CCP had to retreat, hence this long march shown above = recorded as their heroic struggle</li>
    </ul>
  </li>
</ul>

<hr />

<p><strong>Diff of KMT v.s. CCP in Economy</strong></p>

<ul>
  <li>China had econ problem such as famine before, and both parties are concerned about imperialism that Chinese cannot survive. But they differ in <strong>how to solve this problem</strong></li>
  <li>nationalist believe
    <ul>
      <li>accumulate <strong>national</strong> wealth, aim to annihilate dependencies on others hence social strength/<strong>self-sufficiency</strong></li>
      <li>econ independennce = autarky = <strong>national prosperity is precondition for happiness of people</strong>
        <ul>
          <li>wanted export lead economy. but this did not work with the great depression in 1932 (Wall street crush), so silk and tea lost much markets, and Japan’s influence made China grow (China exporting raw materials to Japan while Japan grows in technology)</li>
        </ul>
      </li>
      <li>solve poverty by <strong>increasing production</strong> = need tech advancement = gives land questions
        <ul>
          <li>Left-wing (Wang Jingwei and others) wanted to build up land cooperatives</li>
          <li>Right-wing (Chiang Kai-Shek) more concerned with military control of villages</li>
        </ul>
      </li>
      <li>but there are <strong>conflicts with private industry,</strong> as they needs its own profit but nationalist needs national wealth</li>
      <li>does not care much about rural, but more central power</li>
    </ul>
  </li>
  <li>CCP focused on <strong>rural organization</strong>, land reform, and <strong>class struggle</strong>
    <ul>
      <li>global capitalism is the problem, and being semi-colonized = both landlords needs to be overthrown and wealth redistributed</li>
      <li>land reform program, redistribute to peasants</li>
      <li>focus a lot on <strong>women emancipation</strong> = e.g. local women can diverse their husbands, can own land, etc</li>
      <li>give peasants opportunity to read and write</li>
    </ul>
  </li>
</ul>

<p><strong>Diff in Military mobilization</strong></p>

<ul>
  <li>Mao’s Red Army: <strong>Guerrilla warfare</strong>
    <ul>
      <li>draw enemy into deep CCP territory such as mountains, so KMT becomes naturally split up due to landscapes</li>
      <li>red army are <strong>mostly consists of volunteers</strong>; and hold respect to civilians
        <ul>
          <li>Eight points of attention: do not hit or swear others, be honest about buying and selling, etc</li>
          <li>helped increase popularity = a lot of support from peasants + China had a large size of peasants</li>
        </ul>
      </li>
      <li>cooperate between army and people</li>
    </ul>
  </li>
  <li>Nationalist
    <ul>
      <li>advance altogether in one column, traditional approach</li>
      <li>more than half are <strong>soldiers, not civilians</strong> = Chaang Kai shek prioritized military discipline</li>
    </ul>
  </li>
</ul>

<p><strong>Factions within KMT</strong></p>

<ul>
  <li>
    <p>two big groups controlling the executive functions, CC Clique and Blue Shirt</p>
  </li>
  <li>
    <p>CC Clique v.s. Blue Shirts</p>

    <ul>
      <li>
        <p>CCP Clique return for Chinese past and vision for future. LHS has stuff from the past such as great wall, on the RHS tech advanced visions</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129140336691.png" alt="image-20221129140336691" style="zoom:33%;" /></p>
      </li>
      <li>
        <p>Blue Shirt: emphasize of strngth and strong young people</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129140433293.png" alt="image-20221129140433293" style="zoom:33%;" /></p>
      </li>
    </ul>
  </li>
</ul>

<p><strong>New Life Movement</strong> (nationalist)</p>

<ul>
  <li>
    <p>draw on four virtues, advocate that these virtues penetrate peoples life</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129140624061.png" alt="image-20221129140624061" style="zoom:33%;" /></p>

    <p>being productive at all times</p>
  </li>
  <li>
    <p>then Chiang Kai-shek’s Speech incorporates ideas of <strong>convergence of militarism and being productive in life</strong></p>

    <ul>
      <li>i.e. your individual behavior can hurt the wealth of the entire nation = you should stick to your social role. If everyone perform their social role, then not chaos and uprising associated with communist</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129140939040.png" alt="image-20221129140939040" style="zoom:50%;" /></p>

    <ul>
      <li>but still gained a lot critique from Confucianism:
        <ul>
          <li>New Life Movement was an attempt to <strong><em>suppress individual freedom</em></strong> and to impose a rigid and authoritarian ideology on the people = the movement’s emphasis on obedience and conformity was at odds with the principles of Confucianism, which emphasize personal responsibility and self-cultivation.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong>Left-Wing Cultural Movement</strong></p>

<ul>
  <li>
    <p>Marxist texts, concerned with every day life, and experimented with new literary forms</p>

    <ul>
      <li>aim to make literature appeal with the masses = new form of short novels</li>
    </ul>
  </li>
  <li>
    <p>two famous person her is <strong>Song Dingling and Mao Dun</strong></p>
  </li>
  <li>
    <p>but then left wing faced cracked down by 5 prominent being executed</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129141427721.png" alt="image-20221129141427721" style="zoom: 33%;" /></p>
  </li>
  <li>
    <p>overall had rich cultural production, both soft v.s. hard films as tools for politic education</p>
  </li>
  <li>
    <p>KMT supported tabloits and defamed Cai Chusheng (a famous women actor at that time) and her movie = committed suicide</p>

    <ul>
      <li>impact on later communist cultural production</li>
      <li>Mao: importance of appealing to the masses</li>
    </ul>
  </li>
</ul>

<p><strong>Japanese Imperialism</strong>: belief that Japan can relieve the influence from western by conquering Asian countries and ruling them</p>

<ul>
  <li>
    <p>Japan controlled a lot of due to their control of the Manchurian Railway</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129142010627.png" alt="image-20221129142010627" style="zoom: 33%;" /></p>

    <p>basically the 东北region</p>
  </li>
  <li>
    <p>Battle ensued when plain clothes Chinese</p>

    <ul>
      <li>eventually Japan won the right to police Shanghai</li>
      <li><strong>Japanese established Manchukuo within that Chinese region, which enraged CCP and KMT</strong></li>
    </ul>
  </li>
  <li>
    <p>then goes to the <strong>Second Sino-Japanese war</strong></p>

    <ul>
      <li>and <strong>Paul Robeson</strong> and our national anthem</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221129225545886.png" alt="image-20221129225545886" style="zoom:25%;" /></p>
  </li>
</ul>

<h2 id="wwii-and-second-sino-japanese-war-1937-1945">WWII and Second Sino-Japanese War (1937-1945)</h2>

<p><strong>Previously on the Republican Era</strong></p>

<ul>
  <li>1911-16 The first <strong>Republic</strong>
    <ul>
      <li>first Sino-Japanese war and Boxer protocol are national traumas</li>
      <li>1911 revolution: replace Qing and new government, and <strong>Sun Yat-Sen</strong> established the first Republic of China</li>
      <li>Sun soon replaced by Yuan Shicai, who had strong military. However Yuan died early in 1916, leading to warlord era</li>
    </ul>
  </li>
  <li>1916-27 The <strong>Warlord Era</strong>
    <ul>
      <li>Centered around Beijing, the <strong>New Culture Movement</strong> sees a new generation of intellectuals question the Confucian basis of social, moral, political traditions. Believe that those are the reason for Chinese’fall, and <strong>emphasized on Mr. Science and Mr. Democracy</strong></li>
      <li>May 4th Movement (1919) politicizes intellectuals (anti-imperialist movement)</li>
      <li><strong>CCP founded</strong> 1921 in Shanghai.</li>
    </ul>
  </li>
  <li>1927-37 The <strong>Nanjing decade</strong>
    <ul>
      <li>Chiang Kai-Shek (CKS) succeeded Sun and became KMT leader, and with (appear) allied with CCP to go on northern expedition to <strong>re-unite China</strong> from the warlords = <strong>First United Front</strong></li>
      <li>CKS with his strong military belief never trusted CCP, hence <strong>white terror</strong> in 1927, and CCP flee
        <ul>
          <li>retreated to Jiangxi Soviet. Stop of Soviet Union’s support to KMT, and <strong>Mao start to emerge as the leader in CCP</strong></li>
          <li>then KMT then tried campaigns to get rid of Communist in Jiangxi, and in the 4th occasion, CCP fled despite their encirclement and went on a <strong>long march</strong> (34-35) all the way to Yan’an, Shaanxi</li>
          <li>only a bunch of true faithful people in CCP left (a lot key figures including Mao, Zhou Enlai, Xi’s father, etc). But they collected lots of supports along the way</li>
          <li>CCP regroups, builds <strong>peasant support through land reform</strong>, uses mass movements to accomplish objectives</li>
        </ul>
      </li>
      <li>hence overall a unity after the chase, and KMT + CKS become the major government in China. CKS’s view is highly militaristic and productive, that through discipline in a top-down approach we can make ourselves stronger
        <ul>
          <li><strong>New Life Movement</strong> to impose discipline and morality on China’s society. Inspiration drawn from the Italian fascist and German Nazi movements</li>
          <li>also many cultural influence during the time: <strong>leftist intellectuals making films</strong>, etc.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>Some Major Events</strong> in this period</p>

  <ul>
    <li>
      <p>In 1931, the <a href="https://en.wikipedia.org/wiki/Mukden_Incident">Mukden Incident</a> helped spark the Japanese invasion of Manchuria. The Chinese were defeated and Japan created a new puppet state, <mark>Manchukuo</mark>; many historians cite as the beginning of the war</p>
    </li>
    <li>The <strong>beginning of the war</strong> is conventionally dated to the <mark>Marco Polo Bridge Incident 卢沟桥事变</mark> on <strong>7 July 1937</strong>
      <ul>
        <li>Since the Japanese invasion of Manchuria (东北region) in 1931, there had been many small incidents along the rail line connecting Beijing and Tianjing.</li>
        <li>On this occasion, a Japanese soldier was temporarily absent from his unit, and the Japanese commander <strong>demanded the right to search the town for him</strong>. When this was refused, other units on both sides were put on alert; with tension rising, the <strong>Chinese Army fired on the Japanese Army, which further escalated the situation</strong>, even though the missing Japanese soldier had returned to his lines.</li>
      </ul>
    </li>
    <li>following this incident, Japanese scored major victories, capturing Beijing, Shanghai and the Chinese capital of Nanjing in 1937, which resulted in the <mark>Rape/Massacre of Nanjing</mark> (南京大屠杀) beginning on <strong>December 13, 1937</strong>
      <ul>
        <li>As the Japanese approached, the Chinese army <strong>withdrew the bulk of its forces since Nanjing was not a defensible positio</strong>n. The civilian government of Nanjing fled</li>
        <li>The perpetrators also committed other war crimes such as <strong>mass rape, looting, and arson</strong>. The massacre was one of the worst atrocities committed during WWII</li>
        <li>Due to multiple factors, death toll estimates vary from 40,000 to over 300,000, with rape cases ranging from 20,000 to over 80,000 cases</li>
      </ul>
    </li>
    <li>Following the <strong><mark>Sino-Soviet Treaty of 1937</mark>, strong material support</strong> helped the Nationalist Army of China and the Chinese Air Force continue to exert strong resistance against the Japanese offensive. By 1939, after Chinese victories in Changsha and Guangxi, and with Japan’s lines of communications stretched deep into the Chinese interior, the <strong>war reached a stalemate</strong>.</li>
    <li>in August 1940,  the <mark>United States supported China</mark> through a series of increasing boycotts against Japan, culminating with cutting off steel and petrol exports into Japan by June 1941. Additionally, <strong>American mercenaries such as the Flying Tigers</strong> provided extra support to China directly.</li>
    <li>In December 1941, Japan launched a surprise attack on <mark>Pearl Harbor</mark>, and declared <mark>war on the United States</mark>. The United States declared war in turn and increased its flow of aid to China</li>
  </ul>
</blockquote>

<p><strong>CCP v.s. KMT:</strong> grassroots v.s, organizations</p>

<ul>
  <li>
    <p>some degree of fluidity/flexibility within the party, but overall differ in how to restructure/rule</p>
  </li>
  <li>CCP: socialist, <strong>redistribution of land and peasants</strong> can now on lands
    <ul>
      <li>appeal to peasants and grassroots</li>
      <li>start revolution by helping the peasant, and note that China at that time had a lot of peasants/is rural</li>
    </ul>
  </li>
  <li>KMT=nationalist=Republic of China: in a more extreme way, a bit fascist and military society.
    <ul>
      <li>Hence new cultural movement, refining and strenghening China <strong>in a militaristic way;</strong> also a lot of focus on productivity and utilitarianism</li>
    </ul>
  </li>
  <li>both had some influence from Soviet Union, e.g. Marxist-Leninism
    <ul>
      <li><em>The Communist International</em> (<em><mark>Comintern</mark></em>), was a <em>Soviet</em>-controlled international organization. They sent advisers and aids to help with revolutions</li>
    </ul>
  </li>
</ul>

<p><strong>Japanese Imperialism</strong></p>

<ul>
  <li>
    <p>South Korea asked Japan to ban the <em>rising sun flag</em> during Olympics, which is also the war flag of imperial Japan (which occupied Korea and part of China)</p>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201132603199.png" alt="image-20221201132603199" style="zoom: 25%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201132549883.png" alt="image-20221201132549883" style="zoom: 25%;" /> |
| :———————————————————-: | :———————————————————-: |</p>
  </li>
  <li>
    <p>recall that before, Qing has lost Korea territory and Taiwan to Japan; Japan became competitor with Russia for influence in China in the north</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201132906262.png" alt="image-20221201132906262" style="zoom:25%;" /></p>

    <ul>
      <li>surprisingly, they even defeated Russia in the northern territories in China = 1904-5 the <strong>Russo-Japanese</strong> War</li>
      <li>in 1931 the Mukden incidence and <mark>established Manchuko</mark>满洲国;
        <ul>
          <li>Japan really took this territory as its colony; made a lot of investments; therefore it could be the most prosperous area in China at that time</li>
        </ul>
      </li>
      <li>1937-1945; Japan tried to encroach into deeper China, and hence second Sino-Japanese war</li>
    </ul>
  </li>
</ul>

<p><strong>Marco Polo Bridge Incident</strong>: July 7, 1937</p>

<ul>
  <li>
    <p>CKS wanted to first unify Chinese = open non-resistance policy = became very non-popular. He is then kidnapped and forced to ally with CCP to fight against Japan</p>
  </li>
  <li>
    <p>hence <strong>high tension</strong> between Japanese and Chinese with this minor Marco Polo Bridge Incident = triggered second Sino-Japanese war</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201133343977.png" alt="image-20221201133343977" style="zoom:33%;" /></p>

    <ul>
      <li>after that Japan attacked Beijing, Tianjing, etc.</li>
    </ul>
  </li>
</ul>

<p><strong>First Phase of Sino-Japanese War</strong>: Battles</p>

<ul>
  <li>
    <p>Shanghai is an main source of Nationalist revenue + strategic position = proximity to Nanjing;</p>
  </li>
  <li>
    <p>Shanghai had significant western living in there; but their policy is to not interfere at the moment</p>
  </li>
  <li>
    <p>However nationalist eventually <strong>lost</strong>, <strong>Battle of Shanghai</strong> (1937)</p>

    <ul>
      <li>first and fiecest of the 22 major enegagements, lasted three month before Chinese failed</li>
      <li>the bloody Saturday + anti-Japanese feelings</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201133759519.png" alt="image-20221201133759519" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>big defeat of China, CKS lost over 30% of elite German-trained divisions troops (later on contributed to CCP’s victory during civil war)</p>
  </li>
  <li>
    <p>however, at least <strong>pushed some unification of China</strong> (some warlords) to face the Japan troops</p>
  </li>
</ul>

<p><strong>First Phase of Sino-Japanese War</strong>: war crimes</p>

<ul>
  <li>
    <p><strong>Nanjing Massacre</strong> and Rape of Nanjing. Japan failed to conquered Shanghai quickly= angered Japanese, hence when conquering Nanjing this happened</p>

    <ul>
      <li>Japanese troops went on rampage for six weeks</li>
      <li>20,000 - 80,000 women and girls of all ages were raped, many of whom were mutilated or killed in the process.</li>
      <li>200,000 - 300,000 civilians and POWs were killed.</li>
      <li>a woman writer recorded this, who turned the school into a sanctuary, and her diaries records those war and atrocities</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201134307167.png" alt="image-20221201134307167" style="zoom:50%;" /></p>

    <p>up until now, they still had not apologized for this, compared against Germany = Japanese acquired reputation for cruelty</p>
  </li>
  <li>
    <p>“<strong>Comfort Women</strong>”, i.e. sex slaves; ensure an isolated group of women to satisfy solider’s sexual eneds</p>

    <ul>
      <li>an estimate of 200,000 young women and girls were forced into this service; mostly Korea, but also Chinese, Japanese, etc</li>
      <li>one women assigned for 70-80 soldiers before battle</li>
      <li>again, Japanese arguments were that they were paid prostitutes; but many are not/are abducted</li>
    </ul>
  </li>
  <li>
    <p><strong>Human Experiments and use of Biological Weapons</strong>: using diseases as weapon</p>

    <ul>
      <li>
        <p>like Nazi’s, Japanese conducted experiments with human = death camp = infected healthy subjects with various diseases and observe them; operating them without anesthesia</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201134930024.png" alt="image-20221201134930024" style="zoom:33%;" /></p>
      </li>
      <li>
        <p>many biological weapon researchers escaped punishment and went to continue research as other countries feel worried if they are behind; questions of medical ethics = had no ethical standards setup yet</p>
      </li>
    </ul>
  </li>
</ul>

<p><strong>First Phase of Sino-Japanese War</strong>: Man-made Yellow River Flood</p>

<ul>
  <li>
    <p>nationalist government made a desperate decision to breach the dam = <strong>cause the flood to stop advancement of Japanese troops</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201135255770.png" alt="image-20221201135255770" style="zoom: 33%;" /></p>
  </li>
  <li>
    <p>flood inundated a lot of land and killed over 800,000 people in those provinces (unexpected by the government) = sacrificing million of lives to stop Japanese = though only stopped them for five month, and later continued to capture Wuhan</p>
  </li>
</ul>

<p><strong>Second Phase: Stalemate</strong> 1939-41</p>

<ul>
  <li>
    <p>blue is territory occupied by Japan, and nationalist government moved to interior</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201135451696.png" alt="image-20221201135451696" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>three parties, Though CCP and KMT are both fighting Japanese, they are still not “allies”</p>
  </li>
  <li>
    <p><strong>Japan’s New Order in Asia</strong>: Japan’s belief that they can rebuild Asia and replace the western colonizers: propaganda that other countries should provide resources to Japan</p>
  </li>
</ul>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201135737880.png" alt="image-20221201135737880" style="zoom:33%;" /></p>

<ul>
  <li>puppet regime in Nanjing (1940-45), Wang Jingwei (top in KMT) collaborated with Japan during war time, seen as a national traitor</li>
</ul>

<p><strong>Third Phase: Global War</strong></p>

<ul>
  <li>
    <p>China alliance with United States and Britain = received military support and supplies</p>

    <ul>
      <li>e.g. US army transportation in China, with supplies and soldiers such as Flying Tigers</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201140212011.png" alt="image-20221201140212011" style="zoom:33%;" /></p>

    <ul>
      <li>some sense that US rescured Chinese, but China still had important contribution to the WWII. One is that it held huge numbers of Japanese troops on its territory. Second is that China it technically the first to engage in WWII in 1937 (or even 1931), while Europeans start in 1939</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201140543710.png" alt="image-20221201140543710" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>Japan retaliated with <strong>Attack on Pearl Harbor (1941)</strong></p>
  </li>
  <li>
    <p>in the end US dropped two atomic bomb and <strong>Japan surrendered</strong></p>
  </li>
</ul>

<p><strong>Impact of the War on China</strong></p>

<ul>
  <li>
    <p>devastation of many parts in China; <strong>heightened since of national identity</strong>; a <strong>weakened nationalist government</strong>, and CKS lost lots of his troops</p>

    <ul>
      <li>therefore, it set the stage for Communist success later.</li>
      <li>it can be seen that CKS fight against Japan diverted his troop and effort from eliminating CCP, and during those time CCP enjoyed more support in rural China = had more time to develop and became stronger</li>
    </ul>
  </li>
  <li>
    <p>China-Japan relation today: a bit of awkward handshake between two presidents</p>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201141620456.png" alt="image-20221201141620456" style="zoom:33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201141629826.png" alt="image-20221201141629826" style="zoom:33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>
  </li>
</ul>

<p><strong>Chinese Civil War</strong>: CCP v.s. KMT final showdown after the WWII. 1945 - 1949</p>

<ul>
  <li>
    <p>final showdown; US reduced their support in CKS’s government due to some corruption in government. Mao didn’t get full support from Stalin either</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201141848649.png" alt="image-20221201141848649" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>but we know the final result is that Mao won, established <mark>People's Republic of China</mark></p>
  </li>
  <li>
    <p>after the defeat, <mark>CKH fleet to Taiwan</mark>, with 1.2 million nationalist refugees there (and always wanted to retake the mainland)</p>

    <ul>
      <li>but in 1950, US sends the Seventh Fleet to the Taiwan Strait = <strong>existence of US power prevented each side from attacking</strong></li>
      <li>but still tension and lots of propaganda on-going</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221201142157579.png" alt="image-20221201142157579" style="zoom:33%;" /></p>
  </li>
  <li>
    <p>yet overall, both party <strong>recognize Sun Yat-sen as father of modern China</strong> (idea of a unified China during warlord era, and founder of Republic of China). However, while Mainland China supported Mao, Taiwan supports CKS</p>
  </li>
</ul>

<h1 id="maos-china-1920s---1976">Mao’s China (1920s - 1976)</h1>

<p><strong>Previously on the war years</strong></p>

<ul>
  <li>1931 <strong>Mukden Incident</strong>  (many historians view this as the beginning of WWII for China) touches off a well-planned invasion of Manchuria; starts the 15 years’ China- Japan war (1931-45). Japan establishes a puppet state of <strong>Manchukuo</strong> in northeast China.</li>
  <li>1937-1945 <strong>Second Sino-Japanese War</strong> (another view of beginning of WWII). Tentative <strong>second united frontier</strong>.
    <ul>
      <li>Chinese forces suffer heavy losses, trade space for time.</li>
      <li>Japanese overrun E. China, GMD fights war of attrition, CCP preserves strength in rural areas</li>
      <li>CCP have time to win popular support, partly due to Japan’s invasion that KMT cannot focus on fighting CCP</li>
    </ul>
  </li>
  <li>After <strong>Pearl Harbor</strong>, China formally allies with U.S. and Britain;
    <ul>
      <li>Japanese war crimes (e.g., the <strong>Rape of Nanjing</strong>, <strong>Comfort Women</strong>, Unit 731) remain inadequately acknowledged by the Japanese govt and victims not compensated for.</li>
      <li>Wartime collaboration exists yet remains underexamined in scholarship.</li>
    </ul>
  </li>
  <li>1945-1949 <strong>Chinese Civil War</strong>
    <ul>
      <li>KMD retreat to Taiwan, but both claim to be the legitimate government</li>
    </ul>
  </li>
</ul>

<p><strong>Why did China become Communist?</strong></p>

<ul>
  <li>
    <p>Explanation 1: just because it was the <strong>alternative to KMT</strong></p>

    <ul>
      <li>
        <p>how did nationalist fail? KMT had wide spread corruption, inflation, poverty, declining purchasing power (huge inflation), warlordism</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221206132234171.png" alt="image-20221206132234171" style="zoom:50%;" /></p>
      </li>
      <li>
        <p>CCP just happened to be there as an alternative: if KMT more successful, China might not have CCP winning = no communist</p>
      </li>
      <li>
        <p>Japan is also a contributor, that holding KMT off so CCP can have time to develop</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Explanation 2: CCP itself aimed to gain <strong>popularity, mobilizing peasantry, anti-Japan</strong> idea resonated well with the large peasant-based population at that time</p>
  </li>
</ul>

<p><strong>Mao Zedong</strong> 1893-1976</p>

<ul>
  <li>
    <p>in his early years</p>

    <ul>
      <li>
        <p>born to a rich peasant = wealthy farmer, education in Confucian classics; traveled to work in Peking University Library</p>
      </li>
      <li>
        <p>attended CCP first meeting as the delegate of Hunan, working under <strong>Li Dazhao</strong></p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221206133027857.png" alt="image-20221206133027857" style="zoom:33%;" /></p>
      </li>
      <li>
        <p>Mao concentrated on <strong>rural work</strong> and had this report on an <strong>Investigation of the Hunan Peasant Movement</strong> = before CCP believe in urban workers, but he advocated to mobilizing peasantry and violence as a necessary mean for revolt</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Shanghai Massacre 1927, communist hiding and fleeing from KMT = Chen Duxiu blamed as the mistake. Then Mao lead them into <strong>Jiangxi Province</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221206133303458.png" alt="image-20221206133303458" style="zoom:33%;" /></p>

    <p>for the first time, CCP is governing some area: <strong>organized land reform</strong> (redistribute land) and other reforms = quite successful in Jiangxi</p>
  </li>
  <li>
    <p><strong>Long March</strong> in search of new base in Yan’an in Shaanxi province, after KMT attack again. Only 10% made it the whole way. Those people are seen as selected/destined for this mission = <strong>founding myths of PRC</strong></p>

    <ul>
      <li>Yan’an is like Qin’s captial which is <strong>easy to defend,</strong> and easy to send troops</li>
      <li>but living condition was quite tough: Mao lives in a cave home. But CCP are very friendly to peasants</li>
      <li>important strategy of masses to the masses:
        <ul>
          <li>“all correct leadership is necessarily “<mark>from the masses, to the masses</mark>”. This means: take the ideas of the masses (scattered and unsystematic ideas) and concentrate them (through study turn them into concentrated and systematic ideas), then go to the masses and propagate and explain these ideas until the masses embrace them as their own”</li>
          <li>Mao believes <strong>peasants are the vanguard = true masses</strong> for this revolution v.s. Marxist called peasants a sack of potatoes</li>
        </ul>
      </li>
    </ul>

    <p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221206133748438.png" alt="image-20221206133748438" style="zoom:33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221206134147004.png" alt="image-20221206134147004" style="zoom: 50%;" /> |
| :———————————————————-: | :———————————————————-: |</p>
  </li>
  <li>
    <p>Techniques in this mass movement</p>

    <ul>
      <li><strong>study groups</strong> = small group meetings like “book club” = express and criticize opinions on <strong>socialists texts</strong></li>
      <li><strong>struggle sessions</strong> = performative displays of revolutions = 民众诉苦
        <ul>
          <li>encourage the peasants to come out and speak publicly accusing landlord of this crimes = directly confronting</li>
          <li>this act of humiliation for landlord could be more important than the land transfer = <strong>symbolize transfer of power from rich to poor</strong></li>
        </ul>
      </li>
      <li>everyone in the group has to participate in the above activities</li>
      <li>really emphasize <strong>small groups + support from locals = decentralized</strong> idea instead of purely top-down structure to rely on center
        <ul>
          <li>e.g. land reform = abolishment of landlords and returning lands to peasants aims to support locals</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>sees himself as the interpreter of Marxism-Leninism in Chinese context, and a master of guerrilla warfare</p>
  </li>
  <li>
    <p><strong>in 1949, Mao’s proclamation of PRC</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221206135101458.png" alt="image-20221206135101458" style="zoom:33%;" /></p>

    <p>this painting used more as a political tool, later on Deng Xiaoping is added, even though he is not even there</p>
  </li>
  <li>
    <p>PRC’s political organization: <strong>party supervising government</strong> = so really it is a one party country (a feeling of authocracy)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221206135407607.png" alt="image-20221206135407607" style="zoom: 33%;" /></p>
  </li>
</ul>

<p><strong>Land Reform Continued</strong> after PRC founded</p>

<ul>
  <li>
    <p><strong>First phase</strong> of land reform</p>

    <ul>
      <li>before it is mostly north in Mao’s region, now also includes south of China</li>
      <li>
        <p>continues struggle sessions etc; redistribution of land = broke up the older elites = CCP to introduce modern modes of agriculture</p>
      </li>
      <li>also used as a reward for peasants for supporting CCP</li>
      <li>problem: <strong>small land holdings is not a productive way</strong> for high agriculture output</li>
    </ul>
  </li>
  <li>
    <p><strong>Second phase</strong>: farmers join together = <strong>collectivization of agriculture</strong></p>

    <ul>
      <li>households to help each other and <em>forced</em> into cooperation = collectivization</li>
      <li>hope to further increase agricultural output = further support modern inditurialization</li>
      <li>but many felt <strong>discontent</strong> because again lost ownership of it = shared responsibility</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221206140000494.png" alt="image-20221206140000494" style="zoom:33%;" /></p>
  </li>
</ul>

<p><strong>America and Korea</strong>: “War to Resist America and Aid Korea” (1950–53) 抗美援朝</p>

<ul>
  <li>recall that US is against Soviet Union = communist. However, they know they cannot exterminate communists.
    <ul>
      <li>in order to use Japan as a base to <strong>contain communism in Asia</strong></li>
      <li>communist ideology is that <strong>every one should be communist</strong> = China joins then it is helpful = also for building alliance for Soviet</li>
    </ul>
  </li>
  <li>Therefore, America now is against China/refuse to help Korea against America
    <ul>
      <li>decided to help North Korea as if it is lost, America would attack China</li>
    </ul>
  </li>
  <li>Consequences of the war include
    <ul>
      <li>China more close to Soviet for econ assists</li>
      <li>confirming US imperialist ambition in East Asia, as US intervention in Korea</li>
      <li>suffered high death tool and called US is a paper tiger</li>
      <li>difficult to get Taiwan <em>fully</em> back in control = with <strong>US-China relationship on Taiwan</strong> a problem until today</li>
      <li>also emerges campaigns in China against foreigners</li>
      <li>Mao lost the elder of his two sons; and the other son has mental trouble = lost his successor</li>
    </ul>
  </li>
</ul>

<p><strong>Five Year Plans</strong></p>

<ul>
  <li>
    <p>PRC’s <strong>First Five-year Plan</strong>: won the Korean War, and land reform aimed to help industrialization as a model from soviet = <strong>invest in heavy industry</strong>.</p>

    <ul>
      <li>indistural output went up by 25%, significant number</li>
      <li>quite successful, Mao very confident and listened to intellectuals outside CCP to speak up = <strong>Hundred Flowers Campaign</strong> = expecting only mild criticism
        <ul>
          <li>turns out this campaign brought <em>heavy</em> criticism = accused of monopoly of power</li>
          <li>then Mao retaliate = <strong>anti-rightist campaign</strong> to force those labeled as rightest forced for re-education</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>second five year plan: the <strong>Great Leap Forward</strong> (1958-1960). Sense of urgency to catch up with other developed country in the west</p>

    <ul>
      <li>e.g. surpass the UK and catch up with the US in <strong>steelmaking</strong></li>
      <li>a feature of this leap forward = people’s commune
        <ul>
          <li>5k households within a commune = so that if women have to go back and cook, takes time away</li>
          <li>aim is to <strong>scale</strong> it by cooking for all = saves time = <strong>more efficient</strong> and productive</li>
        </ul>
      </li>
      <li>but this could give problem that peasants could eat 6 month of rice in 20 days = stock is shared in commune but not in own home = later <strong>famine disaster</strong></li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221206141317264.png" alt="image-20221206141317264" style="zoom:33%;" /></p>

    <ul>
      <li>
        <p>everyone setup their <strong>backyard steel production</strong> = again scaling;</p>
      </li>
      <li>
        <p>but overall this divert attention to agriculture = reduce in agricultural output = great famine later</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221206141718230.png" alt="image-20221206141718230" style="zoom:33%;" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>but peasants were very enthusiastic about it. Baby named after those concepts:</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221206141910439.png" alt="image-20221206141910439" style="zoom:33%;" /></p>

    <p>however, we know now it is a <mark>economic disaster</mark> contributing to the great famine</p>
  </li>
</ul>

<p><strong>Great Famine</strong> 1959-61</p>

<ul>
  <li>
    <p>caused by the weather and drought, but also the <mark>Great Leap Forward fiasco</mark>: 30 million <strong>starved to death</strong></p>
  </li>
  <li>
    <p>historians believe that the problem is not absolute lack of food but the systemic <strong>flaws or decisions that prevent food getting to the people</strong></p>
  </li>
  <li>
    <p>anyway criticism within the party of the Great Leap Forward = Mao took responsibility and <strong>resigned in 1959</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221206142246061.png" alt="image-20221206142246061" style="zoom:33%;" /></p>

    <p><strong>more pragmatic people Liu Shaoqi and Deng Xiaoping took power</strong> = more into Marxist materialistic base than the idealized vision</p>
  </li>
  <li>
    <p>new leaders = <strong>economic recovery</strong> in 1966</p>
  </li>
</ul>

<h2 id="economic-reforms-and-political-authoritatianism">Economic Reforms and Political Authoritatianism</h2>

<p><strong>Previously on Mao’s China</strong></p>

<ul>
  <li>People’s Republic founded 1949, CCP pursues Soviet-style socialist construction, emphasis on heavy industry, <strong>collectivization</strong>, reorganizing grassroots society to unlock labor power; Mao promotes rapid development $\to$ Great Leap Forward 1958</li>
  <li><strong>Great Leap</strong> is an economic disaster; in CCP leadership reshuffle, <mark>pragmatists Liu Shaoqi and Deng Xiaoping rise</mark>; Mao’s desire to regain influence factors in launch of the <strong>Cultural Revolution</strong> 1966-69 factional warfare, civil unrest, paralyze nation
    <ul>
      <li>his goal can be said partly to regain his power, but also as a socialist “ideologist”, he believes in social egalitarianism and sees Deng’s policy on economical and political reform <strong>astray from the correct path</strong> = cultural revolution</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>Some key terms:</p>

  <ul>
    <li>The term “<strong>bourgeois</strong>” has a specific meaning in Marxist theory. It refers to the middle class, which is seen as the class that controls the means of production in capitalist societies. In a Marxist framework, the bourgeoisie are seen as the <strong>enemy of the proletariat</strong>, or working class, because they exploit the labor of the proletariat for their own benefit.</li>
  </ul>
</blockquote>

<p><strong>The Great Proletariat Cultural Revolution</strong> 1966-1969/76</p>

<ul>
  <li>
    <p>Mao believes that:</p>

    <ul>
      <li>the method to solve all problems is by <strong>continuous revolution</strong>. New contradictions/problems will always come up, and class struggles should be used as a tool to solve those new problems</li>
      <li>believes in social <strong>egalitarianism</strong> and no elitism, that policies should be made by the people for the people</li>
      <li>In Mao’s view, there are “<strong>bourgeois</strong>” elements within the Chinese Communist Party, i.e. those who had <strong>abandoned</strong> the party’s revolutionary ideology and had <mark>embraced more moderate, reformist policies</mark>. These individuals were seen as a threat to the party’s revolutionary principles</li>
      <li>Therefore, party needed to be purged of what he saw as “bourgeois” elements, and he <mark>launched the Cultural Revolution</mark> to achieve this goal.</li>
      <li>another perhaps popular view is in his attempt to <strong>regain power/influence</strong> in the party</li>
    </ul>
  </li>
  <li>
    <p>1966 Mao wrote a poster “<strong>bombard the headquarters</strong>” = making a war on the party that he established</p>

    <ul>
      <li>this Cultural Revolution first lasted until 1969</li>
      <li>again, he utilize his famous strategy of mass movement = <strong>red guards</strong> (young women students)
        <ul>
          <li>shows that even not in party, he still have <strong>wide-spread support in people</strong></li>
          <li>combined with his earlier mistakes, it can be said he is a person better at <strong><em>moving</em> the masses</strong> to, e.g. revolt, than to govern</li>
        </ul>
      </li>
      <li>the goal is to remove those bourgeois elements from the party</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221208132106538.png" alt="image-20221208132106538" style="zoom:33%;" /></p>

    <p>notice that they are holding “<mark>Mao's little red book</mark>” = Quotations from Chairman Mao. This book is seen as <strong>bible for cultural revolution</strong>.</p>

    <p>Other forms of “struggle” within this revolution include:</p>

    <ul>
      <li>
        <p>“criticize and struggle” publicly criticize/beat teachers</p>

        <ul>
          <li>recall that during the anti-Rightest movement (after 100-flowers), many intellectuals were condemned = had a bad reputation</li>
          <li>A lot of victims committed suicide to avoid humiliation</li>
          <li><strong>Deng went to exile</strong>, and President Xi’s father was also denounced in this period as well</li>
          <li>an perhaps “unexpected” chaos as Mao did not specify “who to criticize against”, thereby causing <mark>wide-spread chaos</mark></li>
        </ul>
      </li>
      <li>
        <p>rebels also followed Mao’s call to “Smash the Four Olds”: old thoughts; old culture; old customs; old habits. For exapmle Confucianism</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221208133146032.png" alt="image-20221208133146032" style="zoom: 33%;" /></p>
      </li>
      <li>
        <p>the idea of being permitted to defy superior, <strong>rising up again established authority</strong> is a theme in this period</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Deng’s Solution: redirect Young people’s energy is to drive them <mark>to countryside</mark> = 20mil displaced to country side. <strong>Propaganda</strong> below seeming to convince them go there</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Propaganda</th>
          <th style="text-align: center">President Xi</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221208133344893.png" alt="image-20221208133344893" style="zoom:33%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221208133652739.png" alt="image-20221208133652739" style="zoom:33%;" /></td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <p>ended finally when Mao passed away</p>
  </li>
</ul>

<p><strong>Deng Xiaoping’s Period</strong>. Whoever is the leader of the party = the man that exert <strong>most impact</strong>. However, the paths taken by post-Mao China were NOT solely dictated by CCP leaders such as Deng</p>

<ul>
  <li>
    <p>at the end of Mao, already some significant changes: <strong>United States President Nixon’s China visit</strong></p>

    <ul>
      <li>In 1972, President Richard Nixon made a historic visit to China, where he met with Chinese leader Mao Zedong.</li>
      <li>This visit marked the beginning of a <mark>thaw in relations between the two countries</mark>, and it paved the way for the normalization of diplomatic relations between them. Prior to his visit, the United States and China had been on opposite sides of the Cold War as China side with Soviet</li>
      <li>One of the main reasons for the <mark>deterioration of relations between China and the Soviet Union</mark> was ideological. The two countries were both communist states, but they had different interpretations of Marxism-Leninism, the ideology that guided their governments.
        <ul>
          <li>The Soviet Union, under the leadership of Leonid Brezhnev, embraced a more moderate and pragmatic approach to communism</li>
          <li>while China, under the leadership of Mao Zedong, took a <strong>more radical and revolutionary</strong> stance. This led to tensions between the two countries, as they competed for leadership of the international communist movement.</li>
        </ul>
      </li>
      <li>therefore, Mao begins to see Soviet as the biggest threat and now <strong>tactical cooperation with US might be worthwhile</strong></li>
    </ul>
  </li>
  <li>
    <p>after Mao’s death, three groups competing for power after Mao:</p>

    <ul>
      <li>
        <p><strong>the Gang of Four</strong>, based in Shanghai and more like a clique controlled by Chairman Mao, lead by his wife Jiang Qing</p>

        <ul>
          <li>but after Mao died, they were purged</li>
          <li>Jiang escaped by viewing herself as Mao’s scapegoat: “I’m just a dog of Chairman Mao, and I bite whoever he wants me to bite!”</li>
        </ul>
      </li>
      <li>
        <p><strong>Hua Guofeng</strong> who is a young official gaining Mao’s trust</p>

        <ul>
          <li>“Two whatevers”: We will resolutely uphold whatever policy decisions Chairman Mao made, and unswervingly follow whatever instructions Chairman Mao gave</li>
          <li>but quickly forced out of power by Deng</li>
        </ul>
      </li>
      <li>
        <p><strong>Deng Xiaoping</strong>’s group, who eventually succeeded as he was a core member and had wide spread connections in the party</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221208135041294.png" alt="image-20221208135041294" style="zoom:33%;" /></p>

        <ul>
          <li>once said: “Should China one day become a superpower that bullies, invades, and exploits people everywhere, then the world should expose it, oppose it, and work together with the Chinese people to overthrow it.” = was <strong>advocating peaceful existence between countries with different ideologies</strong> (unlike Soviet)</li>
          <li>connections within the party:
            <ul>
              <li><strong>Long March</strong> veteran</li>
              <li>he never turned on his colleagues despite being purged twice during the Cultural Revolution
                <ul>
                  <li>hence they felt grateful</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>he then successfully <strong>drove out Mao’s chosen successor</strong> (Hua) to reform
            <ul>
              <li>reform direction: Deng distanced the CCP from the Cultural Revolution, from Mao, and from the Soviet economic model</li>
              <li>Deng installed reformists in positions of power.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>In 1981 “Resolution”: on failures of CCP and <strong>enabled the party to distant itself with Mao</strong> = <mark>start new goals</mark></p>

    <ul>
      <li>some denunciation on Mao = cultural revolution was an error</li>
      <li>but still recognize Mao had vital contributions (especially early years), still respected and beloved
        <ul>
          <li>after this little red book disappeared/decayed, etc.</li>
        </ul>
      </li>
      <li>but still not really solving any fundemental change, e.g. structural change, that could prevent this from happening again</li>
    </ul>
  </li>
  <li>
    <p>Deng’s goal for China was to</p>

    <ul>
      <li><mark>modernize/reform the economy</mark> and improve living standards, while still maintaining Communist Party rule</li>
      <li>argues that poverty $\neq$ socialism, and <mark>poverty is problem</mark> = very different from previous</li>
      <li>hence a somewhat <mark>capitalist</mark> approach</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221208135840708.png" alt="image-20221208135840708" style="zoom:23%;" /></p>
  </li>
</ul>

<p><strong>Rural Reform under Deng</strong>: Household responsibility System</p>

<ul>
  <li>
    <p>recall that the Great Leap Forward was an attempt but a failed one</p>
  </li>
  <li>
    <p>reform not a top-down decision, but 18 farmers came together to signed. The idea is that land is shared but you <strong>get to keep what you grew</strong> (in addition to what you should grow/submit to government)</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221208140056290.png" alt="image-20221208140056290" style="zoom:33%;" /></p>

    <ul>
      <li>After this treaty, every farmer in this village competed to produce more as compared to the Great Leap Forward</li>
      <li>called the first capitalist village</li>
    </ul>
  </li>
</ul>

<p><strong>Urban Reform</strong>: “smash the iron rice bowl”</p>

<ul>
  <li>
    <p><mark>under Mao, there were no private enterprises</mark>, all are controlled under the state.</p>

    <ul>
      <li>Workers belonged to their “work unit” (after graduation) and had lifetime job security.</li>
    </ul>
  </li>
  <li>
    <p>Deng’s reform: <mark>privatize many state-owned enterprise</mark>s, so for workers in inefficient enterprises <strong>gets laid off</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221208140509562.png" alt="image-20221208140509562" style="zoom:33%;" /></p>

    <ul>
      <li>though lead to economic development, but income <strong>inequality comes up</strong> as an inevitable problem</li>
    </ul>
  </li>
  <li>Opening to the world: <mark>Special Economic Zones</mark> (SEZ)
    <ul>
      <li>The SEZs were designed to be areas where <strong>foreign investment and economic development</strong> were encouraged, in order to stimulate <strong>economic growth and create jobs</strong>.</li>
      <li>also lead to China’s later entry into WTO</li>
      <li>Shenzhen would be an example of successful ecnomoic zone</li>
    </ul>
  </li>
  <li>by introducing this reform, it moved away from socialism towards <mark>capitalism</mark>: “<strong>Socialism with Chinese characteristics</strong>”</li>
</ul>

<p><strong>One Child Policy</strong> (1980-2011): more people due to improvemened of public health</p>

<ul>
  <li>
    <p>rationale: China had already been burdened to lift 1 billion people out from poverty, which was Deng’s goal. Hence in 1980s this comes up</p>

    <ul>
      <li>of course had propaganda</li>
    </ul>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221208141920760.png" alt="image-20221208141920760" style="zoom:33%;" /></p>

    <ul>
      <li>but had a lot of problem/criticism e.g. female fetus the victum</li>
      <li>note that it is only targeted at Han, so not to exterminate ethnic minorities</li>
    </ul>
  </li>
</ul>

<p><strong>Political Authoritarianism</strong>: Deng and leaders seem themselve as authoritarian</p>

<p>| <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221208142201727.png" alt="image-20221208142201727" style="zoom:33%;" /> | <img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221208142406020.png" alt="image-20221208142406020" style="zoom:33%;" /> |
| :———————————————————-: | :———————————————————-: |</p>

<ul>
  <li>
    <p>“Economic reform does not to imply <strong>political liberalization</strong>”</p>
  </li>
  <li>
    <p>Tian’anmen Protest in May 1989, <mark>also refered to as May 4-th Movement</mark>. Tension/demends include</p>

    <ul>
      <li>Freedom of the press: The protesters called for <strong>greater freedom of the press</strong>, so that journalists could report on political and social issues without fear of censorship or reprisal.</li>
      <li>Freedom of speech: The protesters demanded the right to <strong>express their views</strong> and opinions without fear of retribution.</li>
      <li><mark>An end to corruption</mark>: Many of the protesters were concerned about corruption in the Chinese government
        <ul>
          <li>An example is that children of elites can get into Tsinghua and Peking University easily</li>
          <li>party official has the priviledge being more wealthy (result of captialism)</li>
        </ul>
      </li>
      <li>Political reform: Some of the protesters called for greater political reform, including the introduction of <strong>democratic</strong> institutions and the expansion of civil liberties.</li>
      <li>fundementally it is caused by wide-spread discontent, result from factor such as
        <ul>
          <li>more <strong>lay-off</strong></li>
          <li>before <strong>controlled rice price</strong>, but now it shoots up (as market is opened) and gives resource tension and inflation</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>lasted for 2 month, the party become <strong>split between liberal and conservative factions</strong></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20221208212944976.png" alt="image-20221208212944976" style="zoom:33%;" /></p>

    <ul>
      <li><mark>liberal</mark> = more moderate, we should talk to students, listen to their complaints and reform
        <ul>
          <li>reformist such as Zhao Ziyang argued that the economy should be opened up to market forces, and that political reforms, such as greater democracy and respect for human rights, were necessary in order to modernize China.</li>
        </ul>
      </li>
      <li><mark>conservative</mark> = repress those news to prevent revolution, very sensitive to revolution (hence also sent troops)
        <ul>
          <li>Deng Xiaoping and his supporters believed that the economy should continue to be planned and <strong>controlled by the state</strong></li>
          <li>but they also believed that <strong>market forces</strong> should play a greater role in the economy.</li>
          <li>in the end, believes that the party should have leading power in decision making</li>
        </ul>
      </li>
      <li>Both believed in the importance of market forces in the economy, but differed <strong>on the extent</strong> to which market forces should be allowed to play a role</li>
    </ul>
  </li>
</ul>

<h1 id="final-exam">Final Exam</h1>

<p>Structure</p>

<ul>
  <li>8 ID, pick 5</li>
  <li>6 pick 2 primary sources: what is says, how does it say it, etc
    <ul>
      <li>who, what, when, why, how = analytical</li>
      <li>significance</li>
      <li>contextualize what source I am talking about</li>
    </ul>
  </li>
  <li>a decent essay</li>
</ul>

<p>Overall idea:</p>

<ul>
  <li>Significance of each event
    <ul>
      <li>e.g. foot-binding significance = commercialization of women + the entire economy</li>
    </ul>
  </li>
</ul>

<p>Key terms</p>

<ul>
  <li><strong>Foot-binding</strong>:
    <ul>
      <li>in Song, foot-binding started among low-class women who were performers/entertainers = so poor had to sell themselves; commercialization of women also during the great movement from north to south = security of women at most agile point = all people are unsure about their worth as now you are going south; women competing in courtesans desired foot-binding = mothers had to also get their daughter into the mold though it is a hard choice</li>
      <li>in Qing, tried to ban foot-binding but didn’t work = ethnic Hans couldn’t because foot-binding became a social status = being foot-bound you don’t need to work in the fields/households , and had servants whose feet were not bound = somewhat an elite status; with the fall of Qing that practice is now gone</li>
    </ul>
  </li>
  <li><strong>Canton system</strong>: Hongs; international trade;</li>
  <li><strong>Qianlong Emperor</strong>: golden age in Qing; Qing really started to expand territory, e.g. Xinjiang under Qianlong; supported some aesthetic engagement; foreign trade</li>
  <li><strong>Neo-Confucianism</strong>: HuangChao rebellion wiped aristocrats with power; Zhu Xi</li>
  <li><strong>Yam System</strong>: serious of outposts so that horse can gallop = allows for speedy transfer of information = how quickly info can propagate
    <ul>
      <li>The postal system, known as the Yam system, was a sort of medieval pony express with stations positioned at intervals of 20-30 miles. At each station, an “arrow messenger” would mount a fresh horse and ride to the next station at a full gallop.</li>
    </ul>
  </li>
  <li><strong>Kurultai</strong> group elect a new leader from a group; elder male chosen as “Kurultai” = next Khan; an election process
    <ul>
      <li>a kuriltai (also spelled <em>kurultai</em>; “general assembly”) of Mongol nobles was convoked in order to elect the new great khan</li>
    </ul>
  </li>
  <li><strong>Chinngis Khan</strong>; <strong>Kublai Khan</strong>
    <ul>
      <li><em>Temüjin</em> (original name) crowned as the kurultai to become Chinngis Khan; unified his steppe tribe; made a lot of invasions = feared ; disable steppe system and created autocracy in the steppe empire</li>
      <li>Kublai: a switch of inward facing history of creation of empire; most people consider the founder of Yuan; invaded southern Song; sinification when ruling; differ with Chinngis as how you rule = cannot cut and paste nomadic strategy to thrive; start of <em>governance</em> = focused more on social and economic issues rather than military conquest</li>
      <li>influence of nomadic culture on China</li>
    </ul>
  </li>
  <li><strong>Columbian Exchange</strong>
    <ul>
      <li>got plants, tomatoes, etc = nutritional = well suited for growth in China; social implications = growth of population</li>
      <li>also diseases</li>
      <li>deficit of silver; Zhang Juzhen = chief secretary; credited to transit from agrarian to; encourage people not to follow the Confucian; policy really benefited the main economy = increasing demand of silver ; as a side effect boosted power of merchants =
        <ul>
          <li>1679 Tokgawa shut down european and halted silver import but still came in = no tap silver inflow</li>
          <li>made paying taxes in this form impossible = people horde their silver = copper to silver went into decline</li>
          <li>Colombian exchange also had the inflow of silver to China=the increased supply of silver led to a <em>devaluation</em> of the metal, which had previously been a scarce and valuable resource.</li>
        </ul>
      </li>
      <li>meaningful engagement with US</li>
    </ul>
  </li>
  <li><strong>1911 revolution</strong> ended Qing; Xinhai Rebellion
    <ul>
      <li>Sun Yat-sen needed some military backing and made agreement with Yuan</li>
      <li>warlord period after Yuan died in 1916-1927</li>
    </ul>
  </li>
  <li><strong>New Cultural Movement v.s. May 4th Movement</strong>
    <ul>
      <li>May 4th 1919: treaty of Versailles with Shandong transferred to Japan angered students = shift focus in China towards soviet unions instead of western power = felt like westerns have abandoned them even though they are all ally in WWI</li>
      <li>but May 4th Movement $\neq$ this event only, but more the idea of <em>shift away from traditional Confucian education</em> to a more modern science and democracy + vernacular literature (e.g. Lu Xun)</li>
      <li>New Culture movement =&gt; New Youth periodical</li>
      <li>what does it has to do with 1911: 1911 being political changes, while these are more literary/and cultural changes to China</li>
    </ul>
  </li>
</ul>

<p>Long Essay</p>

<ol>
  <li>a</li>
  <li>a</li>
  <li>opium war and boxer rebellion</li>
  <li>a</li>
  <li>a</li>
  <li>e.g. May 4-th; what they advocated for = departure from confucian edu values; how does society change but still persisted from the traditional path</li>
</ol>

<h1 id="notes-on-the-open-empire-book">Notes on The Open Empire Book</h1>

<p>This section contains reading notes for the various related chapters of the book “The Open Empire: A History of China to 1800”</p>

<h2 id="ch1-beginnigns-of-the-written-record">Ch.1 Beginnigns of the Written Record</h2>

<p>Written records were mostly for written on <strong>tortoise-shell bottoms</strong>, or called <strong>plastrons</strong> (甲骨文), dating to the reign of King Wu Ding(武丁王) for the <mark>Shang Dynasty</mark>.</p>

<ul>
  <li>
    <p>texts were transcribed onto either plastrons or sometimes scapula of cattles. Specically, this is done by 1) preparing the bones 2) heting it up 3) the bone cracks 4) interpret the message from cracks and write the questions/answers onto it</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220911153533594.png" alt="image-20220911153533594" style="zoom: 67%;" /></p>

    <p>how was this discovered? This is first discovered during 1899 Beijing, during Malaria, when some people give out “dragon bones” (scapula of cattles and turtle shells dug up in large quantities from Anyang) to be grinded into powder for medicine. Then, some scholar found scripts on those dragon bones, and hence lead to realize those are actual texts.</p>
  </li>
  <li>
    <p>For King Wu Ding, <strong>Anyang</strong> (安阳，河南)was the capital</p>
  </li>
  <li>
    <p>finally, <mark>Shang</mark> is succeeded by <mark>Zhou</mark> by the concept of <strong>Mandata of Heaven</strong> (天意)</p>
  </li>
</ul>

<p><em>How Chinese Characters Work</em>:</p>

<ul>
  <li>most well-known examples of chinese characters resemble the concept they depict</li>
  <li>vast majority of cahracters contain a radial (偏旁) to convey the general topic of the word, and a phonetic element to indicate the sound. For instance, 象 means elephant or image, but if added a radical 像, it means image.</li>
  <li>some people also say that chineses are inefficient, indicated by lower literarcy rate in China v.s. US. However, in places such as Hong Kong, Singapore, and Taiwan, literarcy rates are higher.</li>
  <li>Finally, the advent of 拼音 is largely ue to systems to trasnscribe sounds of Chinese into alphabet to be studied by the Western.</li>
</ul>

<p><em>The Advantages of Chinese Script</em></p>

<ul>
  <li>Only few scribes can read or write at that time</li>
  <li>since written chinese characters are decoupled from pronounciation, you can keep your spoken language but just <strong>assign Chinese characters to preexisting words in your language</strong>. This gives rise to the diverse dialects but still a uniform written system.</li>
</ul>

<p><em>The Content of Oracle Bones</em></p>

<ul>
  <li>
    <p>Ritual related questions such as: What should be sacrifiesed? In what quantity?</p>
  </li>
  <li>
    <p>Political questions such as: Sohuld the king send this troops to a certain kingdom?</p>
  </li>
  <li>
    <p>the layout of a typical script on oracle bone consist of:</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220911155732457.png" alt="image-20220911155732457" /></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220911155718282.png" alt="image-20220911155718282" /></p>

    <p>where the <strong>preface</strong> explains which priest presided and which date, <strong>charges</strong> states the topic, <strong>prognostication</strong> gives the interpretation of the cracks (i.e. predictions) and <strong>verification</strong> is the actual outcome</p>
  </li>
  <li>
    <p>do not conclude from the above that Shang preferred sons to daughters, because there are cases when “good” births were of daughters.</p>
  </li>
  <li>
    <p>Found a lot of oracle bones, indicating that <strong>divination occured daily</strong></p>
  </li>
  <li>
    <p>Finally, scripts on plastrons are also used for <strong>teaching</strong>, where we found teacher scripts with cracks along with student’s messy and error-containing scripts on plastrons without cracks. This indicate that plastrons are plentiful during the time and students do not need to write on other materials first (if they did practice, then their characters would be better formed!)</p>
  </li>
</ul>

<p><em>Discoveries at Anyang</em></p>

<ul>
  <li>Lady Hao, one of sixty-four consorts of the Shang King Wu Ding, has a tomb contained 3 ivory carvings, close to 500 bone hairpins, over 500 jdaes and nearly 7000 cowry shells (used as money)</li>
  <li>this is one of the only complete tomb excavated, withot the disturbance of gold diggers/theives</li>
</ul>

<p><em>Art of Making Bronzes</em></p>

<ul>
  <li>
    <p>A large of amount of Bronze vessels found at Anyang and Erlitou, suggesting that it is a society with significant resource to produce those at such a large quantity.</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220911160601075.png" alt="image-20220911160601075" /></p>
  </li>
</ul>

<p><em>The Antecedens of Modern Chinese Cuisine at Anyang</em></p>

<ul>
  <li>people at Anyang produced many different type of bronze veseels for cooking meat, holding cooked grain, etc.</li>
  <li>most cooked dishes were meat stew</li>
  <li>resistents of Anyang believed their <strong>ancestors retrained their desire for food</strong>, even when dead</li>
</ul>

<p><em>The Pyramid of Shang Society</em></p>

<ul>
  <li>This <strong>power pyramid</strong> can be found in the tomb: underneath the nature gods stood the ancestors of the royal family. The long-dead outranked the more recently dead, who in turn out ranked Shang king.</li>
  <li>Shang believed one could communicate more easily with those in nearby tires, and offerd a lot to recent dead.</li>
  <li>Member of the royal linage and women from the families who could marry with them constituted the aristocracy of the Shang.</li>
  <li>Shang believed the dead king would occupy this tomb after his death, and because he neded the service of all those who worked for him while alive, <strong>they had to perish when he died</strong>.</li>
</ul>

<p><em>The Nature of the Shang Polity</em></p>

<ul>
  <li>
    <p>His men rounded up livestock from the residents of places the royal entourage visited, but his officials <strong>did not collect taxes</strong> on a regular basis from a set territory</p>
  </li>
  <li>
    <p>therefore, in what sense did Shang constitute a state? It is perhaps more like a soft state, whose stability hinged on the king’s frequent visits to his subordinates and their domains, <strong>whose bureaucracy remained divine</strong> rather than human.</p>
  </li>
</ul>

<p><em>The Illiterate Contemporaries of the Shang in Sichuan</em></p>

<ul>
  <li>the discovery of the Sanxingdui 三星堆 in Sichuan illustrates the <strong>cultural variety of Bronze Age China during Shang</strong></li>
  <li>artifacts in Sichuan different dramatically from anything at Anyang</li>
</ul>

<p><em>Mandate of Heaven</em>: from <mark>Shang</mark> to <mark>Zhou</mark></p>

<ul>
  <li>
    <p>According to Sima Qian (most critics argue this might not be accurate), the last Shang king liked the company of owman, drnak too much, enjoyed depraved songs, etc</p>
  </li>
  <li>
    <p>Many officials left Shang to serve Zhou, and when Zhou’s advisor urged him to invade Shang, he says “You don’t know the <strong>Mandate of Heaven</strong> yet”</p>
  </li>
  <li>
    <p>Then the last Shang king killed an offical who dared to criticize him, by cutting his chest open wile alive, <strong>Zhou king launched the invasion and won</strong>.</p>
  </li>
  <li>
    <p>from then on, people start to believe that:</p>

    <ul>
      <li>if emperor could not govern and is soon revolted, the Heaven has retreated support and revolter would have the new Mandate of Heaven</li>
      <li>but if the revolution failed, then it is said the <strong>Mandate of Heaven is retained</strong></li>
    </ul>

    <p>as a result, Mandate of Heaven is practically a 马后炮</p>
  </li>
</ul>

<p><em>Zhou Conquest of the Shang</em>:</p>

<ul>
  <li>once <mark>Zhou</mark> had defeated the <mark>Shang</mark>, they established their capital along the Wei River (渭河).</li>
  <li>Until 771 B.C.E, when Zhou abandoned their capital in the Wei River valley (near 西安), historian then called the period <mark>before this Western Zhou</mark>, and the period after such a move <mark>Eastern Zhou</mark></li>
</ul>

<p><em>Divination in the Zhou: The Book of Changes</em></p>

<ul>
  <li>Like the Shang, the Zhou also divined with help of bones and shells, but also used a <strong>leafy herb with white flower called yarrow</strong>, where diviners manipulated the <strong>stalks of yarrow in group of six and decided fate based on hexagrams.</strong></li>
  <li>From 诗经, there are mentions that commoner men can also perform divination with both shells and yarrow stalks, such as for marriage</li>
</ul>

<p><em>The Book of Songs</em> 诗经</p>

<ul>
  <li>contains the first songs from anceint China, and depicts vividly the elite and the <strong>lives of commoners</strong></li>
  <li>these recorded songs are culled from 3,000 to 306 by <strong>Confucius</strong> (c.a. 551-479 B.C.E)</li>
  <li>the ealiest songs record ritual chants, but later ones include contents about battles and eventually love</li>
</ul>

<p><em>The Agricultural Year</em></p>

<ul>
  <li>
    <p>A late song details many economic exchanges between the lord of estate and his dependents</p>

    <ul>
      <li>the lord’s obligation is to <strong>provide people with clothing</strong></li>
      <li>commoner women’s obligation is to <strong>provide silk and thread to the lord</strong></li>
      <li>commoner men’s obligation is to provide <strong>animal skins</strong></li>
    </ul>
  </li>
  <li>
    <p>an example would be</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220914152436952.png" alt="image-20220914152436952" style="zoom: 50%;" /></p>

    <p>which gives a sense of life in <mark>Western Zhou</mark>:</p>

    <ul>
      <li>people provided their lord with <strong>a share of crop, hunt, and textile made</strong></li>
      <li>the lord provide them with <strong>clothings</strong> and <strong>invite them to feasts</strong></li>
    </ul>
  </li>
  <li>
    <p>but there are also other songs when people are <strong>dissatisfied</strong> with their lord, in which case they may threaten to leave the lord</p>
  </li>
</ul>

<p><em>Bronzes of Western Zhou</em></p>

<ul>
  <li>besides Book of Songs, <strong>inscriptions on bronzes also provided an outline of government and economy of Zhou</strong></li>
  <li>contents include:
    <ul>
      <li>how <mark>Zhou kings</mark> also worshiped their ancestors, like <mark>Shang</mark></li>
      <li>many rituals are conducted by inscribing on a <strong>bronze bell</strong>, so that when <strong>struck</strong>, the living hoped messages would be conveyed to the dead and perhaps wishes granted</li>
    </ul>
  </li>
</ul>

<p><em>A Zhou Warrior and the Reward for his Service</em></p>

<ul>
  <li>one text described a battle when Xianyun people raided Zhou garrison, who were defeated by the contribution of the Zohu warrior Duo You.</li>
  <li>king then <strong>award him lands</strong>, with people in that land obligated to serve the lord
    <ul>
      <li>since men in the lower rank can rise, it can be seen as a <strong>form of early bureaucracy</strong></li>
    </ul>
  </li>
  <li>hence, Western Zhou can be seen as “<strong>the aggregation of thousands of pieces of land woemn together by the political power of the state</strong>”</li>
</ul>

<p><em>Ancestor Worship</em></p>

<ul>
  <li>the Book of Songs make it possible to reconstruct the <strong>ritual context</strong> (i.e. exactly what happened) of the Western Zhou bronzes</li>
  <li>basically in one song, what happened is:
    <ul>
      <li>a young boy in the clan designated as the impersonator for the spirit to enter his body</li>
      <li>chief of the lineage conducts the ritual</li>
      <li>an officiating invoker serves as the go-between connecting the impersonator and the pious descendant.</li>
      <li>then, living family members requets good fortune and long life from the dead</li>
      <li>officiating invoker then consults an oracle</li>
      <li>and the “spirit” replies</li>
    </ul>
  </li>
</ul>

<p><em>The Zhuangbei Hoard: Ritual Revolution?</em></p>

<p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220915203850551.png" alt="image-20220915203850551" style="zoom:40%;" /></p>

<ul>
  <li>
    <p>in 771 B.C.E, Zhou is invaded and abandoned their captial near Xi’an and <strong>fled east</strong>. Then the Wei family, fore fled, buried seventy-five vesssels and <strong>twenty-eigth bells</strong> in a bit (maybe hoping to recover it when they are back)</p>
  </li>
  <li>
    <p>this pit is now found, and it is realized that objects can be categorized distinctly into <mark>two types</mark>, one ealier dating to 1050 B.C.E and one later to 880 B.C.E</p>

    <ul>
      <li>the ealier vessels were having exaggerated, delicate patterns, such as animals and tao-tie</li>
      <li>the later ones become flatter and stylized (<strong>simpler</strong>), and the tao-tie motif beame a little bit abstract</li>
    </ul>

    <p>therefore, it is hypothesized (largely agreed) that a <mark>ritual revolution</mark> occured c.a. 850 B.C.E, and she explains by:</p>

    <ul>
      <li>ealier ones belived in shamnic travel to he world of spirits, and have no limits on how many vessels a certain person can have</li>
      <li>later ones perhaps have a decline in the belief inanimal spirits, and is <strong>only permitted to have a certain number of vessels</strong></li>
    </ul>
  </li>
</ul>

<p><em>The continuity of Shang and Western Zhou</em></p>

<ul>
  <li>both shared
    <ul>
      <li>belief in oracle bones and divinations (Zhou additionally used yarrow stalks)</li>
      <li>both are soft states, with incipient初始的 form of tax and uncertain borders. Gifts from subjects to rulers are the major form of income</li>
    </ul>
  </li>
  <li>they differ
    <ul>
      <li>Zhou also have some written records of the commoners</li>
      <li>Zhou is beginning to have bureaucracy system</li>
      <li>Book of Songs described a gender split in Zhou: men could farm and hunt, but women needs to gather mulberry leaves, spun thread, dye textiles and making clothing. Also inscriptions on Zhou bells chime the prayers of the living for their sons and grandsons, <strong>not for daughters and granddaugthers</strong>.</li>
    </ul>
  </li>
</ul>

<h2 id="ch2-the-age-of-the-warrior-and-the-thinker">Ch.2 The Age of the Warrior and The Thinker</h2>

<blockquote>
  <p><strong>Here we are featuring:</strong></p>

  <ul>
    <li>Spring and Autumn Period 春秋, and The Warring State Period 战国, both of which is during the <mark>Eastern Zhou</mark></li>
    <li>Chong’er (重耳=晋文公) from the Jin family.</li>
    <li>The period of Confucious 孔子 (died near the start of 战国), Zhuang Zi 庄子, Mencius 孟子, and Xun Zi 荀子</li>
  </ul>
</blockquote>

<p><em>Start of Easter Zhou in. 771 B.C.E</em></p>

<ul>
  <li>
    <p>in 771 B.C.E, two dependent states of Zhou made alliance with some tribal people to overthrow the Zhou King.</p>
  </li>
  <li>
    <p>The defeated <mark>Zhou</mark> shifted their captial to the east <strong>near the modern city of Luoyang</strong>, and became more like a <strong>symbolic head</strong> as the competing regional leaders at far superior armies</p>
  </li>
  <li>
    <p>There were some <strong>more than 100 polities at that time</strong>, and non had siginificant power to conquer all its neighbors. Besides them, there are also groups of “less-civilized” people who do not have their own written records</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220917124507405.png" alt="image-20220917124507405" style="zoom:33%;" /></p>

    <p>the four major “non-chinese” groups are therefore the Rong, Di, Man, and Yi, whom although is less civilized, but many chinese had contact with them to learn <strong>battling skills</strong> and cavalry (see later)</p>
  </li>
  <li>
    <p>In the end, Easter Zhou is one with 6 centuries of warefare (770 to 221 B.C.E), and is usually considered into two halves:</p>
    <ul>
      <li><mark>春秋</mark>: named after the book <em>The Spring and Autumn Annals</em>, but actually the book that stores most of our knowledge from the period is <em>The Commentary of Mr.Zuo</em> (左传)</li>
      <li><mark>战国</mark> (the Warring States Period): when the Zhou has became so weak that everybody is fighting between themselves to give birth to the next dynasty</li>
    </ul>
  </li>
</ul>

<p><em>The Commentary of Mr.Zuo and the Society it Describes</em></p>

<ul>
  <li>
    <p>keep in mind that this is written 2 centuries after this period</p>
  </li>
  <li>More than 100 polities, described over 500 battles, and more than 100 civil wars within polities as well.</li>
  <li>At the beginning of 春秋, a hierarchy of <strong>birth deciding which linage a man belonged=social status</strong></li>
  <li>but even at this difficult time, there are several people who fought their own way to be recognized as the “<mark>lord protector</mark>”
    <ul>
      <li>Duke Huan of Qi</li>
      <li>Duke Wen of Jin 晋文公, also called Double Ears (Chong’er)</li>
    </ul>
  </li>
</ul>

<p><em>The Struggle of Double Ears to Win His Realm</em> (Jin)</p>

<ul>
  <li>the Rong wife (of the current ruler) who bore Double Ears neber necame a favorite (e.g. because Rong is non-chinese)</li>
  <li>Wome at the time was also having low status:
    <ul>
      <li>because marriage = building alliance, usually <mark>bride + female relatives are sent so that a son can be born</mark></li>
      <li>therefore, all mother can do it so <mark>angle for the success of her son</mark>: 宫斗
        <ul>
          <li>sent her son to the territory of the Di people</li>
          <li>Lady Li (mother of Double Ear) created the impression that the designated heir (for crown) sought to poison his father. But to accuse Lady Li means to offtend his father, the heir decided to kill himself.</li>
          <li>Awaited the time when their father died, and thought this is the time</li>
          <li><strong>Duke’s ministers could also took</strong> over the throne by killing her sons</li>
          <li>So Double Ears were travelling (e.g. making friends with Chu) before returning to take over the Jin polity with help. To obtain the help, he made a promise to the Chu King that if they meet on battle, he <strong>will withdraw his force a distance of three day’s march</strong></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>晋文公finally took over, and he:
    <ul>
      <li>enlarged his army to three times the size</li>
      <li>met the Chu force, did the retreat as promised, but Chu still engaged. Double Ear won by <mark>tricking</mark> them tht they are retreating</li>
      <li>since he has shown to be a powerful ruler, he is finally appointed by the <mark>Zhou King</mark> to be a <strong>lord protector</strong> and awarded him the new rank.</li>
    </ul>
  </li>
</ul>

<p><em>Changes in the Art of War after Death of Double Ears</em></p>

<ul>
  <li>Double Ears (636-628 B.C.E) marked the begining which <mark>military strength and innovative strategy become important</mark>
    <ul>
      <li>people were trying to have many <strong>chariots</strong>, with about 10-30 carrying the chariot with 3 skilled warriors on it</li>
      <li>but since chariots are costly and ineffective unless on flat plains, they lost to <strong>infantry</strong> 步兵, which also marked an era of political shift since it means <strong>farmers could also revolt</strong></li>
      <li>Di people took advantage of infantry by having a lot of them, and even <mark>erased the social distinction</mark> that divided those who can be ON the chariot and those who ran along. In warefare with infantry, <mark>anyone can rise up the ranks</mark> to become a general, and social flux is encouraged.</li>
      <li>the above is adopted by other rulers later as well</li>
    </ul>
  </li>
  <li>Following a need for army is a rise in tax, literarcy rate (e.g. people can rise up to be the King’s advisor), and agricultural productivity
    <ul>
      <li>started the use of <strong>iron tools</strong> instead of wooden ones, possibly introduced by the Europoid.</li>
      <li>the rise of infantry and army size means <strong>experts generals are needed</strong> to take lead instead of royal lineages. They believed that the <mark>art of war can be taught</mark>, and gives rises to books/teachings.</li>
    </ul>
  </li>
  <li>The first book on strategems is <strong>The Art of War (孙子兵法)</strong>
    <ul>
      <li>stressed that the entire amry had to be trained to follow the orders unquestionably</li>
      <li>“the highest skill is to bring the enermy’s army to <mark>submit without combat</mark>”</li>
      <li>students should seek to <strong>identify weakness in their army</strong> and find the <strong>right time to attack</strong></li>
    </ul>
  </li>
  <li>But another new change soon emerged is the introduction of <strong>calvary</strong> by Zhao King (learnt from their neighbor)</li>
</ul>

<p><em>The Demand of Experts</em></p>

<ul>
  <li>
    <p>rulers during the 战国 <strong>hire advisors on the basis of their skills</strong>. A famous example is Feng Xuan:</p>

    <ul>
      <li>
        <p>the intermediary introduced Feng Xuan to the lord Mengchang:</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220917132734568.png" alt="image-20220917132734568" style="zoom:50%;" /></p>
      </li>
      <li>
        <p>then, during a time when Mengchang wants to collect tax and Feng Xuan volunteered, he did not bring the taxes back but “forgive” all of them. The Lord is confused and asked why:</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220917132900022.png" alt="image-20220917132900022" style="zoom:50%;" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>such sharp observation and fast decision is referred to as <mark>acumen</mark>, being hungered for during 战国</p>
  </li>
</ul>

<p><em>The World of Confucius</em></p>

<ul>
  <li>born to the Kong family in Qufu 曲阜</li>
  <li>China’s first <strong>private thinker</strong> (i.e. not served as ministers or generals)</li>
  <li>The only source for understanding his teaching is The Analects (论语), which is a collection of conversations/teachings compiled by later students
    <ul>
      <li>again this is compiled much later after he died</li>
      <li>conversations are first orally tranmitted, and then <mark>written down on bamboo (first source!)</mark>
        <ul>
          <li>scripts on bamboo are written from right to left, top to bottom</li>
        </ul>
      </li>
      <li>the received text of 论语 is compiled by having different disciples writting different sections, hence there are <strong>sharp differences among how they perceive Kongzi and his teachings</strong></li>
    </ul>
  </li>
</ul>

<p><em>The Teaching of Confucius as in the Analects</em></p>

<ul>
  <li>
    <p>he likes to converse with peoplesx</p>
  </li>
  <li>
    <p>claims that he will 述而不作, but did innovate by</p>

    <ul>
      <li>how to behave virtuously and how to govern (ealier believed this skill is born with rulers)</li>
      <li>the concept of ritual <mark>礼 is an important quality,</mark> and if men employ this, society could be reformed</li>
      <li>other <mark>essential qualities include humanness 仁</mark></li>
      <li>during their parent’s lifetimes, children should obey their wishes and after their death, children should continue for three years to conduct family affairs just as their parents had.
        <ul>
          <li>however, Confucious <mark>did not teach anything about spirit and supernatural</mark>.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Confucious seems to have <mark>only taught sons</mark>. Why?</p>

    <ul>
      <li>one possible explaination is that men’s interest was to have a larger family unit, and since only men can worship their ancestors, only sons cold carry on the family line. Whereas women are interested in a uterine family 同母异父 consisting themselves and their own children, there is a conflict.</li>
    </ul>
  </li>
  <li>
    <p>Confucious believed that one can influence the wolrd by behaving as a gentleman at home, and that with benevolence (仁) all chaos will be checked</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220917135156728.png" alt="image-20220917135156728" style="zoom:50%;" /></p>

    <p>but later people did find it difficult to rule without force, and indeed Confucious was powerless when his city was attacked</p>
  </li>
  <li>
    <p>In 479 B.C.E. he died</p>
  </li>
</ul>

<p><em>Ritual as shown on the Vessels of 战国</em></p>

<ul>
  <li>
    <p>many vessels from Confucious time survived until today, but it is found that they are <strong>very different from the Western Zhou</strong>.</p>

    <ul>
      <li>
        <p>no more animals, but human figures engaging in activities</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220917135515555.png" alt="image-20220917135515555" style="zoom: 25%;" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>In Shang and Zhou, kings had retrained a monopoly over bronze vessels but by the time of Confucious, <mark>lower-ranking lords has taken over production and begin to record their own victories</mark></p>

    <ul>
      <li>to them, <mark>ritual activities (a them in the Analects) is viewed differently</mark> as attesting the effectiveness of power and violence, while Confucious wanted the rituals as a forum of the individual’s development of benevolence.</li>
    </ul>
  </li>
</ul>

<p><em>After Confucious</em></p>

<ul>
  <li>since the Analects is collectively edited by students, separate sections contain different views on the teachings, and hence there were a lot of disagreement = Confucians broke up into eight rival schools.</li>
  <li>the century after Confucious death then giave brith to some of China’s liveliest and most intersting thinkers</li>
</ul>

<p><em>Mozi’s Criticism</em> (50 years after Confucious)</p>

<ul>
  <li>reformulated his teachings in response to Confucious</li>
  <li>At this period 5th century B.C.E, the fighting during the 战国 has dwindled to <strong>four major contenders - Qi, Jin, Chu, and Yue</strong>.</li>
  <li>Mozi accepted certain basic Confucian prescriptions, but felt that:
    <ul>
      <li>bonds with acquaintances are overemphasized, e.g. thief steal from other families to benefit their own. Therefore, he proposes <mark>兼爱, which is that each individual had an obligation towards all other people in the society</mark></li>
      <li>ridiculed that Confucious advocate for elaborate funerals but gives no discussion of spirits and afterlife. Hence he proposes measures for <strong>controlling the cost of funerals</strong>.</li>
      <li>but he agrees with Confucious that gentleman had to remain engaged in the society for reformation</li>
    </ul>
  </li>
</ul>

<p><em>The Way and Integrity Classic</em> 道德经</p>

<ul>
  <li>
    <p>written by 老子, and disciples of this school are called Daoist</p>
  </li>
  <li>
    <p>emphasizes the quality of Wuwei <mark>无为, which should be interpreted as non-interfence:</mark></p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220917141028913.png" alt="image-20220917141028913" style="zoom:50%;" /></p>
  </li>
</ul>

<p><em>Zhuangzi: The use of Paradox and Humor</em></p>

<ul>
  <li>
    <p>while both 道德经 and 庄子’s teachings often addresses the ruler of the state, Zhuangzi focuses on the individual and presents a series of anecdotes</p>
  </li>
  <li>
    <p>he believes that people should <mark>abandon preconceived notions</mark></p>

    <ul>
      <li>
        <p>death should not be mourned</p>
      </li>
      <li>
        <p>advantage of the disadvantaged</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220917141422248.png" alt="image-20220917141422248" style="zoom:50%;" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>Zhuangzi also emphasizes on 无为, letting things run their natural course, but does not seem to condemn deforestation</p>
  </li>
</ul>

<p><em>Zhuangzi and Mencius</em> 孟子</p>

<ul>
  <li>
    <p>Mencius is a contemporary of Zhuangzi</p>
  </li>
  <li>
    <p>Mencius believed that <strong>men were born good, but the environment transformed /corrupted them</strong></p>

    <ul>
      <li>
        <p>an example would be deforestation, fked by the environment</p>

        <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220917141929779.png" alt="image-20220917141929779" style="zoom:50%;" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p>Mendius, since believing in men, felt the people could be trusted to select a new rules, and the <mark>concept of Mandate of Heaven is to mean that a ruler could rule only with support of his subjects</mark></p>
  </li>
</ul>

<p><em>Mencius and Xunzi: the Continuing Confucian Debate</em></p>

<ul>
  <li>Xunzi 荀子 is in contrary with Mencius, believing that <strong>men were born evil but can improve via education</strong>.</li>
  <li>like Confuscious, they focused on question of how to govern, but they were <mark>hoping more of a unification rather than restoration</mark> (as the Zhou dynasty has became so weak)</li>
  <li>at the time of Xunzi, there were only three major power vieing: Qi, Chu, and Qin
    <ul>
      <li>Xunzi visited Qin just before their conquest, and saw that “They employ them (the people) harshly, terrorize them with authority, embitter them with hardship, coax them with r4ewards, and cow them with punishments”</li>
      <li>hence <mark>predicted that Qin would not last long</mark></li>
    </ul>
  </li>
</ul>

<p><em>Money Economy of the Warring States Period</em></p>

<ul>
  <li>
    <p>In Shang and early Zhou, rulers used cowrie shells and cloth are currency, and their subjects exchanged goods</p>
  </li>
  <li>
    <p>In 战国, the <mark>merchant class grew as trade across regions increased</mark>, and that the economy were well-developed for trading:</p>

    <p><img src="/lectures/images/2022-12-19-ASCE1359_Intro_to_China/image-20220917143052255.png" alt="image-20220917143052255" style="zoom:50%;" /></p>

    <p>because of the increase in trading, it leads to an <mark>increase in specialization</mark></p>
  </li>
</ul>

<p><em>The Chaotic Pace of Change</em></p>

<ul>
  <li>
    <p>constant fighting throught the period = large resource consumed = rulers taxing individuals</p>
  </li>
  <li>
    <p>a bunch of changes:</p>

    <ul>
      <li>regional rulers displacing Zhou kings</li>
      <li>chariot warriors displaced by infantry</li>
    </ul>

    <p><mark>a great degree of social flux</mark> also gave anciety for higher class, but also <mark>promoted literarcy</mark></p>
  </li>
  <li>
    <p>chaotic period also gave rise to all the different thinkers starting from Confuscious</p>
  </li>
  <li>
    <p>the <strong>Legalist teachings</strong> 法家 in Qin was so repelled, by Xunzi, but they proposed a radically new way of organizing the state and its subject that allows its adherets to <mark>unite the realm for the first time</mark></p>
  </li>
</ul>

<h2 id="ch3-the-creation-of-empire">Ch.3 The Creation of Empire</h2>

<p><em>From the Warring States to Qin</em></p>

<ul>
  <li>Qin defeated the other riavals not because of any new technology, but because they found a new way to organize their state: Legalist ministers who advocated the <strong>abolition of all privilegeds of nobility</strong>
    <ul>
      <li>Results in very efficient system in Qin (in contrast to the modern view of bureaucracy)</li>
    </ul>
  </li>
  <li>After the unification of China, scholars in <mark>Qin</mark> and <mark>Han</mark> begin to face the question: how should they <strong>govern</strong> talented officials? What role should the state play in the economy?</li>
  <li>during the Warring state, it was mostly priviledged aristocracy and the laboring masses. But after 221 B.C.E. it became mostly scholars, peasants, artisans, and merchants (merchants last because pesants and artisans produced something)
    <ul>
      <li>technically we still have slaves, doctors and religious specialists in addition</li>
    </ul>
  </li>
  <li>Qin ended within 14 years of ruling, due to problems in the court and people unsatified=rebellion</li>
</ul>

<p><em>Brief history of Han</em></p>

<ul>
  <li>founded by a strong leader and succeeed by strong woman, Han enjoyed 200 years of competent ruling</li>
  <li>Interloper Wang Mang, tired of being regent (to young emperor), formed a <mark>new dynasty called Xin</mark></li>
  <li>within 15 years, other families of Han regained power and weakened the dynasty</li>
  <li>destruction of their capital at Changan forced them to move to Luoyang</li>
  <li>beginning of increased tax, and emperesses wrest control from weak emperors</li>
  <li>rise of enunuchs and Confucian students began protests, as well as many following Daoism</li>
  <li>lots of protest and rebellion, a disaster ended the dynasty</li>
</ul>

<p><em>The Legalist State</em></p>

<ul>
  <li>韩非子, who stuttered during an ear where eloquence is prized, had to record his idea on pen and paper</li>
  <li>believed that ruler should be detached from everyday business, and apply <strong>unbending standard to judge officals and people</strong></li>
  <li>believed in a <strong>law that treated everyone equally</strong>, and that only the <strong>systematic application of law</strong> can control people, whose nature are evil (Xunzi)</li>
</ul>

<p><em>The Architecture of Qin’s Success: Shan Yang’s Reforms</em></p>

<ul>
  <li>Qin wasn’t strong enough to take over all rivals until 商鞅’s term in office</li>
  <li>Shangyang <strong>disdain the past</strong>, hence <mark>rejected Confucious values</mark>, especially ritual, and sees it as pointless</li>
  <li>Shangyang greatly improved the fiscal of the Qin:
    <ul>
      <li>registration of households, and let people <strong>supervise each other</strong></li>
      <li>if criminal activity is not reported, chop heads</li>
      <li>once a man reached 16-17, <mark>obliged to serve military</mark> and pay <mark>taxes</mark></li>
      <li>establishing the concept of <mark>ownership of land</mark></li>
      <li><mark>achievements in army gives promotion in rank</mark> proportional to the achievement</li>
      <li>the entire population of Qin is divided into <mark>ranks</mark> = permitted clothing, land, slaves, households.</li>
      <li>people (pesants/artisans) who contributed much grain/cloth to the state is free from tax</li>
      <li>proposed rulers of small districts <mark>县, who is in charge of organizing army</mark>, carry out public works, collect taxes…</li>
      <li><strong>standardized units</strong> such as weight and length</li>
    </ul>
  </li>
</ul>

<p><em>China’s First Emperor</em></p>

<ul>
  <li>
    <p>given a strong fiscal basis, King Zheng (later called <strong>秦始皇帝</strong>) decided to attack all the other rivals at the time</p>
  </li>
  <li>
    <p>after destorying the other six kingdoms, King Zheng:</p>

    <ul>
      <li>forced the royals from the six kingdoms to live near the capital (for monitoring)</li>
      <li>emphasized on <strong>farming</strong> as the mainstay of the economy</li>
      <li><strong>standardized coins</strong> to be a circle with holes (so that they can be stringed together)</li>
      <li>divided territories into <strong>commanderies</strong>, which is further divided into <strong>counties</strong>.
        <ul>
          <li>Commanderies are like little central government:</li>
          <li>they need to perform three tasks: civl matters, e.g. taxation, military affairs, and <mark>supervision of governmental officials</mark></li>
        </ul>
      </li>
      <li>the top officials in the central government include
        <ul>
          <li>chancellor, who heade the bureaucracy</li>
          <li>imperial secratry, who drafted king’s orders</li>
          <li>grand commandant, in charge of military</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Qin has also done some <strong>significant projects</strong></p>

    <ul>
      <li>built <strong>networks of roads</strong> over 6,800 km long</li>
      <li><mark>dug irrigation cannals</mark>, and some three hundred thousand men built extensive walls of pounded earch along northern borders</li>
      <li><mark>fearful of death</mark>, he tried to obtain exilir for immortality but failed. Instead, he let seven hundered thousand men working for his <mark>tomb</mark>, which was intested to replicate the universe as his permanet resting home in the <mark>afterlife</mark>
        <ul>
          <li>for fear that workers may disclose the position of the tomb, all artisans and laborers who had worked there <mark>were imprisoned in the tomb</mark> while alive</li>
          <li>gives rise to the <mark>Terra-Cotta army</mark> 秦陵兵马俑, who were thought to be troops that the emperor can fight with in the underworld</li>
          <li>however, his tomb today was never excavated/found</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>When Qin founder died in 210 B.C.E, he named his more popular first son to succeed, but with interloped by a powerful official named Zhao Gao</p>

    <ul>
      <li>took over as a chancellor</li>
    </ul>
  </li>
  <li>
    <p>but the greatest opposition is the <strong>rebellion of the people</strong>. This happened because there were laborers who are delayed by the rain, and that:</p>

    <ul>
      <li>since they cannot complete their work, they “will die” (according to Han historians)</li>
      <li>if they revolt, they die as well (according to Han historians)</li>
    </ul>

    <p>therefore, maybe they should risk for their own kingdom.</p>
  </li>
</ul>

<p><em>Reasons for Doubting the Historical Record</em></p>

<ul>
  <li>
    <p>Win ordered a <mark>large-scale book burning</mark> in 213 B.C.E destroying all dissenting point of view</p>

    <ul>
      <li>except <em>The Book of Song</em> 诗经 and <em>The Book of Documents</em> 书经 were banned, and only agricultral and divination books permitted</li>
      <li>for books such as 诗经, most content are anyway transmitted from teacher to student, hence book burning had no effect</li>
    </ul>
  </li>
  <li>
    <p>贾谊Jia Yi’s Confucian view point, which emphasized humanity and rightenousness, provided Han dynasty the perfect justification to overthrow Qin</p>
  </li>
  <li>
    <p>but it was found later in a tomb in 睡虎地 Shuihudi, where a Qin clerk lived a life as a hearing for crimal suit and took <mark>several legal writings with him in the tomb</mark></p>

    <ul>
      <li>described a detailed judification system where poeple would often be <mark>beaten as a punishment instead of killed</mark></li>
      <li>women also had work outside the typical sewing: some were working in <mark>lacquer production with signed vessels</mark></li>
    </ul>

    <p>however, it is <em>prescriptive</em> of what sohuld happen rather than <em>descriptive</em> of what actually happened, so it should also be taken with a grain of salt</p>
  </li>
</ul>

<p><em>The Founding of Han</em></p>

<ul>
  <li>peace during 秦始皇帝 but as soon as he died and much succession problem happened at palace, many of the former regional states broke away</li>
  <li>bona-fide peasants 刘邦 and low-ranking official <strong>rebelled and started a new dynasty</strong>
    <ul>
      <li>Liu Bang is very social but crude, hence have a lot of drinking friends at inn</li>
      <li>when he won the battle against Qin, he pleged to abolish all other Qin’s law but only keep a) those who kills others shall die b) he who harms others or steals should be punished</li>
      <li>but in the end it is found that the <mark>Han dynasty took many Qin laws verbatim</mark></li>
    </ul>
  </li>
  <li>one major depature from Qin is Han’s policy on placing nobility all near captical. Instead, Han created new nobilities to his brothers and relatives and <mark>dispersed them</mark>:
    <ul>
      <li>gave them titles of local Kings</li>
      <li>2/3 of the territory reined by sons and relatives, 1/3 by Liu Bang himself</li>
      <li>but the core of Han is still <mark>西安</mark></li>
    </ul>
  </li>
  <li>but the first years of Liu Bang’s reign was difficult, as it has to <strong>suppress rebellions within China and defned against the powerful 匈奴</strong> in the north
    <ul>
      <li>after Liu Bang’s death, a new ruler in 209 B.C.E. lost to Xiongnu and signed a <mark>humiliating peace treaty</mark> requiring China to present gifts of textiles, food, and wine, wile Xiongnu not to attack China</li>
    </ul>
  </li>
</ul>

<p><em>The Reign of Dowager Empress Lv</em></p>

<ul>
  <li>Empress Lv 吕后 ruled for an extended period of time by placing infants on throne</li>
  <li>as an empress, suffered pressure even from Xiongnu (asking she to marry over)</li>
</ul>

<p><em>The World of the Regional Rulers: 马王堆 finds</em></p>

<ul>
  <li>
    <p>found <mark>Han's tomb in 马王堆汉墓</mark>, with three of the four tombs almost intact</p>
  </li>
  <li>
    <p>most important find is <mark>Lday Dai's tomb</mark></p>

    <ul>
      <li>
        <p>Lady Dai’s skin fully preserved</p>
      </li>
      <li>
        <p>has a lot of cloths and wine vessels in the tomb</p>
      </li>
      <li>
        <p>found much evidence of Han cuisine, e.g. meat stew and rice</p>
      </li>
      <li>
        <p>her <mark>view of the afterlife</mark> characterized by the T-shaped banner which contained three sections:</p>

        <ul>
          <li>top: the immortal Lady Dai (spirit)</li>
          <li>middle: Lady Dai existence in the underworld</li>
          <li>bottom: Lady Dai in tomb (soul)</li>
        </ul>

        <p>not a sequential event, but silmultanoues</p>
      </li>
      <li>
        <p>migth not be literate due to no books in tomb</p>
      </li>
    </ul>
  </li>
  <li>
    <p>other tombs are his sons, where a vast majority of books is fonud = reassess the <strong>intellectual world of Han</strong></p>
  </li>
</ul>

<p><em>The Han Dynasty Under Emperor Wu</em> 汉武帝</p>

<ul>
  <li>Emperor Wu elimited checks on his power, and then <mark>established a Confucian academy</mark>, which is deeply affected by his advisor 董仲舒</li>
  <li>Emperor Wu started the academy by
    <ul>
      <li>first appointing five teachers who specialized in five books: <mark>诗经, 尚书/书经, 周易/易经, 尚书 春秋</mark></li>
      <li>enrolling thousands of students, who <strong>upon graduation can go into the government</strong></li>
    </ul>
  </li>
  <li>Therefore, the procedure of hiring new officials become a) be <mark>recommended</mark> and b) take the <mark>examinations</mark></li>
  <li>Emperor Wu also tried to battle against Xiongnu due to the unfair treaty, but neither achieved a decisive victory
    <ul>
      <li>during some of the battles, Li Ling founght hard but lost. He failed to suicide and became a slave</li>
      <li>司马迁wanted to defend Li Ling, who he knows as a childhood friend, but got himself castrated instead of put to death because he thinks its even worse <strong>if his literary work 史记 cannot be left to posterity</strong></li>
      <li>史记, unlike later books written by historians <em>funded by the government</em>, is <mark>self-funded and hence a more trust-worthy source</mark></li>
    </ul>
  </li>
</ul>

<p><em>The Creation of Autocracy</em></p>

<ul>
  <li>Emperor Wu asserted control during his time by dismissed or sentenced to death some five chancellors, and became unchecked in power</li>
  <li>he also promoted 霍光 to serve as regent after his death, but unfortunately he never gave up power and just <mark>placed child emperor over another</mark>
    <ul>
      <li>this cycle of regent people/empresses/enunuchs <mark>named themselves are regent and gained control</mark> is common for later era</li>
    </ul>
  </li>
</ul>

<p><em>Economic Problems in the Han</em></p>

<ul>
  <li>
    <p>Since almost every measure Emperor Wu imposed, e.g. sending troops to Xiongnu and establishing academy required funds, some mechanism is needed</p>
  </li>
  <li>
    <p>solution: <strong>government monopolies</strong></p>

    <ul>
      <li>salt and iron, where the latter is immensely useful for making tools</li>
      <li>later also assumed monopoly of copper, bronze, and wines</li>
    </ul>
  </li>
  <li>
    <p>but long years to fightings = lots of taxings = people suffering. Hence after 汉武帝 death investigation are sent out</p>

    <ul>
      <li>scholars were against tradings and monopolies, while the government officials successfully defended it</li>
    </ul>
  </li>
  <li>
    <p>In an essay by Wang Bao, were a slave’s life for a widow is mentioned, the econ for that time can be inferred:</p>

    <ul>
      <li>there is a widespread network of small and wide markets</li>
      <li>slaves are expected to travel from places to places to buy stuff</li>
      <li>although a money economy existed, mostly they are used to <strong>trade for luxuries</strong></li>
    </ul>

    <p>additionally, it meant the society can also be split into two types:</p>

    <ul>
      <li><mark>estate ownders</mark>: collected large amount of wealth and became <strong>increasinly powerful and influential</strong></li>
      <li><mark>slaves</mark>: e.g. lost from war or seriously in debt</li>
    </ul>
  </li>
</ul>

<p><em>Wang Mang 王莽 Regency</em>:</p>

<ul>
  <li>
    <p>Wang Mang wanted to <mark>suppress the power of large estate owners</mark>, and founded the Xin dynasty</p>
  </li>
  <li>
    <p>Wang Mang’s approach included limiting the maximum land you can have, and cessing some land from owner to poors</p>
  </li>
  <li>
    <p>However, his reign came to an end due to <strong>flooding</strong>, which caused</p>

    <ul>
      <li>unsatisfactory landowners due to his policy</li>
      <li>angry peasants</li>
    </ul>

    <p>hence he is killed and taken over</p>
  </li>
</ul>

<p><em>The Restoration of the later Han</em></p>

<ul>
  <li>The later Han with captial in Luoyang is sometimes called <mark>Eastern Han</mark> as it is east of Chang’an</li>
  <li>The captical has walls surrounded imperial palace, inns, canals, markest, and schools, and had a <strong>huge amount of residents, students, and officials</strong></li>
  <li>since it is just restored, it still relies on large land owners and hence they have some power over the recommendation system and put sons into government</li>
  <li>the <mark>rise of eunuchs</mark> in the palance</li>
</ul>

<p><em>Wang Chong’s Skeptism and 班’s Family</em></p>

<ul>
  <li><strong>argued that many early arguments are made <em>without</em> logic</strong>. For instance, people performing ceremonies to the spirit of earth is useless/unheard by the earth, just as people won’t head anything about the lice on their skin.</li>
  <li>Ban’s family is full of literate sons and daughters
    <ul>
      <li>Ban Gu, son of Ban Biao, resolved to complete the history of China written by his father was thrown into jail accused of distorting history</li>
      <li>Ban Zhao 班昭, the daughter of 班彪, is one of the most famous women writers
        <ul>
          <li><em>Lessons for Women</em>: unequal treatment of women and how she thinks married women should behave</li>
          <li>later on <mark>sponsered by the court</mark> to finish writing the history</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Ban Zhao’s view of women:
    <ul>
      <li>four qualities women should have: “womenly virtue, womenly words, womanly bearing, and womenly work”</li>
      <li><mark>wife should not question her husband</mark>, but husband should not beat wife either</li>
      <li><mark>plead for equal education</mark>, as usually sons are educated by daughters not
        <ul>
          <li>also inferred difficulty of women: families abandon their daughter due to <strong>marriage costs</strong></li>
          <li>but powerful families prefer having a <mark>daughter married to emperor</mark> so that they can <mark>seize power</mark></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Ban Biao was also served as the advisor to Emperor Deng</li>
</ul>

<p><em>Refusal to Serve in Government</em></p>

<ul>
  <li>but as the successor Emperor Huan could not bear the power of in-laws, used <mark>eunuchs to launch a coup and unseated the Liang family</mark>, which is the family of his wife</li>
  <li>as Emperor Huan’s needed eunuchs to succeed, he became very <strong>unpopular</strong> and people are rejecting his invite to serve. For example, one person who rejected explained:
    <ul>
      <li>holding office meant having to censure the emperor, and since critism will be punished, this is not good</li>
      <li>if not censuring, then his <strong>own “purity” as scholar is damaged</strong></li>
    </ul>
  </li>
</ul>

<p><em>The Rise of the Organized Daoist Church</em></p>

<ul>
  <li>Instead of the righteous scholars, Emperor Huang tried to tap from the new Daoist</li>
  <li>Daoist belief at that time went under a major transformation
    <ul>
      <li>believe that <mark>老子 is a deity and can come to give advices</mark></li>
      <li>split into two fractions, 五斗米道 and 黄巾</li>
    </ul>
  </li>
  <li>the 五斗米道 Five Peck of Daoist movement believed that
    <ul>
      <li>instead of teaching selected adepts techniques to obtain immortality, teach a larger community</li>
      <li>the leader 张道陵 <mark>promised good health in exchange to peoples belief/rice offerings to Daoist deity</mark></li>
      <li>the idea of <mark>linking illness with bad deeds</mark> initiates here, and that people believe confessions is the cure</li>
    </ul>
  </li>
  <li>the yellow turban planned for a rebellion 黄巾之乱, but
    <ul>
      <li>leaders quickly executed by military, under the lead of 曹操</li>
      <li>people quicly dissovled</li>
    </ul>
  </li>
  <li>foreshadows the introduction of buddism and changes of the religious lanscape later</li>
</ul>

<p><em>The Legacy of the Han</em></p>

<ul>
  <li>much remains uncertain about the fall of Han, but popular theory suggests that the empire experienced a <mark>massive shortfall of funds</mark></li>
  <li>However, both Qin and Han left an <strong>impression of unified China in peoples minds</strong></li>
  <li>during the 400 years of reign of Qin and Han
    <ul>
      <li>Chineses society assume the contours it would take today, and much market economy of the Han and government’s role in regulating also persisted until today</li>
      <li>women still has subordinate roles, but when opportunies arrive people such as Ban Zhao can break out of their traditional roles</li>
      <li>the only siginficant change, which comes later, is spiritual: introduction of <strong>Buddism</strong></li>
    </ul>
  </li>
</ul>

<h2 id="ch4-chinas-religious-landscape">Ch.4 China’s Religious Landscape</h2>

<p><strong>Overview</strong>:</p>

<ul>
  <li>Buddhism, started as a foreign religion, won more followers than Daoism for the year 200-600</li>
  <li>Buddhism included life of lay people who live at home with their faimlies or monk who joined monasteries</li>
  <li>
    <p>many reason underlay Buddihist’s success: most important is the ability to <strong>absorb elements of preexisting religions</strong>, e.g. recruited many local deities as guardian. Therefore, you can worship both Daoism and Buddhism at the same time</p>
  </li>
  <li>long-lasting political instability marked the centuries of China’s conversion to Buddhism: for three centureies after the fall of Han, a period often called <mark>Six Dynasties (220 - 589)</mark>, no regime successed in conquering more than half of China’s territory (until <mark>Sui</mark> dynasty that comes afterward)</li>
</ul>

<p><strong>The First Buddhist in China</strong></p>

<ul>
  <li>Buddhism is associated with <strong>trade</strong>, since the Buddha (ca 500 B.C.E) liked merchants show provided crucial financial support</li>
  <li>In 148 C.E. the famous missionary An Shigao from Parthia arrived in Luoyang, and began work on <strong>translating Sanskrit texts into Chinese</strong> (Sanskrit text is the text of Buddhist teaching)</li>
</ul>

<p><strong>The Successors to the Han Dynasty</strong></p>

<ul>
  <li>succeeded by the <mark>Three Kingdom period</mark> (220 - 280), in which Cao Cao’s <strong>nine grade system</strong> had a long lasting impact
    <ul>
      <li>in principle, a local official, the impartial judge, was supposed ot assign each candidate a rank from one to nine in the office</li>
      <li>in reality, the pattern established during Han prevailed, recommendations were influential, hence sons of powerful families have advantage</li>
    </ul>
  </li>
  <li>
    <p>when Cao Cao’s heirs lost power, the Sima family founded the <mark>Jin Dynasty</mark>, who ruled northen China for barely half a century util broken up in the War of Eight Princes (290 - 306), so northern part becomes separated again with Jin retrained its control at Luoyang</p>
  </li>
  <li>In 311, the <strong>Xiongnu conquered the former capital Luoyang</strong></li>
</ul>

<p><strong>Appeal of Buddhism to Northern Rulers</strong></p>

<ul>
  <li>Shi Le, the ruler who conquered Luoyang, was once introduced to the Buddhist missinoary <strong>Fotudeng</strong>, who performed some miracle tricks and impressed him</li>
  <li>he then granted the Buddhists the right to build <strong>monasteries</strong></li>
  <li>whether if Fotudeng can do magic tricks is tangantial here, the important thing is:
    <ul>
      <li>the news of this spreaded Buddhism</li>
      <li>Buddhism offered <mark>non-Chinese rulers an alternative to Confucianism,</mark> which is very Chinese</li>
      <li>also, for <mark>women</mark>, this offered a <strong>new alternative than family life</strong>: joining a nunnery. Justified by <mark>transfer of merit</mark> (e.g. to family)</li>
    </ul>
  </li>
</ul>

<p><strong>The Difficulties of Translating Buddhist Concept</strong></p>

<ul>
  <li>Chinese belongs to Sino-Tibetan language, while Sanskrit which has an alphabet, belongs to Indo-European</li>
  <li>also many different cultural assumptions: <strong>Indians talked about sex much more freely</strong> than Chinese, hence cautious translators dropped any mentions of kissing and hugging</li>
  <li>difficult to translate new terms/concept not in Chinese:
    <ul>
      <li><strong>early translators decided to use Daoism concepts</strong>: Nirvana $\to$ wuwei, which is far from accurate</li>
      <li>also difficult to translate <mark>karma</mark>: one’s next life could be reborn into an animal or person depending on behaviors; Daoism viewed a constant afterlife</li>
    </ul>
  </li>
  <li>then in 344 - 413, Kumarajiva, a monk from Central Asia or from India, is sponserd by private individuas to come to Chang’an to perform <strong>better translations</strong></li>
</ul>

<p><strong>Buddhism in Central Asia</strong></p>

<ul>
  <li>Kumarajiva is trained by a monk in Kucha, which is now part of China’s Xinjiang, and many people there speak <strong>Turkic language Uighur</strong> instead of Chinese</li>
  <li>he studied Buddhist texts in Sanskirt, spoke Tokharian, and learned some Chinese from merchants who came to Kucha</li>
  <li>he was later kiddnapped to Gansu for 17 years, where he mastered Chinese, and he started to believe in the <strong>Greater Vehicle</strong>
    <ul>
      <li>the <mark>Lesser Vehicle</mark> (Hinayana) held Nirvana possible only for the few who joined the Buddhist clergy</li>
      <li>the <mark>Greater Vehicle</mark> (Mahayana) offered salvation even to laity</li>
    </ul>
  </li>
  <li>starting in 401, skilled translators and knowledgable monks also joined the translation project</li>
  <li>even though Buddhism has value for <strong>celibacy</strong>, there are many exceptions (e.g. Kumarajiva) where the practioner had family</li>
  <li>Bodhisattva named Avalokitesvara = nowadays <mark>观音</mark></li>
</ul>

<p><strong>Contact between India and China</strong></p>

<ul>
  <li>pilgrams going to India as early as 260 on the overland trade route linking India and China</li>
  <li>no single <mark>Silk Road</mark> strecthed all the way yfrom Rome to CHina, but most frequented routes <strong>led to India</strong>
    <ul>
      <li><strong>Chinese silk was very lucrative</strong> as only Chinese knew how to process silk worms</li>
      <li>much silk also went to European conutries such as Rome, but a lot might be made in Byzantium</li>
      <li>then silk is also used as gifts to monasteries</li>
      <li>Chinese imported a lot of glass, 琉璃 v.s. 玻璃</li>
    </ul>
  </li>
  <li>In fact, the silk road did not have a single merchant travelling on a camel to Rome, but more often:
    <ul>
      <li><strong>only few were long distance merchants</strong></li>
      <li>most stayed on circuit close to home</li>
      <li>other silk road travelelrs include missionaries, refugees, and envoys for Kings, etc.</li>
    </ul>
  </li>
  <li>when a wave of conquests (Persian Empire) cut off the trade routes between China and Inda, the great age of SIlk Road came to an end, having lasted for over 1000 years</li>
</ul>

<p><strong>The Northern Wei Dynasty</strong></p>

<ul>
  <li>during early contact with India and Central Asiam the only government in north China to retrain power for over a century was establiedh by a non-Chinese people, the <mark>Tabgach 拓跋</mark>, or also reffered ot as <mark>鲜卑</mark> (name of the tribe)</li>
  <li>Xianbei people speaks <strong>both Turic and Mongolian laguages</strong>, but had no written langue of their own</li>
  <li>Xianbei people had:
    <ul>
      <li>a system of tanistry: more powerful person in duel is the leader</li>
      <li>women knoew how to tend to hers and hunt because men left for war. Hence <mark>women enjoyed more power</mark> than most other societies</li>
      <li>no stable capital, as it is defined where the ruler set camp</li>
    </ul>
  </li>
  <li>slowly shifted base from Yin Shan mountain in Inner Monolia to northern Shanxi, and staretd taxing the Chinese peasantry and <strong>adopted a Chinese law code</strong></li>
  <li>by the middle of fifth century, Northern Wei has defated most of their rivals to <strong>take control of north China</strong></li>
</ul>

<p><strong>Dowager Empress Feng and the Equal-Field System</strong></p>

<ul>
  <li>established a new captial in Pingcheng, and some of Tabgach are drawn to Chinese ways</li>
  <li>Dowager Empress Feng had a chance to enter the system and <strong>systematically appoint Chinese to office</strong> to lessen Tabgach influence</li>
  <li>Empress Feng seriouly wanted to transform Tabgach to Chinese:
    <ul>
      <li>wanted to tie the Chinese <strong>farming</strong> population to the land, as otherwise it is mostly bureaucrats and atisans who did not grow their own food</li>
      <li>this is also useful as it could serve as a source of income by taxing</li>
    </ul>
  </li>
  <li>the policy to realized the above is the <strong>Equal-Field system</strong>:
    <ul>
      <li>apointed land to all those of tax paying age
        <ul>
          <li>since this includes slaves, this means powerful landowning families could retain control over large areas of land</li>
        </ul>
      </li>
      <li>gives two types of lands, <strong>farmland</strong> for growing crops, which is short term investment since lands are often quickly redistributed when farmer stopped working</li>
      <li>and <strong>mulberry tree</strong> for silkworms, which is a long term investment as it takes a long time for the tree to mature</li>
    </ul>
  </li>
  <li>all of which is to tie people to the land, but did not take effect immediately
    <ul>
      <li>the system <strong>lasted into the eight century</strong>, as it helped tied people to land and increased revenue</li>
    </ul>
  </li>
</ul>

<p><strong>Adoption of Chinese Ways</strong></p>

<ul>
  <li>in 493, Emperor Xiaowen 孝文 (北魏孝文帝) implemented a series of measures designed to make his empire Chinese</li>
  <li>his measures include:
    <ul>
      <li>establish a new captial in Luoyang</li>
      <li>dropped their own family name of Tabgach and had surname of <strong>Yuan</strong></li>
      <li>also appointed the <strong>nine-grade system</strong></li>
      <li>advocated conversion to Daosim instead of Buddhism (may wanted to weaken Buddhist establishment for more power)</li>
    </ul>
  </li>
  <li>but he died young in 499, and the dynasty entered three decades of discord, where <mark>Northern Wei came to a miserable end in 534</mark></li>
</ul>

<p><strong>Growth of Buddhism under the Northern Wei</strong></p>

<ul>
  <li>even during those difficult times, Buddhism received wide support from different factions</li>
  <li>examples of its populance include:
    <ul>
      <li>“<strong>there is no place that does not have a Buddhist sanctuary</strong>”, by a prince in 518</li>
      <li>had large buddhist monarsteries up to 300 meters high, and <strong>built over 839 royal monasteries</strong>, and about thirty thousand places of worship</li>
    </ul>
  </li>
  <li>In 528, Erzhu tribes defeated Empress Ling, conquered Luoyang, named a new emperor, and Luoyang was laid waste in 534 from fire</li>
</ul>

<p><strong>Persistance of Tabgah Identity</strong></p>

<ul>
  <li>
    <p>even after the fall of Northern Wei Dynasty, Tabgach did not lose their identity since the warlords could not agree on a new emperor. Hence they went back to stay in north Shanxi</p>
  </li>
  <li>
    <p>two generations after Emperor 孝文, Tabgach people <strong>still retained their language and identity</strong></p>
  </li>
  <li>
    <p>however, the <mark>impact of their steppe culture on north Chinese is long-lasting</mark></p>

    <ul>
      <li>
        <p>Yan Zhitui recorde thah people in the north and south (of yellow river) behaved very differently:</p>

        <ul>
          <li>in the south husband can be extravagent even if wife and children suffer</li>
          <li>in the north, it is <strong>usually wife who runs the household, and sometimes husband has to put up with wife’s insult</strong></li>
        </ul>

        <p>where the latter seems related to Tabgach’s culture: women had more influence</p>
      </li>
    </ul>
  </li>
</ul>

<p><strong>The Move South</strong></p>

<ul>
  <li>before, the south is often viewed as <strong>uncivilized</strong>, and the wet climate (<mark>perfect for rice</mark>) is thought of as a <strong>home for illness</strong></li>
  <li>however, the fall of Luoyang prompted migration, as well as the dangers of battles</li>
  <li>consequently, many northern Chinese aristocrats moved to <mark>Nanjing</mark></li>
  <li>in south China, Daoist teachers were most active, but there were some buddhist influences as well. But there were somem dramatic changes:
    <ul>
      <li>for buddhist, the teachings of the <strong>Greater Vehicle largely superseded those of Lesser Vehicle</strong></li>
      <li>Daoist visionaries divided into <strong>Lingbao 灵宝 and Mao Shan 茅山</strong></li>
    </ul>
  </li>
</ul>

<p><strong>Religious Life in South China</strong></p>

<ul>
  <li>the Liang emperor was interested in Daoism, studied it in Mao Shan Montain茅山, hence new Daoist sect took the name Mao Shan</li>
  <li>the Maoshan adherents continued the practices of Five Peck Daoist, but <strong>distance themselves from practice that had given the Doaist a bad name</strong>, specifically certian sexual rites</li>
  <li>had a system of seven levels housing both divine immortals as well as the spirits of the dead
    <ul>
      <li>slightly optimistic than Chinese view of afterlife were dead would go through a series of courts</li>
      <li>believed that you could <strong>lodge suits in the underground agasint people who had wronged them</strong></li>
      <li>however, you can rise a level if you had <strong>revealations from certified teachers</strong>, which in reality is a “secretive service” and costs a lot</li>
    </ul>
  </li>
</ul>

<p><strong>Religious Policies of Emperor Wu of the Liang</strong></p>

<ul>
  <li>he stued Daosit, but then in 504 urged his family and officails to <strong>give up Doaism for Buddhist teaching</strong></li>
</ul>

<p><strong>Critics of the Buddhist Establishments</strong></p>

<ul>
  <li>by the middle of 6th century, there are approx two million monks</li>
  <li>those clery <strong>did not work or serve in military</strong>, hence seen as a drain on state resource</li>
  <li>this caused <mark>ire in the emperor of Zhou dynasty</mark> (557 - 581) who succeeded the Qi, and ordered all Buddhist monks to return to lay life and <mark>all Buddhist texts and statues destoryed</mark>
    <ul>
      <li>even inside buddhism, there are criticism as they shelted criminals and engaged in loans</li>
      <li>however, those records are mostly about the wealthy clergy, so we don’t know the common clergy’s behavior</li>
    </ul>
  </li>
  <li>however, a <mark>short supression in 574 cuold do little to shake the hold</mark> of either Buddhist or Daoist, both of which had history over 4 centuries</li>
</ul>]]></content><author><name></name></author><category term="2022@Columbia" /><summary type="html"><![CDATA[Intro to East Asia: China]]></summary></entry><entry><title type="html">ELEN6885 Reinforcement Learning part1</title><link href="/lectures/2022@columbia/ELEN6885_Reinforcement_Learning.html/" rel="alternate" type="text/html" title="ELEN6885 Reinforcement Learning part1" /><published>2022-12-15T00:00:00+00:00</published><updated>2022-12-15T00:00:00+00:00</updated><id>/lectures/2022@columbia/ELEN6885_Reinforcement_Learning</id><content type="html" xml:base="/lectures/2022@columbia/ELEN6885_Reinforcement_Learning.html/"><![CDATA[<p>Reinforcement Learning</p>

<hr />

<p>The office hours will take place by default in EE dept. student lounge, <strong>13th FL, Mudd building</strong>. TA’s may decide to host their office hours remotely. If that is the case they will post an announcement here with a link.</p>

<table>
  <thead>
    <tr>
      <th>TA</th>
      <th>Day</th>
      <th>Time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Trevor Gordon</td>
      <td>Monday</td>
      <td>1:30 PM - 3:30 PM</td>
    </tr>
    <tr>
      <td>Xin Huang</td>
      <td>Tuesday</td>
      <td>9:30 am - 11:30 am</td>
    </tr>
    <tr>
      <td>Jinxuan Tang</td>
      <td>Wednesday</td>
      <td>3:30 pm - 5:30 pm</td>
    </tr>
    <tr>
      <td>Yukai Song</td>
      <td>Thursday</td>
      <td>9:30 am - 11:30 am</td>
    </tr>
    <tr>
      <td>Gokul Srinivasan</td>
      <td>Friday</td>
      <td>3:30 PM - 5:30 PM</td>
    </tr>
  </tbody>
</table>

<h1 id="introduction-to-rl">Introduction to RL</h1>

<p><strong>Instructors</strong>:</p>

<ul>
  <li>Chong Li (first half of the semester)</li>
  <li>Chonggang Wang (second half)</li>
</ul>

<p><strong>Exam</strong>:</p>

<ul>
  <li>bi-weekly assigments 50% (first assginment out after week 2)</li>
  <li>midterm exam 20%</li>
  <li>final exam 30%</li>
</ul>

<p><strong>Key aspects of RL</strong> (as compared to other algorithms):</p>

<ul>
  <li>no supervisor, only reward signal (and/or environment to interact with)</li>
  <li>feedback/reward could be delayed</li>
  <li>time matters, as it is a sequenitial decision making</li>
</ul>

<p>The general process of interaction looks like:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220915170944706.png" alt="image-20220915170944706" style="zoom: 50%;" /></p>

<p>where essentially, the agent learns</p>

<ul>
  <li>
    <p>a <strong>policy</strong> (e.g. the decision making agent)</p>

\[s \in S \to \pi(a|s),a\in A(s)\]

    <p>since the action space could be dependent on the state. Note that a policy could be <strong>stochastic</strong> or <strong>determinstic</strong></p>
  </li>
  <li>
    <p>a <strong>reward</strong> indicates the <mark>desirability</mark> of that state. Reward is immediate or sometimes delayed (but as long as you have a reward for the entire episode, it is fine)</p>
  </li>
  <li>
    <p>a <strong>return</strong> is a cumulative sequence of received rewards after a given time step</p>

\[G_t = R_{t+1}+\gamma R_{t+2} + \gamma^2 R_{t+3} + ... = \sum_{k=0}^T \gamma^k R_{t+1+k}\]

    <p>where usually $\gamma &lt; 1$ if we have infinite episodes $T \to \infty$</p>
  </li>
  <li>
    <p>a <strong>value function</strong> (which depends on the policy)</p>

\[V_\pi(s) = \mathbb{E}_\pi [G_t|S_t=s] = \mathbb{E}_\pi \left[ \sum_{k=0}^T \gamma^k R_{t+1+k} |S_t=s \right]\]

    <p>given that I am currently at $s$, what is the <em>expected return if I follow the policy $\pi$</em>.</p>
  </li>
  <li>
    <p>a <strong>action-value function</strong></p>

\[Q_\pi(s,a) =  \mathbb{E}_\pi [G_t|S_t=s, A_t=a] = \mathbb{E}_\pi \left[ \sum_{k=0}^T \gamma^k R_{t+1+k} |S_t=s, A_t=a\right]\]

    <p>given that I am currently as $s$, what is the <em>expected return if I take $a$ as next step and then follow policy $\pi$</em>. Note that if we take a “marginal” on $a$, we can get the $V_\pi$ from the $Q_\pi$:</p>

\[V_\pi(s) = \sum_{a \in A(s)} Q_\pi(s,a) \pi(a|s)\]

    <p>which can be easily seen from their definitions. The reverse can be derived as well:</p>

\[Q^\pi(s,a) = R(s,a)+\gamma \sum_{s' \in S}P(s'|s,a)V^\pi(s')\]
  </li>
  <li>
    <p>a <strong>world model</strong> (optional, so that if you know this, planning becomes much easier)</p>

\[\mathcal{P}_{ss'}^a = \mathbb{P}[S_{t+1} = s' | S_t=s , A_t=a]\]

    <p>which is the transition probability</p>

\[\mathcal{R}_s^a = \mathbb{E}[R_{t+1} | S_t=s,A_t=a]\]

    <p>which is the reward model. Note that it is expected when what happens next is stochastic.</p>
  </li>
</ul>

<blockquote>
  <p>The agent’s goal is to find a <strong>policy</strong> to <strong>maximize the total amount of reward</strong> it receivers over the long run.</p>
</blockquote>

<hr />

<p><em>Examples</em></p>

<ul>
  <li>
    <p><strong>Maze</strong></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Maze Map</th>
          <th style="text-align: center">Reward</th>
          <th style="text-align: center">$V^{\pi^*}(s)$</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220915170101082.png" alt="image-20220915170101082" style="zoom:50%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220915170120864.png" alt="image-20220915170120864" style="zoom:50%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220915170136366.png" alt="image-20220915170136366" style="zoom:50%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>note that</p>

    <ul>
      <li>
        <p>each step has a $-1$ reward (we designed, so that the agent finds the shortest path = max reward), and states is the agent’s location</p>
      </li>
      <li>
        <p>these values are computed given the optimal policy</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Student Markov Chain</strong>: consider some given stochastic <em>policy</em>:</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">Student Markov Chain</th>
          <th style="text-align: center">+Reward</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220915170318596.png" alt="image-20220915170318596" style="zoom:50%;" /></td>
          <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220915170339032.png" alt="image-20220915170339032" style="zoom: 67%;" /></td>
        </tr>
      </tbody>
    </table>

    <p>we can sample episodes for student markov chain starting from $S_1=C_1$ and obtain episodes such as:</p>

    <p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220915170437631.png" alt="image-20220915170437631" style="zoom:33%;" /></p>

    <p>Of course, for each episode, you can have some reward given some reward model:</p>

    <p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220915170506093.png" alt="image-20220915170506093" style="zoom:50%;" /></p>

    <p>where essentially we are just computing the expected return $G_t$. But since you can have as much episodes as you want, we can consider:</p>

\[V(S=C_1)=\mathbb{E}[G_t | S_t=C_1] = \sum_{i=1}^\infty P(\tau_i)\cdot V(\tau_i)\]

    <p>where probability of a trajectory $P(\tau_i)$ we can get since we know the transition model. However, note that this is impossible to compute since we can have infinite episodes (so we need other tricks, e.g. Bellman Equations &amp; Dynamic Programming)</p>
  </li>
</ul>

<hr />

<p>This gives rise to the definitions:</p>

<blockquote>
  <p><strong>Markov Decision Process</strong> is a tuple $\lang S,A,\mathcal{P},\mathcal{R},\gamma \rang$</p>

  <ul>
    <li>
      <p>$\mathcal{S}$ is a finite set of states</p>
    </li>
    <li>
      <p>$\mathcal{A}$ is a finite set of actions</p>
    </li>
    <li>
      <p>$\mathcal{P}$ is a state trainsition probability matrix:</p>

\[\mathcal{P}_{ss'}^a = \mathbb{P}[S_{t+1}=s'|S_t=s,A_t=a]\]
    </li>
    <li>
      <p>$\mathcal{R}$ is a reward function, so that $\mathcal{R}<em>s^a = \mathbb{E}[R</em>{t+1}\vert S_t=s, A_t=a]$ for cases when reward is not deterministic</p>
    </li>
    <li>
      <p>$\gamma$ being the discount factor $\gamma \in [0,1]$.</p>
    </li>
  </ul>
</blockquote>

<p>so that if the problem can be formulated into a MDP, then we can apply RL algorithms.</p>

<p>And finally, after we find a policy using RL algorithm/or even train a policy using RL, we need to have access to an <strong>environment</strong>: in this course we will use <mark>OpenAI Gym</mark>. (simulation are used usually because human-invovled real environment would be too costly)</p>

<h2 id="rl-history">RL History</h2>

<p>There are two threads of development</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220915170902678.png" alt="image-20220915170902678" style="zoom:50%;" /></p>

<p>So that essentially:</p>

<ul>
  <li>control theory includes the Bellman Optimality Equations, and essentially solves the problem of how to plan, <strong>given a known model</strong></li>
  <li>the trial and error structure gives rise to the structure of how to train an agent to learn how to plan <strong>when we don’t know the model</strong></li>
</ul>

<h1 id="bandit-problem-and-mdp">Bandit Problem and MDP</h1>

<p>Fundemental mathematical stuff behind RL algorithms.</p>

<h2 id="bandit-problem">Bandit Problem</h2>

<p>One of the first problem that people look at. The problem is simple, but the solution shows principles in RL. The classical is the n-armed bandit problem</p>

<blockquote>
  <p><strong>N-armed Bandit Problem</strong>: suppose you are facing two machines, where both are Gaussian and</p>

  <ul>
    <li>reward from the first gives $\mu=5$, with variance 1</li>
    <li>reward from the second gives $\mu=7$, with variance $1$</li>
  </ul>

  <p>The obviously we will use the second machine. But in reality, the <strong>above information is not available</strong>. So what do you do? Your objective is to <mark>maximize the expected total reward over some time period</mark>.</p>
</blockquote>

<p><strong>Intuitively</strong>, the idea should be:</p>

<ol>
  <li>spend some initial money to explore and estimate the epectation using average reward</li>
  <li>then play towards the better machine</li>
</ol>

<p>With this, we consider $Q_t(a)$ value being the estimated value/average reward so far of action $a$ at the $t$-th play:</p>

\[Q_t(a) = \frac{R_1 +R_2 + ... + R_{K_a}}{K_a}\]

<p>for $K_a$ is the number of times action $a$ was chosen and $R_1,…,R_{K_a}$ being the reward associated with action $a$.</p>

<p>Once you estimated $Q_t(a)$, we can consider:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220916082722457.png" alt="image-20220916082722457" style="zoom: 67%;" /></p>

<p>where we can test:</p>

<ul>
  <li>
    <p><strong>greedy</strong> policy (or $\epsilon=0$), choosing the machine with current best $Q_t(a)$</p>
  </li>
  <li><strong>$\epsilon$-greedy</strong> means you choose a random machine with probability $\epsilon/N$ even though you know the current best. E.g. if you have, at step $t=10$, achieved $Q_{10}(a_1)=4.5,Q_{10}(a_2)=4$, then with $\epsilon=0.2$:
    <ul>
      <li>choose $a_1$ with probability $0.8+0.1=0.9$</li>
      <li>choose $a_2$ with probability $0.1$</li>
    </ul>
  </li>
  <li>why is $\epsilon=0$ not good? Once you have made a unlucky estimation of the average, you may be stuck at a suboptimal solution. Especially in the early stage. But with $\epsilon$-greedy, I always have chance to jump to the correct arm.
    <ul>
      <li>note that of course, there are cases where greedy policy works. But more often $\epsilon$-greedy gives more consistent performance.</li>
    </ul>
  </li>
  <li>but what is the optimal solution?</li>
</ul>

<blockquote>
  <p><strong>Exploitation vs. exploration dilemma</strong>: Should you <mark>exploit</mark> the information you’ve learned or <mark>explore</mark> new options in the hope of greater payoff?</p>

  <ul>
    <li>this is what makes most RL problem hard to find the optimal</li>
  </ul>
</blockquote>

<p>An alternative to $\epsilon$-greedy is the <strong>Softmax policy</strong> (to balance exploration and exploitation)</p>

<blockquote>
  <p><strong>Softmax Policy</strong>: essentially use softmax of the Q values to give probability</p>

\[\mathrm{Softmax}(Q(a)) = \frac{\exp(Q_t(a)/\tau)}{\sum_{a \in A} \exp(Q_t(a)/\tau)}\]

  <p>note that $\tau$ has a critical effect:</p>

  <ul>
    <li>if $\tau \to \infty$, the distribution will become almost uniform</li>
    <li>if $\tau \to 0$, then it becomes greedy action selection</li>
  </ul>
</blockquote>

<p>But which one is better, softmax or $\epsilon$-greedy? In practice it depends on applications.</p>

<hr />

<p><strong>Notes on Algorithmic Implementation</strong></p>

<ul>
  <li>
    <p>do you need to store all rewards to estimate average reward $Q_k$ for each action? No, you can use a <strong>moving average</strong></p>

\[\begin{align}
Q_{k+1}
&amp;= \frac{1}{k} \sum_{t=1}^k R_t\\
&amp;= \frac{1}{k} \left( R_t + \sum_{i=1}^{k-1} R_i \right) \\
&amp;= \frac{1}{k} \left( R_t + kQ_k - Q_k \right) \\
&amp;= Q_k + \frac{1}{k}[R_k - Q_k]
\end{align}\]

    <p>where $Q_k$ is for the computed average reward from the previous step, and <strong>$R_k$ is the new info</strong>. Note that <mark>this form is very commonly seen in RL</mark>:</p>

\[\text{New Estimate} \gets \text{Old Estimate} + \alpha \underbrace{(\text{Target - Old Estimate})}_{\text{innovation term}}\]

    <p>where the innovation term would give you some idea of the new information. The step size is there because we know the innovation term will oscillate since $\mathrm{Target}$ might contain inaccuraries</p>
  </li>
  <li>
    <p>what is a <strong>good step size</strong> to choose? We want your estimate, e.g. $Q$-value to converge.</p>

    <p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220916084728218.png" alt="image-20220916084728218" style="zoom:50%;" /></p>

    <p>an example for this to work is $\alpha=1/k$. Essentially, the intuition behind this is that it will take past information a bit more, but you should <em>always have some non-trivial weight on the new information</em>.</p>
  </li>
  <li>
    <p>What if this is a <strong>non-stationary</strong> problem? i.e. the distribution for the n-arm bandit machine is <em>varying over time</em>, e.g. mean changes over time. In this case, the convergence doesn’t mean anything since the “correct” mean is moving. In this case, we can choose $\alpha$ being a constant.</p>
  </li>
</ul>

<h2 id="markov-decision-process">Markov Decision Process</h2>

<p>MDP formally describe an environment for reinforcement learning, where the <mark>environment is fully observable</mark>. First</p>

<blockquote>
  <p><strong>Markov Property</strong>: the future is independent of the past given the present. i.e. I only care about present, past gives no information</p>

\[P(S_{t+1}|S_t) = P(S_{t+1}|S_1,...,S_t)\]

  <p>may or may not be a good assumption in some problems. However, you can always make this a good assumption, e.g. <mark>if you choose $S_t = \text{everything up to time t}$, then this trivially holds</mark>.</p>
</blockquote>

<p>A recap of the definitions</p>

<blockquote>
  <p><strong>Markov Process</strong> is a tuple $\lang S,\mathcal{P}\rang$</p>

  <ul>
    <li>
      <p>$\mathcal{S}$ is a finite set of states</p>
    </li>
    <li>
      <p>$\mathcal{P}$ is a state trainsition probability matrix:</p>

\[\mathcal{P}_{ss'} = \mathbb{P}[S_{t+1}=s'|S_t=s]\]
    </li>
  </ul>

</blockquote>

<p>An example of the transition matrix is</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220916085816449.png" alt="image-20220916085816449" style="zoom:50%;" /></p>

<blockquote>
  <p><strong>Markov Reward Process</strong> is a tuple $\lang S,\mathcal{P},\mathcal{R},\gamma \rang$</p>

  <ul>
    <li>
      <p>$\mathcal{S}$ is a finite set of states</p>
    </li>
    <li>
      <p>$\mathcal{P}$ is a state trainsition probability matrix:</p>

\[\mathcal{P}_{ss'} = \mathbb{P}[S_{t+1}=s'|S_t=s]\]
    </li>
    <li>
      <p>$\mathcal{R}$ is a reward function, so that $\mathcal{R}<em>s = \mathbb{E}[R</em>{t+1}\vert S_t=s]$ for cases when reward is not deterministic</p>
    </li>
    <li>
      <p>$\gamma$ being the discount factor $\gamma \in [0,1]$. Useful for infinite episodes</p>
    </li>
  </ul>
</blockquote>

<p><em>For example:</em></p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220916090117592.png" alt="image-20220916090117592" style="zoom: 50%;" /></p>

<p>Then from this, we can also define</p>

<ul>
  <li>
    <p><strong>return</strong>: think of the $R_{t+1}$ as going from a MDP to a MRP. If you start at Class 1, then you should also include $R=-2$ in your computation, just as in MDP, the reward</p>

\[G_t = R_{t+1} + \gamma R_{t+2} += ... = \sum_{k=0}^\infty \gamma^k R_{t+k+1}\]
  </li>
  <li>
    <p>the choice of $\gamma$ affects the bahavior/goal of your algorithm</p>

    <ul>
      <li>$\gamma=0$ leads to myopic evaluation</li>
      <li>$\gamma=1$ leads to far-sighted evaluation</li>
    </ul>
  </li>
</ul>

<p>Additionally, we can also define <strong>state-value function</strong></p>

<blockquote>
  <p><strong>State Value Function</strong> (for MRP): the expected return starting from state $s$</p>

\[V(s) = \mathbb{E}[G_t|S_t=s]\]

</blockquote>

<p>which we have discussed before, and to compute this intuitively would be:</p>

<ul>
  <li>start from a state $s$</li>
  <li>compute expected reward for all possible trajectory from this state</li>
  <li>weight it by probability of each trajectory</li>
</ul>

<p>Which would give this</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220916090938392.png" alt="image-20220916090938392" style="zoom:50%;" /></p>

<blockquote>
  <p>Is there an easier way than sample, weight, and sum? The <strong>Bellman Equation</strong>.</p>
</blockquote>

<p>We can decompose the value function definition, and see what we get</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220916091139515.png" alt="image-20220916091139515" style="zoom:50%;" /></p>

<p>where only the last step is tricky:</p>

<ul>
  <li>
    <p>what is $\mathbb{E}[\gamma G_{t+1}\vert S_t=s]$? By definition of expected value:</p>

\[\begin{align*}
\mathbb{E}[\gamma G_{t+1}|S_t=s]
&amp;= \gamma \sum_g G_{t+1} P(G_{t+1}|S_t=s)\\
&amp;= \gamma \sum_g G_{t+1} \sum_{s'} P(G_{t+1}, S_{t+1}=s'|S_t=s)\\
&amp;= \gamma \sum_g G_{t+1} \sum_{s'} P(G_{t+1}|S_{t+1}=s', S_t=s)P(S_{t+1}=s'|S_t=s)\\
&amp;= \gamma  \sum_{s'} \left( \sum_g G_{t+1}  P(G_{t+1}|S_{t+1}=s') \right) P(S_{t+1}=s'|S_t=s)\\
&amp;= \gamma \sum_{s'\in S}V(s') P(S_{t+1}=s'|S_t=s)\\
&amp;= \mathbb{E}[\gamma V(s') | S_t=s]
\end{align*}\]

    <p>where:</p>

    <ul>
      <li>the aim for the second equality is because we know the final result has $v(S_{t+1})$, so we need to introduce a next state $s’$.</li>
      <li>the third equality comes from applying chain rule for joint probability</li>
      <li>the fourth equality comes from the Markov Assuption, where $G_{t+1}$ does not depend on the past, only present. And that we are taking $G_{t+1}$ since it does not depend on the future state $s’$</li>
    </ul>
  </li>
  <li>
    <p>now, given the above, we essentially realize for an ealier state:</p>

\[\begin{align*}
  V(s) 
  &amp;= \mathbb{E}[R_{t+1}|S_t=s] + \gamma \mathbb{E}[V(S_{t+1})|S_t=s] \\
  &amp;= \mathcal{R}_s + \gamma \sum\limits_{s' \in S} \mathcal{P}_{ss'} V(s')
\end{align*}\]

    <p>for $\mathcal{R}$ is the expected reward in case reward is stochastic. And in matrix form:</p>

\[V = \mathcal{R} + \gamma \mathcal{P}V\]

    <p>for instance:</p>

    <p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220916092443352.png" alt="image-20220916092443352" style="zoom:33%;" /></p>

    <p>so given this, <strong>can we solve for $V$</strong> (which is our final goal)? Simply solve it if given $P,R$:</p>

\[\begin{align*}
V 
&amp;= R+\gamma P V\\
V &amp;=(I - \gamma \mathcal{P})^{-1} R
\end{align*}\]

    <p>An example using this to compute $V$ from the closed form solution:</p>

    <p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220916092636709.png" alt="image-20220916092636709" style="zoom: 50%;" /></p>

    <p>but is this all? We have real life concerns:</p>

    <ul>
      <li>The complexity of <em>this approach</em> is $O(n^3)$ due to the inverse, for $n$ being the number of states</li>
      <li>Most often in reality you are <mark>not given $P$</mark>, i,e, you don’t know it</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>Two important results from the previous discussion for MRP:</p>
  <ul>
    <li>
      <p>Bellman’s equation for $V$:</p>

\[V = \mathcal{R} + \gamma \mathcal{P}V\]
    </li>
    <li>
      <p>and we can solve for $V$ easily in closed form:</p>

\[V =(I - \gamma \mathcal{P})^{-1} R\]
    </li>
  </ul>

</blockquote>

<p>However</p>

<blockquote>
  <p><strong>For large MDPs, or unknown transition models:</strong> we have the following algorithms to be our savior</p>

  <ul>
    <li>Dynamic programmming (known transition, but more efficient)</li>
    <li>Monte-Carlo evaluation (sampling, unknown transition)</li>
    <li>Tempora-Difference learning (sampling, unknown transition)</li>
  </ul>
</blockquote>

<blockquote>
  <p><strong>Professor Li:</strong> “Why you need algorithm if you have the closed form solution? All algorithms are there to exchange for <em>compute</em>, or more oftenly, <em>approximate</em> a solution”.</p>
</blockquote>

<p>Finally, we introduce our main problem:</p>

<blockquote>
  <p><strong>Markov Decision Process</strong> is a tuple $\lang S,A,\mathcal{P},\mathcal{R},\gamma \rang$</p>

  <ul>
    <li>
      <p>$\mathcal{S}$ is a finite set of states</p>
    </li>
    <li>
      <p><mark>$\mathcal{A}$ is a finite set of actions</mark></p>
    </li>
    <li>
      <p>$\mathcal{P}$ is a state trainsition probability matrix:</p>

\[\mathcal{P}_{ss'}^a = \mathbb{P}[S_{t+1}=s'|S_t=s,\textcolor{red}{A_t=a}]\]
    </li>
    <li>
      <p>$\mathcal{R}$ is a reward function, so that $\mathcal{R}<em>s^a = \mathbb{E}[R</em>{t+1}\vert S_t=s, A_t=a]$ for cases when reward is not deterministic</p>
    </li>
    <li>
      <p>$\gamma$ being the discount factor $\gamma \in [0,1]$.</p>
    </li>
  </ul>
</blockquote>

<p>and remember that, most of the time, we do no have access to $P$.</p>

<p>Then, <mark>when given a policy $\pi(a\vert s)$, we are back to a MRP</mark>: it becomes a process of $\left\langle \mathcal{S}, \mathcal{P}^{\pi}, \mathcal{R}^{\pi}, \gamma \right\rangle$, where:</p>
<ul>
  <li>
    <p>the transition matrix’s action is removed by:</p>

\[\mathcal{P}^{\pi}_{ss'} = \sum_a \pi(a|s) \mathcal{P}_{ss'}^a\]

    <p>i.e. if I take an action $a$ at state $s$, what the the trainsition probability to $s’$? Then I take the average, to get the averae transition probability from $s\to s’$ for the policy</p>
  </li>
  <li>
    <p>the reward function’s action is removed by:</p>

\[\mathcal{R}^{\pi}_s = \sum_a \pi(a|s) \mathcal{R}_s^a\]

    <p>for $\mathcal{P}_{ss’}^{a}, R_s^{a}$ are given as part of the MDP.</p>
  </li>
  <li>
    <p>when given a policy, your MDP evaluations become MRP evaluations, since now $P^\pi_{s,s’}$ is your transition matrix independent of action, and you can compute them in a closed form using our previous result.</p>
  </li>
</ul>

<blockquote>
  <p>But now, <mark>value function</mark> will depend on the <mark>policy I use</mark>, as compared to the previous cases:</p>

\[V_\pi(s) = \mathbb{E}_\pi[G_t|S_t=s]\]

  <p>and <mark>so is the action-value function</mark></p>
</blockquote>

<p><em>For instance</em>: consider a given policy $\pi(a\vert s)=0.5$ uniformly, with $\gamma=1$. Then you should get</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220916094059606.png" alt="image-20220916094059606" style="zoom: 50%;" /></p>

<p>using essentially the MRP results we got, and reducing MDP given a policy to MRP.</p>

<p>But now, the <mark>Bellman equations depend on the policy</mark>, and we have the following:</p>

<blockquote>
  <p><strong>Bellman Expectation Equation</strong>: notice the connection between value function and action-value function</p>

  <p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220916113343.png" style="zoom:30%;" /></p>

  <p>giving the equations for:</p>

  <ul>
    <li>Value function $V_\pi(s)$ being averaging over next value functions</li>
    <li>Action-value function $Q_\pi(s,a)$ being averaging over next action-value functions after taking action $a$ at state $s$
Hence we get:</li>
  </ul>

\[V_\pi(s) = \mathbb{E}_\pi [R_{t+1} + \gamma V_\pi(S_{t+1})|S_t=s]\]

\[Q_\pi(s,a) = \mathbb{E}_\pi [R_{t+1} + \gamma Q_\pi(S_{t+1},A_{t+1})|S_t=s,A_t=a]\]

  <p>or we can express them as:</p>

\[V_\pi(s) = \sum_a \pi(a|s) Q_\pi(s,a)\]

\[Q_\pi(s,a) = \mathcal{R}_s^a + \gamma \sum_{s'} \mathcal{P}_{ss'}^a V_\pi(s')\]

  <p>then using those relationships, I can express <mark>$V$ in terms of $V$</mark>, and <mark>$Q$ in terms of $Q$</mark>, which gives the Bellman Expectation Equation:</p>

\[V_\pi(s) = \sum_a \pi(a|s) \left( \mathcal{R}_s^a + \gamma \sum_{s'} \mathcal{P}_{ss'}^a V_\pi(s') \right)\]

\[Q_\pi(s,a) = \mathcal{R}_s^a + \gamma \sum_{s'} \mathcal{P}_{ss'}^a \sum_{a'} \pi(a'|s') Q_\pi(s',a')\]

  <p>which is basically the <mark>same as the equation we had with $\mathbb{E}_\pi$</mark>. Note that</p>

  <ul>
    <li>when transition is deterministic given an action, then $\mathcal{P}<em>{ss’}^a=1$ for the destined state $(s,a) \to s’$, and $\mathcal{P}</em>{ss’}^a=0$ otherwise.</li>
    <li>similarly, the expected reward $\mathcal{R}_s^a$ is used when reward is non-deterministic given a $s,a$,</li>
  </ul>
</blockquote>

<p>And with this, we again have the closed form solution as implied by the above as we reduced MDP to MRP once we have a policy:</p>

<blockquote>
  <p><strong>Closed Form Solution for $V^\pi$</strong> in MDP: the Bellman’s expectation equation can essentially be translated to the MRP version:</p>

\[V_\pi = \mathcal{R}^{\pi} + \gamma \mathcal{P}^{\pi} V_\pi\]

  <p>and the closed form solution is:</p>

\[V_\pi = (\mathbb{I} - \gamma \mathcal{P}^{\pi})^{-1} \mathcal{R}^{\pi}\]

  <p>for $\mathcal{P}^\pi, \mathcal{R}^\pi$ being the transition and reward matrix reduced to MRP implied by the policy $\pi$.</p>
</blockquote>

<h2 id="optimal-value-functions-and-policies">Optimal Value Functions and Policies</h2>

<p>Now, we understand the basics of MDP, and how we are essentially solving it by reducing to MRP, we come back to the central problem of control: <mark>how to find the *optimal* policy and/or the optimal value function?</mark></p>

<p>First, we need to define what they are:</p>
<blockquote>
  <p><strong>Optimal Value Function</strong>: the value function that maximizes the expected return for any given policy $\pi$:</p>

\[V_*(s) = \max_\pi V_\pi(s)\]

  <p>and the optimal action-value function is the same:</p>

\[Q_*(s,a) = \max_\pi Q_\pi(s,a)\]

</blockquote>

<p>But what about optimal policy, which if we recall are distributions $\pi(a\vert s)$? We can define it as:</p>

<blockquote>
  <p><strong>Optimal Policy</strong>: we can define a partial ordering</p>

\[\pi &gt; \pi' \iff V_\pi(s) \geq V_{\pi'}(s),\quad \forall s\]

  <p>and note that, the two most important attribute for a problem</p>
  <ul>
    <li>(existence) solution always exists. For any MDP, there eixts an optimal policy (e.g. see example below)</li>
    <li>(uniqueness) the optimal policy <em>not</em> unique, but all optimal policies achieve the same value function/action-value functin.</li>
  </ul>
</blockquote>

<p>For instance, we can give an optimal policy better than all other policies</p>

\[\pi_*(a|s) = \begin{cases}
1 &amp; \text{if } a=\arg\max_{a\in A} Q_*(s,a)\\
0 &amp; \text{otherwise}
\end{cases}\]

<p>which is optimal, meaning there always exist an optimal policy. But in reality, we <mark>don't know $Q_*$ yet</mark>. So our task remains how we can find such a policy, now that we know it exists.</p>

<blockquote>
  <p><strong>Bellman Optimality Equation</strong>: we can again draw the graph, and derive the optimality equations from $V_<em>,Q_</em>$, which gives us some idea how we can find it</p>

  <p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220916113343.png" style="zoom:30%;" /></p>

  <p>giving the equations for intuitively as:</p>

\[V_*(s) = \max_a Q_*(s,a)\]

\[Q_* (s,a) = \mathcal{R}_s^a + \gamma \sum_{s'} \mathcal{P}_{ss'}^a V_*(s')\]

  <p>and we can combine them to obtain a form only including itself:</p>

\[V_*(s) = \max_a \left( \mathcal{R}_s^a + \gamma \sum_{s'} \mathcal{P}_{ss'}^a V_*(s') \right)\]

\[Q_*(s,a) = \mathcal{R}_s^a + \gamma \sum_{s'} \mathcal{P}_{ss'}^a \max_{a'} Q_*(s',a')\]

  <p><mark>this is essentially the basis of all RL algorithms and what they aim to solve</mark></p>
</blockquote>

<p>But now there is a $\max$, and we <mark>can no longer have a closed form solution</mark> as the equations become nonlinear. Therefore, we need to use iterative solution algorithms to <mark>approximate them</mark> (these two equations are the fundementals of the whole RL algorithm)</p>
<ul>
  <li>Value Iteration</li>
  <li>Policy Iteration</li>
  <li>Q-learning</li>
  <li>SARSA</li>
  <li>etc.</li>
</ul>

<h2 id="extended-mdp">Extended MDP</h2>

<p>Sometimes, this is not MDP by nature, but we can do some modification and convert them to MDP</p>

<p><strong>Partially Obseravable MDP</strong>: for instance, the robot can only observe neighboring grids, but not the global information</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923081511421.png" alt="image-20220923081511421" style="zoom:33%;" /></p>

<p>therefore, technically:</p>

<ul>
  <li>I do not know $s$, but I know something related.</li>
  <li>Solved by introducing <mark>belief MDP</mark> (see wiki for more details)</li>
</ul>

<blockquote>
  <p><strong>Belief MDP</strong></p>

  <p>ideally, we want $\pi(a\vert s)$ given a state. All I have is a history $h=(A_0,O_1,…,A_{t-1},O_t,R_t)$</p>

  <p>therefore, we can consider a <strong>belief state</strong> (instead of state):</p>

\[b(h) = (\mathcal{P} (S_t=s^1 | H_t = h),\mathcal{P} (S_t=s^2 | H_t = h), ...,\mathcal{P} (S_t=s^n | H_t = h) )\]

  <p>which is a probablity over all possible states.</p>

  <ul>
    <li>note that we <mark>do not have to encode a belief state like this</mark>. In the case of a continous distirbutoin, this can be a gaussian distribution, for instance.</li>
  </ul>

  <p>then your policy becomes:</p>

\[\pi(a| b(h))\]

  <p>notice that belife states satisfy Markov propety</p>
</blockquote>

<hr />

<p><strong>Continous State MDP</strong>: what if your state is continuous</p>

<ul>
  <li>discretization on the continous-state.
    <ul>
      <li>but this becomes a trade-off between granuality = accurarcy v.s.</li>
    </ul>
  </li>
  <li>use a value function approximation to approximate value directly</li>
</ul>

<h1 id="model-based-rl">Model-based RL</h1>

<p>Keep in mind that all approaches is still tightly related to the bellman optimality equations</p>

<blockquote>
  <p><strong>Notation</strong>: note that we <em>try</em> to capitial letter such as $V$ to represent the true/random variable, and $v$ represent <em>our</em> estimate/realization.</p>
</blockquote>

<h2 id="introduction-of-dynamic-programming">Introduction of Dynamic Programming</h2>

<blockquote>
  <p>DP refers to a <strong>collection of algorithms</strong> that can be used to compute optimal policies given a <mark>perfect model</mark> of the <strong>environment</strong> as a MDP</p>

  <ul>
    <li>because at each iteration, we need some form of $\mathcal{P}<em>{ss’}^a V_k(s’)$ to update $V</em>{k+1}$</li>
    <li>for now, we assume a finite MDP, but DP ideas can easily be extended to cnotonus states or POMDP</li>
  </ul>
</blockquote>

<p>However, Classical DP algorithms are of limited utility in RL. Why?</p>

<ul>
  <li>Need perfect model</li>
  <li>Great computational expense</li>
</ul>

<p>But regardless, if those can be overcome, we would like to perform two tasks in general:</p>

<ul>
  <li><mark>prediction</mark>: given a policy $\pi$ and the MDP, evaluate how good it is by outputting its <strong>value funciton $V_\pi$</strong></li>
  <li><mark>control</mark>: given a MDP, find the <strong>optimal policy $\pi_*$</strong></li>
</ul>

<h2 id="prediction-policy-evaluation">Prediction: Policy Evaluation</h2>

<blockquote>
  <p><strong>Aim</strong>: given any policy $\pi$, we want to evaluate its value function in a MDP.</p>
</blockquote>

<p>The key idea is the Bellman equation: assuming we know everything on the RHS, then that should give me the correct value on LHS:</p>

\[V_\pi(s) = \sum_a \pi(a|s) \left( \mathcal{R}_s^a + \gamma \sum_{s'} \mathcal{P}_{ss'}^a V_\pi(s') \right)\]

<p>using this idea of dependency=constraint, we can <strong>iteratively estimate $V_\pi(s)$</strong> by:</p>

\[V_{k+1}(s) = \sum_a \pi(a|s) \left( \mathcal{R}_s^a + \gamma \sum_{s'} \mathcal{P}_{ss'}^a V_{k}(s') \right)\]

<p>which is called a <strong>synchronous backup</strong> since it uses $V_k(s)$ even if we have <em>for some states a better estimate $V_{k+1}(s)$</em></p>

<blockquote>
  <p><strong>Synchronus Policy Evaluation</strong>:</p>

  <p><code class="language-plaintext highlighter-rouge">Repeat</code> until convergence:</p>

  <ol>
    <li>
      <p>store $V_k(s)$</p>
    </li>
    <li>
      <p>for each state $s \in S$:</p>

      <ol>
        <li>
          <p>estimaet $V_{k+1}(s)$ by</p>

\[V_{k+1}(s) = \sum_a \pi(a|s) \left( \mathcal{R}_s^a + \gamma \sum_{s'} \mathcal{P}_{ss'}^a V_{k}(s') \right)\]
        </li>
      </ol>
    </li>
    <li>
      <p>use the latest update $V_{k} \gets V_{k+1}$</p>
    </li>
  </ol>
</blockquote>

<p>But do we <em>always</em> needs such an interation, as we saw in some examples in HW1?</p>

<blockquote>
  <p><strong>Note</strong> that in homeworks, we had this <mark>bottom up approach</mark> where we found the correct value function <strong>in one step</strong>. For instance, we can compute the following value function of a policy:</p>

  <p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923111844922.png" alt="image-20220923111844922" style="zoom:33%;" /></p>

  <p>then since $V(S=s_{t+2})=0$ for any state, we can compute $V(S=s_{t+1})$ <mark>without any error</mark> using the backup equation</p>

\[V_\pi(s) = \sum_a \pi(a|s) \left( \mathcal{R}_s^a + \gamma \sum_{s'} \mathcal{P}_{ss'}^a V_{\pi}(s') \right)\]

  <p>and all can be done over one iteration.</p>
</blockquote>

<p>But in reality, <mark>often your state space is not a tree</mark>, i.e. to get to $S=s_{14}$ in the example below, there will be <mark>loops</mark> in your tree (i.e. you can get to $s_{14}$ from $s_{13}$, and to get to $s_{13}$ you can also start from $s_{14}$). Therefore, since then you <mark>cannot estimate $V(S=s_{14})$</mark> correctly, you will need a loop for convergence.</p>

<hr />

<p><em>For Example</em>: Small Grid World</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923083659494.png" alt="image-20220923083659494" style="zoom:50%;" /></p>

<p>where we have:</p>

<ul>
  <li>reward of $-1$ for all non-terminal states, and there is one terminal state marked in grey</li>
  <li>
    <p>undisconuted MDP with $\gamma =1$</p>
  </li>
  <li>actions leading out of the state gives no changes (i.e. go left of $s_8$ is still $s_8$)</li>
</ul>

<p><strong>Question</strong>: if my policy is random $\pi(a\vert s)=0.25,\forall a$, what is the value of it/how good is this?</p>

<p>Since we also have transition model, we can use the DP algorithm. We can initialize $V_0(s)=0$:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923083836193.png" alt="image-20220923083836193" style="zoom:33%;" /></p>

<p>for intance, to compute $V_2(s=1)$ would be:</p>

\[\begin{align*}
V_{k=2}(s_1) 
&amp;= \sum_a 0.25 \cdot \left( -1 + \gamma \sum_{s'} \mathcal{P}_{ss'}^a V_{k=1}(s') \right) \\
&amp;= 0.25 (-1 + 0) + 0.25 (-1 + -1) + 0.25 (-1 + -1) + 0.25 (-1 + -1) \\
&amp;= -1.75
\end{align*}\]

<p>where all the $V_1(s)$ comes from our estimate from $v_1$ at the previous timestep.</p>

<p><strong>Additional Question</strong>: what would be my control?</p>

<p>(This is just a lucky case that we got optimal policy in one greedy step.) We know that the value function is for a random policy, but can we get a better policy from it? Notice that by simply using the <strong>greedy policy of $\pi$</strong>:</p>

<p>| <img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923084435565.png" alt="image-20220923084435565" style="zoom:50%;" /> | <img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923084439721.png" alt="image-20220923084439721" style="zoom:50%;" /> |
| ———————————————————— | ———————————————————— |</p>

<p>notice that this is essentially performing <strong>exactly one iteration of policy improvement</strong>, but we luckily get the optimal policy just by doing policy improvement once</p>

<h2 id="control-policy-improvement-and-policy-interation">Control: Policy Improvement and Policy Interation</h2>

<p>Now I have evaluated a policy, I would like to improve the policy and perhaps <mark>find the best policy</mark></p>

<blockquote>
  <p><strong>Policy Improvement</strong>: generate a policy $\pi’$ that is better than $\pi$</p>

  <p><em>one way</em> to guarantee improvement is to apply a greedy policy</p>

\[\pi' = \mathrm{greedy}(V_\pi)\]

  <p>and we can later show that indeed improves the policy and is useful.</p>
</blockquote>

<blockquote>
  <p><strong>Policy Iteration</strong>: since we can get a better policy from old value, then we can iterate:</p>

  <p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923084722197.png" alt="image-20220923084722197" style="zoom:33%;" /></p>

  <p><code class="language-plaintext highlighter-rouge">Repeat</code> until no improvement/convergence</p>

  <ol>
    <li>(<strong>Policy Evaluation</strong>) evaluate current policy $\pi$</li>
    <li>(<strong>Policy Improvement</strong>) improve the policy (e.g. by acting greedily) by generating $\pi’ \ge \pi$</li>
  </ol>
</blockquote>

<p>This gives the <strong>policy iteration algorithm</strong> in more details:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923093222983.png" alt="image-20220923093222983" style="zoom:50%;" /></p>

<p>where essentially</p>

<ul>
  <li>
    <p>during policy evaluation, we are taking $\Delta$ to be the largest error we encountered for each state</p>
  </li>
  <li>
    <p>we are selecting the greedy policy by selecting the best action given the value function.</p>
  </li>
</ul>

<hr />

<p><em>Proof</em>: We want to prove that greedy policy always improve the policy, hence we have a <mark>monotonic improvement</mark></p>

<p>Consider some existing deterministic policy $\pi(s)$, and we have a greedy policy version $\pi’(s)$:</p>

\[\pi'(s) = \mathrm{greedy}(\pi(s)) = \arg\max_{a \in A}q_\pi(s,a)\]

<p>Then by definition, the <strong>action-value must have obviously improved the policy by one-step</strong></p>

\[q_\pi(s,\pi'(s)) = \max_{a \in A} q_\pi(s,a) \ge q_\pi(s,\pi(s)) = v_\pi(s)\]

<p>where the last step is due to the fact that we are using a <strong>determistic policy</strong>, so the state-value function will be the same as value function since you <strong>always only choose one action per state</strong>.</p>

<p>Finally, we just need to show that $V_{\pi’}(s) \ge V_\pi(s)$ by connecting the above</p>

\[\begin{align*}
v_{\pi}(s)
&amp;\le q_\pi(s,\pi'(s)) \\
&amp;= \mathbb{E}_{(a,r,s'|s) \sim \pi'}[ \mathcal{R}_{t+1} + \gamma v_\pi(S_{t+1}) | S_t=s ] \\
&amp;\le \mathbb{E}_{\pi'}[ \mathcal{R}_{t+1} + \gamma q_\pi(S_{t+1}, \pi'(S_{t+1})) | S_t=s ] \\
&amp;\le \mathbb{E}_{\pi'}[ \mathcal{R}_{t+1} + \gamma R_{t+2} + \gamma^{2} q_\pi(S_{t+2}, \pi'(S_{t+2})) | S_t=s ] \\
&amp;\le \mathbb{E}_{\pi'}[ \mathcal{R}_{t+1} + \gamma R_{t+2} + \gamma^{2} R_{t+3} + ... | S_t=s ] \\
&amp;= v_{\pi'}(s)
\end{align*}\]

<p>where:</p>
<ul>
  <li>the second equality is because we have are sampling the immediate next step from $\pi’$, but the rest is following $\pi$.</li>
  <li>third inequality relies on the fact that we are a deterministic policy and $q_\pi(s,\pi’(s)) \ge v_\pi(s)$ by construction</li>
</ul>

<p>Notice that since the improvement is monotonic, then we have everything becomes an equality at convergence:</p>

\[q_\pi(s,\pi'(s)) = \max_{a \in A} q_\pi(s,a) = q_\pi(s,\pi(s)) = v_\pi(s)\]

<p>meaning that the Bellman optimality equation is satisfied</p>

\[v_\pi(s) = \max_{a \in A}q_\pi(s,a)\]

<p>which means the $\pi$ we get at the <strong>end of convergence</strong> is the optimal policy</p>

<hr />

<blockquote>
  <p><strong>Generalized Policy Iteration</strong>: the general recipe include:</p>
  <ol>
    <li>any policy evaluation algorithm</li>
    <li>any (proven) policy improvement</li>
    <li>repeat until convergence to the optimal policy</li>
  </ol>
</blockquote>

<p>But whatever new algorthim you come up with, we want to measure/compare (note that the converged value function is optimal, hence the same):</p>

<ul>
  <li><strong>convergence speed</strong>: how fast the algorithm can converge</li>
  <li><strong>convergence performance</strong>: same convergence speed, but <em>variance</em> during training could be big/small</li>
</ul>

<h2 id="control-value-iteration">Control: Value Iteration</h2>

<blockquote>
  <p><strong>Aim</strong>: We want to <mark>improve the speed of the policy iteration algorithm</mark> because <strong>each of its iterations involves policy evaluation</strong>, which itself is an iterative computation through the state set.</p>
</blockquote>

<p>Intuition, we notice that at $k=3$ in the example before, just one greedy policy we already get the optimal policy <mark>even if the value function has not converged</mark></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923084435565.png" alt="image-20220923084435565" /></th>
      <th style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923084439721.png" alt="image-20220923084439721" /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Therefore, maybe we can directly improve before waiting for converged value function</td>
      <td style="text-align: center"> </td>
    </tr>
  </tbody>
</table>

<p><strong>Value Iteration</strong>:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923094259901.png" alt="image-20220923094259901" style="zoom: 50%;" /></p>

<p>where essentially</p>

<ul>
  <li>
    <p>I computed my $v(s’)$ for one round, and took the max (greedy policy) directly afterwards</p>
  </li>
  <li>notice that this is also the Bellman Optimality Equation</li>
  <li>it is also proven that this <strong>converges to the optimal value</strong></li>
</ul>

<blockquote>
  <p><strong>Value Iteration is used much more often</strong> than policy iteration due to its faster compute</p>
</blockquote>

<h2 id="summary-synchronous-dp">Summary: Synchronous DP</h2>

<p>Note that all the above is synchronous DP, because at each step $k+1$ we are using the value function strictly from step $k$.</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923094516742.png" alt="image-20220923094516742" style="zoom:40%;" /></p>

<ul>
  <li><strong>major dropback:</strong> even for value iteration, it needs to <strong>iterate through every state at each iteration</strong> (which could be intractable for large state space)</li>
  <li>Asynchronous DP: maybe we can selectively update, or update more in real time</li>
</ul>

<h2 id="asynchronous-dp">Asynchronous DP</h2>

<p>Before, we compute the new value for all states at $t=k+1$ strictly using $t=k$ values, meaning for each improvement we need to wait until all states are updated.</p>

<blockquote>
  <p><strong>Aim</strong>: We want to see improvement a bit faster, instead of waiting for the entire sweep of states to complete. We want our algorithm to not get locked into any hopelessly long sweep before it can make progress.</p>
  <ul>
    <li>but note that this does not necessarily mean less compute</li>
  </ul>
</blockquote>

<p>Three simple ideas in Asynchronous DP:</p>
<ul>
  <li>in-place DP</li>
  <li>Prioritized Sweeping</li>
  <li>Real-time Dynamic DP</li>
</ul>

<h3 id="in-place-dp">In-place DP</h3>

<blockquote>
  <p><strong>Intuition</strong>: since we already have a new value for some states we finished computing at $t=k+1$. we use the <strong>new value directly</strong> before completing the entire estimate over all states</p>
</blockquote>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220923094905916.png" alt="image-20220923094905916" style="zoom:40%;" /></p>

<p>note that already here, we made an improvement <strong>for memory</strong>. But what about state space complexity?</p>

<h3 id="prioritized-sweeping">Prioritized Sweeping</h3>

<blockquote>
  <p><strong>Intuition</strong>: instead of updating each step in a fixed order, we can consider a better order to update the states so that we can perhaps converge faster. For instance, we can use the size of the Bellman error as a guidance.</p>
</blockquote>

<p>For states with large Bellman error, we might want to update them first</p>

\[\text{Bellman Error}(s) = \left|  \max_{a\in A} \left( \mathcal{R}_s^{a} + \gamma \sum\limits_{s'\in S} \mathcal{P}_{ss'}^{a} v(s') \right) - v(s)\right|\]

<p>which is basically comparing the difference between a target the current estimate. But this means we need:</p>
<ul>
  <li>first compute this error for every state, then choose which one has the largest error to update</li>
  <li>next, we need to <strong>update the error table</strong>, which can be done <mark>only on the affected states $s'$</mark> (the error is only a functoin of current state and next state)</li>
  <li>no guaranteed convergence to the optimal policy</li>
</ul>

<h3 id="real-time-dp">Real-Time DP</h3>

<blockquote>
  <p><strong>Intuition</strong>: I only update the value function $V(s)$ on states that the agent <strong>has seen</strong>, i.e. is relevant for the agent</p>
</blockquote>

<ol>
  <li>agent has a current policy $\pi$</li>
  <li>agent performs some action and observe $S_t, A_t, R_{t+1}$, and is at $S_{t+1}$</li>
  <li>
    <p>backup the value function $V(S_t)$ using the new observation</p>

\[v(S_t) \gets \max_{a\in A} \left( \mathcal{R}_{\textcolor{red}{S_t}}^{a} + \gamma \sum\limits_{s'\in S} \mathcal{P}_{\textcolor{red}{S_t}s'}^{a} v(\textcolor{red}{s'}) \right)\]

    <p>notice that this is off-policy since the value now is not about the behavior policy</p>
  </li>
  <li>update the policy $\pi$ using the new value function and repeat</li>
</ol>

<p>Note that, again, there is <strong>no guaranteed convergence to the optimal policy</strong></p>

<h2 id="generalized-policy-iteration">Generalized Policy Iteration</h2>

<p>Policy iteration consists of two simultaneous, interacting processes:</p>

<ol>
  <li>one making the value function consistent with the current policy (<strong>policy evaluation</strong>)</li>
  <li>making the policy greedy with respect to the current value function (<strong>policy improvement</strong>).</li>
</ol>

<p>Up to now we have seen:</p>

<ul>
  <li>In policy iteration, these two processes alternate, each completing before the other begins, but this is not really necessary (e.g. value iteration).</li>
  <li>In value iteration, for example, only a single iteration of policy evaluation is performed in between each policy improvement.</li>
  <li>In asynchronous DP methods, the evaluation and improvement processes are interleaved at an even finer grain. In some cases a single state is updated in one process before returning to the other.</li>
</ul>

<blockquote>
  <p><strong>Genearalized Policy Iteration</strong>: As long as both processes (policy evaluation and policy improvement) continue to update all states, the ultimate result is typically the same—convergence to the optimal value function and an optimal policy.</p>
</blockquote>

<p>Intuitively, the evaluation and improvement processes in GPI can be viewed as both competing and cooperating.</p>

<ul>
  <li>They compete in the sense that they pull in opposing directions. Making the policy greedy with respect to the value function typically <strong>makes the value function incorrect</strong> for the changed policy, and making the value function consistent with the policy typically causes that <strong>policy no longer to be greedy</strong> (i.e. has a better policy given this new value function)</li>
  <li>In the long run, however, these two processes interact to <strong>find a single joint solution</strong>: the optimal value function and an optimal policy</li>
</ul>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007144344783.png" alt="image-20221007144344783" style="zoom: 33%;" /></p>

<blockquote>
  <p>Therefore, why GPI holds, i.e. usually converge to optimal value/policy, can be intuitively explained as:</p>

  <ul>
    <li>The value function <strong>stabilizes only when it is consistent with the current policy</strong>,</li>
    <li>The policy <strong>stabilizes only when it is greedy with respect to the current value function</strong>.</li>
  </ul>

  <p>Thus, both processes stabilize only when a policy has been found that is greedy with respect to its own evaluation function. This implies that the <mark>Bellman optimality equation holds</mark>, and thus that the policy and the value function are optimal.</p>
</blockquote>

<p>This overall idea of GPI is used in <mark>almost any RL algorithms</mark></p>

<h1 id="model-free-rl">Model-free RL</h1>

<p>Recall that Model-based RL requires knowing the transition function and the reward function. More importantly in a <strong>Model-Based problem</strong>:</p>

<ul>
  <li>we <em>could</em> get a closed form solution if the state space is small in a model-based MDP (using the Bellman’s equation)</li>
  <li>iterative algorithms, that uses <strong>Bellman expectation</strong> equation, are used for estimating policy value</li>
  <li>control algorithm (i.e. value iteration), that uses <strong>Bellman optimality</strong> equation, are used to find optimal value/policy</li>
</ul>

<p>But more often in reality we <mark>don't know the model</mark>. So how do we solve the control problem?</p>

<blockquote>
  <p><strong>Aim</strong>: we can use sampling to <mark>estimate</mark> the missing transition/reward models. The key question is then <mark>how do we take samples</mark> to make our model more efficient in estimating the value functions?</p>

  <ul>
    <li>MC Methods</li>
    <li>TD Methods</li>
  </ul>
</blockquote>

<h2 id="monte-carlo-learning">Monte Carlo Learning</h2>

<blockquote>
  <p><strong>MC Sampling</strong>: learns from <strong>complete</strong> episodes (hence finite episodes)</p>

  <ul>
    <li>
      <p>hence can be only used with episodic MDP</p>
    </li>
    <li>
      <p>the main idea is to consider value function of a state = mean return from it</p>

\[V(s) = \mathbb{E}[G(s)] \approx \frac{1}{n}\sum_{i=1}^n G(s)\]
    </li>
  </ul>

</blockquote>

<p>Specifically, we consider the goal of learning $V_\pi$ from episodes of a policy $\pi$</p>

\[(S_1, A_1, R_1, ..., S_k) \sim \pi\]

<p>is <strong>one episode from $\pi$</strong>. We ca sample many episodes, and for each episode:</p>

<ol>
  <li>
    <p>compute the total discounted reward for the future for <em>each state</em>:</p>

\[G_t^i = R_{t+1}^i + \gamma R_{t+2}^i + ... + \gamma ^{T-1} R_T^i\]

    <p>for $i$-th episode</p>
  </li>
  <li>
    <p>estimate the value function using the law of large numbers:</p>

\[v_\pi(s) = \mathbb{E}_\pi[G_t | S_t=s] = \lim_{n \to \infty}  \frac{1}{n}\sum_{i=1}^n G^i_t(s)\]

    <p>for $G_t^i(s)$ means the discounted reward starting from state $s_t$ at the $i$-th episode</p>
  </li>
</ol>

<blockquote>
  <p>While this is the basic idea, there are many <strong>modifications</strong> of this:</p>

  <ul>
    <li>every visit v.s. first visit MC estimate to have different convergence speed - bias tradeoff</li>
    <li>collecting all episodes and computing together is <em>computationally expensive</em>, hence there are iterative version of this</li>
  </ul>
</blockquote>

<h3 id="firstevery-visit-mc-policy-evaluation">First/Every Visit MC Policy Evaluation</h3>

<p>Consider the following two epsiodes we have sampled following policy $\pi$:</p>

\[(S_1, S_2, S_1, S_2, S_4, S_5) \sim \pi \\
(S_1, S_2, S_2, S_4, S_5, S_3) \sim \pi\]

<p>with some reward for each state, but ignored here. Suppose I want to estimate $V(s_1)$ from the two samples</p>

<blockquote>
  <p><strong>First Visit MC Policy Evaluation</strong>: to evaluate $V_\pi(s)$ for a state $s$</p>
  <ol>
    <li><em>only</em> for the first time step $t$ that the state is visited in an episode</li>
    <li>count that as a sample for state $s$ and increment counter $N(s) \gets N(s) + 1$</li>
    <li>increment total return for that state $S(s) \gets S(s) + G_t$</li>
  </ol>

  <p>Then the value estimate is:</p>

\[v_\pi(s) = \frac{S(s)}{N(s)}\]

  <p>and by law of large numbers, $N(s) \to \infty$ we have $v_\pi(s) \to V_\pi(s)$. Hence this is a <mark>consistent</mark> estimator.</p>
</blockquote>

<p>Therefore, using first visit MC policy evaluation in the previous example, we would have:</p>

\[v_\pi(s_1) = \frac{G^{1}_1(s_1) + G^{2}_1(s_1)}{2}\]

<p>where $G^{i}_t(s)$ is the t-th timestep in the i-th episode.</p>

<blockquote>
  <p><strong>Every Visit MC Policy Evaluation</strong>: to evaluate $V_\pi(s)$ for a state $s$</p>
  <ol>
    <li>for the <em>every</em> time step $t$ that the state is visited in an episode</li>
    <li>count that as a sample for state $s$ and increment counter $N(s) \gets N(s) + 1$</li>
    <li>increment total return for that state $S(s) \gets S(s) + G_t$</li>
  </ol>

  <p>Then the value estimate is:</p>

\[V(s) = \frac{S(s)}{N(s)}\]

  <p>and this again, by law of large numbers, this is a <mark>consistent</mark> estimator.</p>
</blockquote>

<p>Using every visit MC policy evaluation in the previous example, we would have:</p>

\[V(s_2) = \frac{G^{1}_2(s_2) + G^1_4(s_2) + G^{1}_2(s_2) + G^{1}_2(s_2)}{4}\]

<p>Essentially we treat every sample of even the same episode separately</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Property</th>
      <th style="text-align: center">First Visit</th>
      <th style="text-align: center">Every Visit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Consistent</td>
      <td style="text-align: center">Yes</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">Biased</td>
      <td style="text-align: center">No</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">Convergence Speed</td>
      <td style="text-align: center">Slow</td>
      <td style="text-align: center">Fast</td>
    </tr>
  </tbody>
</table>

<p>where:</p>
<ul>
  <li><em>usually</em> every-visit has a faster convergence speed (unless in cases when state is rare in both cases, could have similar speed)</li>
  <li>recall that for law of large number, we required independence of samples. However, samples from every visit are <mark>correlated</mark>. Therefore, this could be <mark>biased</mark> even though it could converge due to large number of samples.</li>
</ul>

<blockquote>
  <p><em>Recall</em> that Bias and different from Consistent:</p>
  <ul>
    <li>Consistent estimator: as the sample size increases, the estimates (produced by the estimator) “converge” to the true value</li>
    <li>Unbiased estimator: if I feed in different sample sets, the average of the estimates should be the true value</li>
  </ul>
</blockquote>

<p>Last but not least, implementation wise since we are computing a mean, we could use <strong>recursive mean computations</strong>:</p>

\[\begin{align*}
  \mu_k
  &amp;= \frac{1}{k} \sum_{i=1}^k x_i \\
  &amp;= \frac{1}{k} \left( \sum_{i=1}^{k-1} x_i + x_k \right) \\
  &amp;= \frac{1}{k} \left( (k-1) \mu_{k-1} + x_k \right)\\
  &amp;= u_{k-1} + \frac{1}{k}(x_k - \mu_{k-1})
  \end{align*}\]

<p>in our case, $\mu$ would be the mean hence estimation of value $V_\pi$. This gives use the usually programmatic <strong>recursive MC updates</strong>, where we perform updates on the fly when doing sampling:</p>

\[\begin{align*}
  N(S_t) &amp;\gets N(S_t) + 1\\
  V(S_t) &amp;\gets V(S_t) + \frac{1}{N(S_t)}(G_t - V(S_t))
\end{align*}\]

<p>whenever an update is needed. This gives a brief outline of the pseudo-code for both algorithm:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">First-Visit</th>
      <th style="text-align: center">Every-Visit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220930175001.png" style="zoom:100%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220930175019.png" style="zoom:100%;" /></td>
    </tr>
  </tbody>
</table>

<h3 id="mc-for-non-stationary-state">MC for Non-Stationary State</h3>

<p>However, if you have a non-stationary problem (e.g. mean of a distribution is time-dependent), then we want to have a dynamic estimator and we don’t want convergence.</p>

<p>Hence we just want to use <mark>new information directly</mark>, without doing the averaging:</p>

\[V(s_t) \gets V(s_t) + \alpha (G_t - V(s_t))\]

<p>which you can just convert to the equation of moving average</p>

\[V(s_t) \gets (1-\alpha) V(s_t) + \alpha G_t\]

<p>for a <strong>constant step size $\alpha$</strong>. We can intuitively see the difference as the previous form of $V(S_t) \gets V(S_t) + \frac{1}{N(S_t)}(G_t - V(S_t))$ since now this is a constant step size:</p>

\[\begin{align*}
V_{t+1} 
&amp;= V(s_t) + \alpha (G_t - V(s_t)) \\
&amp;= \alpha G_t + (1-\alpha) V_t \\
&amp;= \alpha G_t + (1-\alpha) [ \alpha G_{t-1} + (1-\alpha)V_{t-1}]\\
&amp;= \alpha G_t + (1-\alpha) \alpha G_{t-1} + (1-\alpha)^2 V_{t-1}\\
&amp;= ...
\end{align*}\]

<p>so eventually you reach $G_1$, hence we get:</p>

\[v_{t+1}(s) = (1-\alpha)^t v_1(s) + \sum_{i=1}^t \alpha (1-\alpha)^{t-i}G_i\]

<p>meaning that for large $t$:</p>

<ul>
  <li>the first term will become extremely small, meaning that the <strong>old information would matter very slightly</strong> (whereas in $V(S_t) \gets V(S_t) + \frac{1}{N(S_t)}(G_t - V(S_t))$ every sample has equal contribution)</li>
  <li>usually we want to put <strong>more weight on new information</strong>, as this is non-stationary.</li>
  <li>but we usually use the other formula $V(s_t) \gets V(s_t) + \alpha (G_t - V(s_t))$ for update as that is more computationally efficient</li>
</ul>

<p>But in principle, all the MC backups essentially does:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220930085105526.png" alt="image-20220930085105526" style="zoom:33%;" /></p>

<p>which is like a <strong>DFS</strong> when sampling. This is later constrasted with TD approaches.</p>

<h2 id="monte-carlo-control">Monte Carlo Control</h2>

<p>First, we revisit our previous approach of generalized policy iteration</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220930085400935.png" alt="image-20220930085400935" style="zoom: 50%;" /></p>

<p>where we used greedy policy for improvement and is proven to work.</p>

<p>Therefore, a simple idea of model-free policy improvements</p>

<ul>
  <li>use MC policy evaluation</li>
  <li>use greedy policy improvement?</li>
</ul>

<p>We realize that using greedy-policy here have two concerns:</p>
<ol>
  <li>
    <p>if we estimateed $v_\pi$, then since greedy needs:</p>

\[\pi'(s) = \arg\max_{a \in A} Q(s,a)\]

    <p>but <em>if we only have $V_\pi$</em>, then we need to compute:</p>

\[\pi'(s) = \arg\max_{a \in A} \mathcal{R}_s^{a}+ \mathcal{P}_{ss'}^{a}V'_\pi\]

    <p>but we don’t know $\mathcal{P}$</p>
  </li>
  <li>
    <p>could get me stuck in some suboptimal action due to exploitation</p>
  </li>
</ol>

<blockquote>
  <p>To solve the first problem, it is easy: we can instead use <mark>MC methods to directly estimate $Q(s,a)$</mark></p>
</blockquote>

<p>But then second problem is a little more complicated:</p>

<blockquote>
  <p>We can use <strong>$\epsilon$-greedy policy</strong> instead of greedy policy to allow for <mark>exploration</mark> since we are estimating the world (hence do no have complete information as in the Model-based case)</p>

\[\pi(a|s) = \begin{cases}
  (\epsilon / m) + 1 - \epsilon &amp; \text{if } a = \arg\max_{a \in A} Q(s,a) \\
  \epsilon / m &amp; \text{otherwise}
\end{cases}\]

  <p>for $m = \vert A\vert$. But does this <strong>guarantee the improvement of the policy</strong>? This is proven to be true!</p>
</blockquote>

<p><em>Proof</em>: for all states, any Ɛ-greedy policy 𝜋, the Ɛ-greedy policy 𝜋’ with respect to is an improvement, that is,</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220930090408152.png" alt="image-20220930090408152" style="zoom:60%;" /></p>

<p>where a key step is shown above. There we wanted to show that $q_\pi(s,\pi’(s))$ is better than the old $v_\pi(s)$</p>

<ul>
  <li>the second equality comes from the fact that best action has an additional $(1-\epsilon)$ probability</li>
  <li>the third equality comes from the fact that $\sum_x \alpha(x)f(x) \le \max_x f(x)$ for $\sum \alpha(x) = 1$. In other words, weighted average is always less than the maximum value.</li>
  <li>the fourth equality comes from expanding the second term and cancelling the first term, with only $\sum \pi(a\vert s) q_\pi(s,a)$ left</li>
</ul>

<p>Then finally the last step to show $v_{\pi’}(s) \ge v_\pi(s)$ which we ignored basically comes from expanding the definition of value function, and substituting in our result above.</p>

<p>Therefore, the final MC policy iteration becomes</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220930091516025.png" alt="image-20220930091516025" style="zoom:50%;" /></p>

<blockquote>
  <p><strong>Note</strong> that different from the model-based case, we cannot perform value-iteration here to simplify the computation. This is because we don’t have the transition model $\mathcal{P}$ as required in the Bellman optimality equation:</p>

\[Q_*(s,a) = \mathcal{R}_s^a + \sum_{s'} \mathcal{P}_{ss'}^a \max_{a'} Q_*(s',a')\]

</blockquote>

<h3 id="greedy-in-the-limit-with-infinite-exploration">Greedy in the Limit with Infinite Exploration</h3>

<p>Recall that we know, for every MDP problem, there exists an optimal deterministic policy by taking the greedy policy of an optimal Q-function. But if we are doing $\epsilon$-greedy, then we are not guaranteed to converge to the optimal policy.</p>

<blockquote>
  <p><strong>GLIE</strong>: A learning policy is called <strong>GLIE</strong> (Greedy in the Limit with Infinite Exploration) if it satisfies the following two properties:</p>
  <ol>
    <li>If a state is visited infinitely often, then <strong>each action in that state is chosen infinitely often</strong> (with probability 1):</li>
  </ol>

\[\lim_{k \to \infty} N_k(s,a) = \infty\]

  <ol>
    <li>In the limit (as $t \to \infty$), the learning policy is <strong>greedy with respect to the learned Q-function</strong> (with probability 1):</li>
  </ol>

\[\lim_{k \to \infty} \pi_k(a|s) = 1(a = \arg\max_{a' \in A} Q_k(s,a'))\]

</blockquote>

<p>Therefore, taking into account our policy improvement with $\epsilon$-greedy, we can <mark>still achieve optimal policy by satisfying the GLIE condition</mark> with:</p>

\[\epsilon_{k}  = \frac{1}{k}\]

<p>for the $k$ th iteration we have updated the policy.</p>

<p>Therefore, we get essentially a change for policy improvement step:</p>

\[\text{Policy Improvement:}\quad \epsilon \gets \frac{1}{k}, \quad \pi'(s) \gets \epsilon\text{-greedy}(Q)\]

<h2 id="off-policy-evaluation">Off-Policy Evaluation</h2>

<p>So far, all we have learned is on-policy, i.e. the <strong>behavior policy</strong> used to collect samples is the same as the policy you are estimating $V_\pi$</p>

<blockquote>
  <p><strong>Off-policy evaluation</strong>: means the <strong>behavior policy $\mu$</strong> you used to collect data is <strong>not</strong> the same policy you want to estimate $V_\pi$. So you want to learn policy $\pi$ from $\mu$.</p>
  <ul>
    <li>for here, we can suppose both $\mu$ and $\pi$ policy are known</li>
    <li>essentially you may want to evaluate your $V_\pi$ or $Q(S_t,A_t)$ but only <strong>using data from $\mu$</strong>.</li>
  </ul>
</blockquote>

<p>How do we do that? The basic methods here is importance sampling.</p>

<h3 id="importance-sampling">Importance Sampling</h3>

<blockquote>
  <p><strong>Importance Sampling</strong>: goal is to estimate the expected value of a function $f(x)$ (i.e. $G(s)$) under some probability distribution $p(x)$, without sampling from the distribution $p(x)$ but <strong>using $f(x)$ sampled from $q(x)$</strong>:</p>

\[\mathbb{E}_{x \sim p(x)}[f(x)] =?\]

  <p>with data sampled from $x \sim q(x)$. It turns out we can easily show that, under few assumptions:</p>

\[\mathbb{E}_{x \sim p(x)}[f(x)] = \mathbb{E}_{x \sim q(x)}\left[\frac{p(x)}{q(x)}f(x)\right]\]

</blockquote>

<p>Notice that the <mark>stationary distribution of states</mark> will be different, i.e. we will be considering</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20220930093651232.png" alt="image-20220930093651232" style="zoom:33%;" /></p>

<p>So, if we have samples generated from $x \sim q$, and since in our case we consider $f(X) = G_t(s)$, then basically need to consider, for each trajectory $\tau_j$ and its discounted reward $G^{j}$:</p>

\[Q_{\tau \sim \pi}(s,a) = \mathbb{E}_{\tau \sim \mu(x)}\left[\frac{P_\pi(\tau)}{P_\mu(\tau)}G^{j}\right]\]

<p>But what is this ratio of probability?</p>

\[P_\pi(\tau) = P_\pi(S_t, A_t, ..., S_T, A_T)\\
P_\mu(\tau) = P_\mu(S_t, A_t, ..., S_T, A_T)\]

<p>we can essentially use chain rule to represent this as quantities we know:</p>

\[\begin{align*}
P_\pi(\tau) 
&amp;= P_\pi(S_t, A_t, ..., S_T, A_T)\\
&amp;= \pi(A_T | S_t, S_{T-1},A_{T-1}, ..., S_t,A_t) P_\pi(S_t, A_t, S_{t+1},A_{t+1},...S_T, A_T)\\
&amp;= \pi(A_T | S_T) P_\pi(S_T | S_{T-1},A_{T-1},...S_t, A_t)P_\pi(S_{T-1},A_{T-1},...S_t, A_t)\\
&amp;= \underbrace{\pi(A_T | S_T)}_{\mathrm{policy} } \underbrace{P_\pi(S_T | S_{T-1}, A_{t-1})}_{\text{transition model} } P_\pi(S_t, A_t, S_{t+1},A_{t+1},...S_{T-1},A_{T-1})\\
&amp;= ...\\
&amp;= p(S_{1}) \prod_{i=1}^{T}\underbrace{\pi(A_{i}|S_{i})}_{\mathrm{policy}} \underbrace{p(R_{i}|S_{i},A_{i})}_{\text{reward model}} \underbrace{p(S_{i+1}|S_{i},A_{i})}_{\text{transition model}}
\end{align*}\]

<p>where</p>

<ul>
  <li>the third and fourth equality comes from the fact that we are MDP, hence future <strong>only depends on current</strong></li>
  <li>
    <p>finally, the transition probability and reward probability will be cancelled when we do the ratio:</p>

\[\frac{P_\pi(\tau)}{P_\mu(\tau)} = \frac{p(S_{1}) \prod_{i=1}^{T}\pi(A_{i}|S_{i}) p(R_{i}|S_{i},A_{i}) p(S_{i+1}|S_{i},A_{i})}{p(S_{1}) \prod_{i=1}^{T}\mu(A_{i}|S_{i}) p(R_{i}|S_{i},A_{i}) p(S_{i+1}|S_{i},A_{i})} = \prod_{i=1}^{T}\frac{\pi(A_{i}|S_{i})}{\mu(A_{i}|S_{i})} \equiv w_{\mathrm{IS}}\]

    <p>is called the <mark>importance sampling weight</mark> for each trajectory</p>
  </li>
  <li>can estimate <em>any other policy</em>, but given that we have the same coverage. unseen action in policy $\mu$, it has prob zero</li>
</ul>

<blockquote>
  <p><strong>Ordinary IS</strong>: the above essentially gives the ordinary IS algorithm:</p>

\[\begin{align*}
  V_{\pi}(s)
  &amp; \approx \frac{1}{n} \sum\limits_{j=1}^{n} \frac{p_\pi(T_j|s)}{p_\mu(T_j|s)} G(T_j)\\
  &amp;= \frac{1}{n} \sum\limits_{j=1}^{n} \left(\prod_{i=1}^{T} \frac{\pi(a_{j,i}|s_{j,i})}{\mu(a_{j,i}|s_{j,i})} \right) G(T_j)\\
  &amp;= \frac{1}{n} \sum\limits_{j=1}^{n} w_{\mathrm{IS}} \cdot  G(T_j)
\end{align*}\]

  <p>for practically, we are just <strong>swapping out $G(T_j)$ with $w_{\mathrm{IS}} \cdot  G(T_j)$ in our previous on-policy algorithms</strong>.</p>
</blockquote>

<p>Now, what are the assumptions used to make IS work? You might notice the term $\frac{\pi(a_{j,i}\vert s_{j,i})}{\mu(a_{j,i}\vert s_{j,i})}$ could have gone badly, and it is exactly the case</p>

<blockquote>
  <p><strong>Importance Sampling Assumptions</strong>: since we are reweighing samples from $\mu$, if we have distributions that are non-overlapping, then this will obviously not work.</p>

  <ul>
    <li>in particular, if we have any single case that $\mu(a\vert s)=0$ but $\pi(a\vert s)&gt;0$, then this will not work.</li>
    <li>therefore, for this to work, we want to have a large <mark>coverage</mark>: so that for $\forall a,s$ such that $\pi(a\vert s)&gt;0$, you want $\mu(a\vert s)&gt;0$.</li>
  </ul>
</blockquote>

<p>Intuitively, this means that if $\pi$ is not too far off from $\mu$, then the importance sampling would work reasonably.</p>

<p>In practice, there are still some problems with this, and hence some variants include:</p>

<ul>
  <li><strong>Discounting-aware Importance Sampling</strong>: suppose you have $\gamma =0$ and you have for long episodes. Then techinically since $\gamma=0$, your return is determined since $S_0,A_0,R_0$ and multiplying the weight by $w_{\mathrm{IS}}$ contributes significantly to <mark>variance</mark></li>
  <li><strong>Per-decision Importance Sampling</strong>: which applies a weight to each single reward $R_T$ within the $G$.</li>
</ul>

<h2 id="td-learning">TD Learning</h2>

<p>In practice, the MC is used much less because:</p>

<ul>
  <li>we need to <strong>wait</strong> until the agent reaches the <strong>terminal state</strong> to compute $G_t$, which is our target for update equation
    <ul>
      <li>e.g. if we play go game, it needs to wait until the end of the game</li>
    </ul>
  </li>
  <li>hence also requires finite episode settings</li>
  <li><strong>large variance</strong>, because the <strong>episode can be long</strong></li>
</ul>

<blockquote>
  <p><strong>Aim</strong>: TD learning tries to resolve that issue by “estimating the future” instead of waiting and using the true future. So the questions become: is there some useful information we can do without this wait?</p>

  <ul>
    <li>
      <p>learns from incomptele episodes, hence bootstrapping</p>
    </li>
    <li>
      <p>but because you are updating from your estimate based on your estimate, <strong>there will be bias</strong> (MC has no bias)</p>
    </li>
    <li>
      <p>For any fixed policy $\pi$, TD(0) has been proved to converge to $v_\pi$, in the mean for a constant step-size parameter if it is sufficiently small, and with probability $1$ if the step-size prameter decreases according to the usual stochastic approximation condition:</p>

\[\sum_{n=1}^\infty \alpha_n(t) = \infty,\quad \text{and}\quad \sum_{n=1}^\infty \alpha^2_n(t) &lt; \infty\]

      <p>The first condition is required to guarantee that the steps are large enough to eventually <mark>overcome any initial conditions or random fluctuations</mark>. The second condition guarantees that <strong>eventually the steps become small enough to assure convergence</strong>.</p>
    </li>
  </ul>
</blockquote>

<p>Recall that MC updates in general looks like</p>

\[V(S_t) \gets V(S_t) + \alpha (\underbrace{G_t}_{\text{MC target}} - V(S_t))\]

<p>which is the actual return, but in TD(0) we can update using an <strong>estimated return</strong></p>

\[V(S_t) \gets V(S_t) + \alpha (\underbrace{(R_{t+1} + \gamma V(S_{t+1})}_{\text{TD(0) target}}) - V(S_t))so that :\]

<ul>
  <li>
    <p>essentially I am utilizing the fact that:</p>

\[G_t = R_{t+1} + \gamma R_{t+2}+ \gamma ^2 R_{t+3}+ ...= R_{t+1} + \gamma V(S_{t+1})\]

    <p>hence since we can approximate $V(S_{t+1}) \approx v(s_{t+1})$, we get our TD(0) update</p>
  </li>
  <li>intuitively, this TD(0) means that I wanted to make update on $S_t$ and I do this by:
    <ul>
      <li>taking an action $A_t$ and get to $S_{t+1}$</li>
      <li>then using my trajectory $S_{t}, R_{t+1}, S_{t+1}$ to update by estimating the expected return I would get in the future</li>
    </ul>
  </li>
  <li>so this means that like MC, I will still be estimating with acting and sampling experience from real environment</li>
</ul>

<p>But since TD$(0)$ is only moving/looking one step forward at $V(S_{t+1})$, you can easily also look many steps:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007111034003.png" alt="image-20221007111034003" style="zoom: 25%;" /></p>

<blockquote>
  <p><strong>General TD$(n)$</strong> updates: since we can also have</p>

\[G_t = R_{t+1} + \gamma R_{t+2}+ \gamma ^2 R_{t+3}+ ...= R_{t+1} + \gamma R_{t+2}+\gamma^2 V(S_{t+2})\]

  <p>this becomes a TD(1) since now we are looking even one more step ahead, hence suing</p>

\[V(S_t) \gets V(S_t) + \alpha (\underbrace{(R_{t+1}+\gamma R_{t+2} + \gamma^2 V(S_{t+1})}_{\text{TD(1) target}}) - V(S_t))\]

  <p>and this can go to TD$(n)$ easily.</p>
</blockquote>

<p>Visually, we can compare the three algorithms discussed so far:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">MC Update</th>
      <th style="text-align: center">TD Update</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007082930340.png" alt="image-20221007082930340" style="zoom:33%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007082958257.png" alt="image-20221007082958257" style="zoom:33%;" /></td>
    </tr>
  </tbody>
</table>

<p>And just to be complete, for DP method we know all transition probabilities, henc we can take into account all possibilities</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007083124404.png" alt="image-20221007083124404" style="zoom:33%;" /></p>

<p>In this sense,  TD(0) can be seen as <strong>taking samples over this DP backup</strong>, which also “bootstraps”</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"> </th>
      <th style="text-align: center">Needs Model</th>
      <th style="text-align: center">Sampling</th>
      <th style="text-align: center">Bootstrapping</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">DP</td>
      <td style="text-align: center">Yes</td>
      <td style="text-align: center">No</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">MC</td>
      <td style="text-align: center">No</td>
      <td style="text-align: center">Yes</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">TD</td>
      <td style="text-align: center">No</td>
      <td style="text-align: center">Yes</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p>Finally, algorithmically for TD(n):</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007111217374.png" alt="image-20221007111217374" style="zoom: 33%;" /></p>

<h2 id="mc-vs-td-methods">MC v.s. TD Methods</h2>

<p>Here we compare some features of using MC v.s. TD to perform policy evaluation:</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: center">MC</th>
      <th style="text-align: center">TD(0)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Learn before/without knowing final outcome</td>
      <td style="text-align: center">No</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td>Target for update</td>
      <td style="text-align: center">$G_t$ which is a real return</td>
      <td style="text-align: center">estimate $R_{t+1} + \gamma v(S_{t+1})$ can be biased</td>
    </tr>
    <tr>
      <td>Variance</td>
      <td style="text-align: center">High, because single branch + long episode means uncertainy builds up quickly</td>
      <td style="text-align: center">Low, because now depend on one random action, transition, and reward</td>
    </tr>
    <tr>
      <td>Bias</td>
      <td style="text-align: center">no bias</td>
      <td style="text-align: center">not proven, has shown bias upperbound</td>
    </tr>
    <tr>
      <td>Sentitive to Initial Value</td>
      <td style="text-align: center">no</td>
      <td style="text-align: center">yes, can affect convergence speed</td>
    </tr>
    <tr>
      <td>Convergence Properties</td>
      <td style="text-align: center">Converges</td>
      <td style="text-align: center">Converges</td>
    </tr>
    <tr>
      <td>Convergence Speed</td>
      <td style="text-align: center">Slow</td>
      <td style="text-align: center">Fast</td>
    </tr>
    <tr>
      <td>used with Function Approximation</td>
      <td style="text-align: center">Little problem</td>
      <td style="text-align: center">often has problem converging</td>
    </tr>
    <tr>
      <td>Storing Tabular Data</td>
      <td style="text-align: center">Yes</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p>The still remaining concern but both still requires some kind of table to store value for each state, and/or action. For example, we update $Q$ estimate by storing the values of $(s,a)$ in a <mark>tabular representation</mark>: <mark>finite</mark> number of state-action pair.</p>

<p>However, as you can imagine many real world problems have <strong>enormous state and/or action space</strong> so that we cannot really tabulate all possible values. So we need to somehow <mark>generalize</mark> to those unknown state-actions.</p>

<blockquote>
  <p><strong>Aim</strong>: even if we encounter state-action pairs <em>not</em> met before, we want to make <em>good decisions</em> by past experience.</p>
</blockquote>

<blockquote>
  <p><strong>Value Function Approximation</strong>: represent a (state-action/state) value function <strong>with a parametrized function</strong> instead of a table, so that even if we met an inexperienced state/state-action, we can get some values. (which will be discussed in the next section)</p>
</blockquote>

<hr />

<p><em>For Example</em>: using TD for policy Evaluation</p>

<p>Consider the following MDP, with reward $0$ except for one state:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007084804460.png" alt="image-20221007084804460" style="zoom: 50%;" /></p>

<p>So that essentially there are:</p>

<ul>
  <li>two terminate states, so your optimal policy is to just move right.</li>
  <li>And suppose my current policy $\pi$ is random left or right at equal probability, we want to evaluate this policy $\pi$ .</li>
</ul>

<p>Let us use TD(0) learning and have initial values $V(S)=0.5$ for non-terminal states and $V(S_T)=0$ for those temrinal states.</p>

<ul>
  <li>we take $\alpha=0.1$, $\gamma=1$</li>
  <li>then we update the estimate <strong>per time-step</strong> following TD(0) algorithm</li>
</ul>

<p>With which we arrive at:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007134742879.png" alt="image-20221007134742879" style="zoom: 50%;" /></p>

<p>so after 100 episodes seen, we see it is going to converge to the true value.</p>

<p>Interestingly, from here we can ask: what is the <strong>episode encountered</strong> (see the line annotated by number 1) for the so that TD(0) only end up updated $V(A)\gets 0.45$?</p>

<ul>
  <li>
    <p>realize that if you calculate anything from $V(S)\to S’ \neq S_T$ you will get no change in value, still $0.5$. For instance:</p>

\[V_A \gets V_A + \gamma (R + V_B - V_A) = 0.5 + 1 \cdot (0) = 0.5\]
  </li>
  <li>
    <p>but things change only if you ended up at $V_T$ on the left, so that you get</p>

\[V_A \gets V_A + \gamma (R + V_T - V_A) = 0.5 + 0.1 \cdot (0 + 0 -0.5) = 0.45\]
  </li>
</ul>

<p>Therefore the episode just needs to hit left end state.</p>

<p>In this example, we can also compare the MC and TD variance</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007090134530.png" alt="image-20221007090134530" style="zoom: 50%;" /></p>

<p>and note that MC achieves least MSE, while TD is performing MLE.</p>

<h2 id="td-control">TD Control</h2>

<p>In the end all people care is to get the optimal policy, rarely just to evaluate. Hence we need to use the evaluation/learning and do control</p>

<blockquote>
  <p><strong>Intuitively</strong>: we can just apply TD to the $Q(S,A)$, and use $\epsilon$-greedy policy improvement as we have proven to work with MC methods</p>

  <ul>
    <li>as long as we have some form of alternating policy evaluation and policy improvement, following <a href="#Generalized Policy Iteration">Generalized Policy Iteration</a> mos algorithms typically converge to the optimal policy</li>
  </ul>
</blockquote>

<h3 id="sarsa">SARSA</h3>

<blockquote>
  <p><strong>SARSA</strong>: Essentially TD(0) learning for one step followed immediately by $\epsilon$-greedy policy improvement.</p>

  <ul>
    <li>
      <p>intuitively, it follows the <a href="#Generalized Policy Iteration">Generalized Policy Iteration</a> style</p>
    </li>
    <li>
      <p>Sarsa converges with probability 1 to an optimal policy and action-value function, under the usual conditions on the step sizes $\sum \alpha^2 &lt; \infty$, as long as all state–action pairs are visited an infinite number of times and the policy converges in the limit to the greedy policy (GLIE, which can be arranged, for example, with $\epsilon$-greedy policies by setting $\epsilon = 1/t$).</p>
    </li>
  </ul>
</blockquote>

<p>Given a single move/step $(S,A,R,S’,A’)$ we can perform an update using TD(0) equation:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007091739133.png" alt="image-20221007091739133" style="zoom: 33%;" /></p>

<p>Then, instead of waiting it to cnverge we can directly perform update, hence the algorithm becomes</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007091933118.png" alt="image-20221007091933118" style="zoom:50%;" /></p>

<p>where notice that essentially I improve my policy by picking better $A$ using $\epsilon$-greedy, and then ask my model to update accordingly.</p>

<ul>
  <li>
    <p>this is <strong>on-policy control</strong> (i.e. behavior policy $\pi_b$ is the same as evaluation policy $\pi_e$)</p>
  </li>
  <li>on-policy as you already chosen your action while doing policy improvement</li>
  <li>and recall that for convergence to the optimal greedy policy, you will <strong>need $\epsilon$ to decrease (i.e. the GLIE)</strong></li>
</ul>

<h3 id="q-learning">Q-Learning</h3>

<blockquote>
  <p><strong>Q-Learning</strong>: Most important and widely used today. It is motivated by having the <strong>learned</strong> action-value function, $Q$, from TD updates to <strong>directly approximates $Q_*$</strong>, the optimal action-value function, independent of the policy being followed.</p>

  <ul>
    <li>dramatically simplifies the analysis of the algorithm and enabled early convergence proofs (is proven to converge)</li>
    <li>All that is required for correct convergence is that all pairs continue to be updated. Under this assumption and a variant of the usual stochastic approximation conditions (i.e. $\sum \alpha^2 &lt; \infty$) on the sequence of step-size parameters, <strong>$Q$ has been shown to converge with probability 1 to $Q_*$.</strong></li>
  </ul>
</blockquote>

<p>Now, the algorithm is that you are not choosing $A’$ from the current policy $\pi$, but update using greedy policy $\mathrm{greedy}(\pi)$</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007092305741.png" alt="image-20221007092305741" style="zoom: 50%;" /></p>

<p>hence this is off-policy</p>

<ul>
  <li>your update is to estimate a greedy policy (i.e. optimal policy). This could have you, for example picking leftest action</li>
  <li>but when I sample, I use $\epsilon$-greedy policy, meaning that I might have ended up in a differnt state. e.g. by picking the rightest action</li>
  <li>but it is proven that it still converges to the optimal policy quickly</li>
</ul>

<p>Algorithm:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007145704583.png" alt="image-20221007145704583" style="zoom:33%;" /></p>

<p>where here I improve my policy by picking better $A$ using $\epsilon$-greedy, but then ask my model to update the greedy policy.</p>

<ul>
  <li>
    <p>This is widely used as there are early theoretical proofs to show it always converge to the optimal policy. But note that</p>
  </li>
  <li>but SARSA + greedy is still different than Q-Learning</li>
  <li>so under the usual stochastic approxmation conditions with step size, and using GLIE, i.e. $\epsilon$ decreasing, <strong>both SARSA and Q-Learning will converge to the optimal value/policy</strong>. So what is the different between using them?</li>
</ul>

<hr />

<p><em>For Example: Cliff Walking</em></p>

<p>Consider the following cliff walking problem, where we want to use the SARSA and Q-learning to find the <mark>optimal policy given fixed $\epsilon=0.1$.</mark> Then eventually you will see the following performance</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007093725043.png" alt="image-20221007093725043" style="zoom:50%;" /></p>

<p>however, here we notice that Q-learning is doing worse. This does <strong>not</strong> contradict our previous conclusions because:</p>

<ul>
  <li>Q-learning aims to directly learn the optimal policy <strong>without taking into account the behavioral policy</strong> (i.e. $\epsilon=0.1$). Hence it learns the optimal path but occasionally falls off the cliff due to $\epsilon=0.1$</li>
  <li>
    <p>SARSA aims to learn the policy <strong>taking into account the behavioral policy</strong> and hence picks the safer path</p>
  </li>
  <li>but at the end of day, if we decrease $\epsilon \to 0$, then both converge to the same optimal path</li>
</ul>

<p>But why would you want to have $\epsilon$-greedy policy used as behavioral policy when deployed?</p>

<ul>
  <li>in cases such as automonomous driving, simulation environment might be too optimistic and you may want your model to be more <strong>robust to random errors</strong>, as shown in the cliff case</li>
  <li>so in that case SARSA could be prefered, which might not give you the optimal $Q$ values hence more robust</li>
</ul>

<h2 id="dp-vs-td-methods">DP v.s. TD Methods</h2>

<p>We can compare the backup diagrams and realize that our update forms corresponds a lot to <strong>DP=Bellman Equations while TD=sampling Bellman Equations</strong></p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007094456708.png" alt="image-20221007094456708" style="zoom: 50%;" /></p>

<p>This becomes much clearer if we compare the update equation used:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221007094708566.png" alt="image-20221007094708566" style="zoom:50%;" /></p>

<p>where $x \xleftarrow{\alpha} y$ means the update $x \gets x+ \alpha (y-x)$</p>

<ul>
  <li>so that Q-learning is <strong>sampling Bellman Optimality from DP</strong></li>
  <li>SARSA is like <strong>sampling from Bellman Expectation from DP</strong></li>
</ul>

<h2 id="tdlambda-and-eligibility-traces">TD($\lambda$) and Eligibility Traces</h2>

<p>We want to expand the basic TD(0) idea which can perform per step update (no wait for $G_t$) and MC which involves deep updates. Specifically, you will see how those relate to the <strong>idea of TD($\lambda$)</strong>, and eventually see a <strong>unified view of RL algorithmic solutions</strong>.</p>

<p>At the end of this section, you should</p>

<ul>
  <li>
    <p>understand what TD$(\lambda)$ and eligibility traces are</p>
  </li>
  <li>
    <p>have a picture of how existing algorithms are came up/organized</p>
  </li>
</ul>

<p>Then we can go into implementations with Deep NN in the next section.</p>

<h3 id="tdlambda">TD($\lambda$)</h3>

<p>Recall that TD(0) considers the update of <strong>one-step look ahead</strong></p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221015013800029.png" alt="image-20221015013800029" style="zoom:33%;" /></p>

<p>which basically aims to approximate the target $G_t = R_{t+1} + \gamma R_{t+2}+ \gamma ^2 R_{t+3}+ …= R_{t+1} + \gamma V(S_{t+1})$. We mentioned that we can easily extend this idea to <strong>$n$-step look ahead</strong>, which can be even generalized to the MC which gets to the terminate state:</p>

\[\begin{align*}
G_t^{(n)} 
&amp;=R_{t+1} + \gamma R_{t+2}+ \gamma ^2 R_{t+3}+ ... \\
&amp;= R_{t+1} + \gamma R_{t+2} + ... + \gamma^{n-1}R_{t+n} + \underbrace{\gamma^nV(S_{t+n})}_{\text{n-th step}}
\end{align*}\]

<p>Hence visually</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Visual</th>
      <th style="text-align: center">TD(n) to MC Update Target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014081856031.png" alt="image-20221014081856031" style="zoom: 33%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014081936837.png" alt="image-20221014081936837" style="zoom: 50%;" /></td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><strong>Intuition</strong>: We can perhaps combine both MC and TD, and use <strong>all the information in the sample</strong>. So that instead of a single $n$-step return, we can <strong>average/combine all the $n$-step return</strong>.</p>
</blockquote>

<p>For instance, consider you have a 2 and 4 step return computed, we can consider</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Data We Have</th>
      <th style="text-align: center">Target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014082300419.png" alt="image-20221014082300419" style="zoom: 33%;" /></td>
      <td style="text-align: center">$\frac{1}{2} G^2 + \frac{1}{2} G^4 = \frac{1}{2}\sum G^{(n)}$</td>
    </tr>
  </tbody>
</table>

<p>So the question is what is a good way to combine those information?</p>

<blockquote>
  <p><strong>$\lambda$-Return:</strong> compute $G_t^\lambda$ which combines all $n$-step return $G_t^{n}$ <mark>using weight $(1-\lambda )\lambda^{n-1}$</mark>, which decays each future by $\lambda$ while summing up to $1$. This means that given all returns:</p>

\[G_t^\lambda = (1-\lambda) \sum_{n=1}^\infty \lambda^{n-1} G_t^{(n)}, \quad G_t^{(n)} = R_{t+1} + \gamma R_{t+2} + ... + \gamma^{N}V(S_{t+N})\]

  <p>and hence your update equation becomes</p>

\[V(S_t) \gets V(S_t) + \alpha (G_t^\lambda - V(S_t))\]

  <p>however, since this means you are adding both long episodes (MC) and short ones (TD), you will get</p>

  <ul>
    <li><mark>both high bias and big variance</mark> (from MC and TD)</li>
    <li>you need a <mark>delay as it waits until terminal state</mark> (based on definitino $n=T$ here is the terminal state)</li>
    <li>using <mark>bootstrapping</mark> because we calculate $G_t^{(n)}$ using TD method, hence <mark>sensitive to initialization</mark></li>
  </ul>

  <p>so even in TD(0) we can get rid of a lot of those problems. Meaning that TD($\lambda$) is not really used in practice. But this did provided the theoretical foundation for the eligibility trace, which is very useful.</p>
</blockquote>

<p>Visually, the weights look like</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Using All Information</th>
      <th style="text-align: center">Weights on Early $G_t^{(n)}$ decays = less important</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014082434105.png" alt="image-20221014082434105" style="zoom:50%;" /></td>
      <td style="text-align: center"><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014083138482.png" alt="image-20221014083138482" style="zoom:33%;" /></td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><mark>Note</mark> that in the forward-view, the <strong>weights need to sum up to $1$</strong>. This means in case if you have a finite horizon, as shown in the figure above you need to <strong>adjust your last weight</strong> so that your weights sum up to $1$.</p>

\[G_t^{\lambda} = (1-\lambda) \sum_{n=1}^{T-t-1}\lambda^{n-1}G_{t}^{(n)}+\underbrace{\lambda ^{T-t-1}G_t}_{\text{last return}}\]

  <ul>
    <li>for instance, if you have three $G_t^{(n)}$, and $\lambda = 0.5$, then the weights will be $0.5, 0.5^2, 1-(0.5+0.5^2)$</li>
  </ul>
</blockquote>

<p>So how do we <strong>improve this theoretical idea</strong>. Consider viewing TD($\lambda$) as a <mark>forward view</mark> as we are looking into the future</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014083247509.png" alt="image-20221014083247509" style="zoom: 50%;" /></p>

<blockquote>
  <p>This forward view provides theory, the <mark>backward view</mark> provides mechanism/practicality</p>
</blockquote>

<p>I would like to fix the following problems in this algorithm:</p>

<ul>
  <li>get a sample and can update like TD(0) per time step (instead of waiting)</li>
  <li>combines information like TD($\lambda$) but hopefully avoid those bias and variance</li>
</ul>

<h3 id="eligibility-trace">Eligibility Trace</h3>

<blockquote>
  <p><strong>Heuristics</strong>: what are the useful features of the forward view TD($\lambda$) update?</p>

  <ul>
    <li><mark>frequency heuristics</mark>: most visited states should be more important (=need to have some kind of <em>memory</em> to know that it was visited in the past)
      <ul>
        <li>achieved by constantly adding the history and yet decaying like TD($\lambda$). i.e. add past eligibility but scaled: $\lambda E_{t-1}$</li>
      </ul>
    </li>
    <li><mark>recent heuristic</mark>: most recent states should be also important
      <ul>
        <li>add a weight of $1$ (the indicator function)</li>
      </ul>
    </li>
  </ul>

</blockquote>

<p>So the idea technically comes form TD($\lambda$), which actually does</p>

<ul>
  <li>put more weight on the most recent state it has the highest weight</li>
  <li>more weight on most visited states as they will be added more than once in the $\sum$</li>
</ul>

<blockquote>
  <p><strong>Eligibility Trace</strong>: essentially how do we <mark>design a weighting</mark> that achieves the above but also allow us to do per-step update?</p>

  <p>Initialize the weight $E_0(s)=0$ for each state, and then consider</p>

\[E_t(s) = \gamma \lambda E_{t-1}(s) + \mathbb{1}(S_t=s)\]

  <p>for $\mathbb{1}$ is the indicator function, and it records the <strong>“importance” for each state</strong> when the value function is updated (see later). But why this form? It turns out that this specific form allows for an <mark>(offline) equivalence</mark> of eligibility trace to TD($\lambda$) forward view.</p>
</blockquote>

<p>For example, consider you are rolling out a single episode, and a state that is being visited 4 times in a row, not seen for a while, then seen twice, then seen once. Then, the eligibility trace of it looks like:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014084104772.png" alt="image-20221014084104772" style="zoom:50%;" /></p>

<p>therefore, it satisfied what I needed:</p>

<ul>
  <li>if a state is visited more <strong>often</strong>, it gets a higher eligibility trace (like in the beginning)</li>
  <li>if a state is visited more <strong>recently</strong>, it automatically have a weight of $+1$</li>
</ul>

<blockquote>
  <p><strong>Backward View</strong> of TD($\lambda$): now we can use eligibility trace for value update.</p>

  <p>Consider the TD error $\delta_t$ we used to update when doing TD(0):</p>

\[\delta_t = \underbrace{R_{t+1} + \gamma V(S_{t+1})}_{\text{TD(0) target}} - V(S_t)\]

  <p>which enabled us to do per time-step update. Then, the idea is we <mark>weigh</mark> the per-time step error, such that <mark>if we accumulate the updates until the end of the episode</mark>, it will result in the <mark>same update as the forward TD($\lambda$)</mark>. This is also called the <strong>offline equivalence</strong> (see next section), but with this constraint we end up with the weight called <mark>eligibility trace $E_t(s)$</mark> which we showed before:</p>

\[E_t(s) = \gamma \lambda E_{t-1}(s) + \mathbb{1}(S_t=s)\]

  <p>and hence the update rule:</p>

\[V(s)\gets V(s) + \alpha E_t(s) \delta_t\]

  <p>so that this is given to each state, e.g. if we have 10 states, we get 10 eligibility traces. Intuitively, since $E_t(s)$ depended on history, it measures how much this state matters <strong>by looking in the past</strong>: to see if it is seen frequently, recently.</p>
</blockquote>

<p>Visually, the backward view means we are using this loss $\delta_t$ using information in the past:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014084613356.png" alt="image-20221014084613356" style="zoom:33%;" /></p>

<p>additionally</p>

<ul>
  <li>
    <p>if $\lambda = 0$, then $E_t(s) =\mathbb{1}(S_t=s)$  and then eligibility trace becomes TD(0) update since we are then doing:</p>

\[V(s)\gets V(s) + \alpha \delta_t(s)\cdot \mathbb{1}(S_t=s)\]

    <p>meaning we only update the ones we just saw</p>
  </li>
</ul>

<p>So this backward update now has the advantage of</p>

<ul>
  <li>
    <p>including in the <em>idea</em> of forward TD($\lambda$) to use <strong>all the information we have</strong></p>
  </li>
  <li>
    <p>this is implementable as we don’t need to look n-step beyond (but behind). Meaning we can perform <strong>update per time step</strong></p>
  </li>
</ul>

<p>Finally, we can show the algorithm of using Eligibility trace:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014085742951.png" alt="image-20221014085742951" style="zoom: 67%;" /></p>

<p>where basically the error is TD(0) error, but we are <strong>updating all states using eligibility trace per time step</strong></p>

<ul>
  <li>this means we need to have two tables, one for eligibility per state and anther store the value per state</li>
  <li>since now it is online (update per step), this backward is <strong>not</strong> equivalent to the forward view. But if we pick a step size sufficiently small, it is almost equivalent</li>
  <li>practically, this <strong>online TD($\lambda$) updates</strong> is what we use and works</li>
</ul>

<blockquote>
  <p><mark>Note</mark> that</p>

  <ul>
    <li>
      <p>we are updating <strong>all states per time step</strong>, so even if you have just seen a state $S_t=B$, and $S={A,B}$, you still need to update <strong>both $S=A,S=B$</strong> in the loop when updating $V(s)$. A hint is to notice that $\delta$ is not a function of state in the above algorithm.</p>
    </li>
    <li>
      <p>when used with value function approximation, the <strong>eligibility trace generalizes</strong> to</p>

\[E_t(s) = \gamma \lambda E_{t-1}(s) + \nabla \hat{V}(S,w)\]

      <p>and algorithm looks like</p>

      <p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221205221054594.png" alt="image-20221205221054594" style="zoom: 25%;" /></p>
    </li>
  </ul>
</blockquote>

<h3 id="offline-equivalent-of-forward-and-backward-views">Offline Equivalent of Forward and Backward Views</h3>

<p>Finally, here we answer the question why did people decide to use specifically the weight in the form of $E_t(s)$</p>

\[E_t(s) = \gamma \lambda E_{t-1}(s) + \mathbb{1}(S_t=s)\]

<blockquote>
  <p><strong>Offline Equivalence</strong></p>

  <p>Consider having your eligibility trace being updated/accumulated all the time, but <mark>you only update $V$ at the end</mark>. Recall that for the forward view, we also only update at the end. Now, you realize that</p>

  <p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014085128664.png" alt="image-20221014085128664" style="zoom:33%;" /></p>

  <p>so if we were offline only learning the eligibility traces, your final updated $V$ will be the same as the forward view</p>

  <ul>
    <li>so in offline mode you are essentially <strong>summing up all the errors of each state over all time</strong> but without updating $V$</li>
    <li>so then the proof is to show that the this accumulated error is the same in forward view! But this proof is long so skipped</li>
  </ul>
</blockquote>

<h2 id="tdlambda-control">TD($\lambda$) Control</h2>

<p>In the previous section we are essentially <strong>learning the value function</strong>, now we care about using it to <strong>find the optimal policy</strong>. The basic idea is again simple: we can apply this learning style to learn an optimal $Q_*(s,a)$.</p>

<p>Recall that to derive the backward eligibility trace we need to</p>

<ol>
  <li>derive the <strong>forward</strong> algorithm by considering the $n$ step look-ahead version of the TD error</li>
  <li>use the eligibility trace in <strong>backward</strong> algorithm</li>
  <li>show their <strong>offline equivalence</strong></li>
</ol>

<h3 id="sarsalambda">SARSA($\lambda$)</h3>

<p>First, we consider the forward TD($\lambda$). Consider the <mark>$n$-step look ahead for SARSA's target</mark></p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221015155935901.png" alt="image-20221015155935901" style="zoom:33%;" /></p>

<p>So that the $n$-step look ahead return is</p>

\[q_t^{n} = R_{t+1} + \gamma R_{t+2} + ... + \gamma^{T-1} R_{t+n} + \gamma^n Q(S_{t+n})\]

<p>Hence the forward view considers weighting those returns:</p>

\[q_t^{\lambda} = (1-\lambda) \sum_{n=1}^\infty \lambda^{n-1} q_t^{(n)}\]

<p>So the forward view of SARSA becomes:</p>

\[Q(S_t, A_t) \gets Q(S_t,A_t) + \alpha (\underbrace{q_t^{\lambda}}_{\text{TD($\lambda$) target}} - Q(S_t,A_t))\]

<p>and notice that using $\lambda=0$ we get back SARSA (which uses TD(0) target)</p>

<p>Then from it, we can <strong>find the backward view</strong> by building this <mark>eligibility trace</mark> knowing that</p>

\[\delta_t = R_{t+1} + \gamma Q(S_{t+1}, A_{t+1}) - Q(S_t, A_t)\]

<p>so then intuitively we can say that the eligibility trace is, with $E_0(s,a)=0$:</p>

\[E_t(s,a) = \gamma \lambda E_{t-1}(s,a) + \mathbb{1}(S_t=s, A_t=a)\]

<p>so that our update rule is:</p>

\[Q(s,a) \gets Q(s,a) + \alpha E_t(s,a) \delta_t\]

<p>essentialy:</p>

<ul>
  <li>target is stil SARSA target, but error is weighted by eligibility trace</li>
  <li>so again two tables, one for Q and one for eligibility trace</li>
  <li>and we skip the proof that this gives the same result as the forward view of SARSA if offline</li>
</ul>

<p>Therefore, we get this SARSA($\lambda$) algorithm</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014091605986.png" alt="image-20221014091605986" style="zoom:50%;" /></p>

<p>We can visualize the differences:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014091753630.png" alt="image-20221014091753630" style="zoom: 50%;" /></p>

<p>so that</p>
<ul>
  <li>if SARSA, then we only updated using only one “previous” step</li>
  <li>if using 10-step SARSA, my last step will take into account my previous 10 steps equally</li>
  <li>if using SARSA($\lambda$) with $\lambda=0.9$, then we update using all history weighted by eligibilty trace</li>
</ul>

<h3 id="qlambda-learning">Q($\lambda$)-Learning</h3>

<p>There are many ways to do this, but you need to have some proof that it works. So here we use Watkins’s version. First recall that</p>

<ul>
  <li>Q-learning aims to do Bellman optimality directly each step</li>
  <li>it is off-policy, and like SARSA, the update is per step (no need to wait)</li>
  <li>both Q-learning and SARSA is proven to give you the optimal policy (under mild conditions)</li>
</ul>

<p>Now, consider Q($\lambda$).  We first consider <mark>$n$-step look ahead of the target</mark> (different from SARSA’s target)</p>

\[\begin{cases}
\text{1-step}, &amp; R_{t+1} + \gamma \max_a Q(S_{t+1}, a) \\
\vdots \\
\text{$n$-step}, &amp; R_{t+1} + \gamma R_{t+2} + ... + \gamma^{T-1} R_{t+n} + \gamma^n \max_a Q(S_{t+n}, a)
\end{cases}\]

<p>But then, you have a problem that since Q-learning is off-policy, what does the forward view look like? In Watkin’s $Q(\lambda)$, we considers two terminate cases:</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014092301366.png" alt="image-20221014092301366" style="zoom:50%;" /></p>

<p>so that your last look-ahead either is</p>
<ul>
  <li>the actual terminate state</li>
  <li>your behavior policy picked an action that is non-greedy</li>
</ul>

<p>So that your backward view becomes</p>

\[\delta_{t} = R_{t+1} + \gamma \max_a Q(S_{t+1}, a) - Q(S_t, A_t)\]

<p>with eligibility trace</p>

\[E_t(s,a) = \begin{cases}
1 + \gamma \lambda E_{t-1}(s,a) &amp; \text{if }s=s_t, \text{ and } a\sim \epsilon\text{-greedy}(Q(s,a)) = \arg\max_{a} Q(s,a) \\
0, &amp; \text{if }a \neq \arg\max_{a} Q(s,a)\\
\gamma \lambda E_{t-1}(s,a) &amp; \text{otherwise, i.e. not at } s_t
\end{cases}\]

<p>with the upadte rule being</p>

\[Q(s,a) \gets Q(s,a) + \alpha E_t(s,a) \delta_t\]

<p>Hence the algorithm looks like</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014092949925.png" alt="image-20221014092949925" style="zoom:50%;" /></p>

<p>so basically</p>
<ul>
  <li>if action I took w.r.t. to my current $\epsilon\text{-greedy}(Q)$ is the greedy action, then we do the normal eligibility trace update</li>
  <li>if not, then reset all to zero, because we reached a “dummy terminal state” which we defined by next move being not greedy action (by this definition, we can still have equivalence of backward and forward view)</li>
  <li>so again, my error is the Belmman Optimality Error using the $A^{*}$ from the greedy policy, but my behavior policy is to do $A’$ which is $\epsilon$-greedy. Hence this is off-policy as is Q-learning.</li>
</ul>

<blockquote>
  <p>Recall that all algorithms we see here <strong>needs a tabular value</strong>. Hence for large state space/state-action space, those algorithms are slow due to this loop for all state/state-action.</p>

  <p>This problem is solved by using <strong>function approximation</strong>: the only parameters are the parmeters of the functions which can spit out those values, which we will see in the next section.</p>
</blockquote>

<h2 id="unified-view-of-rl-solutions">Unified View of RL Solutions</h2>

<p>All the basics of RL algorithms can be put in one picture, and we can understand their differences/similarities</p>

<p><img src="/lectures/images/2022-12-15-ELEN6885_Reinforcement_Learning/image-20221014094057829.png" alt="image-20221014094057829" style="zoom:50%;" /></p>

<p>where</p>

<ul>
  <li>shallow means update only looks at 1 step, and deep is like MC (<strong>depth</strong>). This depth can be changed depending on n-step return and hence the $\lambda$ parameter weighting <strong>how many future</strong> you want to use.</li>
  <li>full backup means you look at all possible neighbors (<strong>width</strong>)</li>
  <li>in practice, all algorithms such as Q-learning and SARSA are based on sample backups, as the updates are faster and more efficient</li>
  <li>MCTS with truncation and approximations would be similar to the exhaustive search on top right</li>
</ul>]]></content><author><name></name></author><category term="2022@Columbia" /><summary type="html"><![CDATA[Reinforcement Learning]]></summary></entry></feed>